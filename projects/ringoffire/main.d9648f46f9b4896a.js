"use strict";(self.webpackChunkringoffire=self.webpackChunkringoffire||[]).push([[179],{2011:(mt,xe,B)=>{B.d(xe,{Dh:()=>Ve,GT:()=>ve,cc:()=>Ue,on:()=>ke,pX:()=>ce,xv:()=>_e});var u=B(4650),H=B(9260);mt=B.hmd(mt);const L=["ngOnDestroy"],ce=(oe,De,ge,Se={})=>new Proxy(oe,{get:(Te,Ee)=>ge.runOutsideAngular(()=>{var ye;if(oe[Ee])return!(null===(ye=Se?.spy)||void 0===ye)&&ye.get&&Se.spy.get(Ee,oe[Ee]),oe[Ee];if(L.indexOf(Ee)>-1)return()=>{};const Be=De.toPromise().then(X=>{const te=X&&X[Ee];return"function"==typeof te?te.bind(X):te&&te.then?te.then(fe=>ge.run(()=>fe)):ge.run(()=>te)});return new Proxy(()=>{},{get:(X,te)=>Be[te],apply:(X,te,fe)=>Be.then(ze=>{var Le;const Ct=ze&&ze(...fe);return!(null===(Le=Se?.spy)||void 0===Le)&&Le.apply&&Se.spy.apply(Ee,fe,Ct),Ct})})})}),ve=(oe,De)=>{De.forEach(ge=>{Object.getOwnPropertyNames(ge.prototype||ge).forEach(Se=>{Object.defineProperty(oe.prototype,Se,Object.getOwnPropertyDescriptor(ge.prototype||ge,Se))})})};class ne{constructor(De){return De}}const Ve=new u.OlP("angularfire2.app.options"),_e=new u.OlP("angularfire2.app.name");function ke(oe,De,ge){const Te="object"==typeof ge&&ge||{};Te.name=Te.name||"string"==typeof ge&&ge||"[DEFAULT]";const ye=H.Z.apps.filter(Be=>Be&&Be.name===Te.name)[0]||De.runOutsideAngular(()=>H.Z.initializeApp(oe,Te));try{JSON.stringify(oe)!==JSON.stringify(ye.options)&&z("error",`${ye.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ne(ye)}const z=(oe,...De)=>{(0,u.X6Q)()&&typeof console<"u"&&console[oe](...De)};function Ue(oe,De,ge,Se,Te){const[,Ee,ye]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===oe)||[];if(Ee)return function Me(oe,De){try{return oe.toString()===De.toString()}catch{return oe===De}}(Te,ye)||(tt("error",`${De} was already initialized on the ${ge} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),tt("warn",{is:Te,was:ye})),Ee;{const Be=Se();return globalThis.\u0275AngularfireInstanceCache.push([oe,Be,Te]),Be}}const et=!!mt.hot,tt=(oe,...De)=>{(0,u.X6Q)()&&typeof console<"u"&&console[oe](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3432:(mt,xe,B)=>{B.d(xe,{$:()=>hd,A:()=>$,C:()=>Me,H:()=>nd,I:()=>Cr,K:()=>Mt,M:()=>jn,N:()=>ld,P:()=>Cp,Q:()=>A0,R:()=>io,U:()=>Qg,V:()=>M0,W:()=>il,X:()=>sl,Y:()=>QD,Z:()=>Xf,_:()=>dd,a:()=>Ed,a0:()=>Nn,a1:()=>e_,a2:()=>P0,a3:()=>np,a4:()=>Rt,a5:()=>t_,a6:()=>n_,a7:()=>i_,a8:()=>Fn,a9:()=>be,aA:()=>xr,aB:()=>Le,aC:()=>j,aD:()=>Hd,aE:()=>ga,aF:()=>Ld,aG:()=>Di,aK:()=>hl,aN:()=>rl,aa:()=>r_,ab:()=>s_,ac:()=>Cs,ad:()=>ip,ae:()=>N0,ah:()=>a_,ai:()=>us,aj:()=>rp,am:()=>aa,an:()=>lp,ap:()=>U0,aq:()=>ul,ar:()=>fe,as:()=>Zt,at:()=>it,au:()=>Se,av:()=>Uc,aw:()=>Ln,ax:()=>vt,ay:()=>Te,az:()=>X,b:()=>Dc,c:()=>$0,d:()=>ro,e:()=>sS,f:()=>ot,g:()=>xp,h:()=>Vc,i:()=>xd,j:()=>Vo,k:()=>Ms,l:()=>nS,m:()=>qd,o:()=>$o,p:()=>_e,r:()=>iS,s:()=>wp,u:()=>rS});var u=B(5861),H=B(2090),L=B(9681),ce=B(1877),ve=B(655),ne=B(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function Y(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},et=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new ce.Yd("@firebase/auth");function ge(b,...g){De.logLevel<=ce.in.ERROR&&De.error(`Auth (${L.SDK_VERSION}): ${b}`,...g)}function Se(b,...g){throw Be(b,...g)}function Te(b,...g){return Be(b,...g)}function Ee(b,g,y){const E=Object.assign(Object.assign({},et()),{[g]:y});return new H.LL("auth","Firebase",E).create(g,{appName:b.name})}function ye(b,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Se(b,"argument-error"),Ee(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(b,...g){if("string"!=typeof b){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(y,...E)}return tt.create(b,...g)}function X(b,g,...y){if(!b)throw Be(g,...y)}function te(b){const g="INTERNAL ASSERTION FAILED: "+b;throw ge(g),new Error(g)}function fe(b,g){b||te(g)}const ze=new Map;function Le(b){fe(b instanceof Function,"Expected a class definition");let g=ze.get(b);return g?(fe(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,ze.set(b,g),g)}function ie(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function ue(){return"http:"===he()||"https:"===he()}function he(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Oe{constructor(g,y){this.shortDelay=g,this.longDelay=y,fe(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function Ce(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ue()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ke(b,g){fe(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Je{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_t=new Oe(3e4,6e4);function lt(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function Ye(b,g,y,E){return rn.apply(this,arguments)}function rn(){return(rn=(0,u.Z)(function*(b,g,y,E,S={}){return kn(b,S,(0,u.Z)(function*(){let O={},J={};E&&("GET"===g?J=E:O={body:JSON.stringify(E)});const me=(0,H.xO)(Object.assign({key:b.config.apiKey},J)).slice(1),He=yield b._getAdditionalHeaders();return He["Content-Type"]="application/json",b.languageCode&&(He["X-Firebase-Locale"]=b.languageCode),Je.fetch()(Oi(b,b.config.apiHost,y,me),Object.assign({method:g,headers:He,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function kn(b,g,y){return xn.apply(this,arguments)}function xn(){return(xn=(0,u.Z)(function*(b,g,y){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},mn),g);try{const S=new Fr(b),O=yield Promise.race([y(),S.promise]);S.clearNetworkTimeout();const J=yield O.json();if("needConfirmation"in J)throw qi(b,"account-exists-with-different-credential",J);if(O.ok&&!("errorMessage"in J))return J;{const me=O.ok?J.errorMessage:J.error.message,[He,ct]=me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw qi(b,"credential-already-in-use",J);if("EMAIL_EXISTS"===He)throw qi(b,"email-already-in-use",J);if("USER_DISABLED"===He)throw qi(b,"user-disabled",J);const Nt=E[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(ct)throw Ee(b,Nt,ct);Se(b,Nt)}}catch(S){if(S instanceof H.ZR)throw S;Se(b,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function an(b,g,y,E){return hi.apply(this,arguments)}function hi(){return(hi=(0,u.Z)(function*(b,g,y,E,S={}){const O=yield Ye(b,g,y,E,S);return"mfaPendingCredential"in O&&Se(b,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Oi(b,g,y,E){const S=`${g}${y}?${E}`;return b.config.emulator?Ke(b.config,S):`${b.config.apiScheme}://${S}`}class Fr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Te(this.auth,"network-request-failed")),_t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qi(b,g,y){const E={appName:b.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const S=Te(b,g,E);return S.customData._tokenResponse=y,S}function ns(){return(ns=(0,u.Z)(function*(b,g){return Ye(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(b,g){return Ye(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ki(){return(Ki=(0,u.Z)(function*(b,g){return Ye(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function br(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function wr(){return(wr=(0,u.Z)(function*(b,g=!1){const y=(0,H.m9)(b),E=yield y.getIdToken(g),S=ut(E);X(S&&S.exp&&S.auth_time&&S.iat,y.auth,"internal-error");const O="object"==typeof S.firebase?S.firebase:void 0,J=O?.sign_in_provider;return{claims:S,token:E,authTime:br(St(S.auth_time)),issuedAtTime:br(St(S.iat)),expirationTime:br(St(S.exp)),signInProvider:J||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function St(b){return 1e3*Number(b)}function ut(b){const[g,y,E]=b.split(".");if(void 0===g||void 0===y||void 0===E)return ge("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,H.tV)(y);return S?JSON.parse(S):(ge("Failed to decode base64 JWT payload"),null)}catch(S){return ge("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Tn(b,g){return On.apply(this,arguments)}function On(){return(On=(0,u.Z)(function*(b,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof H.ZR&&function pi({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}class xi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,u.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&g.schedule(!0))}g.schedule()})()}}class mi{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=br(this.lastLoginAt),this.creationTime=br(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vr(b){return Vt.apply(this,arguments)}function Vt(){return Vt=(0,u.Z)(function*(b){var g;const y=b.auth,E=yield b.getIdToken(),S=yield Tn(b,function rt(b,g){return Ki.apply(this,arguments)}(y,{idToken:E}));X(S?.users.length,y,"internal-error");const O=S.users[0];b._notifyReloadListener(O);const J=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?function si(b){return b.map(g=>{var{providerId:y}=g,E=(0,ve._T)(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(O.providerUserInfo):[],me=function Er(b,g){return[...b.filter(E=>!g.some(S=>S.providerId===E.providerId)),...g]}(b.providerData,J),Nt=!!b.isAnonymous&&!(b.email&&O.passwordHash||me?.length),Cn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:me,metadata:new mi(O.createdAt,O.lastLoginAt),isAnonymous:Nt};Object.assign(b,Cn)}),Vt.apply(this,arguments)}function zt(){return(zt=(0,u.Z)(function*(b){const g=(0,H.m9)(b);yield Vr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function pe(){return(pe=(0,u.Z)(function*(b,g){const y=yield kn(b,{},(0,u.Z)(function*(){const E=(0,H.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:S,apiKey:O}=b.config,J=Oi(b,S,"/v1/token",`key=${O}`),me=yield b._getAdditionalHeaders();return me["Content-Type"]="application/x-www-form-urlencoded",Je.fetch()(J,{method:"POST",headers:me,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Ze{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){X(g.idToken,"internal-error"),X(typeof g.idToken<"u","internal-error"),X(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Dt(b){const g=ut(b);return X(g,"internal-error"),X(typeof g.exp<"u","internal-error"),X(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,u.Z)(function*(){return X(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,u.Z)(function*(){const{accessToken:S,refreshToken:O,expiresIn:J}=yield function Fe(b,g){return pe.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(S,O,Number(J))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:S,expirationTime:O}=y,J=new Ze;return E&&(X("string"==typeof E,"internal-error",{appName:g}),J.refreshToken=E),S&&(X("string"==typeof S,"internal-error",{appName:g}),J.accessToken=S),O&&(X("number"==typeof O,"internal-error",{appName:g}),J.expirationTime=O),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ze,this.toJSON())}_performRefresh(){return te("not implemented")}}function gt(b,g){X("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class Tt{constructor(g){var{uid:y,auth:E,stsTokenManager:S}=g,O=(0,ve._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new mi(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,u.Z)(function*(){const E=yield Tn(y,y.stsTokenManager.getToken(y.auth,g));return X(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function ri(b){return wr.apply(this,arguments)}(this,g)}reload(){return function is(b){return zt.apply(this,arguments)}(this)}_assign(g){this!==g&&(X(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const y=new Tt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(g){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,u.Z)(function*(){let S=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),S=!0),y&&(yield Vr(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,u.Z)(function*(){const y=yield g.getIdToken();return yield Tn(g,function Lr(b,g){return ns.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,S,O,J,me,He,ct,Nt;const Cn=null!==(E=y.displayName)&&void 0!==E?E:void 0,Sr=null!==(S=y.email)&&void 0!==S?S:void 0,lo=null!==(O=y.phoneNumber)&&void 0!==O?O:void 0,Go=null!==(J=y.photoURL)&&void 0!==J?J:void 0,Rp=null!==(me=y.tenantId)&&void 0!==me?me:void 0,Zd=null!==(He=y._redirectEventId)&&void 0!==He?He:void 0,kp=null!==(ct=y.createdAt)&&void 0!==ct?ct:void 0,Op=null!==(Nt=y.lastLoginAt)&&void 0!==Nt?Nt:void 0,{uid:jc,emailVerified:va,isAnonymous:ba,providerData:Al,stsTokenManager:co}=y;X(jc&&co,g,"internal-error");const Qd=Ze.fromJSON(this.name,co);X("string"==typeof jc,g,"internal-error"),gt(Cn,g.name),gt(Sr,g.name),X("boolean"==typeof va,g,"internal-error"),X("boolean"==typeof ba,g,"internal-error"),gt(lo,g.name),gt(Go,g.name),gt(Rp,g.name),gt(Zd,g.name),gt(kp,g.name),gt(Op,g.name);const Xd=new Tt({uid:jc,auth:g,email:Sr,emailVerified:va,displayName:Cn,isAnonymous:ba,photoURL:Go,phoneNumber:lo,tenantId:Rp,stsTokenManager:Qd,createdAt:kp,lastLoginAt:Op});return Al&&Array.isArray(Al)&&(Xd.providerData=Al.map(Jd=>Object.assign({},Jd))),Zd&&(Xd._redirectEventId=Zd),Xd}static _fromIdTokenResponse(g,y,E=!1){return(0,u.Z)(function*(){const S=new Ze;S.updateFromServerResponse(y);const O=new Tt({uid:y.localId,auth:g,stsTokenManager:S,isAnonymous:E});return yield Vr(O),O})()}}const jn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(y,E){var S=this;return(0,u.Z)(function*(){S.storage[y]=E})()}_get(y){var E=this;return(0,u.Z)(function*(){const S=E.storage[y];return void 0===S?null:S})()}_remove(y){var E=this;return(0,u.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return b.type="NONE",b})();function j(b,g,y){return`firebase:${b}:${g}:${y}`}class U{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:S,name:O}=this.auth;this.fullUserKey=j(this.userKey,S.apiKey,O),this.fullPersistenceKey=j("persistence",S.apiKey,O),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Tt._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,u.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,u.Z)(function*(){if(!y.length)return new U(Le(jn),g,E);const S=(yield Promise.all(y.map(function(){var ct=(0,u.Z)(function*(Nt){if(yield Nt._isAvailable())return Nt});return function(Nt){return ct.apply(this,arguments)}}()))).filter(ct=>ct);let O=S[0]||Le(jn);const J=j(E,g.config.apiKey,g.name);let me=null;for(const ct of y)try{const Nt=yield ct._get(J);if(Nt){const Cn=Tt._fromJSON(g,Nt);ct!==O&&(me=Cn),O=ct;break}}catch{}const He=S.filter(ct=>ct._shouldAllowMigration);return O._shouldAllowMigration&&He.length?(O=He[0],me&&(yield O._set(J,me.toJSON())),yield Promise.all(y.map(function(){var ct=(0,u.Z)(function*(Nt){if(Nt!==O)try{yield Nt._remove(J)}catch{}});return function(Nt){return ct.apply(this,arguments)}}())),new U(O,g,E)):new U(O,g,E)})()}}function k(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ae(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(N(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(It(g))return"Blackberry";if(xt(g))return"Webos";if(R(g))return"Safari";if((g.includes("chrome/")||Q(g))&&!g.includes("edge/"))return"Chrome";if(it(g))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function N(b=(0,H.z$)()){return/firefox\//i.test(b)}function R(b=(0,H.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Q(b=(0,H.z$)()){return/crios\//i.test(b)}function ae(b=(0,H.z$)()){return/iemobile/i.test(b)}function it(b=(0,H.z$)()){return/android/i.test(b)}function It(b=(0,H.z$)()){return/blackberry/i.test(b)}function xt(b=(0,H.z$)()){return/webos/i.test(b)}function Zt(b=(0,H.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function vt(b=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Ni(b=(0,H.z$)()){return Zt(b)||it(b)||xt(b)||It(b)||/windows phone/i.test(b)||ae(b)}function mc(b,g=[]){let y;switch(b){case"Browser":y=k((0,H.z$)());break;case"Worker":y=`${k((0,H.z$)())}-${b}`;break;default:y=b}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${L.SDK_VERSION}/${E}`}class Yg{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const E=O=>new Promise((J,me)=>{try{J(g(O))}catch(He){me(He)}});E.onAbort=y,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,u.Z)(function*(){if(y.auth.currentUser===g)return;const E=[];try{for(const S of y.queue)yield S(g),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const O of E)try{O()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class td{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ja(this),this.idTokenSubscription=new Ja(this),this.beforeStateQueue=new Yg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=Le(y)),this._initializationPromise=this.queue((0,u.Z)(function*(){var S,O;if(!E._deleted&&(E.persistenceManager=yield U.create(E,g),!E._deleted)){if(null!==(S=E._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,u.Z)(function*(){var E;const S=yield y.assertedPersistence.getCurrentUser();let O=S,J=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const me=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,He=O?._redirectEventId,ct=yield y.tryRedirectSignIn(g);(!me||me===He)&&ct?.user&&(O=ct.user,J=!0)}if(!O)return y.directlySetCurrentUser(null);if(!O._redirectEventId){if(J)try{yield y.beforeStateQueue.runMiddleware(O)}catch(me){O=S,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(me))}return O?y.reloadAndSetCurrentUserOrClear(O):y.directlySetCurrentUser(null)}return X(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===O._redirectEventId?y.directlySetCurrentUser(O):y.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var y=this;return(0,u.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,u.Z)(function*(){try{yield Vr(g)}catch(E){if("auth/network-request-failed"!==E?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Pe(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){const E=g?(0,H.m9)(g):null;return E&&X(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g,y=!1){var E=this;return(0,u.Z)(function*(){if(!E._deleted)return g&&X(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),y||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,u.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,u.Z)(function*(){yield y.assertedPersistence.setPersistence(Le(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new H.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,u.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(y);return null===g?S.removeCurrentUser():S.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,u.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&Le(g)||y._popupRedirectResolver;X(E,y,"argument-error"),y.redirectPersistenceManager=yield U.create(y,[Le(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,u.Z)(function*(){var E,S;return y._isInitialized&&(yield y.queue((0,u.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(S=y.redirectUser)||void 0===S?void 0:S._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,u.Z)(function*(){if(g===y.currentUser)return y.queue((0,u.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,S){if(this._deleted)return()=>{};const O="function"==typeof y?y:y.next.bind(y),J=this._isInitialized?Promise.resolve():this._initializationPromise;return X(J,this,"internal-error"),J.then(()=>O(this.currentUser)),"function"==typeof y?g.addObserver(y,E,S):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,u.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=mc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const S=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return S&&(E["X-Firebase-Client"]=S),E})()}}function Di(b){return(0,H.m9)(b)}class Ja{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,H.ne)(y=>this.observer=y)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function nd(b,g,y){const E=Di(b);X(E._canInitEmulator,E,"emulator-config-failed"),X(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const S=!!y?.disableWarnings,O=id(g),{host:J,port:me}=function ln(b){const g=id(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const O=S[1];return{host:O,port:Yn(E.substr(O.length+1))}}{const[O,J]=E.split(":");return{host:O,port:Yn(J)}}}(g);E.config.emulator={url:`${O}//${J}${null===me?"":`:${me}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:J,port:me,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Si(){function b(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function id(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function Yn(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class Cr{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return te("not implemented")}_getIdTokenResponse(g){return te("not implemented")}_linkToIdToken(g,y){return te("not implemented")}_getReauthenticationResolver(g){return te("not implemented")}}function Yi(b,g){return rd.apply(this,arguments)}function rd(){return(rd=(0,u.Z)(function*(b,g){return Ye(b,"POST","/v1/accounts:resetPassword",lt(b,g))})).apply(this,arguments)}function sd(b,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,u.Z)(function*(b,g){return Ye(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Qe(){return(Qe=(0,u.Z)(function*(b,g){return Ye(b,"POST","/v1/accounts:update",lt(b,g))})).apply(this,arguments)}function bn(){return(bn=(0,u.Z)(function*(b,g){return an(b,"POST","/v1/accounts:signInWithPassword",lt(b,g))})).apply(this,arguments)}function Fi(b,g){return ws.apply(this,arguments)}function ws(){return(ws=(0,u.Z)(function*(b,g){return Ye(b,"POST","/v1/accounts:sendOobCode",lt(b,g))})).apply(this,arguments)}function Es(){return(Es=(0,u.Z)(function*(b,g){return Fi(b,g)})).apply(this,arguments)}function qs(){return(qs=(0,u.Z)(function*(b,g){return Fi(b,g)})).apply(this,arguments)}function Ot(){return(Ot=(0,u.Z)(function*(b,g){return Fi(b,g)})).apply(this,arguments)}function ss(){return(ss=(0,u.Z)(function*(b,g){return Fi(b,g)})).apply(this,arguments)}function Ks(){return(Ks=(0,u.Z)(function*(b,g){return an(b,"POST","/v1/accounts:signInWithEmailLink",lt(b,g))})).apply(this,arguments)}function Ys(){return(Ys=(0,u.Z)(function*(b,g){return an(b,"POST","/v1/accounts:signInWithEmailLink",lt(b,g))})).apply(this,arguments)}class os extends Cr{constructor(g,y,E,S=null){super("password",E),this._email=g,this._password=y,this._tenantId=S}static _fromEmailAndPassword(g,y){return new os(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new os(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,u.Z)(function*(){switch(y.signInMethod){case"password":return function Bt(b,g){return bn.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function od(b,g){return Ks.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Se(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,u.Z)(function*(){switch(E.signInMethod){case"password":return sd(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Li(b,g){return Ys.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:Se(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Zn(b,g){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,u.Z)(function*(b,g){return an(b,"POST","/v1/accounts:signInWithIdp",lt(b,g))})).apply(this,arguments)}class Mt extends Cr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Mt(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Se("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:S}=y,O=(0,ve._T)(y,["providerId","signInMethod"]);if(!E||!S)return null;const J=new Mt(E,S);return J.idToken=O.idToken||void 0,J.accessToken=O.accessToken||void 0,J.secret=O.secret,J.nonce=O.nonce,J.pendingToken=O.pendingToken||null,J}_getIdTokenResponse(g){return Zn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Zn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Zn(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,H.xO)(y)}return g}}function tl(){return(tl=(0,u.Z)(function*(b,g){return Ye(b,"POST","/v1/accounts:sendVerificationCode",lt(b,g))})).apply(this,arguments)}function sa(){return(sa=(0,u.Z)(function*(b,g){return an(b,"POST","/v1/accounts:signInWithPhoneNumber",lt(b,g))})).apply(this,arguments)}function Qs(){return(Qs=(0,u.Z)(function*(b,g){const y=yield an(b,"POST","/v1/accounts:signInWithPhoneNumber",lt(b,g));if(y.temporaryProof)throw qi(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Vi={USER_NOT_FOUND:"user-not-found"};function Bi(){return(Bi=(0,u.Z)(function*(b,g){return an(b,"POST","/v1/accounts:signInWithPhoneNumber",lt(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Vi)})).apply(this,arguments)}class _i extends Cr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new _i({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new _i({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function Zf(b,g){return sa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function _c(b,g){return Qs.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function T0(b,g){return Bi.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:S}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:S}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:S,temporaryProof:O}=g;return E||y||S||O?new _i({verificationId:y,verificationCode:E,phoneNumber:S,temporaryProof:O}):null}}class Xs{constructor(g){var y,E,S,O,J,me;const He=(0,H.zd)((0,H.pd)(g)),ct=null!==(y=He.apiKey)&&void 0!==y?y:null,Nt=null!==(E=He.oobCode)&&void 0!==E?E:null,Cn=function ad(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=He.mode)&&void 0!==S?S:null);X(ct&&Nt&&Cn,"argument-error"),this.apiKey=ct,this.operation=Cn,this.code=Nt,this.continueUrl=null!==(O=He.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(J=He.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(me=He.tenantId)&&void 0!==me?me:null}static parseLink(g){const y=function nl(b){const g=(0,H.zd)((0,H.pd)(b)).link,y=g?(0,H.zd)((0,H.pd)(g)).deep_link_id:null,E=(0,H.zd)((0,H.pd)(b)).deep_link_id;return(E?(0,H.zd)((0,H.pd)(E)).link:null)||E||y||g||b}(g);try{return new Xs(y)}catch{return null}}}let ld=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,E){return os._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const S=Xs.parseLink(E);return X(S,"argument-error"),os._fromEmailAndCode(y,S.code,S.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Js{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class oa extends Js{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class il extends oa{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return X("providerId"in y&&"signInMethod"in y,"argument-error"),Mt._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return X(g.idToken||g.accessToken,"argument-error"),Mt._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return il.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return il.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:O,nonce:J,providerId:me}=g;if(!E&&!S&&!y&&!O||!me)return null;try{return new il(me)._credential({idToken:y,accessToken:E,nonce:J,pendingToken:O})}catch{return null}}}let A0=(()=>{class b extends oa{constructor(){super("facebook.com")}static credential(y){return Mt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Qg=(()=>{class b extends oa{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return Mt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:S}=y;if(!E&&!S)return null;try{return b.credential(E,S)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),M0=(()=>{class b extends oa{constructor(){super("github.com")}static credential(y){return Mt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class rl extends Cr{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Zn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Zn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Zn(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:S,pendingToken:O}=y;return E&&S&&O&&E===S?new rl(E,O):null}static _create(g,y){return new rl(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class sl extends Js{constructor(g){X(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return sl.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return sl.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=rl.fromJSON(g);return X(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return rl._create(E,y)}catch{return null}}}let QD=(()=>{class b extends oa{constructor(){super("twitter.com")}static credential(y,E){return Mt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=y;if(!E||!S)return null;try{return b.credential(E,S)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function k0(b,g){return yc.apply(this,arguments)}function yc(){return(yc=(0,u.Z)(function*(b,g){return an(b,"POST","/v1/accounts:signUp",lt(b,g))})).apply(this,arguments)}class Ir{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,S=!1){return(0,u.Z)(function*(){const O=yield Tt._fromIdTokenResponse(g,E,S),J=Xg(E);return new Ir({user:O,providerId:J,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const S=Xg(E);return new Ir({user:g,providerId:S,_tokenResponse:E,operationType:y})})()}}function Xg(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Xf(b){return vc.apply(this,arguments)}function vc(){return(vc=(0,u.Z)(function*(b){var g;const y=Di(b);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new Ir({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield k0(y,{returnSecureToken:!0}),S=yield Ir._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(S.user),S})).apply(this,arguments)}class cd extends H.ZR{constructor(g,y,E,S){var O;super(y.code,y.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,cd.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,S){return new cd(g,y,E,S)}}function Jf(b,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?cd._fromErrorAndOperation(b,O,g,E):O})}function O0(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function aa(b,g){return ep.apply(this,arguments)}function ep(){return ep=(0,u.Z)(function*(b,g){const y=(0,H.m9)(b);yield al(!0,y,g);const{providerUserInfo:E}=yield function Dn(b,g){return Pi.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),S=O0(E||[]);return y.providerData=y.providerData.filter(O=>S.has(O.providerId)),S.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),ep.apply(this,arguments)}function ol(b,g){return bc.apply(this,arguments)}function bc(){return(bc=(0,u.Z)(function*(b,g,y=!1){const E=yield Tn(b,g._linkToIdToken(b.auth,yield b.getIdToken()),y);return Ir._forOperation(b,"link",E)})).apply(this,arguments)}function al(b,g,y){return ud.apply(this,arguments)}function ud(){return(ud=(0,u.Z)(function*(b,g,y){yield Vr(g);const S=!1===b?"provider-already-linked":"no-such-provider";X(O0(g.providerData).has(y)===b,g.auth,S)})).apply(this,arguments)}function tp(b,g){return wc.apply(this,arguments)}function wc(){return(wc=(0,u.Z)(function*(b,g,y=!1){const{auth:E}=b,S="reauthenticate";try{const O=yield Tn(b,Jf(E,S,g,b),y);X(O.idToken,E,"internal-error");const J=ut(O.idToken);X(J,E,"internal-error");const{sub:me}=J;return X(b.uid===me,E,"user-mismatch"),Ir._forOperation(b,S,O)}catch(O){throw"auth/user-not-found"===O?.code&&Se(E,"user-mismatch"),O}})).apply(this,arguments)}function Jg(b,g){return To.apply(this,arguments)}function To(){return(To=(0,u.Z)(function*(b,g,y=!1){const E="signIn",S=yield Jf(b,E,g),O=yield Ir._fromIdTokenResponse(b,E,S);return y||(yield b._updateCurrentUser(O.user)),O})).apply(this,arguments)}function dd(b,g){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,u.Z)(function*(b,g){return Jg(Di(b),g)})).apply(this,arguments)}function hd(b,g){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,u.Z)(function*(b,g){const y=(0,H.m9)(b);return yield al(!1,y,g.providerId),ol(y,g)})).apply(this,arguments)}function Nn(b,g){return fd.apply(this,arguments)}function fd(){return(fd=(0,u.Z)(function*(b,g){return tp((0,H.m9)(b),g)})).apply(this,arguments)}function Ui(){return(Ui=(0,u.Z)(function*(b,g){return an(b,"POST","/v1/accounts:signInWithCustomToken",lt(b,g))})).apply(this,arguments)}function e_(b,g){return pd.apply(this,arguments)}function pd(){return pd=(0,u.Z)(function*(b,g){const y=Di(b),E=yield function Ao(b,g){return Ui.apply(this,arguments)}(y,{token:g,returnSecureToken:!0}),S=yield Ir._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(S.user),S}),pd.apply(this,arguments)}class ls{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Hi._fromServerResponse(g,y):"totpInfo"in y?md._fromServerResponse(g,y):Se(g,"internal-error")}}class Hi extends ls{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Hi(y)}}class md extends ls{constructor(g){super("totp",g)}static _fromServerResponse(g,y){return new md(y)}}function Mo(b,g,y){var E;X((null===(E=y.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),X(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(X(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(X(y.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function P0(b,g,y){return cs.apply(this,arguments)}function cs(){return cs=(0,u.Z)(function*(b,g,y){const E=(0,H.m9)(b),S={requestType:"PASSWORD_RESET",email:g};y&&Mo(E,S,y),yield function Pn(b,g){return qs.apply(this,arguments)}(E,S)}),cs.apply(this,arguments)}function np(b,g,y){return ll.apply(this,arguments)}function ll(){return(ll=(0,u.Z)(function*(b,g,y){yield Yi((0,H.m9)(b),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Rt(b,g){return gd.apply(this,arguments)}function gd(){return gd=(0,u.Z)(function*(b,g){yield function rs(b,g){return Qe.apply(this,arguments)}((0,H.m9)(b),{oobCode:g})}),gd.apply(this,arguments)}function t_(b,g){return _d.apply(this,arguments)}function _d(){return(_d=(0,u.Z)(function*(b,g){const y=(0,H.m9)(b),E=yield Yi(y,{oobCode:g}),S=E.requestType;switch(X(S,y,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(E.mfaInfo,y,"internal-error");default:X(E.email,y,"internal-error")}let O=null;return E.mfaInfo&&(O=ls._fromServerResponse(Di(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:S}})).apply(this,arguments)}function n_(b,g){return yd.apply(this,arguments)}function yd(){return(yd=(0,u.Z)(function*(b,g){const{data:y}=yield t_((0,H.m9)(b),g);return y.email})).apply(this,arguments)}function i_(b,g,y){return vd.apply(this,arguments)}function vd(){return(vd=(0,u.Z)(function*(b,g,y){const E=Di(b),S=yield k0(E,{returnSecureToken:!0,email:g,password:y}),O=yield Ir._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function Fn(b,g,y){return dd((0,H.m9)(b),ld.credential(g,y))}function be(b,g,y){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,u.Z)(function*(b,g,y){const E=(0,H.m9)(b),S={requestType:"EMAIL_SIGNIN",email:g};X(y.handleCodeInApp,E,"argument-error"),y&&Mo(E,S,y),yield function gc(b,g){return Ot.apply(this,arguments)}(E,S)}),Xt.apply(this,arguments)}function r_(b,g){return"EMAIL_SIGNIN"===Xs.parseLink(g)?.operation}function s_(b,g,y){return oi.apply(this,arguments)}function oi(){return(oi=(0,u.Z)(function*(b,g,y){const E=(0,H.m9)(b),S=ld.credentialWithLink(g,y||ie());return X(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),dd(E,S)})).apply(this,arguments)}function Ro(){return(Ro=(0,u.Z)(function*(b,g){return Ye(b,"POST","/v1/accounts:createAuthUri",lt(b,g))})).apply(this,arguments)}function Cs(b,g){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,u.Z)(function*(b,g){const E={identifier:g,continueUri:ue()?ie():"http://localhost"},{signinMethods:S}=yield function o_(b,g){return Ro.apply(this,arguments)}((0,H.m9)(b),E);return S||[]}),Cc.apply(this,arguments)}function ip(b,g){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,u.Z)(function*(b,g){const y=(0,H.m9)(b),S={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&Mo(y.auth,S,g);const{email:O}=yield function gi(b,g){return Es.apply(this,arguments)}(y.auth,S);O!==b.email&&(yield b.reload())}),Ic.apply(this,arguments)}function N0(b,g,y){return xc.apply(this,arguments)}function xc(){return xc=(0,u.Z)(function*(b,g,y){const E=(0,H.m9)(b),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};y&&Mo(E.auth,O,y);const{email:J}=yield function el(b,g){return ss.apply(this,arguments)}(E.auth,O);J!==b.email&&(yield b.reload())}),xc.apply(this,arguments)}function ji(){return(ji=(0,u.Z)(function*(b,g){return Ye(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function a_(b,g){return ko.apply(this,arguments)}function ko(){return ko=(0,u.Z)(function*(b,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,H.m9)(b),O={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},J=yield Tn(E,function yi(b,g){return ji.apply(this,arguments)}(E.auth,O));E.displayName=J.displayName||null,E.photoURL=J.photoUrl||null;const me=E.providerData.find(({providerId:He})=>"password"===He);me&&(me.displayName=E.displayName,me.photoURL=E.photoURL),yield E._updateTokensIfNecessary(J)}),ko.apply(this,arguments)}function us(b,g){return sp((0,H.m9)(b),g,null)}function rp(b,g){return sp((0,H.m9)(b),null,g)}function sp(b,g,y){return op.apply(this,arguments)}function op(){return(op=(0,u.Z)(function*(b,g,y){const{auth:E}=b,O={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(O.email=g),y&&(O.password=y);const J=yield Tn(b,sd(E,O));yield b._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class Is{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class bd extends Is{constructor(g,y,E,S){super(g,y,E),this.username=S}}class c_ extends Is{constructor(g,y){super(g,"facebook.com",y)}}class ap extends bd{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class F0 extends Is{constructor(g,y){super(g,"google.com",y)}}class u_ extends bd{constructor(g,y,E){super(g,"twitter.com",y,E)}}function lp(b){const{user:g,_tokenResponse:y}=b;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function l_(b){var g,y;if(!b)return null;const{providerId:E}=b,S=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},O=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&b?.idToken){const J=null===(y=null===(g=ut(b.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(J)return new Is(O,"anonymous"!==J&&"custom"!==J?J:null)}if(!E)return null;switch(E){case"facebook.com":return new c_(O,S);case"github.com":return new ap(O,S);case"google.com":return new F0(O,S);case"twitter.com":return new u_(O,S,b.screenName||null);case"custom":case"anonymous":return new Is(O,null);default:return new Is(O,E,S)}}(y)}class hn{constructor(g,y,E){this.type=g,this.credential=y,this.auth=E}static _fromIdtoken(g,y){return new hn("enroll",g,y)}static _fromMfaPendingCredential(g){return new hn("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return hn._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return hn._fromIdtoken(g.multiFactorSession.idToken)}return null}}class up{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=Di(g),S=y.customData._serverResponse,O=(S.mfaInfo||[]).map(me=>ls._fromServerResponse(E,me));X(S.mfaPendingCredential,E,"internal-error");const J=hn._fromMfaPendingCredential(S.mfaPendingCredential);return new up(J,O,function(){var me=(0,u.Z)(function*(He){const ct=yield He._process(E,J);delete S.mfaInfo,delete S.mfaPendingCredential;const Nt=Object.assign(Object.assign({},S),{idToken:ct.idToken,refreshToken:ct.refreshToken});switch(y.operationType){case"signIn":const Cn=yield Ir._fromIdTokenResponse(E,y.operationType,Nt);return yield E._updateCurrentUser(Cn.user),Cn;case"reauthenticate":return X(y.user,E,"internal-error"),Ir._forOperation(y.user,y.operationType,Nt);default:Se(E,"internal-error")}});return function(He){return me.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,u.Z)(function*(){return y.signInResolver(g)})()}}function U0(b,g){var y;const E=(0,H.m9)(b),S=g;return X(g.customData.operationType,E,"argument-error"),X(null===(y=S.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),up._fromError(E,S)}class cl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>ls._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new cl(g)}getSession(){var g=this;return(0,u.Z)(function*(){return hn._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var E=this;return(0,u.Z)(function*(){const S=g,O=yield E.getSession(),J=yield Tn(E.user,S._process(E.user.auth,O,y));return yield E.user._updateTokensIfNecessary(J),E.user.reload()})()}unenroll(g){var y=this;return(0,u.Z)(function*(){const E="string"==typeof g?g:g.uid,S=yield y.user.getIdToken();try{const O=yield Tn(y.user,function wd(b,g){return Ye(b,"POST","/v2/accounts/mfaEnrollment:withdraw",lt(b,g))}(y.user.auth,{idToken:S,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:J})=>J!==E),yield y.user._updateTokensIfNecessary(O),yield y.user.reload()}catch(O){throw O}})()}}const la=new WeakMap;function ul(b){const g=(0,H.m9)(b);return la.has(g)||la.set(g,cl._fromUser(g)),la.get(g)}const xs="__sak";class dp{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(xs,"1"),this.storage.removeItem(xs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Dc=(()=>{class b extends dp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ds(){const b=(0,H.z$)();return R(b)||Zt(b)}()&&function pc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ni(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),O=this.localCache[E];S!==O&&y(E,O,S)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((me,He,ct)=>{this.notifyListeners(me,ct)});const S=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const me=this.storage.getItem(S);if(y.newValue!==me)null!==y.newValue?this.storage.setItem(S,y.newValue):this.storage.removeItem(S);else if(this.localCache[S]===y.newValue&&!E)return}const O=()=>{const me=this.storage.getItem(S);!E&&this.localCache[S]===me||this.notifyListeners(S,me)},J=this.storage.getItem(S);!function Gt(){return(0,H.w1)()&&10===document.documentMode}()||J===y.newValue||y.newValue===y.oldValue?O():setTimeout(O,10)}notifyListeners(y,E){this.localCache[y]=E;const S=this.listeners[y];if(S)for(const O of Array.from(S))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var S=()=>super._set,O=this;return(0,u.Z)(function*(){yield S().call(O,y,E),O.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,S=this;return(0,u.Z)(function*(){const O=yield E().call(S,y);return S.localCache[y]=JSON.stringify(O),O})()}_remove(y){var E=()=>super._remove,S=this;return(0,u.Z)(function*(){yield E().call(S,y),delete S.localCache[y]})()}}return b.type="LOCAL",b})(),Ed=(()=>{class b extends dp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return b.type="SESSION",b})();let Cd=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(O=>O.isListeningto(y));if(E)return E;const S=new b(y);return this.receivers.push(S),S}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,u.Z)(function*(){const S=y,{eventId:O,eventType:J,data:me}=S.data,He=E.handlersMap[J];if(!He?.size)return;S.ports[0].postMessage({status:"ack",eventId:O,eventType:J});const ct=Array.from(He).map(function(){var Cn=(0,u.Z)(function*(Sr){return Sr(S.origin,me)});return function(Sr){return Cn.apply(this,arguments)}}()),Nt=yield function Sc(b){return Promise.all(b.map(function(){var g=(0,u.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(ct);S.ports[0].postMessage({status:"done",eventId:O,eventType:J,response:Nt})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function hl(b="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return b+y}class Tc{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var S=this;return(0,u.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let J,me;return new Promise((He,ct)=>{const Nt=hl("",20);O.port1.start();const Cn=setTimeout(()=>{ct(new Error("unsupported_event"))},E);me={messageChannel:O,onMessage(Sr){const lo=Sr;if(lo.data.eventId===Nt)switch(lo.data.status){case"ack":clearTimeout(Cn),J=setTimeout(()=>{ct(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),He(lo.data.response);break;default:clearTimeout(Cn),clearTimeout(J),ct(new Error("invalid_response"))}}},S.handlers.add(me),O.port1.addEventListener("message",me.onMessage),S.target.postMessage({eventType:g,eventId:Nt,data:y},[O.port2])}).finally(()=>{me&&S.removeMessageHandler(me)})})()}}function En(){return window}function Ss(){return typeof En().WorkerGlobalScope<"u"&&"function"==typeof En().importScripts}function fl(){return(fl=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const pl="firebaseLocalStorageDb",Rc=1,Oo="firebaseLocalStorage",p_="fbase_key";class Po{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function ca(b,g){return b.transaction([Oo],g?"readwrite":"readonly").objectStore(Oo)}function Xi(){const b=indexedDB.open(pl,Rc);return new Promise((g,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore(Oo,{keyPath:p_})}catch(S){y(S)}}),b.addEventListener("success",(0,u.Z)(function*(){const E=b.result;E.objectStoreNames.contains(Oo)?g(E):(E.close(),yield function kc(){const b=indexedDB.deleteDatabase(pl);return new Po(b).toPromise()}(),g(yield Xi()))}))})}function fp(b,g,y){return No.apply(this,arguments)}function No(){return(No=(0,u.Z)(function*(b,g,y){const E=ca(b,!0).put({[p_]:g,value:y});return new Po(E).toPromise()})).apply(this,arguments)}function Pc(){return(Pc=(0,u.Z)(function*(b,g){const y=ca(b,!1).get(g),E=yield new Po(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function ua(b,g){const y=ca(b,!0).delete(g);return new Po(y).toPromise()}const xd=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,u.Z)(function*(){return y.db||(y.db=yield Xi()),y.db})()}_withRetries(y){var E=this;return(0,u.Z)(function*(){let S=0;for(;;)try{const O=yield E._openDb();return yield y(O)}catch(O){if(S++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,u.Z)(function*(){return Ss()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,u.Z)(function*(){y.receiver=Cd._getInstance(function f_(){return Ss()?self:null}()),y.receiver._subscribe("keyChanged",function(){var E=(0,u.Z)(function*(S,O){return{keyProcessed:(yield y._poll()).includes(O.key)}});return function(S,O){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,u.Z)(function*(S,O){return["keyChanged"]});return function(S,O){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,u.Z)(function*(){var E,S;if(y.activeServiceWorker=yield function Id(){return fl.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Tc(y.activeServiceWorker);const O=yield y.sender._send("ping",{},800);O&&null!==(E=O[0])&&void 0!==E&&E.fulfilled&&null!==(S=O[0])&&void 0!==S&&S.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,u.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Mc(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Xi();return yield fp(y,xs,"1"),yield ua(y,xs),!0}catch{}return!1})()}_withPendingWrite(y){var E=this;return(0,u.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var S=this;return(0,u.Z)(function*(){return S._withPendingWrite((0,u.Z)(function*(){return yield S._withRetries(O=>fp(O,y,E)),S.localCache[y]=E,S.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,u.Z)(function*(){const S=yield E._withRetries(O=>function Oc(b,g){return Pc.apply(this,arguments)}(O,y));return E.localCache[y]=S,S})()}_remove(y){var E=this;return(0,u.Z)(function*(){return E._withPendingWrite((0,u.Z)(function*(){return yield E._withRetries(S=>ua(S,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,u.Z)(function*(){const E=yield y._withRetries(J=>{const me=ca(J,!1).getAll();return new Po(me).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const S=[],O=new Set;for(const{fbase_key:J,value:me}of E)O.add(J),JSON.stringify(y.localCache[J])!==JSON.stringify(me)&&(y.notifyListeners(J,me),S.push(J));for(const J of Object.keys(y.localCache))y.localCache[J]&&!O.has(J)&&(y.notifyListeners(J,null),S.push(J));return S})()}notifyListeners(y,E){this.localCache[y]=E;const S=this.listeners[y];if(S)for(const O of Array.from(S))O(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function to(){return(to=(0,u.Z)(function*(b){return(yield Ye(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function yp(b){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=g,E.onerror=S=>{const O=Te("internal-error");O.customData=S,y(O)},E.type="text/javascript",E.charset="UTF-8",function _p(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(E)})}function Td(b){return`__${b}${Math.floor(1e6*Math.random())}`}const ha=1e12;class Ad{constructor(g){this.auth=g,this.counter=ha,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new vp(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||ha;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||ha))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,u.Z)(function*(){var E;return null===(E=y._widgets.get(g||ha))||void 0===E||E.execute(),""})()}}class vp{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof g?document.getElementById(g):g;X(S,"argument-error",{appName:y}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Md(b){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<b;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fa=Td("rcb"),Fo=new Oe(3e4,6e4);class pa{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=En().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return X(function __(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(En().grecaptcha):new Promise((E,S)=>{const O=En().setTimeout(()=>{S(Te(g,"network-request-failed"))},Fo.get());En()[fa]=()=>{En().clearTimeout(O),delete En()[fa];const me=En().grecaptcha;if(!me)return void S(Te(g,"internal-error"));const He=me.render;me.render=(ct,Nt)=>{const Cn=He(ct,Nt);return this.counter++,Cn},this.hostLanguage=y,E(me)},yp(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:fa,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(O),S(Te(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=En().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Rd{load(g){return(0,u.Z)(function*(){return new Ad(g)})()}clearedOneInstance(){}}const no="recaptcha",y_={theme:"light",type:"image"};class io{constructor(g,y=Object.assign({},y_),E){this.parameters=y,this.type=no,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Di(E),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof g?document.getElementById(g):g;X(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Rd:new pa,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(O=>{const J=me=>{me&&(g.tokenChangeListeners.delete(J),O(me))};g.tokenChangeListeners.add(J),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=En()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){X(ue()&&!Ss(),g.auth,"internal-error"),yield function _n(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function Sd(b){return to.apply(this,arguments)}(g.auth);X(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bp{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=_i._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function wp(b,g,y){return kd.apply(this,arguments)}function kd(){return(kd=(0,u.Z)(function*(b,g,y){const E=Di(b),S=yield Lo(E,g,(0,H.m9)(y));return new bp(S,O=>dd(E,O))})).apply(this,arguments)}function nS(b,g,y){return v_.apply(this,arguments)}function v_(){return(v_=(0,u.Z)(function*(b,g,y){const E=(0,H.m9)(b);yield al(!1,E,"phone");const S=yield Lo(E.auth,g,(0,H.m9)(y));return new bp(S,O=>hd(E,O))})).apply(this,arguments)}function iS(b,g,y){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,u.Z)(function*(b,g,y){const E=(0,H.m9)(b),S=yield Lo(E.auth,g,(0,H.m9)(y));return new bp(S,O=>Nn(E,O))})).apply(this,arguments)}function Lo(b,g,y){return b_.apply(this,arguments)}function b_(){return b_=(0,u.Z)(function*(b,g,y){var E;const S=yield y.verify();try{let O;if(X("string"==typeof S,b,"argument-error"),X(y.type===no,b,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const J=O.session;if("phoneNumber"in O)return X("enroll"===J.type,b,"internal-error"),(yield function H0(b,g){return Ye(b,"POST","/v2/accounts/mfaEnrollment:start",lt(b,g))}(b,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{X("signin"===J.type,b,"internal-error");const me=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return X(me,b,"missing-multi-factor-info"),(yield function mp(b,g){return Ye(b,"POST","/v2/accounts/mfaSignIn:start",lt(b,g))}(b,{mfaPendingCredential:J.credential,mfaEnrollmentId:me,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield function S0(b,g){return tl.apply(this,arguments)}(b,{phoneNumber:O.phoneNumber,recaptchaToken:S});return J}}finally{y._reset()}}),b_.apply(this,arguments)}function rS(b,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,u.Z)(function*(b,g){yield ol((0,H.m9)(b),g)})).apply(this,arguments)}let Cp=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=Di(y)}verifyPhoneNumber(y,E){return Lo(this.auth,y,(0,H.m9)(E))}static credential(y,E){return _i._fromVerification(y,E)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:S}=y;return E&&S?_i._fromTokenResponse(E,S):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Br(b,g){return g?Le(g):(X(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Ip extends Cr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Zn(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Zn(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Zn(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Ur(b){return Jg(b.auth,new Ip(b),b.bypassAuthState)}function ma(b){const{auth:g,user:y}=b;return X(y,g,"internal-error"),tp(y,new Ip(b),b.bypassAuthState)}function w_(b){return gl.apply(this,arguments)}function gl(){return(gl=(0,u.Z)(function*(b){const{auth:g,user:y}=b;return X(y,g,"internal-error"),ol(y,new Ip(b),b.bypassAuthState)})).apply(this,arguments)}class _l{constructor(g,y,E,S,O=!1){this.auth=g,this.resolver=E,this.user=S,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,u.Z)(function*(E,S){g.pendingPromise={resolve:E,reject:S};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(E,S){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,u.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:O,tenantId:J,error:me,type:He}=g;if(me)return void y.reject(me);const ct={auth:y.auth,requestUri:E,sessionId:S,tenantId:J||void 0,postBody:O||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(He)(ct))}catch(Nt){y.reject(Nt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ur;case"linkViaPopup":case"linkViaRedirect":return w_;case"reauthViaPopup":case"reauthViaRedirect":return ma;default:Se(this.auth,"internal-error")}}resolve(g){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Od=new Oe(2e3,1e4);function $0(b,g,y){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,u.Z)(function*(b,g,y){const E=Di(b);ye(b,g,Js);const S=Br(E,y);return new Jt(E,"signInViaPopup",g,S).executeNotNull()})).apply(this,arguments)}function sS(b,g,y){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,u.Z)(function*(b,g,y){const E=(0,H.m9)(b);ye(E.auth,g,Js);const S=Br(E.auth,y);return new Jt(E.auth,"reauthViaPopup",g,S,E).executeNotNull()})).apply(this,arguments)}function ro(b,g,y){return We.apply(this,arguments)}function We(){return(We=(0,u.Z)(function*(b,g,y){const E=(0,H.m9)(b);ye(E.auth,g,Js);const S=Br(E.auth,y);return new Jt(E.auth,"linkViaPopup",g,S,E).executeNotNull()})).apply(this,arguments)}let Jt=(()=>{class b extends _l{constructor(y,E,S,O,J){super(y,E,O,J),this.provider=S,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,u.Z)(function*(){const E=yield y.execute();return X(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,u.Z)(function*(){fe(1===y.filter.length,"Popup operations only handle one event");const E=hl();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(S=>{y.reject(S)}),y.resolver._isIframeWebStorageSupported(y.auth,S=>{S||y.reject(Te(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,S;this.pollId=null!==(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Od.get())};y()}}return b.currentPopupAction=null,b})();const ur="pendingRedirect",yl=new Map;class Lc extends _l{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,u.Z)(function*(){let E=yl.get(y.auth._key());if(!E){try{const O=(yield function Qn(b,g){return Pd.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(O)}catch(S){E=()=>Promise.reject(S)}yl.set(y.auth._key(),E)}return y.bypassAuthState||yl.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const S=yield E.auth._redirectUserForId(g.eventId);if(S)return E.user=S,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Pd(){return(Pd=(0,u.Z)(function*(b,g){const y=Hr(g),E=vl(b);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(y));return yield E._remove(y),S})).apply(this,arguments)}function Nd(b,g){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,u.Z)(function*(b,g){return vl(b)._set(Hr(g),"true")})).apply(this,arguments)}function Ld(){yl.clear()}function ga(b,g){yl.set(b._key(),g)}function vl(b){return Le(b._redirectPersistence)}function Hr(b){return j(ur,b.config.apiKey,b.name)}function ot(b,g,y){return function bl(b,g,y){return Vd.apply(this,arguments)}(b,g,y)}function Vd(){return(Vd=(0,u.Z)(function*(b,g,y){const E=Di(b);ye(b,g,Js),yield E._initializationPromise;const S=Br(E,y);return yield Nd(S,E),S._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function Vc(b,g,y){return function _a(b,g,y){return yn.apply(this,arguments)}(b,g,y)}function yn(){return(yn=(0,u.Z)(function*(b,g,y){const E=(0,H.m9)(b);ye(E.auth,g,Js),yield E.auth._initializationPromise;const S=Br(E.auth,y);yield Nd(S,E.auth);const O=yield Ts(E);return S._openRedirect(E.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function xp(b,g,y){return function Bd(b,g,y){return Ud.apply(this,arguments)}(b,g,y)}function Ud(){return(Ud=(0,u.Z)(function*(b,g,y){const E=(0,H.m9)(b);ye(E.auth,g,Js),yield E.auth._initializationPromise;const S=Br(E.auth,y);yield al(!1,E,g.providerId),yield Nd(S,E.auth);const O=yield Ts(E);return S._openRedirect(E.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function Vo(b,g){return jr.apply(this,arguments)}function jr(){return(jr=(0,u.Z)(function*(b,g){return yield Di(b)._initializationPromise,Hd(b,g,!1)})).apply(this,arguments)}function Hd(b,g){return wl.apply(this,arguments)}function wl(){return(wl=(0,u.Z)(function*(b,g,y=!1){const E=Di(b),S=Br(E,g),J=yield new Lc(E,S,y).execute();return J&&!y&&(delete J.user._redirectEventId,yield E._persistUserIfCurrent(J.user),yield E._setRedirectUser(null,g)),J})).apply(this,arguments)}function Ts(b){return ya.apply(this,arguments)}function ya(){return(ya=(0,u.Z)(function*(b){const g=hl(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class xr{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function zr(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ds(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!ds(g)){const S=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Te(this.auth,S))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bo(g))}saveEventToCache(g){this.cachedEventUids.add(Bo(g)),this.lastProcessedEventTime=Date.now()}}function Bo(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function ds({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function Ln(b){return El.apply(this,arguments)}function El(){return(El=(0,u.Z)(function*(b,g={}){return Ye(b,"GET","/v1/projects",g)})).apply(this,arguments)}const jd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vi=/^https?/;function As(){return(As=(0,u.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Ln(b);for(const y of g)try{if(Xn(y))return}catch{}Se(b,"unauthorized-domain")})).apply(this,arguments)}function Xn(b){const g=ie(),{protocol:y,hostname:E}=new URL(g);if(b.startsWith("chrome-extension://")){const J=new URL(b);return""===J.hostname&&""===E?"chrome-extension:"===y&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&J.hostname===E}if(!vi.test(y))return!1;if(jd.test(b))return E===b;const S=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const Ti=new Oe(3e4,6e4);function Uo(){const b=En().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let zd=null;const Ho=new Oe(5e3,15e3),Jn="__/auth/iframe",so="emulator/auth/iframe",W0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $d(b){const g=b.config;X(g.authDomain,b,"auth-domain-config-required");const y=g.emulator?Ke(g,so):`https://${b.config.authDomain}/${Jn}`,E={apiKey:g.apiKey,appName:b.name,v:L.SDK_VERSION},S=Bc.get(b.config.apiHost);S&&(E.eid=S);const O=b._getFrameworks();return O.length&&(E.fw=O.join(",")),`${y}?${(0,H.xO)(E).slice(1)}`}function Cl(){return Cl=(0,u.Z)(function*(b){const g=yield function $r(b){return zd=zd||function E_(b){return new Promise((g,y)=>{var E,S,O;function J(){Uo(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Uo(),y(Te(b,"network-request-failed"))},timeout:Ti.get()})}if(null!==(S=null===(E=En().gapi)||void 0===E?void 0:E.iframes)&&void 0!==S&&S.Iframe)g(gapi.iframes.getContext());else{if(null===(O=En().gapi)||void 0===O||!O.load){const me=Td("iframefcb");return En()[me]=()=>{gapi.load?J():y(Te(b,"network-request-failed"))},yp(`https://apis.google.com/js/api.js?onload=${me}`).catch(He=>y(He))}J()}}).catch(g=>{throw zd=null,g})}(b),zd}(b),y=En().gapi;return X(y,b,"internal-error"),g.open({where:document.body,url:$d(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W0,dontclear:!0},E=>new Promise(function(){var S=(0,u.Z)(function*(O,J){yield E.restyle({setHideOnLeave:!1});const me=Te(b,"network-request-failed"),He=En().setTimeout(()=>{J(me)},Ho.get());function ct(){En().clearTimeout(He),O(E)}E.ping(ct).then(ct,()=>{J(me)})});return function(O,J){return S.apply(this,arguments)}}()))}),Cl.apply(this,arguments)}const Dp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Il=500,kt=600,Ji="_blank",C_="http://localhost";class jo{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Dr="__/auth/handler",Tp="emulator/auth/handler";function Uc(b,g,y,E,S,O){X(b.config.authDomain,b,"auth-domain-config-required"),X(b.config.apiKey,b,"invalid-api-key");const J={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:E,v:L.SDK_VERSION,eventId:S};if(g instanceof Js){g.setDefaultLanguage(b.languageCode),J.providerId=g.providerId||"",(0,H.xb)(g.getCustomParameters())||(J.customParameters=JSON.stringify(g.getCustomParameters()));for(const[He,ct]of Object.entries(O||{}))J[He]=ct}if(g instanceof oa){const He=g.getScopes().filter(ct=>""!==ct);He.length>0&&(J.scopes=He.join(","))}b.tenantId&&(J.tid=b.tenantId);const me=J;for(const He of Object.keys(me))void 0===me[He]&&delete me[He];return`${function Ap({config:b}){return b.emulator?Ke(b,Tp):`https://${b.authDomain}/${Dr}`}(b)}?${(0,H.xO)(me).slice(1)}`}const Wd="webStorageSupport",Ms=class bi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ed,this._completeRedirectFn=Hd,this._overrideRedirectResult=ga}_openPopup(g,y,E,S){var O=this;return(0,u.Z)(function*(){var J;fe(null===(J=O.eventManagers[g._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const me=Uc(g,y,E,ie(),S);return function I_(b,g,y,E=Il,S=kt){const O=Math.max((window.screen.availHeight-S)/2,0).toString(),J=Math.max((window.screen.availWidth-E)/2,0).toString();let me="";const He=Object.assign(Object.assign({},Dp),{width:E.toString(),height:S.toString(),top:O,left:J}),ct=(0,H.z$)().toLowerCase();y&&(me=Q(ct)?Ji:y),N(ct)&&(g=g||C_,He.scrollbars="yes");const Nt=Object.entries(He).reduce((Sr,[lo,Go])=>`${Sr}${lo}=${Go},`,"");if(function gn(b=(0,H.z$)()){var g;return Zt(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(ct)&&"_self"!==me)return function Sp(b,g){const y=document.createElement("a");y.href=b,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",me),new jo(null);const Cn=window.open(g||"",me,Nt);X(Cn,b,"popup-blocked");try{Cn.focus()}catch{}return new jo(Cn)}(g,me,hl())})()}_openRedirect(g,y,E,S){var O=this;return(0,u.Z)(function*(){return yield O._originValidation(g),function Ac(b){En().location.href=b}(Uc(g,y,E,ie(),S)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:S,promise:O}=this.eventManagers[y];return S?Promise.resolve(S):(fe(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,u.Z)(function*(){const E=yield function Gd(b){return Cl.apply(this,arguments)}(g),S=new xr(g);return E.register("authEvent",O=>(X(O?.authEvent,g,"invalid-auth-event"),{status:S.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:S},y.iframes[g._key()]=E,S})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Wd,{type:Wd},S=>{var O;const J=null===(O=S?.[0])||void 0===O?void 0:O[Wd];void 0!==J&&y(!!J),Se(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function dr(b){return As.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Ni()||R()||Zt()}};class wi{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return te("unexpected MultiFactorSessionType")}}}class xl extends wi{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new xl(g)}_finalizeEnroll(g,y,E){return function j0(b,g){return Ye(b,"POST","/v2/accounts/mfaEnrollment:finalize",lt(b,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function gp(b,g){return Ye(b,"POST","/v2/accounts/mfaSignIn:finalize",lt(b,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qd=(()=>{class b{constructor(){}static assertion(y){return xl._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var Hc="@firebase/auth";class Sl{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,u.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{g(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);y&&(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Mp=(0,H.Pz)("authIdTokenMaxAge")||300;let ao=null;const x_=b=>function(){var g=(0,u.Z)(function*(y){const E=y&&(yield y.getIdTokenResult()),S=E&&((new Date).getTime()-Date.parse(E.issuedAtTime))/1e3;if(S&&S>Mp)return;const O=E?.token;ao!==O&&(ao=O,yield fetch(b,{method:O?"POST":"DELETE",headers:O?{Authorization:`Bearer ${O}`}:{}}))});return function(y){return g.apply(this,arguments)}}();function $o(b=(0,L.getApp)()){const g=(0,L._getProvider)(b,"auth");if(g.isInitialized())return g.getImmediate();const y=function Ct(b,g){const y=(0,L._getProvider)(b,"auth");if(y.isInitialized()){const S=y.getImmediate(),O=y.getOptions();if((0,H.vZ)(O,g??{}))return S;Se(S,"already-initialized")}return y.initialize({options:g})}(b,{popupRedirectResolver:Ms,persistence:[xd,Dc,Ed]}),E=(0,H.Pz)("authTokenSyncURL");if(E){const O=x_(E);(function h_(b,g,y){(0,H.m9)(b).beforeAuthStateChanged(g,y)})(y,O,()=>O(y.currentUser)),function d_(b,g,y,E){(0,H.m9)(b).onIdTokenChanged(g,y,E)}(y,J=>O(J))}const S=(0,H.q4)("auth");return S&&nd(y,`http://${S}`),y}!function qt(b){(0,L._registerComponent)(new ne.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),S=g.getProvider("heartbeat"),{apiKey:O,authDomain:J}=E.options;return((me,He)=>{X(O&&!O.includes(":"),"invalid-api-key",{appName:me.name}),X(!J?.includes(":"),"argument-error",{appName:me.name});const ct={apiKey:O,authDomain:J,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mc(b)},Nt=new td(me,He,ct);return function nt(b,g){const y=g?.persistence||[],E=(Array.isArray(y)?y:[y]).map(Le);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(E,g?.popupRedirectResolver)}(Nt,y),Nt})(E,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new ne.wA("auth-internal",g=>{const y=Di(g.getProvider("auth").getImmediate());return new Sl(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(Hc,"0.22.0",function oo(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,L.registerVersion)(Hc,"0.22.0","esm2017")}("Browser")},2090:(mt,xe,B)=>{B.d(xe,{$s:()=>gt,BH:()=>ye,DV:()=>Lr,G6:()=>Ce,GJ:()=>Fr,L:()=>ke,LL:()=>_t,P0:()=>Se,Pz:()=>Ee,Sg:()=>Be,UG:()=>fe,UI:()=>Dn,US:()=>ne,Wl:()=>kn,Yr:()=>he,ZB:()=>Y,ZR:()=>mn,aH:()=>Te,b$:()=>Ct,cI:()=>rn,dS:()=>is,eu:()=>Oe,g5:()=>L,gK:()=>xi,gQ:()=>wr,h$:()=>_e,hl:()=>Pe,hu:()=>H,jU:()=>ze,m9:()=>jn,ne:()=>St,p$:()=>$,pd:()=>ri,q4:()=>ge,r3:()=>qi,ru:()=>Le,tV:()=>z,uI:()=>te,ug:()=>zt,vZ:()=>Pi,w1:()=>ie,w9:()=>Oi,xO:()=>br,xb:()=>ns,z$:()=>X,zI:()=>Ke,zd:()=>fi});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},H=function(j,U){if(!j)throw L(U)},L=function(j){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+j)},ce=function(j){const U=[];let k=0;for(let N=0;N<j.length;N++){let R=j.charCodeAt(N);R<128?U[k++]=R:R<2048?(U[k++]=R>>6|192,U[k++]=63&R|128):55296==(64512&R)&&N+1<j.length&&56320==(64512&j.charCodeAt(N+1))?(R=65536+((1023&R)<<10)+(1023&j.charCodeAt(++N)),U[k++]=R>>18|240,U[k++]=R>>12&63|128,U[k++]=R>>6&63|128,U[k++]=63&R|128):(U[k++]=R>>12|224,U[k++]=R>>6&63|128,U[k++]=63&R|128)}return U},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,U){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const k=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,N=[];for(let R=0;R<j.length;R+=3){const Q=j[R],ae=R+1<j.length,it=ae?j[R+1]:0,It=R+2<j.length,xt=It?j[R+2]:0;let gn=(15&it)<<2|xt>>6,Gt=63&xt;It||(Gt=64,ae||(gn=64)),N.push(k[Q>>2],k[(3&Q)<<4|it>>4],k[gn],k[Gt])}return N.join("")},encodeString(j,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(j):this.encodeByteArray(ce(j),U)},decodeString(j,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(j):function(j){const U=[];let k=0,N=0;for(;k<j.length;){const R=j[k++];if(R<128)U[N++]=String.fromCharCode(R);else if(R>191&&R<224){const Q=j[k++];U[N++]=String.fromCharCode((31&R)<<6|63&Q)}else if(R>239&&R<365){const It=((7&R)<<18|(63&j[k++])<<12|(63&j[k++])<<6|63&j[k++])-65536;U[N++]=String.fromCharCode(55296+(It>>10)),U[N++]=String.fromCharCode(56320+(1023&It))}else{const Q=j[k++],ae=j[k++];U[N++]=String.fromCharCode((15&R)<<12|(63&Q)<<6|63&ae)}}return U.join("")}(this.decodeStringToByteArray(j,U))},decodeStringToByteArray(j,U){this.init_();const k=U?this.charToByteMapWebSafe_:this.charToByteMap_,N=[];for(let R=0;R<j.length;){const Q=k[j.charAt(R++)],it=R<j.length?k[j.charAt(R)]:0;++R;const xt=R<j.length?k[j.charAt(R)]:64;++R;const vt=R<j.length?k[j.charAt(R)]:64;if(++R,null==Q||null==it||null==xt||null==vt)throw new Ve;N.push(Q<<2|it>>4),64!==xt&&(N.push(it<<4&240|xt>>2),64!==vt&&N.push(xt<<6&192|vt))}return N},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class Ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(j){const U=ce(j);return ne.encodeByteArray(U,!0)},ke=function(j){return _e(j).replace(/\./g,"")},z=function(j){try{return ne.decodeString(j,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function $(j){return Y(void 0,j)}function Y(j,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return U}for(const k in U)!U.hasOwnProperty(k)||!Ue(k)||(j[k]=Y(j[k],U[k]));return j}function Ue(j){return"__proto__"!==j}const De=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=j&&z(j[1]);return U&&JSON.parse(U)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},ge=j=>{var U,k;return null===(k=null===(U=De())||void 0===U?void 0:U.emulatorHosts)||void 0===k?void 0:k[j]},Se=j=>{const U=ge(j);if(!U)return;const k=U.lastIndexOf(":");if(k<=0||k+1===U.length)throw new Error(`Invalid host ${U} with no separate hostname and port!`);const N=parseInt(U.substring(k+1),10);return"["===U[0]?[U.substring(1,k-1),N]:[U.substring(0,k),N]},Te=()=>{var j;return null===(j=De())||void 0===j?void 0:j.config},Ee=j=>{var U;return null===(U=De())||void 0===U?void 0:U[`_${j}`]};class ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,k)=>{this.resolve=U,this.reject=k})}wrapCallback(U){return(k,N)=>{k?this.reject(k):this.resolve(N),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(k):U(k,N))}}}function Be(j,U){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const N=U||"demo-project",R=j.iat||0,Q=j.sub||j.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ae=Object.assign({iss:`https://securetoken.google.com/${N}`,aud:N,iat:R,exp:R+3600,auth_time:R,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ke(JSON.stringify({alg:"none",type:"JWT"})),ke(JSON.stringify(ae)),""].join(".")}function X(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(X())}function fe(){var j;const U=null===(j=De())||void 0===j?void 0:j.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ze(){return"object"==typeof self&&self.self===self}function Le(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ct(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ie(){const j=X();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function he(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function Ce(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pe(){try{return"object"==typeof indexedDB}catch{return!1}}function Oe(){return new Promise((j,U)=>{try{let k=!0;const N="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(N);R.onsuccess=()=>{R.result.close(),k||self.indexedDB.deleteDatabase(N),j(!0)},R.onupgradeneeded=()=>{k=!1},R.onerror=()=>{var Q;U((null===(Q=R.error)||void 0===Q?void 0:Q.message)||"")}}catch(k){U(k)}})}function Ke(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class mn extends Error{constructor(U,k,N){super(k),this.code=U,this.customData=N,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_t.prototype.create)}}class _t{constructor(U,k,N){this.service=U,this.serviceName=k,this.errors=N}create(U,...k){const N=k[0]||{},R=`${this.service}/${U}`,Q=this.errors[U],ae=Q?function lt(j,U){return j.replace(Ye,(k,N)=>{const R=U[N];return null!=R?String(R):`<${N}?>`})}(Q,N):"Error";return new mn(R,`${this.serviceName}: ${ae} (${R}).`,N)}}const Ye=/\{\$([^}]+)}/g;function rn(j){return JSON.parse(j)}function kn(j){return JSON.stringify(j)}const xn=function(j){let U={},k={},N={},R="";try{const Q=j.split(".");U=rn(z(Q[0])||""),k=rn(z(Q[1])||""),R=Q[2],N=k.d||{},delete k.d}catch{}return{header:U,claims:k,data:N,signature:R}},Oi=function(j){const k=xn(j).claims;return!!k&&"object"==typeof k&&k.hasOwnProperty("iat")},Fr=function(j){const U=xn(j).claims;return"object"==typeof U&&!0===U.admin};function qi(j,U){return Object.prototype.hasOwnProperty.call(j,U)}function Lr(j,U){if(Object.prototype.hasOwnProperty.call(j,U))return j[U]}function ns(j){for(const U in j)if(Object.prototype.hasOwnProperty.call(j,U))return!1;return!0}function Dn(j,U,k){const N={};for(const R in j)Object.prototype.hasOwnProperty.call(j,R)&&(N[R]=U.call(k,j[R],R,j));return N}function Pi(j,U){if(j===U)return!0;const k=Object.keys(j),N=Object.keys(U);for(const R of k){if(!N.includes(R))return!1;const Q=j[R],ae=U[R];if(rt(Q)&&rt(ae)){if(!Pi(Q,ae))return!1}else if(Q!==ae)return!1}for(const R of N)if(!k.includes(R))return!1;return!0}function rt(j){return null!==j&&"object"==typeof j}function br(j){const U=[];for(const[k,N]of Object.entries(j))Array.isArray(N)?N.forEach(R=>{U.push(encodeURIComponent(k)+"="+encodeURIComponent(R))}):U.push(encodeURIComponent(k)+"="+encodeURIComponent(N));return U.length?"&"+U.join("&"):""}function fi(j){const U={};return j.replace(/^\?/,"").split("&").forEach(N=>{if(N){const[R,Q]=N.split("=");U[decodeURIComponent(R)]=decodeURIComponent(Q)}}),U}function ri(j){const U=j.indexOf("?");if(!U)return"";const k=j.indexOf("#",U);return j.substring(U,k>0?k:void 0)}class wr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let U=1;U<this.blockSize;++U)this.pad_[U]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(U,k){k||(k=0);const N=this.W_;if("string"==typeof U)for(let vt=0;vt<16;vt++)N[vt]=U.charCodeAt(k)<<24|U.charCodeAt(k+1)<<16|U.charCodeAt(k+2)<<8|U.charCodeAt(k+3),k+=4;else for(let vt=0;vt<16;vt++)N[vt]=U[k]<<24|U[k+1]<<16|U[k+2]<<8|U[k+3],k+=4;for(let vt=16;vt<80;vt++){const gn=N[vt-3]^N[vt-8]^N[vt-14]^N[vt-16];N[vt]=4294967295&(gn<<1|gn>>>31)}let xt,Zt,R=this.chain_[0],Q=this.chain_[1],ae=this.chain_[2],it=this.chain_[3],It=this.chain_[4];for(let vt=0;vt<80;vt++){vt<40?vt<20?(xt=it^Q&(ae^it),Zt=1518500249):(xt=Q^ae^it,Zt=1859775393):vt<60?(xt=Q&ae|it&(Q|ae),Zt=2400959708):(xt=Q^ae^it,Zt=3395469782);const gn=(R<<5|R>>>27)+xt+It+Zt+N[vt]&4294967295;It=it,it=ae,ae=4294967295&(Q<<30|Q>>>2),Q=R,R=gn}this.chain_[0]=this.chain_[0]+R&4294967295,this.chain_[1]=this.chain_[1]+Q&4294967295,this.chain_[2]=this.chain_[2]+ae&4294967295,this.chain_[3]=this.chain_[3]+it&4294967295,this.chain_[4]=this.chain_[4]+It&4294967295}update(U,k){if(null==U)return;void 0===k&&(k=U.length);const N=k-this.blockSize;let R=0;const Q=this.buf_;let ae=this.inbuf_;for(;R<k;){if(0===ae)for(;R<=N;)this.compress_(U,R),R+=this.blockSize;if("string"==typeof U){for(;R<k;)if(Q[ae]=U.charCodeAt(R),++ae,++R,ae===this.blockSize){this.compress_(Q),ae=0;break}}else for(;R<k;)if(Q[ae]=U[R],++ae,++R,ae===this.blockSize){this.compress_(Q),ae=0;break}}this.inbuf_=ae,this.total_+=k}digest(){const U=[];let k=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let R=this.blockSize-1;R>=56;R--)this.buf_[R]=255&k,k/=256;this.compress_(this.buf_);let N=0;for(let R=0;R<5;R++)for(let Q=24;Q>=0;Q-=8)U[N]=this.chain_[R]>>Q&255,++N;return U}}function St(j,U){const k=new ut(j,U);return k.subscribe.bind(k)}class ut{constructor(U,k){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=k,this.task.then(()=>{U(this)}).catch(N=>{this.error(N)})}next(U){this.forEachObserver(k=>{k.next(U)})}error(U){this.forEachObserver(k=>{k.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,k,N){let R;if(void 0===U&&void 0===k&&void 0===N)throw new Error("Missing Observer.");R=function Tn(j,U){if("object"!=typeof j||null===j)return!1;for(const k of U)if(k in j&&"function"==typeof j[k])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:k,complete:N},void 0===R.next&&(R.next=On),void 0===R.error&&(R.error=On),void 0===R.complete&&(R.complete=On);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),Q}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let k=0;k<this.observers.length;k++)this.sendOne(k,U)}sendOne(U,k){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{k(this.observers[U])}catch(N){typeof console<"u"&&console.error&&console.error(N)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function On(){}function xi(j,U){return`${j} failed: ${U} argument `}const is=function(j){const U=[];let k=0;for(let N=0;N<j.length;N++){let R=j.charCodeAt(N);if(R>=55296&&R<=56319){const Q=R-55296;N++,H(N<j.length,"Surrogate pair missing trail surrogate."),R=65536+(Q<<10)+(j.charCodeAt(N)-56320)}R<128?U[k++]=R:R<2048?(U[k++]=R>>6|192,U[k++]=63&R|128):R<65536?(U[k++]=R>>12|224,U[k++]=R>>6&63|128,U[k++]=63&R|128):(U[k++]=R>>18|240,U[k++]=R>>12&63|128,U[k++]=R>>6&63|128,U[k++]=63&R|128)}return U},zt=function(j){let U=0;for(let k=0;k<j.length;k++){const N=j.charCodeAt(k);N<128?U++:N<2048?U+=2:N>=55296&&N<=56319?(U+=4,k++):U+=3}return U},si=1e3,Fe=2,pe=144e5,Ze=.5;function gt(j,U=si,k=Fe){const N=U*Math.pow(k,j),R=Math.round(Ze*N*(Math.random()-.5)*2);return Math.min(pe,N+R)}function jn(j){return j&&j._delegate?j._delegate:j}},9739:(mt,xe,B)=>{var u=B(4650);let H=null;function L(){return H}class ve{}const ne=new u.OlP("DocumentToken");let Ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function _e(){return(0,u.LFG)(z)}()},providedIn:"platform"}),n})();const ke=new u.OlP("Location Initialized");let z=(()=>{class n extends Ve{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){$()?this._history.pushState(t,i,r):this._location.hash=r}replaceState(t,i,r){$()?this._history.replaceState(t,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Y(){return new z((0,u.LFG)(ne))}()},providedIn:"platform"}),n})();function $(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let tt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(De)},providedIn:"root"}),n})();const oe=new u.OlP("appBaseHref");let De=(()=>{class n extends tt{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+et(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const l=this.prepareExternalUrl(r+et(s));this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){const l=this.prepareExternalUrl(r+et(s));this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ve),u.LFG(oe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ge=(()=>{class n extends tt{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Ue(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let l=this.prepareExternalUrl(r+et(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){let l=this.prepareExternalUrl(r+et(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ve),u.LFG(oe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Be(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Me(ye(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+et(i))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ye(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=et,n.joinWithSlash=Ue,n.stripTrailingSlash=Me,n.\u0275fac=function(t){return new(t||n)(u.LFG(tt))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Te(){return new Se((0,u.LFG)(tt))}()},providedIn:"root"}),n})();function ye(n){return n.replace(/\/index.html$/,"")}class ws{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,l)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ws(r.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===s?void 0:s);else if(null!==s){const h=i.get(s);i.move(h,l),Es(h,r)}});for(let r=0,s=i.length;r<s;r++){const h=i.get(r).context;h.index=r,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Es(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Es(n,e){n.context.$implicit=e.item}let qs=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new gc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ot("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ot("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class gc{constructor(){this.$implicit=null,this.ngIf=null}}function Ot(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class el{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ss=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),od=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new el(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(ss,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Zn=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),l=-1===r.indexOf("-")?void 0:u.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,l):this._renderer.removeStyle(this._ngEl.nativeElement,r,l)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.aQg),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Zs=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:l}=this;this._viewRef=i.createEmbeddedView(r,s,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[u.TTD]}),n})(),yc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Ir="browser",Xg="server";function Jf(n){return n===Xg}let ol=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new bc((0,u.LFG)(ne),window)}),n})();class bc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ud(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=al(this.window.history)||al(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function al(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class la extends ve{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ul extends la{static makeCurrent(){!function ce(n){H||(H=n)}(new ul)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function dp(){return xs=xs||document.querySelector("base"),xs?xs.getAttribute("href"):null}();return null==t?null:function dl(n){Ds=Ds||document.createElement("a"),Ds.setAttribute("href",n);const e=Ds.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function sd(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Ds,xs=null;const hp=new u.OlP("TRANSITION_ID"),Dc=[{provide:u.ip1,useFactory:function eS(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const i=L(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[hp,ne,u.zs3],multi:!0}];let Ed=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Sc=new u.OlP("EventManagerPlugins");let Cd=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const l=r[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Sc),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class hl{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=L().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Tc=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const r=this.usageCount;let s=r.get(t)??0;return s+=i,s>0?r.set(t,s):r.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),En=(()=>{class n extends Tc{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(s=>s.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const r=this.doc.createElement("style");r.textContent=i,t.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ac={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ss=/%COMP%/g,Rc=new u.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Po(n,e){return e.flat(100).map(t=>t.replace(Ss,n))}function ca(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let kc=(()=>{class n{constructor(t,i,r,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new Xi(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,i);return r instanceof Nc?r.applyToHost(t):r instanceof ua&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestory;switch(i.encapsulation){case u.ifc.Emulated:s=new Nc(l,h,i,this.appId,p);break;case u.ifc.ShadowDom:return new Pc(l,h,t,i);default:s=new ua(l,h,i,p)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Cd),u.LFG(En),u.LFG(u.AFp),u.LFG(Rc))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Xi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ac[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Oc(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Oc(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Ac[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Ac[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,i,r&u.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ca(i)):this.eventManager.addEventListener(e,t,ca(i))}}function Oc(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Pc extends Xi{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Po(r.id,r.styles);for(const l of s){const h=document.createElement("style");h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ua extends Xi{constructor(e,t,i,r,s=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=Po(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Nc extends ua{constructor(e,t,i,r,s){const l=r+"-"+i.id;super(e,t,i,s,l),this.contentAttr=function Oo(n){return"_ngcontent-%COMP%".replace(Ss,n)}(l),this.hostAttr=function p_(n){return"_nghost-%COMP%".replace(Ss,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let m_=(()=>{class n extends hl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const pp=["alt","control","meta","shift"],xd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let gp=(()=>{class n extends hl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let l="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),l="code."),pp.forEach(_=>{const w=i.indexOf(_);w>-1&&(i.splice(w,1),l+=_+".")}),l+=s,0!=i.length||0===s.length)return null;const p={};return p.domEventName=r,p.fullKey=l,p}static matchEventFullKeyCode(t,i){let r=xd[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),pp.forEach(l=>{l!==r&&(0,mp[l])(t)&&(s+=l+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ad=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:Ir},{provide:u.g9A,useValue:function Td(){ul.makeCurrent()},multi:!0},{provide:ne,useFactory:function g_(){return(0,u.RDi)(document),document},deps:[]}]),vp=new u.OlP(""),Md=[{provide:u.rWj,useClass:class tS{addToWindow(e){u.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(i=>{const r=u.dqk.getAllAngularTestabilities();let s=r.length,l=!1;const h=function(p){l=l||p,s--,0==s&&i(l)};r.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],fa=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function da(){return new u.qLn},deps:[]},{provide:Sc,useClass:m_,multi:!0,deps:[ne,u.R0b,u.Lbi]},{provide:Sc,useClass:gp,multi:!0,deps:[ne]},{provide:kc,useClass:kc,deps:[Cd,En,u.AFp,Rc]},{provide:u.FYo,useExisting:kc},{provide:Tc,useExisting:En},{provide:En,useClass:En,deps:[ne]},{provide:Cd,useClass:Cd,deps:[Sc,u.R0b]},{provide:class wc{},useClass:Ed,deps:[]},[]];let Fo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:hp,useExisting:u.AFp},Dc]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vp,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...fa,...Md],imports:[yc,u.hGG]}),n})(),no=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function Rd(){return new no((0,u.LFG)(ne))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let Od=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new(t||n):u.LFG(Fc),i},providedIn:"root"}),n})(),Fc=(()=>{class n extends Od{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case u.q3G.NONE:return i;case u.q3G.HTML:return(0,u.qzn)(i,"HTML")?(0,u.z3N)(i):(0,u.EiD)(this._doc,String(i)).toString();case u.q3G.STYLE:return(0,u.qzn)(i,"Style")?(0,u.z3N)(i):i;case u.q3G.SCRIPT:if((0,u.qzn)(i,"Script"))return(0,u.z3N)(i);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.qzn)(i,"URL")?(0,u.z3N)(i):(0,u.mCW)(String(i));case u.q3G.RESOURCE_URL:if((0,u.qzn)(i,"ResourceURL"))return(0,u.z3N)(i);throw new Error(`unsafe value used in a resource URL context (see ${u.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${u.JZr})`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function $0(n){return new Fc(n.get(ne))}(u.LFG(u.zs3)),i},providedIn:"root"}),n})();var Wt=B(8996),ro=B(3269);function We(...n){const e=(0,ro.yG)(n);return(0,Wt.D)(n,e)}var Jt=B(7579);class ur extends Jt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const Lc=(0,B(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Qn=B(9751);const{isArray:Pd}=Array,{getPrototypeOf:Nd,prototype:Fd,keys:Ld}=Object;function ga(n){if(1===n.length){const e=n[0];if(Pd(e))return{args:e,keys:null};if(function vl(n){return n&&"object"==typeof n&&Nd(n)===Fd}(e)){const t=Ld(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var Hr=B(4671),ot=B(4004);const{isArray:bl}=Array;function Vc(n){return(0,ot.U)(e=>function Vd(n,e){return bl(e)?n(...e):n(e)}(n,e))}function _a(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var yn=B(5403),xp=B(9672);function Bd(...n){const e=(0,ro.yG)(n),t=(0,ro.jO)(n),{args:i,keys:r}=ga(n);if(0===i.length)return(0,Wt.D)([],e);const s=new Qn.y(function Ud(n,e,t=Hr.y){return i=>{Vo(e,()=>{const{length:r}=n,s=new Array(r);let l=r,h=r;for(let p=0;p<r;p++)Vo(e,()=>{const _=(0,Wt.D)(n[p],e);let w=!1;_.subscribe((0,yn.x)(i,x=>{s[p]=x,w||(w=!0,h--),h||i.next(t(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,e,r?l=>_a(r,l):Hr.y));return t?s.pipe(Vc(t)):s}function Vo(n,e,t){n?(0,xp.f)(t,n,e):e()}var jr=B(8189);function wl(...n){return function Hd(){return(0,jr.J)(1)}()((0,Wt.D)(n,(0,ro.yG)(n)))}var Ts=B(8421);function ya(n){return new Qn.y(e=>{(0,Ts.Xf)(n()).subscribe(e)})}var G0=B(9635),xr=B(576);function Bo(n,e){const t=(0,xr.m)(n)?n:()=>n,i=r=>r.error(t());return new Qn.y(e?r=>e.schedule(i,0,r):i)}var ds=B(515),zr=B(727),Ln=B(4482);function El(){return(0,Ln.e)((n,e)=>{let t=null;n._refCount++;const i=(0,yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class jd extends Qn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ln.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zr.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yn.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zr.w0.EMPTY)}return e}refCount(){return El()(this)}}function vi(n,e){return(0,Ln.e)((t,i)=>{let r=null,s=0,l=!1;const h=()=>l&&!r&&i.complete();t.subscribe((0,yn.x)(i,p=>{r?.unsubscribe();let _=0;const w=s++;(0,Ts.Xf)(n(p,w)).subscribe(r=(0,yn.x)(i,x=>i.next(e?e(p,x,w,_++):x),()=>{r=null,h()}))},()=>{l=!0,h()}))})}function dr(n){return n<=0?()=>ds.E:(0,Ln.e)((e,t)=>{let i=0;e.subscribe((0,yn.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function As(...n){const e=(0,ro.yG)(n);return(0,Ln.e)((t,i)=>{(e?wl(n,t,e):wl(n,t)).subscribe(i)})}function Xn(n,e){return(0,Ln.e)((t,i)=>{let r=0;t.subscribe((0,yn.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}var Ti=B(5577);function Uo(n){return(0,Ln.e)((e,t)=>{let i=!1;e.subscribe((0,yn.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function E_(n=zd){return(0,Ln.e)((e,t)=>{let i=!1;e.subscribe((0,yn.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function zd(){return new Lc}function $r(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Xn((r,s)=>n(r,s,i)):Hr.y,dr(1),t?Uo(e):E_(()=>new Lc))}function Ho(n,e){return(0,xr.m)(e)?(0,Ti.z)(n,e,1):(0,Ti.z)(n,1)}function Jn(n,e,t){const i=(0,xr.m)(n)||e||t?{next:n,error:e,complete:t}:n;return i?(0,Ln.e)((r,s)=>{var l;null===(l=i.subscribe)||void 0===l||l.call(i);let h=!0;r.subscribe((0,yn.x)(s,p=>{var _;null===(_=i.next)||void 0===_||_.call(i,p),s.next(p)},()=>{var p;h=!1,null===(p=i.complete)||void 0===p||p.call(i),s.complete()},p=>{var _;h=!1,null===(_=i.error)||void 0===_||_.call(i,p),s.error(p)},()=>{var p,_;h&&(null===(p=i.unsubscribe)||void 0===p||p.call(i)),null===(_=i.finalize)||void 0===_||_.call(i)}))}):Hr.y}function so(n){return(0,Ln.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,yn.x)(t,void 0,void 0,l=>{s=(0,Ts.Xf)(n(l,so(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Bc(n,e){return(0,Ln.e)(function W0(n,e,t,i,r){return(s,l)=>{let h=t,p=e,_=0;s.subscribe((0,yn.x)(l,w=>{const x=_++;p=h?n(p,w,x):(h=!0,w),i&&l.next(p)},r&&(()=>{h&&l.next(p),l.complete()})))}}(n,e,arguments.length>=2,!0))}function $d(n){return n<=0?()=>ds.E:(0,Ln.e)((e,t)=>{let i=[];e.subscribe((0,yn.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Gd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Xn((r,s)=>n(r,s,i)):Hr.y,$d(1),t?Uo(e):E_(()=>new Lc))}function Il(n){return(0,Ln.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const kt="primary",Ji=Symbol("RouteTitle");class C_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jo(n){return new C_(n)}function I_(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const l=i[s],h=n[s];if(l.startsWith(":"))r[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Dr(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Tp(n[r],e[r]))return!1;return!0}function Tp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Uc(n){return Array.prototype.concat.apply([],n)}function Ap(n){return n.length>0?n[n.length-1]:null}function bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ms(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,Wt.D)(Promise.resolve(n)):We(n)}const wi=!1,xl={exact:function zo(n,e,t){if(!ao(n.segments,e.segments)||!Sl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!zo(n.children[i],e.children[i],t))return!1;return!0},subset:Hc},qd={exact:function ai(n,e){return Dr(n,e)},subset:function Dl(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Tp(n[t],e[t]))},ignored:()=>!0};function Kd(n,e,t){return xl[t.paths](n.root,e.root,t.matrixParams)&&qd[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Hc(n,e,t){return Yd(n,e,e.segments,t)}function Yd(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!ao(r,t)||e.hasChildren()||!Sl(r,t,i))}if(n.segments.length===t.length){if(!ao(n.segments,t)||!Sl(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!Hc(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ao(n.segments,r)&&Sl(n.segments,r,i)&&n.children[kt])&&Yd(n.children[kt],e,s,i)}}function Sl(n,e,t){return e.every((i,r)=>qd[t](n[r].parameters,i.parameters))}class oo{constructor(e=new qt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jo(this.queryParams)),this._queryParamMap}toString(){return g.serialize(this)}}class qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,bi(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return y(this)}}class Tl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jo(this.parameters)),this._parameterMap}toString(){return Nt(this)}}function ao(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let $o=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new b},providedIn:"root"}),n})();class b{parse(e){const t=new jc(e);return new oo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${E(e.root,!0)}`,i=function Sr(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${O(t)}=${O(r)}`).join("&"):`${O(t)}=${O(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function J(n){return encodeURI(n)}(e.fragment)}`:""}`}}const g=new b;function y(n){return n.segments.map(e=>Nt(e)).join("/")}function E(n,e){if(!n.hasChildren())return y(n);if(e){const t=n.children[kt]?E(n.children[kt],!1):"",i=[];return bi(n.children,(r,s)=>{s!==kt&&i.push(`${s}:${E(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function x_(n,e){let t=[];return bi(n.children,(i,r)=>{r===kt&&(t=t.concat(e(i,r)))}),bi(n.children,(i,r)=>{r!==kt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===kt?[E(n.children[kt],!1)]:[`${r}:${E(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${y(n)}/${t[0]}`:`${y(n)}/(${t.join("//")})`}}function S(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function O(n){return S(n).replace(/%3B/gi,";")}function me(n){return S(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function He(n){return decodeURIComponent(n)}function ct(n){return He(n.replace(/\+/g,"%20"))}function Nt(n){return`${me(n.path)}${function Cn(n){return Object.keys(n).map(e=>`;${me(e)}=${me(n[e])}`).join("")}(n.parameters)}`}const lo=/^[^\/()?;=#]+/;function Go(n){const e=n.match(lo);return e?e[0]:""}const Rp=/^[^=?&#]+/,kp=/^[^&#]+/;class jc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[kt]=new qt(e,t)),i}parseSegment(){const e=Go(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,wi);return this.capture(e),new Tl(He(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Go(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Go(this.remaining);r&&(i=r,this.capture(i))}e[He(t)]=He(i)}parseQueryParam(e){const t=function Zd(n){const e=n.match(Rp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const l=function Op(n){const e=n.match(kp);return e?e[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=ct(t),s=ct(i);if(e.hasOwnProperty(r)){let l=e[r];Array.isArray(l)||(l=[l],e[r]=l),l.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Go(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new u.vHH(4010,wi);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=kt);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[kt]:new qt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,wi)}}function va(n){return n.segments.length>0?new qt([],{[kt]:n}):n}function ba(n){const e={};for(const i of Object.keys(n.children)){const s=ba(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Al(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new qt(n.segments.concat(e.segments),e.children)}return n}(new qt(n.segments,e))}function co(n){return n instanceof oo}const Qd=!1;function q0(n,e,t,i,r){if(0===t.length)return th(e.root,e.root,e.root,i,r);const s=function D_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new K0(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return bi(s.outlets,(p,_)=>{h[_]="string"==typeof p?p.split("/"):p}),[...r,{outlets:h}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===l?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&r.push(h))}),r):[...r,s]},[]);return new K0(t,e,i)}(t);return s.toRoot()?th(e.root,e.root,new qt([],{}),i,r):function l(p){const _=function S_(n,e,t,i){if(n.isAbsolute)return new Ml(e.root,!0,0);if(-1===i)return new Ml(t,t===e.root,0);return function T_(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new u.vHH(4005,Qd&&"Invalid number of '../'");r=i.segments.length}return new Ml(i,!1,r-s)}(t,i+(zc(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),w=_.processChildren?Rl(_.segmentGroup,_.index,s.commands):$c(_.segmentGroup,_.index,s.commands);return th(e.root,_.segmentGroup,w,i,r)}(n.snapshot?._lastPathIndex)}function zc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function eh(n){return"object"==typeof n&&null!=n&&n.outlets}function th(n,e,t,i,r){let l,s={};i&&bi(i,(p,_)=>{s[_]=Array.isArray(p)?p.map(w=>`${w}`):`${p}`}),l=n===e?t:nh(n,e,t);const h=va(ba(l));return new oo(h,s,r)}function nh(n,e,t){const i={};return bi(n.children,(r,s)=>{i[s]=r===e?t:nh(r,e,t)}),new qt(n.segments,i)}class K0{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&zc(i[0]))throw new u.vHH(4003,Qd&&"Root segment cannot have matrix parameters");const r=i.find(eh);if(r&&r!==Ap(i))throw new u.vHH(4004,Qd&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ml{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function $c(n,e,t){if(n||(n=new qt([],{})),0===n.segments.length&&n.hasChildren())return Rl(n,e,t);const i=function A_(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const l=n.segments[r],h=t[i];if(eh(h))break;const p=`${h}`,_=i<t.length-1?t[i+1]:null;if(r>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!Z0(p,_,l))return s;i+=2}else{if(!Z0(p,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new qt(n.segments.slice(0,i.pathIndex),{});return s.children[kt]=new qt(n.segments.slice(i.pathIndex),n.children),Rl(s,0,r)}return i.match&&0===r.length?new qt(n.segments,{}):i.match&&!n.hasChildren()?ih(n,e,t):i.match?Rl(n,0,r):ih(n,e,t)}function Rl(n,e,t){if(0===t.length)return new qt(n.segments,{});{const i=function Pp(n){return eh(n[0])?n[0].outlets:{[kt]:n}}(t),r={};return!i[kt]&&n.children[kt]&&1===n.numberOfChildren&&0===n.children[kt].segments.length?Rl(n.children[kt],e,t):(bi(i,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[l]=$c(n.children[l],e,s))}),bi(n.children,(s,l)=>{void 0===i[l]&&(r[l]=s)}),new qt(n.segments,r))}}function ih(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(eh(s)){const p=M_(s.outlets);return new qt(i,p)}if(0===r&&zc(t[0])){i.push(new Tl(n.segments[e].path,Gc(t[0]))),r++;continue}const l=eh(s)?s.outlets[kt]:`${s}`,h=r<t.length-1?t[r+1]:null;l&&h&&zc(h)?(i.push(new Tl(l,Gc(h))),r+=2):(i.push(new Tl(l,{})),r++)}return new qt(i,{})}function M_(n){const e={};return bi(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=ih(new qt([],{}),0,t))}),e}function Gc(n){const e={};return bi(n,(t,i)=>e[i]=`${t}`),e}function Z0(n,e,t){return n==t.path&&Dr(e,t.parameters)}const Wc="imperative";class uo{constructor(e,t){this.id=e,this.url=t}}class R_ extends uo{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kl extends uo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rh extends uo{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sh extends uo{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class qc extends uo{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class k_ extends uo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kc extends uo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oS extends uo{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class aS extends uo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bL extends uo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lS{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class O_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cS{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q0{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Np{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N_{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ol=(()=>{class n{createUrlTree(t,i,r,s,l,h){return q0(t||i.root,r,s,l,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),dS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(e){return Ol.\u0275fac(e)},providedIn:"root"}),n})();class ew{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=F_(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=F_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=L_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return L_(e,this._root).map(t=>t.value)}}function F_(n,e){if(n===e.value)return e;for(const t of e.children){const i=F_(n,t);if(i)return i}return null}function L_(n,e){if(n===e.value)return[e];for(const t of e.children){const i=L_(n,t);if(i.length)return i.unshift(e),i}return[]}class zi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Rs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class tw extends ew{constructor(e,t){super(e),this.snapshot=t,V_(this,e)}toString(){return this.snapshot.toString()}}function nw(n,e){const t=function hS(n,e){const l=new oh([],{},{},"",{},kt,e,null,n.root,-1,{});return new rw("",new zi(l,[]))}(n,e),i=new ur([new Tl("",{})]),r=new ur({}),s=new ur({}),l=new ur({}),h=new ur(""),p=new Pl(i,r,l,h,s,kt,e,t.root);return p.snapshot=t.root,new tw(new zi(p,[]),t)}class Pl{constructor(e,t,i,r,s,l,h,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,ot.U)(_=>_[Ji]))??We(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(e=>jo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(e=>jo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function iw(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function fS(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class oh{get title(){return this.data?.[Ji]}constructor(e,t,i,r,s,l,h,p,_,w,x){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=h,this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=w,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class rw extends ew{constructor(e,t){super(t),this.url=e,V_(this,t)}toString(){return sw(this._root)}}function V_(n,e){e.value._routerState=n,e.children.forEach(t=>V_(n,t))}function sw(n){const e=n.children.length>0?` { ${n.children.map(sw).join(", ")} } `:"";return`${n.value}${e}`}function B_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Dr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Dr(e.params,t.params)||n.params.next(t.params),function Sp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Dr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Dr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Yc(n,e){const t=Dr(n.params,e.params)&&function Mp(n,e){return ao(n,e)&&n.every((t,i)=>Dr(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Yc(n.parent,e.parent))}function qo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function ow(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return qo(n,i,r);return qo(n,i)})}(n,e,t);return new zi(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>qo(n,h)),l}}const i=function aw(n){return new Pl(new ur(n.url),new ur(n.params),new ur(n.queryParams),new ur(n.fragment),new ur(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>qo(n,s));return new zi(i,r)}}const Fp="ngNavigationCancelingError";function pS(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=co(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=mS(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function mS(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[Fp]=!0,i.cancellationCode=e,t&&(i.url=t),i}function gS(n){return Lp(n)&&co(n.url)}function Lp(n){return n&&n[Fp]}class U_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vp,this.attachRef=null}}let Vp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new U_,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const H_=!1;let Bp=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=kt,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(Vp),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,H_);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,H_);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,H_);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new u.vHH(4013,H_);this._activatedRoute=t;const r=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new _S(t,h,r.injector);if(i&&function yS(n){return!!n.resolveComponentFactory}(i)){const _=i.resolveComponentFactory(l);this.activated=r.createComponent(_,r.length,p)}else this.activated=r.createComponent(l,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]}),n})();class _S{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Pl?this.route:e===Vp?this.childContexts:this.parent.get(e,t)}}let j_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},dependencies:[Bp],encapsulation:2}),n})();function lw(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ah(n){const e=n.children&&n.children.map(ah),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=j_),t}function Gr(n){return n.outlet||kt}function uw(n,e){const t=n.filter(i=>Gr(i)===e);return t.push(...n.filter(i=>Gr(i)!==e)),t}function lh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class IS{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),B_(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Rs(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),bi(r,(s,l)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Rs(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);if(i&&i.outlet){const l=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Rs(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Rs(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new P_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Q0(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(B_(r),r===s)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),B_(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=lh(r.snapshot),p=h?.get(u._Vd)??null;l.attachRef=null,l.route=r,l.resolver=p,l.injector=h,l.outlet&&l.outlet.activateWith(r,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,i)}}class G_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class W_{constructor(e,t){this.component=e,this.route=t}}function wL(n,e,t){const i=n._root;return Zc(i,e?e._root:null,t,[i.value])}function Ea(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:i}function Zc(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Rs(e);return n.children.forEach(l=>{(function dw(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function hw(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ao(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ao(n.url,e.url)||!Dr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yc(n,e)||!Dr(n.queryParams,e.queryParams);default:return!Yc(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new G_(i)):(s.data=l.data,s._resolvedData=l._resolvedData),Zc(n,e,s.component?h?h.children:null:t,i,r),p&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new W_(h.outlet.component,l))}else l&&Up(e,h,r),r.canActivateChecks.push(new G_(i)),Zc(n,null,s.component?h?h.children:null:t,i,r)})(l,s[l.value.outlet],t,i.concat([l.value]),r),delete s[l.value.outlet]}),bi(s,(l,h)=>Up(l,t.getContext(h),r)),r}function Up(n,e,t){const i=Rs(n),r=n.value;bi(i,(s,l)=>{Up(s,r.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new W_(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function uh(n){return"function"==typeof n}function Hp(n){return n instanceof Lc||"EmptyError"===n?.name}const ho=Symbol("INITIAL_VALUE");function Qc(){return vi(n=>Bd(n.map(e=>e.pipe(dr(1),As(ho)))).pipe((0,ot.U)(e=>{for(const t of e)if(!0!==t){if(t===ho)return ho;if(!1===t||t instanceof oo)return t}return!0}),Xn(e=>e!==ho),dr(1)))}function yw(n){return(0,G0.z)(Jn(e=>{if(co(e))throw pS(0,e)}),(0,ot.U)(e=>!0===e))}const Ca={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bw(n,e,t,i,r){const s=X_(n,e,t);return s.matched?function vw(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?We(r.map(l=>{const h=Ea(l,n);return Ms(function xS(n){return n&&uh(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Qc(),yw()):We(!0)}(i=lw(e,i),e,t).pipe((0,ot.U)(l=>!0===l?s:{...Ca})):We(s)}function X_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ca}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||I_)(t,n,e);if(!r)return{...Ca};const s={};bi(r.posParams,(h,p)=>{s[p]=h.path});const l=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:l,positionalParamSegments:r.posParams??{}}}function $p(n,e,t,i){if(t.length>0&&function ww(n,e,t){return t.some(i=>dh(n,e,i)&&Gr(i)!==kt)}(n,t,i)){const s=new qt(e,function TS(n,e,t,i){const r={};r[kt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Gr(s)!==kt){const l=new qt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,r[Gr(s)]=l}return r}(n,e,i,new qt(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function AS(n,e,t){return t.some(i=>dh(n,e,i))}(n,t,i)){const s=new qt(n.segments,function J_(n,e,t,i,r){const s={};for(const l of i)if(dh(n,t,l)&&!r[Gr(l)]){const h=new qt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[Gr(l)]=h}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new qt(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function dh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function MS(n,e,t,i){return!!(Gr(n)===i||i!==kt&&dh(e,t,n))&&("**"===n.path||X_(e,n,t).matched)}function Ew(n,e,t){return 0===e.length&&!n.children[t]}const Ia=!1;class Gp{constructor(e){this.segmentGroup=e||null}}class Fl{constructor(e){this.urlTree=e}}function Ko(n){return Bo(new Gp(n))}function Cw(n){return Bo(new Fl(n))}class OS{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=$p(this.urlTree.root,[],[],this.config).segmentGroup,t=new qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,kt).pipe((0,ot.U)(s=>this.createUrlTree(ba(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(so(s=>{if(s instanceof Fl)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Gp?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,kt).pipe((0,ot.U)(r=>this.createUrlTree(ba(r),e.queryParams,e.fragment))).pipe(so(r=>{throw r instanceof Gp?this.noMatchError(r):r}))}noMatchError(e){return new u.vHH(4002,Ia)}createUrlTree(e,t,i){const r=va(e);return new oo(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,ot.U)(s=>new qt([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,Wt.D)(r).pipe(Ho(s=>{const l=i.children[s],h=uw(t,s);return this.expandSegmentGroup(e,h,l,s).pipe((0,ot.U)(p=>({segment:p,outlet:s})))}),Bc((s,l)=>(s[l.outlet]=l.segment,s),{}),Gd())}expandSegment(e,t,i,r,s,l){return(0,Wt.D)(i).pipe(Ho(h=>this.expandSegmentAgainstRoute(e,t,i,h,r,s,l).pipe(so(_=>{if(_ instanceof Gp)return We(null);throw _}))),$r(h=>!!h),so((h,p)=>{if(Hp(h))return Ew(t,r,s)?We(new qt([],{})):Ko(t);throw h}))}expandSegmentAgainstRoute(e,t,i,r,s,l,h){return MS(r,t,s,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l):Ko(t):Ko(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Cw(s):this.lineralizeSegments(i,s).pipe((0,Ti.z)(l=>{const h=new qt(l,{});return this.expandSegment(e,h,t,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){const{matched:h,consumedSegments:p,remainingSegments:_,positionalParamSegments:w}=X_(t,r,s);if(!h)return Ko(t);const x=this.applyRedirectCommands(p,r.redirectTo,w);return r.redirectTo.startsWith("/")?Cw(x):this.lineralizeSegments(r,x).pipe((0,Ti.z)(T=>this.expandSegment(e,t,i,T.concat(_),l,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=lw(i,e),i.loadChildren?(i._loadedRoutes?We({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe((0,ot.U)(h=>(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,new qt(r,{})))):We(new qt(r,{}))):bw(t,i,r,e).pipe(vi(({matched:l,consumedSegments:h,remainingSegments:p})=>l?this.getChildConfig(e=i._injector??e,i,r).pipe((0,Ti.z)(w=>{const x=w.injector??e,T=w.routes,{segmentGroup:P,slicedSegments:V}=$p(t,h,p,T),W=new qt(P.segments,P.children);if(0===V.length&&W.hasChildren())return this.expandChildren(x,T,W).pipe((0,ot.U)(Xe=>new qt(h,Xe)));if(0===T.length&&0===V.length)return We(new qt(h,{}));const re=Gr(i)===s;return this.expandSegment(x,W,T,V,re?kt:s,!0).pipe((0,ot.U)(Ge=>new qt(h.concat(Ge.segments),Ge.children)))})):Ko(t)))}getChildConfig(e,t,i){return t.children?We({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?We({routes:t._loadedRoutes,injector:t._loadedInjector}):function SS(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?We(!0):We(r.map(l=>{const h=Ea(l,n);return Ms(function pw(n){return n&&uh(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Qc(),yw())}(e,t,i).pipe((0,Ti.z)(r=>r?this.configLoader.loadChildren(e,t).pipe(Jn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function RS(n){return Bo(mS(Ia,3))}())):We({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return We(i);if(r.numberOfChildren>1||!r.children[kt])return e.redirectTo,Bo(new u.vHH(4e3,Ia));r=r.children[kt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new oo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return bi(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[s]=t[h]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let l={};return bi(t.children,(h,p)=>{l[p]=this.createSegmentGroup(e,h,i,r)}),new qt(s,l)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new u.vHH(4001,Ia);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class ty{}class iy{constructor(e,t,i,r,s,l,h){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=l,this.urlSerializer=h}recognize(){const e=$p(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,kt).pipe((0,ot.U)(t=>{if(null===t)return null;const i=new oh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new zi(i,t),s=new rw(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=iw(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return(0,Wt.D)(Object.keys(i.children)).pipe(Ho(r=>{const s=i.children[r],l=uw(t,r);return this.processSegmentGroup(e,l,s,r)}),Bc((r,s)=>r&&s?(r.push(...s),r):null),function Cl(n,e=!1){return(0,Ln.e)((t,i)=>{let r=0;t.subscribe((0,yn.x)(i,s=>{const l=n(s,r++);(l||e)&&i.next(s),!l&&i.complete()}))})}(r=>null!==r),Uo(null),Gd(),(0,ot.U)(r=>{if(null===r)return null;const s=Dw(r);return function hh(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return(0,Wt.D)(t).pipe(Ho(l=>this.processSegmentAgainstRoute(l._injector??e,l,i,r,s)),$r(l=>!!l),so(l=>{if(Hp(l))return Ew(i,r,s)?We([]):We(null);throw l}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!MS(t,i,r,s))return We(null);let l;if("**"===t.path){const h=r.length>0?Ap(r).parameters:{},p=Tw(i)+r.length;l=We({snapshot:new oh(r,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ll(t),Gr(t),t.component??t._loadedComponent??null,t,Sw(i),p,fo(t)),consumedSegments:[],remainingSegments:[]})}else l=bw(i,t,r,e).pipe((0,ot.U)(({matched:h,consumedSegments:p,remainingSegments:_,parameters:w})=>{if(!h)return null;const x=Tw(i)+p.length;return{snapshot:new oh(p,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ll(t),Gr(t),t.component??t._loadedComponent??null,t,Sw(i),x,fo(t)),consumedSegments:p,remainingSegments:_}}));return l.pipe(vi(h=>{if(null===h)return We(null);const{snapshot:p,consumedSegments:_,remainingSegments:w}=h;e=t._injector??e;const x=t._loadedInjector??e,T=function NS(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:P,slicedSegments:V}=$p(i,_,w,T.filter(re=>void 0===re.redirectTo));if(0===V.length&&P.hasChildren())return this.processChildren(x,T,P).pipe((0,ot.U)(re=>null===re?null:[new zi(p,re)]));if(0===T.length&&0===V.length)return We([new zi(p,[])]);const W=Gr(t)===s;return this.processSegment(x,T,P,V,W?kt:s).pipe((0,ot.U)(re=>null===re?null:[new zi(p,re)]))}))}}function FS(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Dw(n){const e=[],t=new Set;for(const i of n){if(!FS(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Dw(i.children);e.push(new zi(i.value,r))}return e.filter(i=>!t.has(i))}function Sw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Tw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ll(n){return n.data||{}}function fo(n){return n.resolve||{}}function ry(n){return"string"==typeof n.title||null===n.title}function Wp(n){return vi(e=>{const t=n(e);return t?(0,Wt.D)(t).pipe((0,ot.U)(()=>e)):We(e)})}const Vl=new u.OlP("ROUTES");let sy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return We(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Ms(t.loadComponent()).pipe((0,ot.U)(hs),Jn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Il(()=>{this.componentLoaders.delete(t)})),r=new jd(i,()=>new Jt.x).pipe(El());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return We({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,ot.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(i);let p,_,w=!1;Array.isArray(h)?_=h:(p=h.create(t).injector,_=Uc(p.get(Vl,[],u.XFs.Self|u.XFs.Optional)));return{routes:_.map(ah),injector:p}}),Il(()=>{this.childrenLoaders.delete(i)})),l=new jd(s,()=>new Jt.x).pipe(El());return this.childrenLoaders.set(i,l),l}loadModuleFactoryOrRoutes(t){return Ms(t()).pipe((0,ot.U)(hs),(0,Ti.z)(i=>i instanceof u.YKP||Array.isArray(i)?We(i):(0,Wt.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hs(n){return function US(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let fh=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Jt.x,this.configLoader=(0,u.f3M)(sy),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)($o),this.rootContexts=(0,u.f3M)(Vp),this.navigationId=0,this.afterPreactivation=()=>We(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new O_(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new lS(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new ur({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Wc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xn(i=>0!==i.id),(0,ot.U)(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),vi(i=>{let r=!1,s=!1;return We(i).pipe(Jn(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),vi(l=>{const h=t.browserUrlTree.toString(),p=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!p&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const w="";return this.events.next(new sh(l.id,t.serializeUrl(i.rawUrl),w,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),ds.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Rw(l.source)&&(t.browserUrlTree=l.extractedUrl),We(l).pipe(vi(w=>{const x=this.transitions?.getValue();return this.events.next(new R_(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),x!==this.transitions?.getValue()?ds.E:Promise.resolve(w)}),function xw(n,e,t,i){return vi(r=>function kS(n,e,t,i,r){return new OS(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,ot.U)(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Jn(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},i.urlAfterRedirects=w.urlAfterRedirects}),function VS(n,e,t,i,r){return(0,Ti.z)(s=>function PS(n,e,t,i,r,s,l="emptyOnly"){return new iy(n,e,t,i,r,l,s).recognize().pipe(vi(h=>null===h?function ny(n){return new Qn.y(e=>e.error(n))}(new ty):We(h)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe((0,ot.U)(l=>({...s,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Jn(w=>{if(i.targetSnapshot=w.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!w.extras.skipLocationChange){const T=t.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);t.setBrowserUrl(T,w)}t.browserUrlTree=w.urlAfterRedirects}const x=new k_(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(x)}));if(p&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:w,extractedUrl:x,source:T,restoredState:P,extras:V}=l,W=new R_(w,this.urlSerializer.serialize(x),T,P);this.events.next(W);const re=nw(x,this.rootComponentType).snapshot;return We(i={...l,targetSnapshot:re,urlAfterRedirects:x,extras:{...V,skipLocationChange:!1,replaceUrl:!1}})}{const w="";return this.events.next(new sh(l.id,t.serializeUrl(i.extractedUrl),w,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),ds.E}}),Jn(l=>{const h=new Kc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,ot.U)(l=>i={...l,guards:wL(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function Y_(n,e){return(0,Ti.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?We({...t,guardsResult:!0}):function jp(n,e,t,i){return(0,Wt.D)(n).pipe((0,Ti.z)(r=>function Q_(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?We(s.map(h=>{const p=lh(e)??r,_=Ea(h,p);return Ms(function K_(n){return n&&uh(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,i):p.runInContext(()=>_(n,e,t,i))).pipe($r())})).pipe(Qc()):We(!0)}(r.component,r.route,t,e,i)),$r(r=>!0!==r,!0))}(l,i,r,n).pipe((0,Ti.z)(h=>h&&function fw(n){return"boolean"==typeof n}(h)?function DS(n,e,t,i){return(0,Wt.D)(e).pipe(Ho(r=>wl(function zp(n,e){return null!==n&&e&&e(new cS(n)),We(!0)}(r.route.parent,i),function Z_(n,e){return null!==n&&e&&e(new Np(n)),We(!0)}(r.route,i),function _w(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function ch(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ya(()=>We(l.guards.map(p=>{const _=lh(l.node)??t,w=Ea(p,_);return Ms(function EL(n){return n&&uh(n.canActivateChild)}(w)?w.canActivateChild(i,n):_.runInContext(()=>w(i,n))).pipe($r())})).pipe(Qc())));return We(s).pipe(Qc())}(n,r.path,t),function Nl(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return We(!0);const r=i.map(s=>ya(()=>{const l=lh(e)??t,h=Ea(s,l);return Ms(function q_(n){return n&&uh(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe($r())}));return We(r).pipe(Qc())}(n,r.route,t))),$r(r=>!0!==r,!0))}(i,s,n,e):We(h)),(0,ot.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),Jn(l=>{if(i.guardsResult=l.guardsResult,co(l.guardsResult))throw pS(0,l.guardsResult);const h=new oS(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Xn(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Wp(l=>{if(l.guards.canActivateChecks.length)return We(l).pipe(Jn(h=>{const p=new aS(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),vi(h=>{let p=!1;return We(h).pipe(function BS(n,e){return(0,Ti.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return We(t);let s=0;return(0,Wt.D)(r).pipe(Ho(l=>function IL(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!ry(r)&&(s[Ji]=r.title),function xL(n,e,t,i){const r=function Aw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return We({});const s={};return(0,Wt.D)(r).pipe((0,Ti.z)(l=>function DL(n,e,t,i){const r=lh(e)??i,s=Ea(n,r);return Ms(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[l],e,t,i).pipe($r(),Jn(h=>{s[l]=h}))),$d(1),function Dp(n){return(0,ot.U)(()=>n)}(s),so(l=>Hp(l)?ds.E:Bo(l)))}(s,n,e,i).pipe((0,ot.U)(l=>(n._resolvedData=l,n.data=iw(n,t).resolve,r&&ry(r)&&(n.data[Ji]=r.title),null)))}(l.route,i,n,e)),Jn(()=>s++),$d(1),(0,Ti.z)(l=>s===r.length?We(t):ds.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),Jn({next:()=>p=!0,complete:()=>{p||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),Jn(h=>{const p=new bL(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Wp(l=>{const h=p=>{const _=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(p.routeConfig).pipe(Jn(w=>{p.component=w}),(0,ot.U)(()=>{})));for(const w of p.children)_.push(...h(w));return _};return Bd(h(l.targetSnapshot.root)).pipe(Uo(),dr(1))}),Wp(()=>this.afterPreactivation()),(0,ot.U)(l=>{const h=function Wo(n,e,t){const i=qo(n,e._root,t?t._root:void 0);return new tw(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return i={...l,targetRouterState:h}}),Jn(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,ot.U)(i=>(new IS(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Jn({next:l=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new kl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{r=!0}}),Il(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),so(l=>{if(s=!0,Lp(l)){gS(l)||(t.navigated=!0,t.restoreHistory(i,!0));const h=new rh(i.id,this.urlSerializer.serialize(i.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),gS(l)){const p=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),_={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Rw(i.source)};t.scheduleNavigation(p,Wc,null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const h=new qc(i.id,this.urlSerializer.serialize(i.extractedUrl),l,i.targetSnapshot??void 0);this.events.next(h);try{i.resolve(t.errorHandler(l))}catch(p){i.reject(p)}}return ds.E}))}))}cancelNavigationTransition(t,i,r){const s=new rh(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Rw(n){return n!==Wc}let kw=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===kt);return i}getResolvedTitleForRoute(t){return t.data[Ji]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(HS)},providedIn:"root"}),n})(),HS=(()=>{class n extends kw{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(no))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(zS)},providedIn:"root"}),n})();class Ow{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let zS=(()=>{class n extends Ow{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Kp=new u.OlP("",{providedIn:"root",factory:()=>({})});let Ft=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Pw)},providedIn:"root"}),n})(),Pw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nw(n){throw n}function GS(n,e,t){return e.parse("/")}const WS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Tr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this.options=(0,u.f3M)(Kp,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Nw,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||GS,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(Ft),this.routeReuseStrategy=(0,u.f3M)(jS),this.urlCreationStrategy=(0,u.f3M)(dS),this.titleStrategy=(0,u.f3M)(kw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Uc((0,u.f3M)(Vl,{optional:!0})??[]),this.navigationTransitions=(0,u.f3M)(fh),this.urlSerializer=(0,u.f3M)($o),this.location=(0,u.f3M)(Se),this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new oo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=nw(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Wc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},l=r?.navigationId?r:null;if(r){const p={...r};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(t);this.scheduleNavigation(h,i,l,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(ah),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:l,queryParamsHandling:h,preserveFragment:p}=i,_=p?this.currentUrlTree.fragment:l;let w=null;switch(h){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,w,_??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=co(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Wc,null,i)}navigate(t,i={skipLocationChange:!1}){return function Lw(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new u.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...WS}:!1===i?{...Fw}:i,co(t))return Kd(this.currentUrlTree,t,r);const s=this.parseUrl(t);return Kd(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,l){if(this.disposed)return Promise.resolve(!1);let h,p,_,w;return l?(h=l.resolve,p=l.reject,_=l.promise):_=new Promise((x,T)=>{h=x,p=T}),w="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:w,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:h,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(x=>Promise.reject(x))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ay{}let YS=(()=>{class n{constructor(t,i,r,s,l){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Xn(t=>t instanceof kl),Ho(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,u.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,h=s._loadedInjector??l;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(l,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,Wt.D)(r).pipe((0,jr.J)())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):We(null);const s=r.pipe((0,Ti.z)(l=>null===l?We(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(i.loadComponent&&!i._loadedComponent){const l=this.loader.loadComponent(i);return(0,Wt.D)([s,l]).pipe((0,jr.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Tr),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(ay),u.LFG(sy))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ph=new u.OlP("");let Zp=(()=>{class n{constructor(t,i,r,s,l={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof R_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof N_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new N_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();var Wr=(()=>((Wr=Wr||{})[Wr.COMPLETE=0]="COMPLETE",Wr[Wr.FAILED=1]="FAILED",Wr[Wr.REDIRECTING=2]="REDIRECTING",Wr))();const mh=!1;function Yo(n,e){return{\u0275kind:n,\u0275providers:e}}const Bw=new u.OlP("",{providedIn:"root",factory:()=>!1});function ly(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const i=n.get(Tr),r=n.get(_h);1===n.get(cy)&&i.initialNavigation(),n.get(Hw,null,u.XFs.Optional)?.setUpPreloading(),n.get(ph,null,u.XFs.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const _h=new u.OlP(mh?"bootstrap done indicator":"",{factory:()=>new Jt.x}),cy=new u.OlP(mh?"initial navigation":"",{providedIn:"root",factory:()=>1});function XS(){let n=[];return n=mh?[{provide:u.Xts,multi:!0,useFactory:()=>{const e=(0,u.f3M)(Tr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function X0(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Yo(1,n)}const Hw=new u.OlP(mh?"router preloader":"");function JS(n){return Yo(0,[{provide:Hw,useExisting:YS},{provide:ay,useExisting:n}])}const Jc=!1,Qp=new u.OlP(Jc?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),kL=[Se,{provide:$o,useClass:b},Tr,Vp,{provide:Pl,useFactory:function Vw(n){return n.routerState.root},deps:[Tr]},sy,Jc?{provide:Bw,useValue:!0}:[]];function uy(){return new u.PXZ("Router",Tr)}let jw=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[kL,Jc&&i?.enableTracing?XS().\u0275providers:[],{provide:Vl,multi:!0,useValue:t},{provide:Qp,useFactory:nT,deps:[[Tr,new u.FiY,new u.tp0]]},{provide:Kp,useValue:i||{}},i?.useHash?{provide:tt,useClass:ge}:{provide:tt,useClass:De},{provide:ph,useFactory:()=>{const n=(0,u.f3M)(ol),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(Kp),i=(0,u.f3M)(fh),r=(0,u.f3M)($o);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Zp(r,i,n,e,t)}},i?.preloadingStrategy?JS(i.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:uy},i?.initialNavigation?$w(i):[],[{provide:Gw,useFactory:ly},{provide:u.tb,multi:!0,useExisting:Gw}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Vl,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Qp,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[j_]}),n})();function nT(n){if(Jc&&n)throw new u.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function $w(n){return["disabled"===n.initialNavigation?Yo(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(Tr);return()=>{e.setUpLocationChangeListener()}}},{provide:cy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Yo(2,[{provide:cy,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(ke,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Tr),s=e.get(_h);(function TL(n,e){n.events.pipe(Xn(t=>t instanceof kl||t instanceof rh||t instanceof qc||t instanceof sh),(0,ot.U)(t=>t instanceof kl||t instanceof sh?Wr.COMPLETE:t instanceof rh&&(0===t.code||1===t.code)?Wr.REDIRECTING:Wr.FAILED),Xn(t=>t!==Wr.REDIRECTING),dr(1)).subscribe(()=>{e()})})(r,()=>{i(!0)}),e.get(fh).afterPreactivation=()=>(i(!0),s.closed?We(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const Gw=new u.OlP(Jc?"Router Initializer":"");var K=B(5861);class yh{constructor(){this.players=[],this.stack=[],this.playedCards=[],this.currentPlayer=0,this.pickCardAnimation=!1,this.currentCard="";for(let e=1;e<14;e++)this.stack.push("ace_"+e),this.stack.push("clubs_"+e),this.stack.push("diamonds_"+e),this.stack.push("hearts_"+e);!function vh(n){let t,e=n.length;for(;0!=e;)t=Math.floor(Math.random()*e),e--,[n[e],n[t]]=[n[t],n[e]]}(this.stack)}toJson(){return{players:this.players,stack:this.stack,playedCards:this.playedCards,currentPlayer:this.currentPlayer,pickCardAnimation:this.pickCardAnimation,currentCard:this.currentCard}}}function fs(n){return null!=n&&"false"!=`${n}`}function tu(n,e=0){return function Ww(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function nu(n){return Array.isArray(n)?n:[n]}function $n(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ks(n){return n instanceof u.SBq?n.nativeElement:n}var hy=B(1144);const sT=["addListener","removeListener"],oT=["addEventListener","removeEventListener"],qw=["on","off"];function Xp(n,e,t,i){if((0,xr.m)(t)&&(i=t,t=void 0),i)return Xp(n,e,t).pipe(Vc(i));const[r,s]=function lT(n){return(0,xr.m)(n.addEventListener)&&(0,xr.m)(n.removeEventListener)}(n)?oT.map(l=>h=>n[l](e,h,t)):function Kw(n){return(0,xr.m)(n.addListener)&&(0,xr.m)(n.removeListener)}(n)?sT.map(fy(n,e)):function aT(n){return(0,xr.m)(n.on)&&(0,xr.m)(n.off)}(n)?qw.map(fy(n,e)):[];if(!r&&(0,hy.z)(n))return(0,Ti.z)(l=>Xp(l,e,t))((0,Ts.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Qn.y(l=>{const h=(...p)=>l.next(1<p.length?p:p[0]);return r(h),()=>s(h)})}function fy(n,e){return t=>i=>n[t](e,i)}class qr extends zr.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const bh={setInterval(n,e,...t){const{delegate:i}=bh;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=bh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var cT=B(8737);class py extends qr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return bh.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&bh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,cT.P)(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Bl={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Bl;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new zr.w0(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Bl;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Bl;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},my={now:()=>(my.delegate||Date).now(),delegate:void 0};class wh{constructor(e,t=wh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}wh.now=my.now;class Jp extends wh{constructor(e,t=wh.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const uT=new class Zw extends Jp{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Yw extends py{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Bl.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Bl.cancelAnimationFrame(t),e._scheduled=void 0)}});let _y,gy=1;const em={};function Qw(n){return n in em&&(delete em[n],!0)}const dT={setImmediate(n){const e=gy++;return em[e]=!0,_y||(_y=Promise.resolve()),_y.then(()=>Qw(e)&&n()),e},clearImmediate(n){Qw(n)}},{setImmediate:po,clearImmediate:yy}=dT,tm={setImmediate(...n){const{delegate:e}=tm;return(e?.setImmediate||po)(...n)},clearImmediate(n){const{delegate:e}=tm;return(e?.clearImmediate||yy)(n)},delegate:void 0},fT=new class Xw extends Jp{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class hT extends py{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=tm.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(tm.clearImmediate(t),e._scheduled=void 0)}}),Eh=new Jp(py),vy=Eh;var mT=B(3532);function iu(n,e=Eh){return function pT(n){return(0,Ln.e)((e,t)=>{let i=!1,r=null,s=null,l=!1;const h=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const _=r;r=null,t.next(_)}l&&t.complete()},p=()=>{s=null,l&&t.complete()};e.subscribe((0,yn.x)(t,_=>{i=!0,r=_,s||(0,Ts.Xf)(n(_)).subscribe(s=(0,yn.x)(t,h,p))},()=>{l=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>function by(n=0,e,t=vy){let i=-1;return null!=e&&((0,mT.K)(e)?t=e:i=e),new Qn.y(r=>{let s=function nm(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,e))}var LL=B(5032);function mo(n){return(0,Ln.e)((e,t)=>{(0,Ts.Xf)(n).subscribe((0,yn.x)(t,()=>t.complete(),LL.Z)),!t.closed&&e.subscribe(t)})}let Jw;try{Jw=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Jw=!1}let Ul,Ai=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function cd(n){return n===Ir}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Jw)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wy=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function im(){if(Ul)return Ul;if("object"!=typeof document||!document)return Ul=new Set(wy),Ul;let n=document.createElement("input");return Ul=new Set(wy.filter(e=>(n.setAttribute("type",e),n.type===e))),Ul}let Kr,Da,Hl,Cy;function xa(n){return function rm(){if(null==Kr&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Kr=!0}))}finally{Kr=Kr||!1}return Kr}()?n:!!n.capture}function Ey(){if(null==Hl){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Hl=!1,Hl;if("scrollBehavior"in document.documentElement.style)Hl=!0;else{const n=Element.prototype.scrollTo;Hl=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Hl}function ru(){if("object"!=typeof document||!document)return 0;if(null==Da){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),Da=0,0===n.scrollLeft&&(n.scrollLeft=1,Da=0===n.scrollLeft?1:2),n.remove()}return Da}function Iy(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function jl(n){return n.composedPath?n.composedPath()[0]:n.target}function xy(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const yT=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function vT(){return(0,u.f3M)(ne)}}),bT=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let zl=(()=>{class n{constructor(t){this.value="ltr",this.change=new u.vpe,t&&(this.value=function wT(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?bT.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(yT,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),su=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Dy=["contentWrapper"],ET=["*"],Sy=new u.OlP("VIRTUAL_SCROLL_STRATEGY");let sm=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Jt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Qn.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(iu(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):We()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Xn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=ks(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Xp(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(Ai),u.LFG(ne,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eE=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new Jt.x,this._elementScrolled=new Qn.y(l=>this.ngZone.runOutsideAngular(()=>Xp(this.elementRef.nativeElement,"scroll").pipe(mo(this._destroyed)).subscribe(l)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=ru()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==ru()?t.left=t.right:1==ru()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;Ey()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const l=this.dir&&"rtl"==this.dir.value;return"start"==t?t=l?r:i:"end"==t&&(t=l?i:r),l&&2==ru()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:l&&1==ru()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(sm),u.Y36(u.R0b),u.Y36(zl,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),om=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Jt.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(iu(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ai),u.LFG(u.R0b),u.LFG(ne,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ty=new u.OlP("VIRTUAL_SCROLLABLE");let xT=(()=>{class n extends eE{constructor(t,i,r,s){super(t,i,r,s)}measureViewportSize(t){const i=this.elementRef.nativeElement;return"horizontal"===t?i.clientWidth:i.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(sm),u.Y36(u.R0b),u.Y36(zl,8))},n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const tE=typeof requestAnimationFrame<"u"?uT:fT;let zL=(()=>{class n extends xT{get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=fs(t)}constructor(t,i,r,s,l,h,p,_){super(t,h,r,l),this.elementRef=t,this._changeDetectorRef=i,this._scrollStrategy=s,this.scrollable=_,this._platform=(0,u.f3M)(Ai),this._detachedSubject=new Jt.x,this._renderedRangeSubject=new Jt.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new Qn.y(w=>this._scrollStrategy.scrolledIndexChange.subscribe(x=>Promise.resolve().then(()=>this.ngZone.run(()=>w.next(x))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=zr.w0.EMPTY,this._viewportChanges=p.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(As(null),iu(0,tE)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(mo(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function jL(n,e){return n.start==e.start&&n.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,i="to-start"){t=this.appendOnly&&"to-start"===i?0:t;const s="horizontal"==this.orientation,l=s?"X":"Y";let p=`translate${l}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===i&&(p+=` translate${l}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=p&&(this._renderedContentTransform=p,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=t:r.top=t,this.scrollable.scrollTo(r)}scrollToIndex(t,i="auto"){this._scrollStrategy.scrollToIndex(t,i)}measureScrollOffset(t){let i;return i=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let i;const r="left",s="right",l="rtl"==this.dir?.value;i="start"==t?l?s:r:"end"==t?l?r:s:t||("horizontal"===this.orientation?"left":"top");const h=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-h}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of t)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(u.R0b),u.Y36(Sy,8),u.Y36(zl,8),u.Y36(sm),u.Y36(om),u.Y36(Ty,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,i){if(1&t&&u.Gf(Dy,7),2&t){let r;u.iGM(r=u.CRH())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,i){2&t&&u.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[u._Bn([{provide:eE,useFactory:(e,t)=>e||t,deps:[[new u.FiY,new u.tBr(Ty)],n]}]),u.qOj,u.jDz],ngContentSelectors:ET,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,i){1&t&&(u.F$t(),u.TgZ(0,"div",0,1),u.Hsn(2),u.qZA(),u._UZ(3,"div",2)),2&t&&(u.xp6(3),u.Udp("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),iE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),Os=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[su,iE,zL,su,iE]}),n})();class Sa{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Ta extends Sa{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class $l extends Sa{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class au extends Sa{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class Aa{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Ta?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof $l?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof au?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class lu extends Aa{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=l=>{const h=l.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||u.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let lm=(()=>{class n extends Aa{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=s=>{const l=s.element,h=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(h,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(l,h)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(ne))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]}),n})(),Sh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();var Th=B(6451);const Ry=Ey();class sE{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=$n(-this._previousScrollPosition.left),e.style.top=$n(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",l=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Ry&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ry&&(i.scrollBehavior=s,r.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class MT{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Xn(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class oE{enable(){}disable(){}attach(){}}function cm(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function aE(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class lE{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();cm(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ky=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new oE,this.close=l=>new MT(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new sE(this._viewportRuler,this._document),this.reposition=l=>new lE(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(sm),u.LFG(om),u.LFG(u.R0b),u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class um{constructor(e){if(this.scrollStrategy=new oE,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class dm{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let hm=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Py=(()=>{class n extends hm{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const h=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(r)):h.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uE=(()=>{class n extends hm{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=jl(s)},this._clickListener=s=>{const l=jl(s),h="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let _=p.length-1;_>-1;_--){const w=p[_];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(w.overlayElement.contains(l)||w.overlayElement.contains(h))break;const x=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>x.next(s)):x.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne),u.LFG(Ai),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ah=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||xy()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),xy()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne),u.LFG(Ai))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Gl{constructor(e,t,i,r,s,l,h,p,_,w=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=l,this._document=h,this._location=p,this._outsideClickDispatcher=_,this._animationsDisabled=w,this._backdropElement=null,this._backdropClick=new Jt.x,this._attachments=new Jt.x,this._detachments=new Jt.x,this._locationChanges=zr.w0.EMPTY,this._backdropClickHandler=x=>this._backdropClick.next(x),this._backdropTransitionendHandler=x=>{this._disposeBackdrop(x.target)},this._keydownEvents=new Jt.x,this._outsidePointerEvents=new Jt.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(dr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=$n(this._config.width),e.height=$n(this._config.height),e.minWidth=$n(this._config.minWidth),e.minHeight=$n(this._config.minHeight),e.maxWidth=$n(this._config.maxWidth),e.maxHeight=$n(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=nu(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(mo((0,Th.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Ny="cdk-overlay-connected-position-bounding-box",dE=/([A-Za-z%]+)$/;class Fy{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Jt.x,this._resizeSubscription=zr.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(Ny),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let l;for(let h of this._preferredPositions){let p=this._getOriginPoint(e,r,h),_=this._getOverlayPoint(p,t,h),w=this._getOverlayFit(_,t,i,h);if(w.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(w,_,i)?s.push({position:h,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!l||l.overlayFit.visibleArea<w.visibleArea)&&(l={overlayFit:w,overlayPoint:_,originPoint:p,position:h,overlayRect:t})}if(s.length){let h=null,p=-1;for(const _ of s){const w=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);w>p&&(p=w,h=_)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ma(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ny),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;r="start"==i.originX?l:h}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=Ly(t);let{x:l,y:h}=e,p=this._getOffset(r,"x"),_=this._getOffset(r,"y");p&&(l+=p),_&&(h+=_);let T=0-h,P=h+s.height-i.height,V=this._subtractOverflows(s.width,0-l,l+s.width-i.width),W=this._subtractOverflows(s.height,T,P),re=V*W;return{visibleArea:re,isCompletelyWithinViewport:s.width*s.height===re,fitsInViewportVertically:W===s.height,fitsInViewportHorizontally:V==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,l=hE(this._overlayRef.getConfig().minHeight),h=hE(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=l&&l<=r)&&(e.fitsInViewportHorizontally||null!=h&&h<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=Ly(t),s=this._viewportRect,l=Math.max(e.x+r.width-s.width,0),h=Math.max(e.y+r.height-s.height,0),p=Math.max(s.top-i.top-e.y,0),_=Math.max(s.left-i.left-e.x,0);let w=0,x=0;return w=r.width<=s.width?_||-l:e.x<this._viewportMargin?s.left-i.left-e.x:0,x=r.height<=s.height?p||-h:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:w,y:x},{x:e.x+w,y:e.y+x}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new dm(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,l,h,w,x,T;if("top"===t.overlayY)l=e.y,s=i.height-l+this._viewportMargin;else if("bottom"===t.overlayY)h=i.height-e.y+2*this._viewportMargin,s=i.height-h+this._viewportMargin;else{const P=Math.min(i.bottom-e.y+i.top,e.y),V=this._lastBoundingBoxSize.height;s=2*P,l=e.y-P,s>V&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-V/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)T=i.width-e.x+this._viewportMargin,w=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)x=e.x,w=i.right-e.x;else{const P=Math.min(i.right-e.x+i.left,e.x),V=this._lastBoundingBoxSize.width;w=2*P,x=e.x-P,w>V&&!this._isInitialRender&&!this._growAfterOpen&&(x=e.x-V/2)}return{top:l,left:x,bottom:h,right:T,width:w,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;r.height=$n(i.height),r.top=$n(i.top),r.bottom=$n(i.bottom),r.width=$n(i.width),r.left=$n(i.left),r.right=$n(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=$n(s)),l&&(r.maxWidth=$n(l))}this._lastBoundingBoxSize=i,Ma(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ma(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ma(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(r){const w=this._viewportRuler.getViewportScrollPosition();Ma(i,this._getExactOverlayY(t,e,w)),Ma(i,this._getExactOverlayX(t,e,w))}else i.position="static";let h="",p=this._getOffset(t,"x"),_=this._getOffset(t,"y");p&&(h+=`translateX(${p}px) `),_&&(h+=`translateY(${_}px)`),i.transform=h.trim(),l.maxHeight&&(r?i.maxHeight=$n(l.maxHeight):s&&(i.maxHeight="")),l.maxWidth&&(r?i.maxWidth=$n(l.maxWidth):s&&(i.maxWidth="")),Ma(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=$n(s.y),r}_getExactOverlayX(e,t,i){let l,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=$n(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:aE(e,i),isOriginOutsideView:cm(e,i),isOverlayClipped:aE(t,i),isOverlayOutsideView:cm(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&nu(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Ma(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function hE(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(dE);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Ly(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Vy="cdk-global-overlay-wrapper";class OT{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Vy),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:l,maxHeight:h}=i,p=!("100%"!==r&&"100vw"!==r||l&&"100%"!==l&&"100vw"!==l),_=!("100%"!==s&&"100vh"!==s||h&&"100%"!==h&&"100vh"!==h),w=this._xPosition,x=this._xOffset,T="rtl"===this._overlayRef.getConfig().direction;let P="",V="",W="";p?W="flex-start":"center"===w?(W="center",T?V=x:P=x):T?"left"===w||"end"===w?(W="flex-end",P=x):("right"===w||"start"===w)&&(W="flex-start",V=x):"left"===w||"start"===w?(W="flex-start",P=x):("right"===w||"end"===w)&&(W="flex-end",V=x),e.position=this._cssPosition,e.marginLeft=p?"0":P,e.marginTop=_?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=p?"0":V,t.justifyContent=W,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Vy),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let fE=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new OT}flexibleConnectedTo(t){return new Fy(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(om),u.LFG(ne),u.LFG(Ai),u.LFG(Ah))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pE=0,Wl=(()=>{class n{constructor(t,i,r,s,l,h,p,_,w,x,T,P){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=h,this._ngZone=p,this._document=_,this._directionality=w,this._location=x,this._outsideClickDispatcher=T,this._animationsModuleType=P}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),l=new um(t);return l.direction=l.direction||this._directionality.value,new Gl(s,i,r,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+pE++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new lu(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ky),u.LFG(Ah),u.LFG(u._Vd),u.LFG(fE),u.LFG(Py),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(ne),u.LFG(zl),u.LFG(Se),u.LFG(uE),u.LFG(u.QbO,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _E={provide:new u.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Wl],useFactory:function gE(n){return()=>n.scrollStrategies.reposition()}};let Uy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Wl,_E],imports:[su,Sh,Os,Os]}),n})();function Ky(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Yy(n){return Xn((e,t)=>n<=t)}function Zy(n,e=Hr.y){return n=n??bA,(0,Ln.e)((t,i)=>{let r,s=!0;t.subscribe((0,yn.x)(i,l=>{const h=e(l);(s||!n(r,h))&&(s=!1,r=h,i.next(l))}))})}function bA(n,e){return n===e}function SE(n,e=Eh){return(0,Ln.e)((t,i)=>{let r=null,s=null,l=null;const h=()=>{if(r){r.unsubscribe(),r=null;const _=s;s=null,i.next(_)}};function p(){const _=l+n,w=e.now();if(w<_)return r=this.schedule(void 0,_-w),void i.add(r);h()}t.subscribe((0,yn.x)(i,_=>{s=_,l=e.now(),r||(r=e.schedule(p,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{s=r=null}))})}let TE=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oh=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=ks(t);return new Qn.y(r=>{const l=this._observeElement(i).subscribe(r);return()=>{l.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new Jt.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(TE))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wA=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=fs(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=tu(t),this._subscribe()}constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(SE(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Oh),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),AE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[TE]}),n})();const Ph=new Set;let Yl,ME=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):EA}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function RE(n){if(!Ph.has(n))try{Yl||(Yl=document.createElement("style"),Yl.setAttribute("type","text/css"),document.head.appendChild(Yl)),Yl.sheet&&(Yl.sheet.insertRule(`@media ${n} {body{ }}`,0),Ph.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ai))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function EA(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Nh=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Jt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return uu(nu(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=Bd(uu(nu(t)).map(l=>this._registerQuery(l).observable));return s=wl(s.pipe(dr(1)),s.pipe(Yy(1),SE(0))),s.pipe((0,ot.U)(l=>{const h={matches:!1,breakpoints:{}};return l.forEach(({matches:p,query:_})=>{h.matches=h.matches||p,h.breakpoints[_]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new Qn.y(l=>{const h=p=>this._zone.run(()=>l.next(p));return i.addListener(h),()=>{i.removeListener(h)}}).pipe(As(i),(0,ot.U)(({matches:l})=>({query:t,matches:l})),mo(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ME),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uu(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let pm=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function OE(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function AA(n){try{return n.frameElement}catch{return null}}(function FA(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===PE(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=PE(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function NE(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function NA(n){return!function MA(n){return function kA(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Fh(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function RA(n){return function OA(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||PA(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ai))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PA(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function PE(n){if(!PA(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Lh{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(dr(1)).subscribe(e)}}let Jy=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Lh(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pm),u.LFG(u.R0b),u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mm(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function FE(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const LE=new u.OlP("cdk-input-modality-detector-options"),VE={ignoreKeys:[18,17,224,91,16]},du=xa({passive:!0,capture:!0});let UA=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new ur(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(h=>h===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=jl(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(mm(l)?"keyboard":"mouse"),this._mostRecentTarget=jl(l))},this._onTouchstart=l=>{FE(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=jl(l))},this._options={...VE,...s},this.modalityDetected=this._modality.pipe(Yy(1)),this.modalityChanged=this.modalityDetected.pipe(Zy()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,du),r.addEventListener("mousedown",this._onMousedown,du),r.addEventListener("touchstart",this._onTouchstart,du)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,du),document.removeEventListener("mousedown",this._onMousedown,du),document.removeEventListener("touchstart",this._onTouchstart,du))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ai),u.LFG(u.R0b),u.LFG(ne),u.LFG(LE,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zA=new u.OlP("cdk-focus-monitor-default-options"),gm=xa({passive:!0,capture:!0});let _m=(()=>{class n{constructor(t,i,r,s,l){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Jt.x,this._rootNodeFocusAndBlurListener=h=>{for(let _=jl(h);_;_=_.parentElement)"focus"===h.type?this._onFocus(h,_):this._onBlur(h,_)},this._document=s,this._detectionMode=l?.detectionMode||0}monitor(t,i=!1){const r=ks(t);if(!this._platform.isBrowser||1!==r.nodeType)return We(null);const s=function Ch(n){if(function _T(){if(null==Cy){const n=typeof document<"u"?document.head:null;Cy=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Cy}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),l=this._elementInfo.get(r);if(l)return i&&(l.checkChildren=!0),l.subject;const h={checkChildren:i,subject:new Jt.x,rootNode:s};return this._elementInfo.set(r,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const i=ks(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=ks(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=jl(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,gm),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,gm)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(mo(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,gm),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,gm),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let l=0;l<s.length;l++)if(s[l].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(Ai),u.LFG(UA),u.LFG(ne,8),u.LFG(zA,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HE="cdk-high-contrast-black-on-white",ev="cdk-high-contrast-white-on-black",ym="cdk-high-contrast-active";let jE=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=(0,u.f3M)(Nh).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(ym,HE,ev),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(ym,HE):2===i&&t.add(ym,ev)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ai),u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$A=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(jE))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[AE]}),n})();function zE(n,e){}class vm{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let $E=(()=>{class n extends Aa{constructor(t,i,r,s,l,h,p,_){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=l,this._ngZone=h,this._overlayRef=p,this._focusMonitor=_,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=w=>{this._portalOutlet.hasAttached();const x=this._portalOutlet.attachDomPortal(w);return this._contentAttached(),x},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=Iy(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=Iy();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Iy())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Jy),u.Y36(ne,8),u.Y36(vm),u.Y36(pm),u.Y36(u.R0b),u.Y36(Gl),u.Y36(_m))},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&u.Gf(lm,7),2&t){let r;u.iGM(r=u.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&u.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[u.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&u.YNc(0,zE,0,0,"ng-template",0)},dependencies:[lm],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class Vh{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Jt.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Ky(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const bm=new u.OlP("DialogScrollStrategy"),GE=new u.OlP("DialogData"),tv=new u.OlP("DefaultDialogConfig"),WA={provide:bm,deps:[Wl],useFactory:function GA(n){return()=>n.scrollStrategies.block()}};let nv=0,WE=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,l,h){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Jt.x,this._afterOpenedAtThisLevel=new Jt.x,this._ariaHiddenElements=new Map,this.afterAllClosed=ya(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(As(void 0))),this._scrollStrategy=h}open(t,i){(i={...this._defaultOptions||new vm,...i}).id=i.id||"cdk-dialog-"+nv++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),l=this._overlay.create(s),h=new Vh(l,i),p=this._attachContainer(l,h,i);return h.containerInstance=p,this._attachDialogContent(t,h,p,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(h),h.closed.subscribe(()=>this._removeOpenDialog(h,!0)),this.afterOpened.next(h),h}closeAll(){wm(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){wm(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),wm(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new um({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,l=[{provide:vm,useValue:r},{provide:Vh,useValue:i},{provide:Gl,useValue:t}];let h;r.container?"function"==typeof r.container?h=r.container:(h=r.container.type,l.push(...r.container.providers(r))):h=$E;const p=new Ta(h,r.viewContainerRef,u.zs3.create({parent:s||this._injector,providers:l}),r.componentFactoryResolver);return t.attach(p).instance}_attachDialogContent(t,i,r,s){if(t instanceof u.Rgc){const l=this._createInjector(s,i,r,void 0);let h={$implicit:s.data,dialogRef:i};s.templateContext&&(h={...h,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new $l(t,null,h,l))}else{const l=this._createInjector(s,i,r,this._injector),h=r.attachComponentPortal(new Ta(t,s.viewContainerRef,l,s.componentFactoryResolver));i.componentInstance=h.instance}}_createInjector(t,i,r,s){const l=t.injector||t.viewContainerRef?.injector,h=[{provide:GE,useValue:t.data},{provide:Vh,useValue:i}];return t.providers&&("function"==typeof t.providers?h.push(...t.providers(i,t,r)):h.push(...t.providers)),t.direction&&(!l||!l.get(zl,null,{optional:!0}))&&h.push({provide:zl,useValue:{value:t.direction,change:We()}}),u.zs3.create({parent:l||s,providers:h})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,l)=>{s?l.setAttribute("aria-hidden",s):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wl),u.LFG(u.zs3),u.LFG(tv,8),u.LFG(n,12),u.LFG(Ah),u.LFG(bm))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function wm(n,e){let t=n.length;for(;t--;)e(n[t])}let hu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[WE,WA],imports:[Uy,Sh,$A,Sh]}),n})();const ZE=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function YE(){return!0}});let Ar=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!xy()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(jE),u.LFG(ZE,8),u.LFG(ne))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[su,su]}),n})();function QE(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=fs(e)}constructor(...e){super(...e),this._disabled=!1}}}function QA(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function XE(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=fs(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function XA(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let nM=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class JE{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const rv=xa({passive:!0,capture:!0});class sM{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=jl(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const l=s.get(i);l?l.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,rv)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,rv)))}}const eC={enterDuration:225,exitDuration:150},tC=xa({passive:!0,capture:!0}),nC=["mousedown","touchstart"],iC=["mouseup","mouseleave","touchend","touchcancel"];class Bh{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ks(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...eC,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const l=i.radius||function oM(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),h=e-r.left,p=t-r.top,_=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=h-l+"px",w.style.top=p-l+"px",w.style.height=2*l+"px",w.style.width=2*l+"px",null!=i.color&&(w.style.backgroundColor=i.color),w.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(w);const x=window.getComputedStyle(w),P=x.transitionDuration,V="none"===x.transitionProperty||"0s"===P||"0s, 0s"===P||0===r.width&&0===r.height,W=new JE(this,w,i,V);w.style.transform="scale3d(1, 1, 1)",W.state=0,i.persistent||(this._mostRecentTransientRipple=W);let re=null;return!V&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Re=()=>this._finishRippleTransition(W),Ge=()=>this._destroyRipple(W);w.addEventListener("transitionend",Re),w.addEventListener("transitioncancel",Ge),re={onTransitionEnd:Re,onTransitionCancel:Ge}}),this._activeRipples.set(W,re),(V||!_)&&this._finishRippleTransition(W),W}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...eC,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ks(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,nC.forEach(i=>{Bh._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{iC.forEach(t=>{this._triggerElement.addEventListener(t,this,tC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=mm(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!FE(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(nC.forEach(t=>Bh._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&iC.forEach(t=>e.removeEventListener(t,this,tC)))}}Bh._eventManager=new sM;const Uh=new u.OlP("mat-ripple-global-options");let sv=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Bh(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(Ai),u.Y36(Uh,8),u.Y36(u.QbO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),ov=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ar,Ar]}),n})();class xm{}class cv{}const yo="*";function Dm(n,e){return{type:7,name:n,definitions:e,options:{}}}function Hh(n,e=null){return{type:4,styles:e,timings:n}}function aC(n,e=null){return{type:2,steps:n,options:e}}function Ra(n){return{type:6,styles:n,offset:null}}function uv(n,e,t){return{type:0,name:n,styles:e,options:t}}function jh(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function fv(n){Promise.resolve().then(n)}class pu{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){fv(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class lC{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?fv(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Sm="!";function cC(n,e){}class Ri{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const ka="mdc-dialog--open",uC="mdc-dialog--opening",dC="mdc-dialog--closing";let hC=(()=>{class n extends $E{constructor(t,i,r,s,l,h,p,_){super(t,i,r,s,l,h,p,_),this._animationStateChanged=new u.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Jy),u.Y36(ne,8),u.Y36(Ri),u.Y36(pm),u.Y36(u.R0b),u.Y36(Gl),u.Y36(_m))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],features:[u.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();const Tm="--mat-dialog-transition-duration";function mu(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?tu(n.substring(0,n.length-2)):n.endsWith("s")?1e3*tu(n.substring(0,n.length-1)):"0"===n?0:null}let fM=(()=>{class n extends hC{constructor(t,i,r,s,l,h,p,_,w){super(t,i,r,s,l,h,p,w),this._animationMode=_,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?mu(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?mu(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Tm,`${this._openAnimationDuration}ms`),this._hostElement.classList.add(uC),this._hostElement.classList.add(ka),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(ka),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(ka),this._animationsEnabled?(this._hostElement.style.setProperty(Tm,`${this._openAnimationDuration}ms`),this._hostElement.classList.add(dC),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(uC),this._hostElement.classList.remove(dC)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Jy),u.Y36(ne,8),u.Y36(Ri),u.Y36(pm),u.Y36(u.R0b),u.Y36(Gl),u.Y36(u.QbO,8),u.Y36(_m))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(t,i){2&t&&(u.Ikx("id",i._config.id),u.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),u.ekj("_mat-animation-noopable",!i._animationsEnabled))},features:[u.qOj],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u.YNc(2,cC,0,0,"ng-template",2),u.qZA()())},dependencies:[lm],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),n})();class gu{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Jt.x,this._beforeClosed=new Jt.x,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Xn(r=>"opened"===r.state),dr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Xn(r=>"closed"===r.state),dr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Th.T)(this.backdropClick(),this.keydownEvents().pipe(Xn(r=>27===r.keyCode&&!this.disableClose&&!Ky(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),fC(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Xn(t=>"closing"===t.state),dr(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function fC(n,e,t){return n._closeInteractionType=e,n.close(t)}const pC=new u.OlP("MatMdcDialogData"),pM=new u.OlP("mat-mdc-dialog-default-options"),mC=new u.OlP("mat-mdc-dialog-scroll-strategy"),pv={provide:mC,deps:[Wl],useFactory:function mM(n){return()=>n.scrollStrategies.block()}};let gC=0,Am=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,l,h,p,_,w,x){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=p,this._dialogContainerType=_,this._dialogDataToken=w,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Jt.x,this._afterOpenedAtThisLevel=new Jt.x,this._idPrefix="mat-dialog-",this.dialogConfigClass=Ri,this.afterAllClosed=ya(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(As(void 0))),this._scrollStrategy=h,this._dialog=i.get(WE)}open(t,i){let r;(i={...this._defaultOptions||new Ri,...i}).id=i.id||`${this._idPrefix}${gC++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:vm,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(l,h,p)=>(r=new this._dialogRefConstructor(l,i,p),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:p},{provide:this._dialogDataToken,useValue:h.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const l=this.openDialogs.indexOf(r);l>-1&&(this.openDialogs.splice(l,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),_u=(()=>{class n extends Am{constructor(t,i,r,s,l,h,p,_){super(t,i,s,h,p,l,gu,fM,pC,_),this._idPrefix="mat-mdc-dialog-"}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wl),u.LFG(u.zs3),u.LFG(Se,8),u.LFG(pM,8),u.LFG(mC),u.LFG(n,12),u.LFG(Ah),u.LFG(u.QbO,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),CB=0,_C=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=vC(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){fC(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(gu,8),u.Y36(u.SBq),u.Y36(_u))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,i){1&t&&u.NdJ("click",function(s){return i._onButtonClick(s)}),2&t&&u.uIk("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[u.TTD]}),n})(),_M=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+CB++}ngOnInit(){this._dialogRef||(this._dialogRef=vC(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(gu,8),u.Y36(u.SBq),u.Y36(_u))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,i){2&t&&u.Ikx("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),yC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),n})(),yu=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(t,i){2&t&&u.ekj("mat-mdc-dialog-actions-align-center","center"===i.align)("mat-mdc-dialog-actions-align-end","end"===i.align)},inputs:{align:"align"}}),n})();function vC(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}let bC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[_u,pv],imports:[hu,Uy,Sh,Ar,Ar]}),n})();const yM=["mat-button",""],vM=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],wC=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],EC=["mat-fab",""],IM=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],CC=QA(QE(XE(class{constructor(n){this._elementRef=n}})));let mv=(()=>{class n extends CC{constructor(t,i,r,s){super(t),this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=(0,u.f3M)(_m),this._isFab=!1;const l=t.nativeElement.classList;for(const h of IM)this._hasHostAttributes(h.selector)&&h.mdcClasses.forEach(p=>{l.add(p)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...t){return t.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,i){if(1&t&&u.Gf(sv,5),2&t){let r;u.iGM(r=u.CRH())&&(i.ripple=r.first)}},features:[u.qOj]}),n})(),DM=(()=>{class n extends mv{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Ai),u.Y36(u.R0b),u.Y36(u.QbO,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(t,i){2&t&&(u.uIk("disabled",i.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:yM,ngContentSelectors:wC,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){1&t&&(u.F$t(vM),u._UZ(0,"span",0),u.Hsn(1),u.TgZ(2,"span",1),u.Hsn(3,1),u.qZA(),u.Hsn(4,2),u._UZ(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(u.ekj("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab),u.xp6(6),u.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[sv],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})();const xC=new u.OlP("mat-mdc-fab-default-options",{providedIn:"root",factory:SM});function SM(){return{color:"accent"}}const TM=SM();let MB=(()=>{class n extends mv{get extended(){return this._extended}set extended(t){this._extended=fs(t)}constructor(t,i,r,s,l){super(t,i,r,s),this._options=l,this._isFab=!0,this._options=this._options||TM,this.color=this.defaultColor=this._options.color||TM.color}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Ai),u.Y36(u.R0b),u.Y36(u.QbO,8),u.Y36(xC,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(t,i){2&t&&(u.uIk("disabled",i.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0)("mdc-fab--extended",i.extended)("mat-mdc-extended-fab",i.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[u.qOj],attrs:EC,ngContentSelectors:wC,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){1&t&&(u.F$t(vM),u._UZ(0,"span",0),u.Hsn(1),u.TgZ(2,"span",1),u.Hsn(3,1),u.qZA(),u.Hsn(4,2),u._UZ(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(u.ekj("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab),u.xp6(6),u.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[sv],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),n})(),RB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ar,ov,Ar]}),n})();const DC=["matFormFieldNotchedOutline",""],Rm=["*"],SC=["textField"],TC=["iconPrefixContainer"],kB=["textPrefixContainer"];function _v(n,e){1&n&&u._UZ(0,"span",19)}function AC(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"label",17),u.NdJ("cdkObserveContent",function(){u.CHM(t);const r=u.oxw(2);return u.KtG(r._refreshOutlineNotchWidth())}),u.Hsn(1,1),u.YNc(2,_v,1,0,"span",18),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("floating",t._shouldLabelFloat())("cdkObserveContentDisabled",!t._hasOutline())("id",t._labelId),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required)}}function AM(n,e){if(1&n&&u.YNc(0,AC,3,6,"label",16),2&n){const t=u.oxw();u.Q6J("ngIf",t._hasFloatingLabel())}}function OB(n,e){1&n&&u._UZ(0,"div",20)}function MM(n,e){}function RM(n,e){if(1&n&&u.YNc(0,MM,0,0,"ng-template",22),2&n){u.oxw(2);const t=u.MAs(1);u.Q6J("ngTemplateOutlet",t)}}function kM(n,e){if(1&n&&(u.TgZ(0,"div",21),u.YNc(1,RM,1,1,"ng-template",9),u.qZA()),2&n){const t=u.oxw();u.Q6J("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",t._labelWidth),u.xp6(1),u.Q6J("ngIf",!t._forceDisplayInfixLabel())}}function km(n,e){1&n&&(u.TgZ(0,"div",23,24),u.Hsn(2,2),u.qZA())}function OM(n,e){1&n&&(u.TgZ(0,"div",25,26),u.Hsn(2,3),u.qZA())}function PB(n,e){}function NB(n,e){if(1&n&&u.YNc(0,PB,0,0,"ng-template",22),2&n){u.oxw();const t=u.MAs(1);u.Q6J("ngTemplateOutlet",t)}}function FB(n,e){1&n&&(u.TgZ(0,"div",27),u.Hsn(1,4),u.qZA())}function PM(n,e){1&n&&(u.TgZ(0,"div",28),u.Hsn(1,5),u.qZA())}function NM(n,e){1&n&&u._UZ(0,"div",29)}function FM(n,e){if(1&n&&(u.TgZ(0,"div",30),u.Hsn(1,6),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function LB(n,e){if(1&n&&(u.TgZ(0,"mat-hint",34),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function LM(n,e){if(1&n&&(u.TgZ(0,"div",31),u.YNc(1,LB,2,2,"mat-hint",32),u.Hsn(2,7),u._UZ(3,"div",33),u.Hsn(4,8),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const MC=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],RC=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let kC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})();const VM=new u.OlP("MatError");let BM=0,UM=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+BM++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,i){2&t&&(u.Ikx("id",i.id),u.uIk("align",null),u.ekj("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}}),n})();const ps=new u.OlP("MatPrefix"),yv=new u.OlP("MatSuffix");let PC=(()=>{class n{constructor(t){this._elementRef=t,this.floating=!1}getWidth(){return function vv(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating"}}),n})();const bv="mdc-line-ripple--active",zh="mdc-line-ripple--deactivating";let NC=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,l=s.contains(zh);"opacity"===r.propertyName&&l&&s.remove(bv,zh)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(zh),t.add(bv)}deactivate(){this._elementRef.nativeElement.classList.add(zh)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),wv=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mdc-notched-outline--notched",i.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:DC,ngContentSelectors:Rm,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(t,i){1&t&&(u.F$t(),u._UZ(0,"div",0),u.TgZ(1,"div",1),u.Hsn(2),u.qZA(),u._UZ(3,"div",2)),2&t&&(u.xp6(1),u.Udp("width",i._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const FC={transitionMessages:Dm("transitionMessages",[uv("enter",Ra({opacity:1,transform:"translateY(0%)"})),jh("void => enter",[Ra({opacity:0,transform:"translateY(-5px)"}),Hh("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let LC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const bo=new u.OlP("MatFormField"),Oa=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Ev=0,jM=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=fs(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,s,l,h,p,_){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=l,this._defaults=h,this._animationMode=p,this._document=_,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Ev++,this._hintLabelId="mat-mdc-hint-"+Ev++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Jt.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,h&&(h.appearance&&(this.appearance=h.appearance),this._hideRequiredMarker=Boolean(h?.hideRequiredMarker),h.color&&(this.color=h.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(mo(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,Th.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(mo(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(mo(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+l}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(u.R0b),u.Y36(zl),u.Y36(Ai),u.Y36(Oa,8),u.Y36(u.QbO,8),u.Y36(ne))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,kC,5),u.Suo(r,kC,7),u.Suo(r,LC,5),u.Suo(r,ps,5),u.Suo(r,yv,5),u.Suo(r,VM,5),u.Suo(r,UM,5)),2&t){let s;u.iGM(s=u.CRH())&&(i._labelChildNonStatic=s.first),u.iGM(s=u.CRH())&&(i._labelChildStatic=s.first),u.iGM(s=u.CRH())&&(i._formFieldControl=s.first),u.iGM(s=u.CRH())&&(i._prefixChildren=s),u.iGM(s=u.CRH())&&(i._suffixChildren=s),u.iGM(s=u.CRH())&&(i._errorChildren=s),u.iGM(s=u.CRH())&&(i._hintChildren=s)}},viewQuery:function(t,i){if(1&t&&(u.Gf(SC,5),u.Gf(TC,5),u.Gf(kB,5),u.Gf(PC,5),u.Gf(wv,5),u.Gf(NC,5)),2&t){let r;u.iGM(r=u.CRH())&&(i._textField=r.first),u.iGM(r=u.CRH())&&(i._iconPrefixContainer=r.first),u.iGM(r=u.CRH())&&(i._textPrefixContainer=r.first),u.iGM(r=u.CRH())&&(i._floatingLabel=r.first),u.iGM(r=u.CRH())&&(i._notchedOutline=r.first),u.iGM(r=u.CRH())&&(i._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,i){2&t&&u.ekj("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:bo,useExisting:n}])],ngContentSelectors:RC,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(t,i){1&t&&(u.F$t(MC),u.YNc(0,AM,1,1,"ng-template",null,0,u.W1O),u.TgZ(2,"div",1,2),u.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),u.YNc(4,OB,1,0,"div",3),u.TgZ(5,"div",4),u.YNc(6,kM,2,3,"div",5),u.YNc(7,km,3,0,"div",6),u.YNc(8,OM,3,0,"div",7),u.TgZ(9,"div",8),u.YNc(10,NB,1,1,"ng-template",9),u.Hsn(11),u.qZA(),u.YNc(12,FB,2,0,"div",10),u.YNc(13,PM,2,0,"div",11),u.qZA(),u.YNc(14,NM,1,0,"div",12),u.qZA(),u.TgZ(15,"div",13),u.YNc(16,FM,2,1,"div",14),u.YNc(17,LM,5,2,"div",15),u.qZA()),2&t&&(u.xp6(2),u.ekj("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),u.xp6(2),u.Q6J("ngIf",!i._hasOutline()&&!i._control.disabled),u.xp6(2),u.Q6J("ngIf",i._hasOutline()),u.xp6(1),u.Q6J("ngIf",i._hasIconPrefix),u.xp6(1),u.Q6J("ngIf",i._hasTextPrefix),u.xp6(2),u.Q6J("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),u.xp6(2),u.Q6J("ngIf",i._hasTextSuffix),u.xp6(1),u.Q6J("ngIf",i._hasIconSuffix),u.xp6(1),u.Q6J("ngIf",!i._hasOutline()),u.xp6(1),u.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),u.Q6J("ngSwitch",i._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},dependencies:[qs,Zs,ss,od,wA,UM,PC,wv,NC],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[FC.transitionMessages]},changeDetection:0}),n})(),Cv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ar,yc,AE,Ar]}),n})();function HC(...n){const e=(0,ro.jO)(n),{args:t,keys:i}=ga(n),r=new Qn.y(s=>{const{length:l}=t;if(!l)return void s.complete();const h=new Array(l);let p=l,_=l;for(let w=0;w<l;w++){let x=!1;(0,Ts.Xf)(t[w]).subscribe((0,yn.x)(s,T=>{x||(x=!0,_--),h[w]=T},()=>p--,void 0,()=>{(!p||!x)&&(_||s.next(i?_a(i,h):h),s.complete())}))}});return e?r.pipe(Vc(e)):r}let jC=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Pa=(()=>{class n extends jC{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Jo=new u.OlP("NgValueAccessor"),GC={provide:Jo,useExisting:(0,u.Gpc)(()=>$h),multi:!0},Iv=new u.OlP("CompositionEventMode");let $h=(()=>{class n extends jC{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jB(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Iv,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&u.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[u._Bn([GC]),u.qOj]}),n})();const WC=!1;function ea(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function xv(n){return null!=n&&"number"==typeof n.length}const $i=new u.OlP("NgValidators"),Ns=new u.OlP("NgAsyncValidators"),Pm=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qC{static min(e){return function KC(n){return e=>{if(ea(e.value)||ea(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function YC(n){return e=>{if(ea(e.value)||ea(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function zM(n){return ea(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function $M(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function GM(n){return ea(n.value)||Pm.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Dv(n){return e=>ea(e.value)||!xv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function ZC(n){return e=>xv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function QC(n){if(!n)return Nm;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(ea(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return Gh(e)}static composeAsync(e){return JC(e)}}function Nm(n){return null}function WM(n){return null!=n}function qM(n){const e=(0,u.QGY)(n)?(0,Wt.D)(n):n;if(WC&&!(0,u.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new u.vHH(-1101,t)}return e}function KM(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function YM(n,e){return e.map(t=>t(n))}function XC(n){return n.map(e=>function zB(n){return!n.validate}(e)?e:t=>e.validate(t))}function Gh(n){if(!n)return null;const e=n.filter(WM);return 0==e.length?null:function(t){return KM(YM(t,e))}}function Sv(n){return null!=n?Gh(XC(n)):null}function JC(n){if(!n)return null;const e=n.filter(WM);return 0==e.length?null:function(t){return HC(YM(t,e).map(qM)).pipe((0,ot.U)(KM))}}function Fm(n){return null!=n?JC(XC(n)):null}function Na(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Tv(n){return n._rawValidators}function Lm(n){return n._rawAsyncValidators}function Wh(n){return n?Array.isArray(n)?n:[n]:[]}function Vm(n,e){return Array.isArray(n)?n.includes(e):n===e}function Bm(n,e){const t=Wh(e);return Wh(n).forEach(r=>{Vm(t,r)||t.push(r)}),t}function Um(n,e){return Wh(e).filter(t=>!Vm(n,t))}class qh{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Sv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Fm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Mr extends qh{get formDirective(){return null}get path(){return null}}class Fa extends qh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ZM{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let eI=(()=>{class n extends ZM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Fa,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[u.qOj]}),n})();function sI(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Mv=!1,Kh="VALID",Rv="INVALID",Yh="PENDING",zm="DISABLED";function oI(n){return(kv(n)?n.validators:n)||null}function aI(n,e){return(kv(e)?e.asyncValidators:n)||null}function kv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class oR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Kh}get invalid(){return this.status===Rv}get pending(){return this.status==Yh}get disabled(){return this.status===zm}get enabled(){return this.status!==zm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Bm(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bm(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Um(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Um(e,this._rawAsyncValidators))}hasValidator(e){return Vm(this._rawValidators,e)}hasAsyncValidator(e){return Vm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Yh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zm,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Kh,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kh||this.status===Yh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zm:Kh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Yh,this._hasOwnPendingAsyncValidator=!0;const t=qM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?zm:this.errors?Rv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yh)?Yh:this._anyControlsHaveStatus(Rv)?Rv:Kh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function iR(n){return Array.isArray(n)?Sv(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function KB(n){return Array.isArray(n)?Fm(n):n||null}(this._rawAsyncValidators)}}class o extends oR{constructor(e,t,i){super(oI(t),aI(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function sR(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new u.vHH(1002,Mv?function nR(n,e){return`Must supply a value for form control ${sI(n,e)}`}(e,r):"")})})(this,!0,e),Object.keys(e).forEach(i=>{(function rR(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new u.vHH(1e3,Mv?function WB(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!i[t])throw new u.vHH(1001,Mv?function qB(n,e){return`Cannot find form control ${sI(n,e)}`}(e,t):"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const m=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>v}),v="always";function I(n,e,t=v){q(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function de(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&je(n,e)})}(n,e),function at(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ne(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&je(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function F(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function D(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),ee(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function M(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function q(n,e){const t=Tv(n);null!==e.validator?n.setValidators(Na(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=Lm(n);null!==e.asyncValidator?n.setAsyncValidators(Na(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();M(e._rawValidators,r),M(e._rawAsyncValidators,r)}function ee(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=Tv(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=Lm(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return M(e._rawValidators,i),M(e._rawAsyncValidators,i),t}function je(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function bt(n,e){q(n,e)}function YB(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const E4={provide:Mr,useExisting:(0,u.Gpc)(()=>lI)},Ov=(()=>Promise.resolve())();let lI=(()=>{class n extends Mr{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new o({},Sv(t),Fm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ov.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),I(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ov.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ov.then(()=>{const i=this._findContainer(t.path),r=new o({});bt(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ov.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Ov.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,YB(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36($i,10),u.Y36(Ns,10),u.Y36(m,8))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([E4]),u.qOj]}),n})();function ZB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function QB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const XB=class extends oR{constructor(e=null,t,i){super(oI(t),aI(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=QB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){QB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},x4={provide:Fa,useExisting:(0,u.Gpc)(()=>cR)},t2=(()=>Promise.resolve())();let cR=(()=>{class n extends Fa{constructor(t,i,r,s,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new XB,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function lR(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===$h?t=s:function b4(n){return Object.getPrototypeOf(n.constructor)===Pa}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function aR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){I(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){t2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&(0,u.D6c)(i);t2.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function C(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Mr,9),u.Y36($i,10),u.Y36(Ns,10),u.Y36(Jo,10),u.Y36(u.sBO,8),u.Y36(m,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([x4]),u.qOj,u.TTD]}),n})(),r2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const k4={provide:Mr,useExisting:(0,u.Gpc)(()=>cI)};let cI=(()=>{class n extends Mr{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ee(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return I(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){D(t.control||null,t,!1),function w4(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,YB(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(D(i||null,t),(n=>n instanceof XB)(r)&&(I(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);bt(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function Ie(n,e){return ee(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){q(this.form,this),this._oldForm&&ee(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36($i,10),u.Y36(Ns,10),u.Y36(m,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([k4]),u.qOj,u.TTD]}),n})(),Z4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[r2]}),n})(),X4=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:m,useValue:t.callSetDisabledState??v}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Z4]}),n})();const E2=xa({passive:!0});let J4=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return ds.E;const i=ks(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Jt.x,l="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(l)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(i.classList.add(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",h,E2),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",h,E2)}}),s}stopMonitoring(t){const i=ks(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ai),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),e6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const t6=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),n6=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let i6=0;const r6=XA(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new Jt.x}});let s6=(()=>{class n extends r6{get disabled(){return this._disabled}set disabled(t){this._disabled=fs(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(qC.required)??!1}set required(t){this._required=fs(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&im().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=fs(t)}constructor(t,i,r,s,l,h,p,_,w,x){super(h,s,l,r),this._elementRef=t,this._platform=i,this._autofillMonitor=_,this._formField=x,this._uid="mat-input-"+i6++,this.focused=!1,this.stateChanges=new Jt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(V=>im().has(V)),this._iOSKeyupListener=V=>{const W=V.target;!W.value&&0===W.selectionStart&&0===W.selectionEnd&&(W.setSelectionRange(1,1),W.setSelectionRange(0,0))};const T=this._elementRef.nativeElement,P=T.nodeName.toLowerCase();this._inputValueAccessor=p||T,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&w.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!x,this._isNativeSelect&&(this.controlType=T.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){n6.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Ai),u.Y36(Fa,10),u.Y36(lI,8),u.Y36(cI,8),u.Y36(nM),u.Y36(t6,10),u.Y36(J4),u.Y36(u.R0b),u.Y36(bo,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,i){1&t&&u.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(u.Ikx("id",i.id)("disabled",i.disabled)("required",i.required),u.uIk("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),u.ekj("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:LC,useExisting:n}]),u.qOj,u.TTD]}),n})(),o6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ar,Cv,Cv,e6,Ar]}),n})(),a6=(()=>{class n{constructor(t){this.dialogRef=t,this.name=""}ngOnInit(){}onNoClick(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(gu))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dialog-add-player"]],decls:14,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill"],["matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(t,i){1&t&&(u.TgZ(0,"h1",0),u._uU(1,"Add new player"),u.qZA(),u.TgZ(2,"div",1)(3,"p"),u._uU(4,"Please enter the name"),u.qZA(),u.TgZ(5,"mat-form-field",2)(6,"mat-label"),u._uU(7,"Name"),u.qZA(),u.TgZ(8,"input",3),u.NdJ("ngModelChange",function(s){return i.name=s}),u.qZA()()(),u.TgZ(9,"div",4)(10,"button",5),u.NdJ("click",function(){return i.onNoClick()}),u._uU(11,"No Thanks"),u.qZA(),u.TgZ(12,"button",6),u._uU(13,"Ok"),u.qZA()()),2&t&&(u.xp6(8),u.Q6J("ngModel",i.name),u.xp6(4),u.Q6J("disabled",0==i.name.length)("mat-dialog-close",i.name))},dependencies:[DM,_C,_M,yC,yu,jM,kC,$h,eI,cR,s6]}),n})();var $t=B(9681);(0,$t.registerVersion)("firebase","9.19.1","app");var G=B(2090),wo=B(4859),Fs=B(1877),$m=B(8766);const C2="@firebase/installations",mR="0.6.4",I2=1e4,x2=`w:${mR}`,D2="FIS_v2",u6="https://firebaseinstallations.googleapis.com/v1",d6=36e5,Zl=new G.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function S2(n){return n instanceof G.ZR&&n.code.includes("request-failed")}function gR({projectId:n}){return`${u6}/projects/${n}/installations`}function T2(n){return{token:n.token,requestStatus:2,expiresIn:m6(n.expiresIn),creationTime:Date.now()}}function _R(n,e){return yR.apply(this,arguments)}function yR(){return(yR=(0,K.Z)(function*(n,e){const i=(yield e.json()).error;return Zl.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})).apply(this,arguments)}function A2({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function vR(n){return bR.apply(this,arguments)}function bR(){return(bR=(0,K.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function m6(n){return Number(n.replace("s","000"))}function wR(){return(wR=(0,K.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=gR(n),r=A2(n),s=e.getImmediate({optional:!0});if(s){const _=yield s.getHeartbeatsHeader();_&&r.append("x-firebase-client",_)}const h={method:"POST",headers:r,body:JSON.stringify({fid:t,authVersion:D2,appId:n.appId,sdkVersion:x2})},p=yield vR(()=>fetch(i,h));if(p.ok){const _=yield p.json();return{fid:_.fid||t,registrationStatus:2,refreshToken:_.refreshToken,authToken:T2(_.authToken)}}throw yield _R("Create Installation",p)})).apply(this,arguments)}function R2(n){return new Promise(e=>{setTimeout(e,n)})}const v6=/^[cdef][\w-]{21}$/,ER="";function b6(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function w6(n){return function y6(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return v6.test(t)?t:ER}catch{return ER}}function Gm(n){return`${n.appName}!${n.appId}`}const Wm=new Map;function k2(n,e){const t=Gm(n);O2(t,e),function I6(n,e){const t=function P2(){return!Qh&&"BroadcastChannel"in self&&(Qh=new BroadcastChannel("[Firebase] FID Change"),Qh.onmessage=n=>{O2(n.data.key,n.data.fid)}),Qh}();t&&t.postMessage({key:n,fid:e}),function N2(){0===Wm.size&&Qh&&(Qh.close(),Qh=null)}()}(t,e)}function O2(n,e){const t=Wm.get(n);if(t)for(const i of t)i(e)}let Qh=null;const x6="firebase-installations-database",D6=1,Xh="firebase-installations-store";let CR=null;function IR(){return CR||(CR=(0,$m.X3)(x6,D6,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Xh)}})),CR}function uI(n,e){return xR.apply(this,arguments)}function xR(){return(xR=(0,K.Z)(function*(n,e){const t=Gm(n),r=(yield IR()).transaction(Xh,"readwrite"),s=r.objectStore(Xh),l=yield s.get(t);return yield s.put(e,t),yield r.done,(!l||l.fid!==e.fid)&&k2(n,e.fid),e})).apply(this,arguments)}function DR(n){return SR.apply(this,arguments)}function SR(){return(SR=(0,K.Z)(function*(n){const e=Gm(n),i=(yield IR()).transaction(Xh,"readwrite");yield i.objectStore(Xh).delete(e),yield i.done})).apply(this,arguments)}function Pv(n,e){return TR.apply(this,arguments)}function TR(){return(TR=(0,K.Z)(function*(n,e){const t=Gm(n),r=(yield IR()).transaction(Xh,"readwrite"),s=r.objectStore(Xh),l=yield s.get(t),h=e(l);return void 0===h?yield s.delete(t):yield s.put(h,t),yield r.done,h&&(!l||l.fid!==h.fid)&&k2(n,h.fid),h})).apply(this,arguments)}function AR(n){return MR.apply(this,arguments)}function MR(){return MR=(0,K.Z)(function*(n){let e;const t=yield Pv(n.appConfig,i=>{const r=function S6(n){return L2(n||{fid:b6(),registrationStatus:0})}(i),s=function T6(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Zl.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function A6(n,e){return RR.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:M6(n)}:{installationEntry:e}}(n,r);return e=s.registrationPromise,s.installationEntry});return t.fid===ER?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),MR.apply(this,arguments)}function RR(){return RR=(0,K.Z)(function*(n,e){try{const t=yield function _6(n,e){return wR.apply(this,arguments)}(n,e);return uI(n.appConfig,t)}catch(t){throw S2(t)&&409===t.customData.serverCode?yield DR(n.appConfig):yield uI(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),RR.apply(this,arguments)}function M6(n){return kR.apply(this,arguments)}function kR(){return(kR=(0,K.Z)(function*(n){let e=yield F2(n.appConfig);for(;1===e.registrationStatus;)yield R2(100),e=yield F2(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield AR(n);return i||t}return e})).apply(this,arguments)}function F2(n){return Pv(n,e=>{if(!e)throw Zl.create("installation-not-found");return L2(e)})}function L2(n){return function R6(n){return 1===n.registrationStatus&&n.registrationTime+I2<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function OR(){return(OR=(0,K.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=function O6(n,{fid:e}){return`${gR(n)}/${e}/authTokens:generate`}(n,t),r=function M2(n,{refreshToken:e}){const t=A2(n);return t.append("Authorization",function g6(n){return`${D2} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const _=yield s.getHeartbeatsHeader();_&&r.append("x-firebase-client",_)}const h={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:x2,appId:n.appId}})},p=yield vR(()=>fetch(i,h));if(p.ok)return T2(yield p.json());throw yield _R("Generate Auth Token",p)})).apply(this,arguments)}function PR(n){return NR.apply(this,arguments)}function NR(){return NR=(0,K.Z)(function*(n,e=!1){let t;const i=yield Pv(n.appConfig,s=>{if(!B2(s))throw Zl.create("not-registered");const l=s.authToken;if(!e&&function F6(n){return 2===n.requestStatus&&!function L6(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+d6}(n)}(l))return s;if(1===l.requestStatus)return t=function P6(n,e){return FR.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw Zl.create("app-offline");const h=function V6(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function N6(n,e){return LR.apply(this,arguments)}(n,h),h}});return t?yield t:i.authToken}),NR.apply(this,arguments)}function FR(){return(FR=(0,K.Z)(function*(n,e){let t=yield V2(n.appConfig);for(;1===t.authToken.requestStatus;)yield R2(100),t=yield V2(n.appConfig);const i=t.authToken;return 0===i.requestStatus?PR(n,e):i})).apply(this,arguments)}function V2(n){return Pv(n,e=>{if(!B2(e))throw Zl.create("not-registered");return function B6(n){return 1===n.requestStatus&&n.requestTime+I2<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function LR(){return LR=(0,K.Z)(function*(n,e){try{const t=yield function k6(n,e){return OR.apply(this,arguments)}(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield uI(n.appConfig,i),t}catch(t){if(!S2(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield uI(n.appConfig,i)}else yield DR(n.appConfig);throw t}}),LR.apply(this,arguments)}function B2(n){return void 0!==n&&2===n.registrationStatus}function VR(){return(VR=(0,K.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield AR(e);return i?i.catch(console.error):PR(e).catch(console.error),t.fid})).apply(this,arguments)}function BR(){return BR=(0,K.Z)(function*(n,e=!1){const t=n;return yield function j6(n){return UR.apply(this,arguments)}(t),(yield PR(t,e)).token}),BR.apply(this,arguments)}function UR(){return(UR=(0,K.Z)(function*(n){const{registrationPromise:e}=yield AR(n);e&&(yield e)})).apply(this,arguments)}function zR(n){return Zl.create("missing-app-config-values",{valueName:n})}const U2="installations",q6=n=>{const e=n.getProvider("app").getImmediate(),t=function G6(n){if(!n||!n.options)throw zR("App Configuration");if(!n.name)throw zR("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw zR(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,$t._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},K6=n=>{const e=n.getProvider("app").getImmediate(),t=(0,$t._getProvider)(e,U2).getImmediate();return{getId:()=>function U6(n){return VR.apply(this,arguments)}(t),getToken:r=>function H6(n){return BR.apply(this,arguments)}(t,r)}};(function Y6(){(0,$t._registerComponent)(new wo.wA(U2,q6,"PUBLIC")),(0,$t._registerComponent)(new wo.wA("installations-internal",K6,"PRIVATE"))})(),(0,$t.registerVersion)(C2,mR),(0,$t.registerVersion)(C2,mR,"esm2017");const $R="@firebase/remote-config",ms=new G.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class a5{constructor(e,t,i,r){this.client=e,this.storage=t,this.storageCache=i,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const i=Date.now()-t,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return(0,K.Z)(function*(){const[i,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,i))return r;e.eTag=r&&r.eTag;const s=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&l.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(l),s})()}}function l5(n=navigator){return n.languages&&n.languages[0]||n.language}class c5{constructor(e,t,i,r,s,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=l}fetch(e){var t=this;return(0,K.Z)(function*(){const[i,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,h={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},p={sdk_version:t.sdkVersion,app_instance_id:i,app_instance_id_token:r,app_id:t.appId,language_code:l5()},_={method:"POST",headers:h,body:JSON.stringify(p)},w=fetch(l,_),x=new Promise((Re,Ge)=>{e.signal.addEventListener(()=>{const Xe=new Error("The operation was aborted.");Xe.name="AbortError",Ge(Xe)})});let T;try{yield Promise.race([w,x]),T=yield w}catch(Re){let Ge="fetch-client-network";throw"AbortError"===Re?.name&&(Ge="fetch-timeout"),ms.create(Ge,{originalErrorMessage:Re?.message})}let P=T.status;const V=T.headers.get("ETag")||void 0;let W,re;if(200===T.status){let Re;try{Re=yield T.json()}catch(Ge){throw ms.create("fetch-client-parse",{originalErrorMessage:Ge?.message})}W=Re.entries,re=Re.state}if("INSTANCE_STATE_UNSPECIFIED"===re?P=500:"NO_CHANGE"===re?P=304:("NO_TEMPLATE"===re||"EMPTY_CONFIG"===re)&&(W={}),304!==P&&200!==P)throw ms.create("fetch-status",{httpStatus:P});return{status:P,eTag:V,config:W}})()}}class h5{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,K.Z)(function*(){const i=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,i)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:i}){var r=this;return(0,K.Z)(function*(){yield function u5(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(ms.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),s}catch(s){if(!function d5(n){if(!(n instanceof G.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const l={throttleEndTimeMillis:Date.now()+(0,G.$s)(i),backoffCount:i+1};return yield r.storage.setThrottleMetadata(l),r.attemptFetch(e,l)}})()}}class m5{constructor(e,t,i,r,s){this.app=e,this._client=t,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function hI(n,e){const t=n.target.error||void 0;return ms.create(e,{originalErrorMessage:t&&t?.message})}const Jh="app_namespace_store";class v5{constructor(e,t,i,r=function y5(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=i=>{e(hI(i,"storage-open"))},t.onsuccess=i=>{n(i.target.result)},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Jh,{keyPath:"compositeKey"})}}catch(t){e(ms.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,K.Z)(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{const h=i.transaction([Jh],"readonly").objectStore(Jh),p=t.createCompositeKey(e);try{const _=h.get(p);_.onerror=w=>{s(hI(w,"storage-get"))},_.onsuccess=w=>{const x=w.target.result;r(x?x.value:void 0)}}catch(_){s(ms.create("storage-get",{originalErrorMessage:_?.message}))}})})()}set(e,t){var i=this;return(0,K.Z)(function*(){const r=yield i.openDbPromise;return new Promise((s,l)=>{const p=r.transaction([Jh],"readwrite").objectStore(Jh),_=i.createCompositeKey(e);try{const w=p.put({compositeKey:_,value:t});w.onerror=x=>{l(hI(x,"storage-set"))},w.onsuccess=()=>{s()}}catch(w){l(ms.create("storage-set",{originalErrorMessage:w?.message}))}})})()}delete(e){var t=this;return(0,K.Z)(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{const h=i.transaction([Jh],"readwrite").objectStore(Jh),p=t.createCompositeKey(e);try{const _=h.delete(p);_.onerror=w=>{s(hI(w,"storage-delete"))},_.onsuccess=()=>{r()}}catch(_){s(ms.create("storage-delete",{originalErrorMessage:_?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class b5{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,K.Z)(function*(){const t=e.storage.getLastFetchStatus(),i=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const l=yield i;l&&(e.lastSuccessfulFetchTimestampMillis=l);const h=yield r;h&&(e.activeConfig=h)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function E5(){return YR.apply(this,arguments)}function YR(){return(YR=(0,K.Z)(function*(){if(!(0,G.hl)())return!1;try{return yield(0,G.eu)()}catch{return!1}})).apply(this,arguments)}!function w5(){(0,$t._registerComponent)(new wo.wA("remote-config",function n(e,{instanceIdentifier:t}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ms.create("registration-window");if(!(0,G.hl)())throw ms.create("indexed-db-unavailable");const{projectId:s,apiKey:l,appId:h}=i.options;if(!s)throw ms.create("registration-project-id");if(!l)throw ms.create("registration-api-key");if(!h)throw ms.create("registration-app-id");const p=new v5(h,i.name,t=t||"firebase"),_=new b5(p),w=new Fs.Yd($R);w.logLevel=Fs.in.ERROR;const x=new c5(r,$t.SDK_VERSION,t,s,l,h),T=new h5(x,p),P=new a5(T,p,_,w),V=new m5(i,P,_,p,w);return function r5(n){const e=(0,G.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(V),V},"PUBLIC").setMultipleInstances(!0)),(0,$t.registerVersion)($R,"0.4.4"),(0,$t.registerVersion)($R,"0.4.4","esm2017")}();const C5="/firebase-messaging-sw.js",I5="/firebase-cloud-messaging-push-scope",$2="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",x5="https://fcmregistrations.googleapis.com/v1",G2="google.c.a.c_id",D5="google.c.a.c_l",S5="google.c.a.ts",T5="google.c.a.e";var qm=(()=>{return(n=qm||(qm={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",qm;var n})();function Ql(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function A5(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}const ZR="fcm_token_details_db",M5=5,W2="fcm_token_object_Store";function QR(){return QR=(0,K.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(ZR))return null;let e=null;return(yield(0,$m.X3)(ZR,M5,{upgrade:(i=(0,K.Z)(function*(r,s,l,h){var p;if(s<2||!r.objectStoreNames.contains(W2))return;const _=h.objectStore(W2),w=yield _.index("fcmSenderId").get(n);if(yield _.clear(),w)if(2===s){const x=w;if(!x.auth||!x.p256dh||!x.endpoint)return;e={token:x.fcmToken,createTime:null!==(p=x.createTime)&&void 0!==p?p:Date.now(),subscriptionOptions:{auth:x.auth,p256dh:x.p256dh,endpoint:x.endpoint,swScope:x.swScope,vapidKey:"string"==typeof x.vapidKey?x.vapidKey:Ql(x.vapidKey)}}}else if(3===s){const x=w;e={token:x.fcmToken,createTime:x.createTime,subscriptionOptions:{auth:Ql(x.auth),p256dh:Ql(x.p256dh),endpoint:x.endpoint,swScope:x.swScope,vapidKey:Ql(x.vapidKey)}}}else if(4===s){const x=w;e={token:x.fcmToken,createTime:x.createTime,subscriptionOptions:{auth:Ql(x.auth),p256dh:Ql(x.p256dh),endpoint:x.endpoint,swScope:x.swScope,vapidKey:Ql(x.vapidKey)}}}}),function(s,l,h,p){return i.apply(this,arguments)})})).close(),yield(0,$m.Lj)(ZR),yield(0,$m.Lj)("fcm_vapid_details_db"),yield(0,$m.Lj)("undefined"),function k5(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var i}),QR.apply(this,arguments)}const O5="firebase-messaging-database",P5=1,ef="firebase-messaging-store";let XR=null;function JR(){return XR||(XR=(0,$m.X3)(O5,P5,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ef)}})),XR}function q2(n){return ek.apply(this,arguments)}function ek(){return ek=(0,K.Z)(function*(n){const e=rk(n),i=yield(yield JR()).transaction(ef).objectStore(ef).get(e);if(i)return i;{const r=yield function R5(n){return QR.apply(this,arguments)}(n.appConfig.senderId);if(r)return yield tk(n,r),r}}),ek.apply(this,arguments)}function tk(n,e){return nk.apply(this,arguments)}function nk(){return(nk=(0,K.Z)(function*(n,e){const t=rk(n),r=(yield JR()).transaction(ef,"readwrite");return yield r.objectStore(ef).put(e,t),yield r.done,e})).apply(this,arguments)}function ik(){return(ik=(0,K.Z)(function*(n){const e=rk(n),i=(yield JR()).transaction(ef,"readwrite");yield i.objectStore(ef).delete(e),yield i.done})).apply(this,arguments)}function rk({appConfig:n}){return n.appId}const fr=new G.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function L5(n,e){return sk.apply(this,arguments)}function sk(){return(sk=(0,K.Z)(function*(n,e){const t=yield ck(n),i=Y2(e),r={method:"POST",headers:t,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(lk(n.appConfig),r)).json()}catch(l){throw fr.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(s.error)throw fr.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw fr.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function ok(){return(ok=(0,K.Z)(function*(n,e){const t=yield ck(n),i=Y2(e.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(`${lk(n.appConfig)}/${e.token}`,r)).json()}catch(l){throw fr.create("token-update-failed",{errorInfo:l?.toString()})}if(s.error)throw fr.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw fr.create("token-update-no-token");return s.token})).apply(this,arguments)}function K2(n,e){return ak.apply(this,arguments)}function ak(){return(ak=(0,K.Z)(function*(n,e){const i={method:"DELETE",headers:yield ck(n)};try{const s=yield(yield fetch(`${lk(n.appConfig)}/${e}`,i)).json();if(s.error)throw fr.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(r){throw fr.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})).apply(this,arguments)}function lk({projectId:n}){return`${x5}/projects/${n}/registrations`}function ck(n){return uk.apply(this,arguments)}function uk(){return(uk=(0,K.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function Y2({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==$2&&(r.web.applicationPubKey=i),r}const B5=6048e5;function dk(){return dk=(0,K.Z)(function*(n){const e=yield function j5(n,e){return mk.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ql(e.getKey("auth")),p256dh:Ql(e.getKey("p256dh"))},i=yield q2(n.firebaseDependencies);if(i){if(function z5(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(i.subscriptionOptions,t))return Date.now()>=i.createTime+B5?function H5(n,e){return fk.apply(this,arguments)}(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{yield K2(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return Q2(n.firebaseDependencies,t)}return Q2(n.firebaseDependencies,t)}),dk.apply(this,arguments)}function hk(){return hk=(0,K.Z)(function*(n){const e=yield q2(n.firebaseDependencies);e&&(yield K2(n.firebaseDependencies,e.token),yield function N5(n){return ik.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),hk.apply(this,arguments)}function fk(){return fk=(0,K.Z)(function*(n,e){try{const t=yield function V5(n,e){return ok.apply(this,arguments)}(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield tk(n.firebaseDependencies,i),t}catch(t){throw yield function Z2(n){return hk.apply(this,arguments)}(n),t}}),fk.apply(this,arguments)}function Q2(n,e){return pk.apply(this,arguments)}function pk(){return(pk=(0,K.Z)(function*(n,e){const i={token:yield L5(n,e),createTime:Date.now(),subscriptionOptions:e};return yield tk(n,i),i.token})).apply(this,arguments)}function mk(){return(mk=(0,K.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:A5(e)})})).apply(this,arguments)}function X2(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function $5(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function G5(n,e){e.data&&(n.data=e.data)}(e,n),function W5(n,e){var t,i,r,s,l;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const h=null!==(r=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=e.notification)||void 0===s?void 0:s.click_action;h&&(n.fcmOptions.link=h);const p=null===(l=e.fcmOptions)||void 0===l?void 0:l.analytics_label;p&&(n.fcmOptions.analyticsLabel=p)}(e,n),e}function J2(n,e){const t=[];for(let i=0;i<n.length;i++)t.push(n.charAt(i)),i<e.length&&t.push(e.charAt(i));return t.join("")}function gk(n){return fr.create("missing-app-config-values",{valueName:n})}J2("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),J2("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Y5{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function K5(n){if(!n||!n.options)throw gk("App Configuration Object");if(!n.name)throw gk("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw gk(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}function eU(n){return _k.apply(this,arguments)}function _k(){return(_k=(0,K.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(C5,{scope:I5}),n.swRegistration.update().catch(()=>{})}catch(e){throw fr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function yk(){return(yk=(0,K.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield eU(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw fr.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function vk(){return(vk=(0,K.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=$2)})).apply(this,arguments)}function bk(){return bk=(0,K.Z)(function*(n,e){if(!navigator)throw fr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fr.create("permission-blocked");return yield function Q5(n,e){return vk.apply(this,arguments)}(n,e?.vapidKey),yield function Z5(n,e){return yk.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function U5(n){return dk.apply(this,arguments)}(n)}),bk.apply(this,arguments)}function wk(){return(wk=(0,K.Z)(function*(n,e,t){const i=function J5(n){switch(n){case qm.NOTIFICATION_CLICKED:return"notification_open";case qm.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[G2],message_name:t[D5],message_time:t[S5],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ek(){return Ek=(0,K.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===qm.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(X2(t)):n.onMessageHandler.next(X2(t)));const i=t.data;(function q5(n){return"object"==typeof n&&!!n&&G2 in n})(i)&&"1"===i[T5]&&(yield function X5(n,e,t){return wk.apply(this,arguments)}(n,t.messageType,i))}),Ek.apply(this,arguments)}const nU="@firebase/messaging",t8=n=>{const e=new Y5(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function e8(n,e){return Ek.apply(this,arguments)}(e,t)),e},n8=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>function tU(n,e){return bk.apply(this,arguments)}(e,i)}};function rU(){return Ck.apply(this,arguments)}function Ck(){return(Ck=(0,K.Z)(function*(){try{yield(0,G.eu)()}catch{return!1}return typeof window<"u"&&(0,G.hl)()&&(0,G.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function i8(){(0,$t._registerComponent)(new wo.wA("messaging",t8,"PUBLIC")),(0,$t._registerComponent)(new wo.wA("messaging-internal",n8,"PRIVATE")),(0,$t.registerVersion)(nU,"0.12.4"),(0,$t.registerVersion)(nU,"0.12.4","esm2017")}();const fI="analytics",o8="firebase_id",a8="origin",l8=6e4,c8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Dk="https://www.googletagmanager.com/gtag/js",er=new Fs.Yd("@firebase/analytics"),gs=new G.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function d8(n){if(!n.startsWith(Dk)){const e=gs.create("invalid-gtag-resource",{gtagURL:n});return er.warn(e.message),""}return n}function sU(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Sk(){return(Sk=(0,K.Z)(function*(n,e,t,i,r,s){const l=i[r];try{if(l)yield e[l];else{const p=(yield sU(t)).find(_=>_.measurementId===r);p&&(yield e[p.appId])}}catch(h){er.error(h)}n("config",r,s)})).apply(this,arguments)}function Tk(){return(Tk=(0,K.Z)(function*(n,e,t,i,r){try{let s=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const h=yield sU(t);for(const p of l){const _=h.find(x=>x.measurementId===p),w=_&&e[_.appId];if(!w){s=[];break}s.push(w)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",i,r||{})}catch(s){er.error(s)}})).apply(this,arguments)}const b8=30,oU=new class E8{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function C8(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Ak(){return(Ak=(0,K.Z)(function*(n){var e;const{appId:t,apiKey:i}=n,r={method:"GET",headers:C8(i)},s=c8.replace("{app-id}",t),l=yield fetch(s,r);if(200!==l.status&&304!==l.status){let h="";try{const p=yield l.json();null!==(e=p.error)&&void 0!==e&&e.message&&(h=p.error.message)}catch{}throw gs.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()})).apply(this,arguments)}function Mk(){return(Mk=(0,K.Z)(function*(n,e=oU,t){const{appId:i,apiKey:r,measurementId:s}=n.options;if(!i)throw gs.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw gs.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new T8;return setTimeout((0,K.Z)(function*(){h.abort()}),void 0!==t?t:l8),aU({appId:i,apiKey:r,measurementId:s},l,h,e)})).apply(this,arguments)}function aU(n,e,t){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,K.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=oU){var s;const{appId:l,measurementId:h}=n;try{yield function D8(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(gs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(i,e)}catch(p){if(h)return er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{const p=yield function I8(n){return Ak.apply(this,arguments)}(n);return r.deleteThrottleMetadata(l),p}catch(p){const _=p;if(!function S8(n){if(!(n instanceof G.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(_)){if(r.deleteThrottleMetadata(l),h)return er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${_?.message}]`),{appId:l,measurementId:h};throw p}const w=503===Number(null===(s=_?.customData)||void 0===s?void 0:s.httpStatus)?(0,G.$s)(t,r.intervalMillis,b8):(0,G.$s)(t,r.intervalMillis),x={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return r.setThrottleMetadata(l,x),er.debug(`Calling attemptFetch again in ${w} millis`),aU(n,x,i,r)}}),Rk.apply(this,arguments)}class T8{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let kk,Vk;function Ok(){return(Ok=(0,K.Z)(function*(n,e,t,i,r){if(r&&r.global)n("event",t,i);else{const s=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:s}))}})).apply(this,arguments)}function Bk(){return(Bk=(0,K.Z)(function*(){if(!(0,G.hl)())return er.warn(gs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,G.eu)()}catch(n){return er.warn(gs.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function Uk(){return Uk=(0,K.Z)(function*(n,e,t,i,r,s,l){var h;const p=function x8(n){return Mk.apply(this,arguments)}(n);p.then(P=>{t[P.measurementId]=P.appId,n.options.measurementId&&P.measurementId!==n.options.measurementId&&er.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${P.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(P=>er.error(P)),e.push(p);const _=function P8(){return Bk.apply(this,arguments)}().then(P=>{if(P)return i.getId()}),[w,x]=yield Promise.all([p,_]);(function v8(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Dk)&&t.src.includes(n))return t;return null})(s)||function f8(n,e){const t=function h8(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:d8}),i=document.createElement("script"),r=`${Dk}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(s,w.measurementId),Vk&&(r("consent","default",Vk),function lU(n){Vk=n}(void 0)),r("js",new Date);const T=null!==(h=l?.config)&&void 0!==h?h:{};return T[a8]="firebase",T.update=!0,null!=x&&(T[o8]=x),r("config",w.measurementId,T),kk&&(r("set",kk),function cU(n){kk=n}(void 0)),w.measurementId}),Uk.apply(this,arguments)}class F8{constructor(e){this.app=e}_delete(){return delete Xl[this.app.options.appId],Promise.resolve()}}let Xl={},uU=[];const dU={};let fU,Jl,pI="dataLayer",hU="gtag",Hk=!1;function V8(n,e,t){!function L8(){const n=[];if((0,G.ru)()&&n.push("This is a browser extension environment."),(0,G.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=gs.create("invalid-analytics-context",{errorInfo:e});er.warn(t.message)}}();const i=n.options.appId;if(!i)throw gs.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw gs.create("no-api-key");er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xl[i])throw gs.create("already-exists",{id:i});if(!Hk){!function p8(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(pI);const{wrappedGtag:s,gtagCore:l}=function y8(n,e,t,i,r){let s=function(...l){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function _8(n,e,t,i){function s(){return s=(0,K.Z)(function*(l,h,p){try{"event"===l?yield function g8(n,e,t,i,r){return Tk.apply(this,arguments)}(n,e,t,h,p):"config"===l?yield function m8(n,e,t,i,r,s){return Sk.apply(this,arguments)}(n,e,t,i,h,p):"consent"===l?n("consent","update",p):n("set",h)}catch(_){er.error(_)}}),s.apply(this,arguments)}return function r(l,h,p){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}(Xl,uU,dU,pI,hU);Jl=s,fU=l,Hk=!0}return Xl[i]=function N8(n,e,t,i,r,s,l){return Uk.apply(this,arguments)}(n,uU,dU,e,fU,pI,t),new F8(n)}function U8(){return jk.apply(this,arguments)}function jk(){return(jk=(0,K.Z)(function*(){if((0,G.ru)()||!(0,G.zI)()||!(0,G.hl)())return!1;try{return yield(0,G.eu)()}catch{return!1}})).apply(this,arguments)}const pU="@firebase/analytics";!function j8(){(0,$t._registerComponent)(new wo.wA(fI,(e,{options:t})=>V8(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,$t._registerComponent)(new wo.wA("analytics-internal",function n(e){try{const t=e.getProvider(fI).getImmediate();return{logEvent:(i,r,s)=>function H8(n,e,t,i){n=(0,G.m9)(n),function A8(n,e,t,i,r){return Ok.apply(this,arguments)}(Jl,Xl[n.app.options.appId],e,t,i).catch(r=>er.error(r))}(t,i,r,s)}}catch(t){throw gs.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,$t.registerVersion)(pU,"0.9.5"),(0,$t.registerVersion)(pU,"0.9.5","esm2017")}();const G8=new class $8 extends Jp{}(class z8 extends py{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}});var Nv=B(9468),Km=B(5363);const Ym=new u.GfV("7.5.0"),zk="__angularfire_symbol__analyticsIsSupportedValue",$k="__angularfire_symbol__analyticsIsSupported",Gk="__angularfire_symbol__remoteConfigIsSupportedValue",Wk="__angularfire_symbol__remoteConfigIsSupported",qk="__angularfire_symbol__messagingIsSupportedValue",Kk="__angularfire_symbol__messagingIsSupported";function mI(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(l=>l.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[$k]||(globalThis[$k]=U8().then(n=>globalThis[zk]=n).catch(()=>globalThis[zk]=!1)),globalThis[Kk]||(globalThis[Kk]=rU().then(n=>globalThis[qk]=n).catch(()=>globalThis[qk]=!1)),globalThis[Wk]||(globalThis[Wk]=E5().then(n=>globalThis[Gk]=n).catch(()=>globalThis[Gk]=!1));const gI=(n,e)=>{const t=e?[e]:(0,$t.getApps)(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(l=>{i.includes(l)||i.push(l)})}),i};function Zm(){}class gU{constructor(e,t=G8){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(l){r.runGuarded(()=>{e.apply(this,[l])})},t,i)}}class W8{constructor(e){this.zone=e,this.task=null}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zm,{},Zm,Zm)),t.pipe(Jn({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Qm=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new gU(Zone.current)),this.insideAngular=t.run(()=>new gU(Zone.current,Eh)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tf(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function nf(n){return tf().ngZone.run(()=>n())}function Ls(n){return tf(),function K8(n){return function(t){return(t=t.lift(new W8(n.ngZone))).pipe((0,Nv.R)(n.outsideAngular),(0,Km.Q)(n.insideAngular))}}(tf())(n)}const Y8=(n,e)=>function(){const i=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),nf(()=>n.apply(void 0,i))},La=(n,e)=>function(){let t;const i=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof i[s]&&(e&&(t||(t=nf(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zm,{},Zm,Zm)))),i[s]=Y8(i[s],t));const r=function q8(n){return tf().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,i));if(!e){if(r instanceof Qn.y){const s=tf();return r.pipe((0,Nv.R)(s.outsideAngular),(0,Km.Q)(s.insideAngular))}return nf(()=>r)}return r instanceof Qn.y?r.pipe(Ls):r instanceof Promise?nf(()=>new Promise((s,l)=>r.then(h=>nf(()=>s(h)),h=>nf(()=>l(h))))):"function"==typeof r&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),r.apply(this,arguments)}:nf(()=>r)};class rf{constructor(e){return e}}class _I{constructor(){return(0,$t.getApps)()}}const Zk=new u.OlP("angularfire2._apps"),Q8={provide:rf,useFactory:function Z8(n){return n&&1===n.length?n[0]:new rf((0,$t.getApp)())},deps:[[new u.FiY,Zk]]},X8={provide:_I,deps:[[new u.FiY,Zk]]};function J8(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new rf(i)}}let eK=(()=>{class n{constructor(t){(0,$t.registerVersion)("angularfire",Ym.full,"core"),(0,$t.registerVersion)("angularfire",Ym.full,"app"),(0,$t.registerVersion)("angular",u.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Q8,X8]}),n})();function tK(n,...e){return{ngModule:eK,providers:[{provide:Zk,useFactory:J8(n),multi:!0,deps:[u.R0b,u.zs3,Qm,...e]}]}}const nK=La($t.initializeApp,!0),Qk=new Map,_U={activated:!1,tokenObservers:[]},iK={initialized:!1,enabled:!1};function pr(n){return Qk.get(n)||Object.assign({},_U)}function yI(){return iK}const Xk="https://content-firebaseappcheck.googleapis.com/v1",aK="exchangeDebugToken",yU={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class cK{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,K.Z)(function*(){t.stop();try{t.pending=new G.BH,yield function uK(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new G.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Yr=new G.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function eO(n,e){return tO.apply(this,arguments)}function tO(){return(tO=(0,K.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const x=yield r.getHeartbeatsHeader();x&&(i["X-Firebase-Client"]=x)}const s={method:"POST",body:JSON.stringify(e),headers:i};let l,h;try{l=yield fetch(n,s)}catch(x){throw Yr.create("fetch-network-error",{originalErrorMessage:x?.message})}if(200!==l.status)throw Yr.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(x){throw Yr.create("fetch-parse-error",{originalErrorMessage:x?.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Yr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const _=1e3*Number(p[1]),w=Date.now();return{token:h.token,expireTimeMillis:w+_,issuedAtTimeMillis:w}})).apply(this,arguments)}const mK="firebase-app-check-database",gK=1,Fv="firebase-app-check-store";let wI=null;function EU(n,e){return nO.apply(this,arguments)}function nO(){return(nO=(0,K.Z)(function*(n,e){const i=(yield function wU(){return wI||(wI=new Promise((n,e)=>{try{const t=indexedDB.open(mK,gK);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Yr.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Fv,{keyPath:"compositeKey"})}}catch(t){e(Yr.create("storage-open",{originalErrorMessage:t?.message}))}}),wI)}()).transaction(Fv,"readwrite"),s=i.objectStore(Fv).put({compositeKey:n,value:e});return new Promise((l,h)=>{s.onsuccess=p=>{l()},i.onerror=p=>{var _;h(Yr.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const Lv=new Fs.Yd("@firebase/app-check");function sO(n,e){return(0,G.hl)()?function yK(n,e){return EU(function IU(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Lv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function DU(){return aO.apply(this,arguments)}function aO(){return(aO=(0,K.Z)(function*(){const n=yI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const IK={error:"UNKNOWN_ERROR"};function xK(n){return G.US.encodeString(JSON.stringify(n),!1)}function EI(n){return lO.apply(this,arguments)}function lO(){return(lO=(0,K.Z)(function*(n,e=!1){const t=n.app;!function vU(n){if(!pr(n).activated)throw Yr.create("use-before-activation",{appName:n.name})}(t);const i=pr(t);let s,r=i.token;if(r&&!Xm(r)&&(i.token=void 0,r=void 0),!r){const p=yield i.cachedTokenPromise;p&&(Xm(p)?r=p:yield sO(t,void 0))}if(!e&&r&&Xm(r))return{token:r.token};let h,l=!1;if(function xU(){return yI().enabled}()){i.exchangeTokenPromise||(i.exchangeTokenPromise=eO(function pK(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${Xk}/projects/${t}/apps/${i}:${aK}?key=${r}`,body:{debug_token:e}}}(t,yield DU()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),l=!0);const p=yield i.exchangeTokenPromise;return yield sO(t,p),i.token=p,{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),r=yield pr(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Lv.warn(p.message):Lv.error(p),s=p}return r?s?h=Xm(r)?{token:r.token,internalError:s}:AU(s):(h={token:r.token},i.token=r,yield sO(t,r)):h=AU(s),l&&function TU(n,e){const t=pr(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function uO(n,e){const t=pr(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function SU(n){const{app:e}=n,t=pr(e);let i=t.tokenRefresher;i||(i=function DK(n){const{app:e}=n;return new cK((0,K.Z)(function*(){let i;if(i=pr(e).token?yield EI(n,!0):yield EI(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=pr(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},yU.RETRIAL_MIN_WAIT,yU.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Xm(n){return n.expireTimeMillis-Date.now()>0}function AU(n){return{token:xK(IK),error:n}}class SK{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=pr(this.app);for(const t of e)uO(this.app,t.next);return Promise.resolve()}}const LU="app-check-internal";!function HK(){(0,$t._registerComponent)(new wo.wA("app-check",n=>function TK(n,e){return new SK(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(LU).initialize()})),(0,$t._registerComponent)(new wo.wA(LU,n=>function AK(n){return{getToken:e=>EI(n,e),addTokenListener:e=>function cO(n,e,t,i){const{app:r}=n,s=pr(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&Xm(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),SU(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>SU(n))}(n,"INTERNAL",e),removeTokenListener:e=>uO(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$t.registerVersion)("@firebase/app-check","0.6.4")}();class Jm{constructor(){return gI("app-check")}}typeof window<"u"&&window;var WK=B(3432);class mO{constructor(e){return e}}class gO{constructor(){return gI("auth")}}const _O=new u.OlP("angularfire2.auth-instances");function KK(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new mO(i)}}const YK={provide:gO,deps:[[new u.FiY,_O]]},ZK={provide:mO,useFactory:function qK(n,e){const t=mI("auth",n,e);return t&&new mO(t)},deps:[[new u.FiY,_O],rf]};let QK=(()=>{class n{constructor(){(0,$t.registerVersion)("angularfire",Ym.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[ZK,YK]}),n})();function XK(n,...e){return{ngModule:QK,providers:[{provide:_O,useFactory:KK(n),multi:!0,deps:[u.R0b,u.zs3,Qm,_I,[new u.FiY,Jm],...e]}]}}const JK=La(WK.o,!0);var ft,eY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ec={},yO=yO||{},Ut=eY||self;function II(){}function xI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Vv(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var vO="closure_uid_"+(1e9*Math.random()>>>0),nY=0;function iY(n,e,t){return n.call.apply(n.bind,arguments)}function rY(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Rr(n,e,t){return(Rr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?iY:rY).apply(null,arguments)}function DI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function mr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,r,s){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[r].apply(i,l)}}function vu(){this.s=this.s,this.o=this.o}vu.prototype.s=!1,vu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function tY(n){Object.prototype.hasOwnProperty.call(n,vO)&&n[vO]||(n[vO]=++nY)}(this)},vu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const UU=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function bO(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function HU(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(xI(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let l=0;l<s;l++)n[r+l]=i[l]}else n.push(i)}}function kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}kr.prototype.h=function(){this.defaultPrevented=!0};var oY=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",II,e),Ut.removeEventListener("test",II,e)}catch{}return n}();function SI(n){return/^[\s\xa0]*$/.test(n)}var jU=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function wO(n,e){return n<e?-1:n>e?1:0}function TI(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function Va(n){return-1!=TI().indexOf(n)}function EO(n){return EO[" "](n),n}EO[" "]=II;var AI,n,lY=Va("Opera"),eg=Va("Trident")||Va("MSIE"),zU=Va("Edge"),CO=zU||eg,$U=Va("Gecko")&&!(-1!=TI().toLowerCase().indexOf("webkit")&&!Va("Edge"))&&!(Va("Trident")||Va("MSIE"))&&!Va("Edge"),cY=-1!=TI().toLowerCase().indexOf("webkit")&&!Va("Edge");function GU(){var n=Ut.document;return n?n.documentMode:void 0}e:{var IO="",xO=(n=TI(),$U?/rv:([^\);]+)(\)|;)/.exec(n):zU?/Edge\/([\d\.]+)/.exec(n):eg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):cY?/WebKit\/(\S+)/.exec(n):lY?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xO&&(IO=xO?xO[1]:""),eg){var DO=GU();if(null!=DO&&DO>parseFloat(IO)){AI=String(DO);break e}}AI=IO}var uY={};var hY=Ut.document&&eg&&(GU()||parseInt(AI,10))||void 0;function Bv(n,e){if(kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if($U){e:{try{EO(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:fY[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Bv.X.h.call(this)}}mr(Bv,kr);var fY={2:"touch",3:"pen",4:"mouse"};Bv.prototype.h=function(){Bv.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Uv="closure_listenable_"+(1e6*Math.random()|0),pY=0;function mY(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=r,this.key=++pY,this.ba=this.ea=!1}function MI(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function TO(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function qU(n){const e={};for(const t in n)e[t]=n[t];return e}const KU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function YU(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<KU.length;s++)t=KU[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function RI(n){this.src=n,this.g={},this.h=0}function AO(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=UU(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(MI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function MO(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==i)return r}return-1}RI.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=MO(n,e,i,r);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new mY(e,this.src,s,!!i,r)).ea=t,n.push(e)),e};var RO="closure_lm_"+(1e6*Math.random()|0),kO={};function ZU(n,e,t,i,r){if(i&&i.once)return XU(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ZU(n,e[s],t,i,r);return null}return t=FO(t),n&&n[Uv]?n.N(e,t,Vv(i)?!!i.capture:!!i,r):QU(n,e,t,!1,i,r)}function QU(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var l=Vv(r)?!!r.capture:!!r,h=PO(n);if(h||(n[RO]=h=new RI(n)),(t=h.add(e,t,i,l,s)).proxy)return t;if(i=function gY(){const e=_Y;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)oY||(r=l),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(eH(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function XU(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)XU(n,e[s],t,i,r);return null}return t=FO(t),n&&n[Uv]?n.O(e,t,Vv(i)?!!i.capture:!!i,r):QU(n,e,t,!0,i,r)}function JU(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)JU(n,e[s],t,i,r);else i=Vv(i)?!!i.capture:!!i,t=FO(t),n&&n[Uv]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=MO(s=n.g[e],t,i,r))&&(MI(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=PO(n))&&(e=n.g[e.toString()],n=-1,e&&(n=MO(e,t,i,r)),(t=-1<n?e[n]:null)&&OO(t))}function OO(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Uv])AO(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(eH(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=PO(e))?(AO(t,n),0==t.h&&(t.src=null,e[RO]=null)):MI(n)}}}function eH(n){return n in kO?kO[n]:kO[n]="on"+n}function _Y(n,e){if(n.ba)n=!0;else{e=new Bv(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&OO(n),n=t.call(i,e)}return n}function PO(n){return(n=n[RO])instanceof RI?n:null}var NO="__closure_events_fn_"+(1e9*Math.random()>>>0);function FO(n){return"function"==typeof n?n:(n[NO]||(n[NO]=function(e){return n.handleEvent(e)}),n[NO])}function tr(){vu.call(this),this.i=new RI(this),this.P=this,this.I=null}function gr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new kr(e,n);else if(e instanceof kr)e.target=e.target||n;else{var r=e;YU(e=new kr(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];r=kI(l,i,!0,e)&&r}if(r=kI(l=e.g=n,i,!0,e)&&r,r=kI(l,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=kI(l=e.g=t[s],i,!1,e)&&r}function kI(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ba&&l.capture==t){var h=l.listener,p=l.ha||l.src;l.ea&&AO(n.i,l),r=!1!==h.call(p,i)&&r}}return r&&!i.defaultPrevented}mr(tr,vu),tr.prototype[Uv]=!0,tr.prototype.removeEventListener=function(n,e,t,i){JU(this,n,e,t,i)},tr.prototype.M=function(){if(tr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)MI(t[i]);delete n.g[e],n.h--}}this.I=null},tr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},tr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var LO=Ut.JSON.stringify;function yY(){var n=iH;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var VO,tH=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new bY,n=>n.reset());class bY{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wY(n){Ut.setTimeout(()=>{throw n},0)}function nH(n,e){VO||function EY(){var n=Ut.Promise.resolve(void 0);VO=function(){n.then(CY)}}(),BO||(VO(),BO=!0),iH.add(n,e)}var BO=!1,iH=new class vY{constructor(){this.h=this.g=null}add(e,t){const i=tH.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function CY(){for(var n;n=yY();){try{n.h.call(n.g)}catch(t){wY(t)}var e=tH;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}BO=!1}function OI(n,e){tr.call(this),this.h=n||1,this.g=e||Ut,this.j=Rr(this.lb,this),this.l=Date.now()}function UO(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function HO(n,e,t){if("function"==typeof n)t&&(n=Rr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Rr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function rH(n){n.g=HO(()=>{n.g=null,n.i&&(n.i=!1,rH(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mr(OI,tr),(ft=OI.prototype).ca=!1,ft.R=null,ft.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),gr(this,"tick"),this.ca&&(UO(this),this.start()))}},ft.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){OI.X.M.call(this),UO(this),delete this.g};class IY extends vu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rH(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hv(n){vu.call(this),this.h=n,this.g={}}mr(Hv,vu);var sH=[];function oH(n,e,t,i){Array.isArray(t)||(t&&(sH[0]=t.toString()),t=sH);for(var r=0;r<t.length;r++){var s=ZU(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function aH(n){TO(n.g,function(e,t){this.g.hasOwnProperty(t)&&OO(e)},n),n.g={}}function PI(){this.g=!0}function tg(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function TY(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<r.length;l++)r[l]=""}}}return LO(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Hv.prototype.M=function(){Hv.X.M.call(this),aH(this)},Hv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},PI.prototype.Aa=function(){this.g=!1},PI.prototype.info=function(){};var sf={},lH=null;function NI(){return lH=lH||new tr}function cH(n){kr.call(this,sf.Pa,n)}function jv(n){const e=NI();gr(e,new cH(e))}function uH(n,e){kr.call(this,sf.STAT_EVENT,n),this.stat=e}function Zr(n){const e=NI();gr(e,new uH(e,n))}function dH(n,e){kr.call(this,sf.Qa,n),this.size=e}function zv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}sf.Pa="serverreachability",mr(cH,kr),sf.STAT_EVENT="statevent",mr(uH,kr),sf.Qa="timingevent",mr(dH,kr);var FI={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},hH={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function jO(){}function pH(){}jO.prototype.h=null;var GO,$v={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function zO(){kr.call(this,"d")}function $O(){kr.call(this,"c")}function LI(){}function Gv(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new Hv(this),this.O=AY,this.T=new OI(n=CO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new mH}function mH(){this.i=null,this.g="",this.h=!1}mr(zO,kr),mr($O,kr),mr(LI,jO),LI.prototype.g=function(){return new XMLHttpRequest},LI.prototype.i=function(){return{}},GO=new LI;var AY=45e3,WO={},VI={};function qO(n,e,t){n.K=1,n.v=jI(tc(e)),n.s=t,n.P=!0,gH(n,null)}function gH(n,e){n.F=Date.now(),Wv(n),n.A=tc(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),DH(t.i,"t",i),n.C=0,t=n.l.H,n.h=new mH,n.g=ZH(n.l,t?e:null,!n.s),0<n.N&&(n.L=new IY(Rr(n.La,n,n.g),n.N)),oH(n.S,n.g,"readystatechange",n.ib),e=n.H?qU(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),jv(),function xY(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var l="",h=s.split("&"),p=0;p<h.length;p++){var _=h[p].split("=");if(1<_.length){var w=_[0];_=_[1];var x=w.split("_");l=2<=x.length&&"type"==x[1]?l+(w+"=")+_+"&":l+(w+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function _H(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function yH(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=MY(n,t),r==VI){4==e&&(n.o=4,Zr(14),i=!1),tg(n.j,n.m,null,"[Incomplete Response]");break}if(r==WO){n.o=4,Zr(15),tg(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}tg(n.j,n.m,r,null),KO(n,r)}_H(n)&&r!=VI&&r!=WO&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),nP(e),e.K=!0,Zr(11))):(tg(n.j,n.m,t,"[Invalid Chunked Response]"),af(n),qv(n))}function MY(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?VI:(t=Number(e.substring(t,i)),isNaN(t)?WO:(i+=1)+t>e.length?VI:(e=e.substr(i,t),n.C=i+t,e))}function Wv(n){n.V=Date.now()+n.O,vH(n,n.O)}function vH(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zv(Rr(n.gb,n),e)}function BI(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function qv(n){0==n.l.G||n.I||WH(n.l,n)}function af(n){BI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,UO(n.T),aH(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function KO(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||YO(t.h,n)))if(!n.J&&YO(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;KI(t),WI(t)}tP(t),Zr(18)}}else t.Ba=r[1],0<t.Ba-t.T&&37500>r[2]&&t.L&&0==t.A&&!t.v&&(t.v=zv(Rr(t.cb,t),6e3));if(1>=AH(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else cf(t,11)}else if((n.J||t.g==n)&&KI(t),!SI(e))for(r=t.Fa.g.parse(e),e=0;e<r.length;e++){let _=r[e];if(t.T=_[0],_=_[1],2==t.G)if("c"==_[0]){t.I=_[1],t.ka=_[2];const w=_[3];null!=w&&(t.ma=w,t.j.info("VER="+t.ma));const x=_[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const T=_[5];null!=T&&"number"==typeof T&&0<T&&(t.J=i=1.5*T,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const P=n.g;if(P){const V=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(V){var s=i.h;s.g||-1==V.indexOf("spdy")&&-1==V.indexOf("quic")&&-1==V.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ZO(s,s.h),s.h=null))}if(i.D){const W=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;W&&(i.za=W,Gn(i.F,i.D,W))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((i=t).sa=YH(i,i.H?i.ka:null,i.V),l.J){MH(i.h,l);var h=l,p=i.J;p&&h.setTimeout(p),h.B&&(BI(h),Wv(h)),i.g=l}else $H(i);0<t.i.length&&qI(t)}else"stop"!=_[0]&&"close"!=_[0]||cf(t,7);else 3==t.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?cf(t,7):eP(t):"noop"!=_[0]&&t.l&&t.l.wa(_),t.A=0)}jv()}catch{}}function bH(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(xI(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function kY(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(xI(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function RY(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(xI(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(ft=Gv.prototype).setTimeout=function(n){this.O=n},ft.ib=function(n){n=n.target;const e=this.L;e&&3==nc(n)?e.l():this.La(n)},ft.La=function(n){try{if(n==this.g)e:{const w=nc(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>w)&&(3!=w||CO||this.g&&(this.h.h||this.g.fa()||VH(this.g)))){this.I||4!=w||7==e||jv(),BI(this);var t=this.g.aa();this.Y=t;t:if(_H(this)){var i=VH(this.g);n="";var r=i.length,s=4==nc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){af(this),qv(this);var l="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function DY(n,e,t,i,r,s,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.U,w,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!SI(h)){var _=h;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,Zr(12),af(this),qv(this);break e}tg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,KO(this,t)}this.P?(yH(this,w,l),CO&&this.i&&3==w&&(oH(this.S,this.T,"tick",this.hb),this.T.start())):(tg(this.j,this.m,l,null),KO(this,l)),4==w&&af(this),this.i&&!this.I&&(4==w?WH(this.l,this):(this.i=!1,Wv(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Zr(12)):(this.o=0,Zr(13)),af(this),qv(this)}}}catch{}},ft.hb=function(){if(this.g){var n=nc(this.g),e=this.g.fa();this.C<e.length&&(BI(this),yH(this,n,e),this.i&&4!=n&&Wv(this))}},ft.cancel=function(){this.I=!0,af(this)},ft.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function SY(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(jv(),Zr(17)),af(this),this.o=2,qv(this)):vH(this,this.V-n)};var wH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lf(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof lf){this.h=void 0!==e?e:n.h,UI(this,n.j),this.s=n.s,this.g=n.g,HI(this,n.m),this.l=n.l,e=n.i;var t=new Zv;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),EH(this,t),this.o=n.o}else n&&(t=String(n).match(wH))?(this.h=!!e,UI(this,t[1]||"",!0),this.s=Kv(t[2]||""),this.g=Kv(t[3]||"",!0),HI(this,t[4]),this.l=Kv(t[5]||"",!0),EH(this,t[6]||"",!0),this.o=Kv(t[7]||"")):(this.h=!!e,this.i=new Zv(null,this.h))}function tc(n){return new lf(n)}function UI(n,e,t){n.j=t?Kv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function HI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function EH(n,e,t){e instanceof Zv?(n.i=e,function BY(n,e){e&&!n.j&&(bu(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(IH(this,i),DH(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Yv(e,LY)),n.i=new Zv(e,n.h))}function Gn(n,e,t){n.i.set(e,t)}function jI(n){return Gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Kv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Yv(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,PY),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function PY(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Yv(e,CH,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Yv(e,CH,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Yv(t,"/"==t.charAt(0)?FY:NY,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Yv(t,VY)),n.join("")};var CH=/[#\/\?@]/g,NY=/[#\?:]/g,FY=/[#\?]/g,LY=/[#\?@]/g,VY=/#/g;function Zv(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bu(n){n.g||(n.g=new Map,n.h=0,n.i&&function OY(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function IH(n,e){bu(n),e=ng(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function xH(n,e){return bu(n),e=ng(n,e),n.g.has(e)}function DH(n,e,t){IH(n,e),0<t.length&&(n.i=null,n.g.set(ng(n,e),bO(t)),n.h+=t.length)}function ng(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function SH(n){this.l=n||HY,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ga&&Ut.g.Ga()&&Ut.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=Zv.prototype).add=function(n,e){bu(this),this.i=null,n=ng(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){bu(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},ft.oa=function(){bu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},ft.W=function(n){bu(this);let e=[];if("string"==typeof n)xH(this,n)&&(e=e.concat(this.g.get(ng(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return bu(this),this.i=null,xH(this,n=ng(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),l=this.W(i);for(i=0;i<l.length;i++){var r=s;""!==l[i]&&(r+="="+encodeURIComponent(String(l[i]))),n.push(r)}}return this.i=n.join("&")};var HY=10;function TH(n){return!!n.h||!!n.g&&n.g.size>=n.j}function AH(n){return n.h?1:n.g?n.g.size:0}function YO(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ZO(n,e){n.g?n.g.add(e):n.h=e}function MH(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function RH(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return bO(n.i)}function QO(){}function jY(){this.g=new QO}function zY(n,e,t){const i=t||"";try{bH(n,function(r,s){let l=r;Vv(r)&&(l=LO(r)),e.push(i+s+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function zI(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Qv(n){this.l=n.ac||null,this.j=n.jb||!1}function $I(n,e){tr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=XO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}SH.prototype.cancel=function(){if(this.i=RH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},QO.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},QO.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},mr(Qv,jO),Qv.prototype.g=function(){return new $I(this.l,this.j)},Qv.prototype.i=function(n){return function(){return n}}({}),mr($I,tr);var XO=0;function kH(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Xv(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Jv(n)}function Jv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=$I.prototype).open=function(n,e){if(this.readyState!=XO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Jv(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xv(this)),this.readyState=XO},ft.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Jv(this)),this.g&&(this.readyState=3,Jv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kH(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ft.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Xv(this):Jv(this),3==this.readyState&&kH(this)}},ft.Va=function(n){this.g&&(this.response=this.responseText=n,Xv(this))},ft.Ua=function(n){this.g&&(this.response=n,Xv(this))},ft.ga=function(){this.g&&Xv(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($I.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var GY=Ut.JSON.parse;function li(n){tr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=OH,this.K=this.L=!1}mr(li,tr);var OH="",WY=/^https?$/i,qY=["POST","PUT"];function PH(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,NH(n),GI(n)}function NH(n){n.D||(n.D=!0,gr(n,"complete"),gr(n,"error"))}function FH(n){if(n.h&&typeof yO<"u"&&(!n.C[1]||4!=nc(n)||2!=n.aa()))if(n.v&&4==nc(n))HO(n.Ha,0,n);else if(gr(n,"readystatechange"),4==nc(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===h){var r=String(n.H).match(wH)[1]||null;if(!r&&Ut.self&&Ut.self.location){var s=Ut.self.location.protocol;r=s.substr(0,s.length-1)}i=!WY.test(r?r.toLowerCase():"")}t=i}if(t)gr(n,"complete"),gr(n,"success");else{n.m=6;try{var l=2<nc(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",NH(n)}}finally{GI(n)}}}function GI(n,e){if(n.g){LH(n);const t=n.g,i=n.C[0]?II:null;n.g=null,n.C=null,e||gr(n,"ready");try{t.onreadystatechange=i}catch{}}}function LH(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function nc(n){return n.g?n.g.readyState:0}function VH(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case OH:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function BH(n){let e="";return TO(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function JO(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=BH(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Gn(n,e,t))}function eb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function UH(n){this.Ca=0,this.i=[],this.j=new PI,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=eb("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=eb("baseRetryDelayMs",5e3,n),this.bb=eb("retryDelaySeedMs",1e4,n),this.$a=eb("forwardChannelMaxRetries",2,n),this.ta=eb("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new SH(n&&n.concurrentRequestLimit),this.Fa=new jY,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function eP(n){if(HH(n),3==n.G){var e=n.U++,t=tc(n.F);Gn(t,"SID",n.I),Gn(t,"RID",e),Gn(t,"TYPE","terminate"),tb(n,t),(e=new Gv(n,n.j,e,void 0)).K=2,e.v=jI(tc(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=ZH(e.l,null),e.g.da(e.v)),e.F=Date.now(),Wv(e)}KH(n)}function WI(n){n.g&&(nP(n),n.g.cancel(),n.g=null)}function HH(n){WI(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),KI(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function qI(n){TH(n.h)||n.m||(n.m=!0,nH(n.Ja,n),n.C=0)}function jH(n,e){var t;t=e?e.m:n.U++;const i=tc(n.F);Gn(i,"SID",n.I),Gn(i,"RID",t),Gn(i,"AID",n.T),tb(n,i),n.o&&n.s&&JO(i,n.o,n.s),t=new Gv(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=zH(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),ZO(n.h,t),qO(t,i,e)}function tb(n,e){n.ia&&TO(n.ia,function(t,i){Gn(e,i,t)}),n.l&&bH({},function(t,i){Gn(e,i,t)})}function zH(n,e,t){t=Math.min(n.i.length,t);var i=n.l?Rr(n.l.Ra,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=r[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let _=r[p].h;const w=r[p].g;if(_-=s,0>_)s=Math.max(0,r[p].h-100),h=!1;else try{zY(w,l,"req"+_+"_")}catch{i&&i(w)}}if(h){i=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function $H(n){n.g||n.u||(n.Z=1,nH(n.Ia,n),n.A=0)}function tP(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=zv(Rr(n.Ia,n),qH(n,n.A)),n.A++,0))}function nP(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function GH(n){n.g=new Gv(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=tc(n.sa);Gn(e,"RID","rpc"),Gn(e,"SID",n.I),Gn(e,"CI",n.L?"0":"1"),Gn(e,"AID",n.T),Gn(e,"TYPE","xmlhttp"),tb(n,e),n.o&&n.s&&JO(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=jI(tc(e)),t.s=null,t.P=!0,gH(t,n)}function KI(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function WH(n,e){var t=null;if(n.g==e){KI(n),nP(n),n.g=null;var i=2}else{if(!YO(n.h,e))return;t=e.D,MH(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;gr(i=NI(),new dH(i,t)),qI(n)}else $H(n);else if(3==(r=e.o)||0==r&&0<n.pa||!(1==i&&function YY(n,e){return!(AH(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=zv(Rr(n.Ja,n,e),qH(n,n.C)),n.C++,0)))}(n,e)||2==i&&tP(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),r){case 1:cf(n,5);break;case 4:cf(n,10);break;case 3:cf(n,6);break;default:cf(n,2)}}function qH(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function cf(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=Rr(n.kb,n);t||(t=new lf("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||UI(t,"https"),jI(t)),function $Y(n,e){const t=new PI;if(Ut.Image){const i=new Image;i.onload=DI(zI,t,i,"TestLoadImage: loaded",!0,e),i.onerror=DI(zI,t,i,"TestLoadImage: error",!1,e),i.onabort=DI(zI,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=DI(zI,t,i,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Zr(2);n.G=0,n.l&&n.l.va(e),KH(n),HH(n)}function KH(n){if(n.G=0,n.la=[],n.l){const e=RH(n.h);(0!=e.length||0!=n.i.length)&&(HU(n.la,e),HU(n.la,n.i),n.h.i.length=0,bO(n.i),n.i.length=0),n.l.ua()}}function YH(n,e,t){var i=t instanceof lf?tc(t):new lf(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),HI(i,i.m);else{var r=Ut.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new lf(null,void 0);i&&UI(s,i),e&&(s.g=e),r&&HI(s,r),t&&(s.l=t),i=s}return e=n.za,(t=n.D)&&e&&Gn(i,t,e),Gn(i,"VER",n.ma),tb(n,i),i}function ZH(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new li(t&&n.Da&&!n.ra?new Qv({jb:!0}):n.ra)).Ka(n.H),e}function QH(){}function YI(){if(eg&&!(10<=Number(hY)))throw Error("Environmental error: no available transport.")}function Vs(n,e){tr.call(this),this.g=new UH(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!SI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!SI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ig(this)}function XH(n){zO.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function JH(){$O.call(this),this.status=1}function ig(n){this.g=n}(ft=li.prototype).Ka=function(n){this.L=n},ft.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():GO.g(),this.C=function fH(n){return n.h||(n.h=n.i())}(this.u?this.u:GO),this.g.onreadystatechange=Rr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void PH(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=Ut.FormData&&n instanceof Ut.FormData,!(0<=UU(qY,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{LH(this),0<this.B&&((this.K=function KY(n){return eg&&function dY(){return function aY(n){var e=uY;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=jU(String(AI)).split("."),t=jU("9").split("."),i=Math.max(e.length,t.length);for(let l=0;0==n&&l<i;l++){var r=e[l]||"",s=t[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=wO(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||wO(0==r[2].length,0==s[2].length)||wO(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rr(this.qa,this)):this.A=HO(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){PH(this,s)}},ft.qa=function(){typeof yO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gr(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,gr(this,"complete"),gr(this,"abort"),GI(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),GI(this,!0)),li.X.M.call(this)},ft.Ha=function(){this.s||(this.F||this.v||this.l?FH(this):this.fb())},ft.fb=function(){FH(this)},ft.aa=function(){try{return 2<nc(this)?this.g.status:-1}catch{return-1}},ft.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),GY(e)}},ft.Ea=function(){return this.m},ft.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=UH.prototype).ma=8,ft.G=1,ft.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new Gv(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=qU(s),YU(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zH(this,r,e),Gn(t=tc(this.F),"RID",n),Gn(t,"CVER",22),this.D&&Gn(t,"X-HTTP-Session-Id",this.D),tb(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(BH(s)))+"&"+e:this.o&&JO(t,this.o,s)),ZO(this.h,r),this.Ya&&Gn(t,"TYPE","init"),this.O?(Gn(t,"$req",e),Gn(t,"SID","null"),r.Z=!0,qO(r,t,null)):qO(r,t,e),this.G=2}}else 3==this.G&&(n?jH(this,n):0==this.i.length||TH(this.h)||jH(this))},ft.Ia=function(){if(this.u=null,GH(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=zv(Rr(this.eb,this),n)}},ft.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Zr(10),WI(this),GH(this))},ft.cb=function(){null!=this.v&&(this.v=null,WI(this),tP(this),Zr(19))},ft.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Zr(2)):(this.j.info("Failed to ping google.com"),Zr(1))},(ft=QH.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Ra=function(){},YI.prototype.g=function(n,e){return new Vs(n,e)},mr(Vs,tr),Vs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Zr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=YH(n,null,n.V),qI(n)},Vs.prototype.close=function(){eP(this.g)},Vs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=LO(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&qI(e)},Vs.prototype.M=function(){this.g.l=null,delete this.j,eP(this.g),delete this.g,Vs.X.M.call(this)},mr(XH,zO),mr(JH,$O),mr(ig,QH),ig.prototype.xa=function(){gr(this.g,"a")},ig.prototype.wa=function(n){gr(this.g,new XH(n))},ig.prototype.va=function(n){gr(this.g,new JH)},ig.prototype.ua=function(){gr(this.g,"b")},YI.prototype.createWebChannel=YI.prototype.g,Vs.prototype.send=Vs.prototype.u,Vs.prototype.open=Vs.prototype.m,Vs.prototype.close=Vs.prototype.close,FI.NO_ERROR=0,FI.TIMEOUT=8,FI.HTTP_ERROR=6,hH.COMPLETE="complete",pH.EventType=$v,$v.OPEN="a",$v.CLOSE="b",$v.ERROR="c",$v.MESSAGE="d",tr.prototype.listen=tr.prototype.N,li.prototype.listenOnce=li.prototype.O,li.prototype.getLastError=li.prototype.Oa,li.prototype.getLastErrorCode=li.prototype.Ea,li.prototype.getStatus=li.prototype.aa,li.prototype.getResponseJson=li.prototype.Sa,li.prototype.getResponseText=li.prototype.fa,li.prototype.send=li.prototype.da,li.prototype.setWithCredentials=li.prototype.Ka;var ZY=ec.createWebChannelTransport=function(){return new YI},QY=ec.getStatEventTarget=function(){return NI()},iP=ec.ErrorCode=FI,XY=ec.EventType=hH,JY=ec.Event=sf,ej=ec.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},eZ=ec.FetchXmlHttpFactory=Qv,ZI=ec.WebChannel=pH,tZ=ec.XhrIo=li;const tj="@firebase/firestore";class nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nr.UNAUTHENTICATED=new nr(null),nr.GOOGLE_CREDENTIALS=new nr("google-credentials-uid"),nr.FIRST_PARTY=new nr("first-party-uid"),nr.MOCK_USER=new nr("mock-user");let rg="9.19.0";const wu=new Fs.Yd("@firebase/firestore");function rP(){return wu.logLevel}function Ae(n,...e){if(wu.logLevel<=Fs.in.DEBUG){const t=e.map(sP);wu.debug(`Firestore (${rg}): ${n}`,...t)}}function Ei(n,...e){if(wu.logLevel<=Fs.in.ERROR){const t=e.map(sP);wu.error(`Firestore (${rg}): ${n}`,...t)}}function Ba(n,...e){if(wu.logLevel<=Fs.in.WARN){const t=e.map(sP);wu.warn(`Firestore (${rg}): ${n}`,...t)}}function sP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${rg}) INTERNAL ASSERTION FAILED: `+n;throw Ei(e),new Error(e)}function pt(n,e){n||st()}function qe(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends G.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nr.UNAUTHENTICATED))}shutdown(){}}class sZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oZ{constructor(e){this.t=e,this.currentUser=nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=_=>this.i!==r?(r=this.i,t(_)):Promise.resolve();let l=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gi,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const _=l;e.enqueueRetryable((0,K.Z)(function*(){yield _.promise,yield s(i.currentUser)}))},p=_=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt("string"==typeof i.accessToken),new nj(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new nr(e)}}class aZ{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=nr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class lZ{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new aZ(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ij{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cZ{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=s=>{null!=s.error&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.T;return this.T=s.token,Ae("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt("string"==typeof t.token),this.T=t.token,new ij(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function uZ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class rj{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=uZ(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function Ht(n,e){return n<e?-1:n>e?1:0}function sg(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function sj(n){return n+"\0"}class Wn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new we(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wn.fromMillis(Date.now())}static fromDate(e){return Wn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Wn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new Wn(0,0))}static max(){return new yt(new Wn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nb{constructor(e,t,i){void 0===t?t=0:t>e.length&&st(),void 0===i?i=e.length-t:i>e.length-t&&st(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===nb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nb?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),l=t.get(r);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends nb{construct(e,t,i){return new cn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const dZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ci extends nb{construct(e,t,i){return new ci(e,t,i)}static isValidIdentifier(e){return dZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ci(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new we(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if("\\"===h){if(r+1===e.length)throw new we(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new we(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,r+=2}else"`"===h?(l=!l,r++):"."!==h||l?(i+=h,r++):(s(),r++)}if(s(),l)throw new we(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ci(t)}static emptyPath(){return new ci([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(cn.fromString(e))}static fromName(e){return new $e(cn.fromString(e).popFirst(5))}static empty(){return new $e(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new cn(e.slice()))}}class QI{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function oP(n){return n.fields.find(e=>2===e.kind)}function uf(n){return n.fields.filter(e=>2!==e.kind)}QI.UNKNOWN_ID=-1;class XI{constructor(e,t){this.fieldPath=e,this.kind=t}}class ib{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ib(0,Bs.min())}}function oj(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=yt.fromTimestamp(1e9===i?new Wn(t+1,0):new Wn(t,i));return new Bs(r,$e.empty(),e)}function aj(n){return new Bs(n.readTime,n.key,-1)}class Bs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Bs(yt.min(),$e.empty(),-1)}static max(){return new Bs(yt.max(),$e.empty(),-1)}}function aP(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}const lj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Eu(n){return lP.apply(this,arguments)}function lP(){return lP=(0,K.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==lj)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}),lP.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,i)=>{t(e)})}static reject(e){return new se((t,i)=>{i(e)})}static waitFor(e){return new se((t,i)=>{let r=0,s=0,l=!1;e.forEach(h=>{++r,h.next(()=>{++s,l&&s===r&&t()},p=>i(p))}),l=!0,s===r&&t()})}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next(r=>r?se.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new se((i,r)=>{const s=e.length,l=new Array(s);let h=0;for(let p=0;p<s;p++){const _=p;t(e[_]).next(w=>{l[_]=w,++h,h===s&&i(l)},w=>r(w))}})}static doWhile(e,t){return new se((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class JI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Gi,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new rb(e,t.error)):this.R.resolve()},this.transaction.onerror=i=>{const r=cP(i.target.error);this.R.reject(new rb(e,r))}}static open(e,t,i,r){try{return new JI(t,e.transaction(r,i))}catch(s){throw new rb(t,s)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mZ(t)}}class ta{constructor(e,t,i){this.name=e,this.version=t,this.V=i,12.2===ta.S((0,G.z$)())&&Ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ae("SimpleDb","Removing database:",e),df(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,G.hl)())return!1;if(ta.C())return!0;const e=(0,G.z$)(),t=ta.S(e),i=0<t&&t<10,r=ta.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(e){var t=this;return(0,K.Z)(function*(){return t.db||(Ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{i(l.target.result)},s.onblocked=()=>{r(new rb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const h=l.target.error;r("VersionError"===h.name?new we(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new we(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new rb(e,h))},s.onupgradeneeded=l=>{Ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.M(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=i=>t.F(i)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,K.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.$(e);const p=JI.open(s.db,e,l?"readonly":"readwrite",i),_=r(p).next(w=>(p.P(),w)).catch(w=>(p.abort(w),se.reject(w))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,w="FirebaseError"!==_.name&&h<3;if(Ae("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),s.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pZ{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return df(this.L.delete())}}class rb extends we{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cu(n){return"IndexedDbTransactionError"===n.name}class mZ{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ae("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),df(i)}add(e){return Ae("SimpleDb","ADD",this.store.name,e,e),df(this.store.add(e))}get(e){return df(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ae("SimpleDb","DELETE",this.store.name,e),df(this.store.delete(e))}count(){return Ae("SimpleDb","COUNT",this.store.name),df(this.store.count())}j(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(l,h)=>{s.push(h)}).next(()=>s)}{const r=this.store.getAll(i.range);return new se((s,l)=>{r.onerror=h=>{l(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new se((r,s)=>{i.onerror=l=>{s(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}J(e,t){Ae("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,l,h)=>h.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.W(r,t)}X(e){const t=this.cursor({});return new se((i,r)=>{t.onerror=s=>{const l=cP(s.target.error);r(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():i()}):i()}})}W(e,t){const i=[];return new se((r,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void r();const p=new pZ(h),_=t(h.primaryKey,h.value,p);if(_ instanceof se){const w=_.catch(x=>(p.done(),se.reject(x)));i.push(w)}p.isDone?r():null===p.K?h.continue():h.continue(p.K)}}).next(()=>se.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function df(n){return new se((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=cP(i.target.error);t(r)}})}let uj=!1;function cP(n){const e=ta.S((0,G.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new we("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uj||(uj=!0,setTimeout(()=>{throw i},0)),i}}return n}class gZ{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ae("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,K.Z)(function*(){t.task=null;try{Ae("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(i){Cu(i)?Ae("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Eu(i)}yield t.et(6e4)}))}}class _Z{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,K.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.st(i,e))})()}st(e,t){const i=new Set;let r=t,s=!0;return se.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!i.has(l))return Ae("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,r).next(h=>{r-=h,i.add(l)});s=!1})).next(()=>t-r)}it(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(r,s)).next(h=>(Ae("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}rt(e,t){let i=e;return t.changes.forEach((r,s)=>{const l=aj(s);aP(l,i)>0&&(i=l)}),new Bs(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Us=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function sb(n){return null==n}function ob(n){return 0===n&&1/n==-1/0}function dj(n){return"number"==typeof n&&Number.isInteger(n)&&!ob(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Qr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hj(e)),e=yZ(n.get(t),e);return hj(e)}function yZ(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function hj(n){return n+"\x01\x01"}function Ua(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&st(),n.charAt(l+1)){case"\x01":const h=n.substring(s,l);let p;0===r.length?p=h:(r+=h,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,l),r+="\0";break;case"\x11":r+=n.substring(s,l+1);break;default:st()}s=l+2}return new cn(i)}const fj=["userId","batchId"];function ex(n,e){return[n,Qr(e)]}function pj(n,e,t){return[n,Qr(e),t]}const vZ={},bZ=["prefixPath","collectionGroup","readTime","documentId"],wZ=["prefixPath","collectionGroup","documentId"],EZ=["collectionGroup","readTime","prefixPath","documentId"],CZ=["canonicalId","targetId"],IZ=["targetId","path"],xZ=["path","targetId"],DZ=["collectionId","parent"],SZ=["indexId","uid"],TZ=["uid","sequenceNumber"],AZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MZ=["indexId","uid","orderedDocumentKey"],RZ=["userId","collectionPath","documentId"],kZ=["userId","collectionPath","largestBatchId"],OZ=["userId","collectionGroup","largestBatchId"],mj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PZ=[...mj,"documentOverlays"],gj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_j=gj,NZ=[..._j,"indexConfiguration","indexState","indexEntries"];class uP extends cj{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function ir(n,e){const t=qe(n);return ta.O(t.at,e)}function yj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ui{constructor(e,t){this.comparator=e,this.root=t||_r.EMPTY}insert(e,t){return new ui(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_r.BLACK,null,null))}remove(e){return new ui(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tx(this.root,e,this.comparator,!1)}getReverseIterator(){return new tx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tx(this.root,e,this.comparator,!0)}}class tx{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _r{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??_r.RED,this.left=r??_r.EMPTY,this.right=s??_r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new _r(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return _r.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}_r.EMPTY=null,_r.RED=!0,_r.BLACK=!1,_r.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,i,r){return this}insert(n,e,t){return new _r(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new ui(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bj(this.data.getIterator())}getIteratorFrom(e){return new bj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class bj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function og(n){return n.hasNext()?n.getNext():void 0}class _s{constructor(e){this.fields=e,e.sort(ci.comparator)}static empty(){return new _s([])}unionWith(e){let t=new In(ci.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new _s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sg(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class FZ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new FZ("Invalid base64 string: "+r):r}}(e);return new Wi(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Wi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wi.EMPTY_BYTE_STRING=new Wi("");const VZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Iu(n){if(pt(!!n),"string"==typeof n){let e=0;const t=VZ.exec(n);if(pt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:di(n.seconds),nanos:di(n.nanos)}}function di(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ff(n){return"string"==typeof n?Wi.fromBase64String(n):Wi.fromUint8Array(n)}function dP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wj(n){const e=n.mapValue.fields.__previous_value__;return dP(e)?wj(e):e}function ab(n){const e=Iu(n.mapValue.fields.__local_write_time__.timestampValue);return new Wn(e.seconds,e.nanos)}class BZ{constructor(e,t,i,r,s,l,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class xu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}const Du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nx={nullValue:"NULL_VALUE"};function pf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dP(n)?4:xj(n)?9007199254740991:10:st()}function Ha(n,e){if(n===e)return!0;const t=pf(n);if(t!==pf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ab(n).isEqual(ab(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Iu(i.timestampValue),l=Iu(r.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,ff(n.bytesValue).isEqual(ff(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return di(i.geoPointValue.latitude)===di(r.geoPointValue.latitude)&&di(i.geoPointValue.longitude)===di(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return di(i.integerValue)===di(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=di(i.doubleValue),l=di(r.doubleValue);return s===l?ob(s)===ob(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return sg(n.arrayValue.values||[],e.arrayValue.values||[],Ha);case 10:return function(i,r){const s=i.mapValue.fields||{},l=r.mapValue.fields||{};if(yj(s)!==yj(l))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===l[h]||!Ha(s[h],l[h])))return!1;return!0}(n,e);default:return st()}var r}function lb(n,e){return void 0!==(n.values||[]).find(t=>Ha(t,e))}function Su(n,e){if(n===e)return 0;const t=pf(n),i=pf(e);if(t!==i)return Ht(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(r,s){const l=di(r.integerValue||r.doubleValue),h=di(s.integerValue||s.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return Ej(n.timestampValue,e.timestampValue);case 4:return Ej(ab(n),ab(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(r,s){const l=ff(r),h=ff(s);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const l=r.split("/"),h=s.split("/");for(let p=0;p<l.length&&p<h.length;p++){const _=Ht(l[p],h[p]);if(0!==_)return _}return Ht(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const l=Ht(di(r.latitude),di(s.latitude));return 0!==l?l:Ht(di(r.longitude),di(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const l=r.values||[],h=s.values||[];for(let p=0;p<l.length&&p<h.length;++p){const _=Su(l[p],h[p]);if(_)return _}return Ht(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Du.mapValue&&s===Du.mapValue)return 0;if(r===Du.mapValue)return 1;if(s===Du.mapValue)return-1;const l=r.fields||{},h=Object.keys(l),p=s.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let w=0;w<h.length&&w<_.length;++w){const x=Ht(h[w],_[w]);if(0!==x)return x;const T=Su(l[h[w]],p[_[w]]);if(0!==T)return T}return Ht(h.length,_.length)}(n.mapValue,e.mapValue);default:throw st()}}function Ej(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=Iu(n),i=Iu(e),r=Ht(t.seconds,i.seconds);return 0!==r?r:Ht(t.nanos,i.nanos)}function ag(n){return hP(n)}function hP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Iu(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ff(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const l of i.values||[])s?s=!1:r+=",",r+=hP(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",l=!0;for(const h of r)l?l=!1:s+=",",s+=`${h}:${hP(i.fields[h])}`;return s+"}"}(n.mapValue):st();var e}function mf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fP(n){return!!n&&"integerValue"in n}function cb(n){return!!n&&"arrayValue"in n}function Cj(n){return!!n&&"nullValue"in n}function Ij(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ix(n){return!!n&&"mapValue"in n}function ub(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hf(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ub(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ub(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function UZ(n){return"nullValue"in n?nx:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?mf(xu.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function HZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?mf(xu.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Du:st()}function Dj(n,e){const t=Su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Sj(n,e){const t=Su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class rr{constructor(e){this.value=e}static empty(){return new rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ix(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ub(t)}setAll(e){let t=ci.emptyPath(),i={},r=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,r),i={},r=[],t=h.popLast()}l?i[h.lastSegment()]=ub(l):r.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());ix(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ha(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];ix(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){hf(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new rr(ub(this.value))}}function Tj(n){const e=[];return hf(n.fields,(t,i)=>{const r=new ci([t]);if(ix(i)){const s=Tj(i.mapValue).fields;if(0===s.length)e.push(r);else for(const l of s)e.push(r.child(l))}else e.push(r)}),new _s(e)}class Bn{constructor(e,t,i,r,s,l,h){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Bn(e,0,yt.min(),yt.min(),yt.min(),rr.empty(),0)}static newFoundDocument(e,t,i,r){return new Bn(e,1,t,yt.min(),i,r,0)}static newNoDocument(e,t){return new Bn(e,2,t,yt.min(),yt.min(),rr.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,yt.min(),yt.min(),rr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tu{constructor(e,t){this.position=e,this.inclusive=t}}function Aj(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],l=n.position[r];if(i=s.field.isKeyField()?$e.comparator($e.fromName(l.referenceValue),t.key):Su(l,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Mj(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ha(n.position[t],e.position[t]))return!1;return!0}class lg{constructor(e,t="asc"){this.field=e,this.dir=t}}function jZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Rj{}class sn extends Rj{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new zZ(e,t,i):"array-contains"===t?new WZ(e,i):"in"===t?new Lj(e,i):"not-in"===t?new qZ(e,i):"array-contains-any"===t?new KZ(e,i):new sn(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new $Z(e,i):new GZ(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Su(t,this.value)):null!==t&&pf(this.value)===pf(t)&&this.matchesComparison(Su(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wn extends Rj{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new wn(e,t)}matches(e){return cg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function cg(n){return"and"===n.op}function pP(n){return"or"===n.op}function mP(n){return kj(n)&&cg(n)}function kj(n){for(const e of n.filters)if(e instanceof wn)return!1;return!0}function gP(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+ag(n.value);if(mP(n))return n.filters.map(e=>gP(e)).join(",");{const e=n.filters.map(t=>gP(t)).join(",");return`${n.op}(${e})`}}function Oj(n,e){return n instanceof sn?(t=n,(i=e)instanceof sn&&t.op===i.op&&t.field.isEqual(i.field)&&Ha(t.value,i.value)):n instanceof wn?function(t,i){return i instanceof wn&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,s,l)=>r&&Oj(s,i.filters[l]),!0)}(n,e):void st();var t,i}function Pj(n,e){const t=n.filters.concat(e);return wn.create(t,n.op)}function Nj(n){return n instanceof sn?`${(e=n).field.canonicalString()} ${e.op} ${ag(e.value)}`:n instanceof wn?function(e){return e.op.toString()+" {"+e.getFilters().map(Nj).join(" ,")+"}"}(n):"Filter";var e}class zZ extends sn{constructor(e,t,i){super(e,t,i),this.key=$e.fromName(i.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.matchesComparison(t)}}class $Z extends sn{constructor(e,t){super(e,"in",t),this.keys=Fj(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class GZ extends sn{constructor(e,t){super(e,"not-in",t),this.keys=Fj(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fj(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>$e.fromName(i.referenceValue))}class WZ extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cb(t)&&lb(t.arrayValue,this.value)}}class Lj extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lb(this.value.arrayValue,t)}}class qZ extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(lb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!lb(this.value.arrayValue,t)}}class KZ extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>lb(this.value.arrayValue,i))}}class YZ{constructor(e,t=null,i=[],r=[],s=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=l,this.endAt=h,this.ft=null}}function _P(n,e=null,t=[],i=[],r=null,s=null,l=null){return new YZ(n,e,t,i,r,s,l)}function gf(n){const e=qe(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>gP(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),sb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ag(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ag(i)).join(",")),e.ft=t}return e.ft}function db(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Oj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mj(n.startAt,e.startAt)&&Mj(n.endAt,e.endAt)}function rx(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sx(n,e){return n.filters.filter(t=>t instanceof sn&&t.field.isEqual(e))}function Vj(n,e,t){let i=nx,r=!0;for(const s of sx(n,e)){let l=nx,h=!0;switch(s.op){case"<":case"<=":l=UZ(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,h=!1;break;case"!=":case"not-in":l=nx}Dj({value:i,inclusive:r},{value:l,inclusive:h})<0&&(i=l,r=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];Dj({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}function Bj(n,e,t){let i=Du,r=!0;for(const s of sx(n,e)){let l=Du,h=!0;switch(s.op){case">=":case">":l=HZ(s.value),h=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,h=!1;break;case"!=":case"not-in":l=Du}Sj({value:i,inclusive:r},{value:l,inclusive:h})>0&&(i=l,r=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];Sj({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}class ic{constructor(e,t=null,i=[],r=[],s=null,l="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=l,this.startAt=h,this.endAt=p,this.dt=null,this.wt=null}}function Uj(n,e,t,i,r,s,l,h){return new ic(n,e,t,i,r,s,l,h)}function ug(n){return new ic(n)}function Hj(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function yP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ox(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function vP(n){return null!==n.collectionGroup}function _f(n){const e=qe(n);if(null===e.dt){e.dt=[];const t=ox(e),i=yP(e);if(null!==t&&null===i)t.isKeyField()||e.dt.push(new lg(t)),e.dt.push(new lg(ci.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new lg(ci.keyField(),s))}}}return e.dt}function Xr(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=_P(e.path,e.collectionGroup,_f(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of _f(e))t.push(new lg(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new Tu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Tu(e.startAt.position,e.startAt.inclusive):null;e.wt=_P(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.wt}function bP(n,e){e.getFirstInequalityField(),ox(n);const t=n.filters.concat([e]);return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ax(n,e,t){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hb(n,e){return db(Xr(n),Xr(e))&&n.limitType===e.limitType}function jj(n){return`${gf(Xr(n))}|lt:${n.limitType}`}function wP(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>Nj(i)).join(", ")}]`),sb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ag(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ag(i)).join(",")),`Target(${t})`}(Xr(n))}; limitType=${n.limitType})`}function fb(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):$e.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of _f(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,l){const h=Aj(r,s,l);return r.inclusive?h<=0:h<0}(t.startAt,_f(t),i)||t.endAt&&!function(r,s,l){const h=Aj(r,s,l);return r.inclusive?h>=0:h>0}(t.endAt,_f(t),i)));var t,i}function zj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $j(n){return(e,t)=>{let i=!1;for(const r of _f(n)){const s=ZZ(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function ZZ(n,e,t){const i=n.field.isKeyField()?$e.comparator(e.key,t.key):function(r,s,l){const h=s.data.field(r),p=l.data.field(r);return null!==h&&null!==p?Su(h,p):st()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return st()}}class Au{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){hf(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return vj(this.inner)}size(){return this.innerSize}}const QZ=new ui($e.comparator);function ys(){return QZ}const Gj=new ui($e.comparator);function pb(...n){let e=Gj;for(const t of n)e=e.insert(t.key,t);return e}function Wj(n){let e=Gj;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ja(){return mb()}function qj(){return mb()}function mb(){return new Au(n=>n.toString(),(n,e)=>n.isEqual(e))}const XZ=new ui($e.comparator),JZ=new In($e.comparator);function Yt(...n){let e=JZ;for(const t of n)e=e.add(t);return e}const e7=new In(Ht);function lx(){return e7}function Kj(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ob(e)?"-0":e}}function Yj(n){return{integerValue:""+n}}function Zj(n,e){return dj(e)?Yj(e):Kj(n,e)}class cx{constructor(){this._=void 0}}function t7(n,e,t){return n instanceof dg?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof yf?Xj(n,e):n instanceof vf?Jj(n,e):function(i,r){const s=Qj(i,r),l=ez(s)+ez(i._t);return fP(s)&&fP(i._t)?Yj(l):Kj(i.serializer,l)}(n,e)}function n7(n,e,t){return n instanceof yf?Xj(n,e):n instanceof vf?Jj(n,e):t}function Qj(n,e){return n instanceof hg?fP(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class dg extends cx{}class yf extends cx{constructor(e){super(),this.elements=e}}function Xj(n,e){const t=tz(e);for(const i of n.elements)t.some(r=>Ha(r,i))||t.push(i);return{arrayValue:{values:t}}}class vf extends cx{constructor(e){super(),this.elements=e}}function Jj(n,e){let t=tz(e);for(const i of n.elements)t=t.filter(r=>!Ha(r,i));return{arrayValue:{values:t}}}class hg extends cx{constructor(e,t){super(),this.serializer=e,this._t=t}}function ez(n){return di(n.integerValue||n.doubleValue)}function tz(n){return cb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class gb{constructor(e,t){this.field=e,this.transform=t}}class r7{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ux(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class dx{}function nz(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new pg(n.key,qn.none()):new fg(n.key,n.data,qn.none());{const t=n.data,i=rr.empty();let r=new In(ci.comparator);for(let s of e.fields)if(!r.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?i.delete(s):i.set(s,l),r=r.add(s)}return new rc(n.key,i,new _s(r.toArray()),qn.none())}}function s7(n,e,t){n instanceof fg?function(i,r,s){const l=i.value.clone(),h=sz(i.fieldTransforms,r,s.transformResults);l.setAll(h),r.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof rc?function(i,r,s){if(!ux(i.precondition,r))return void r.convertToUnknownDocument(s.version);const l=sz(i.fieldTransforms,r,s.transformResults),h=r.data;h.setAll(rz(i)),h.setAll(l),r.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _b(n,e,t,i){return n instanceof fg?function(r,s,l,h){if(!ux(r.precondition,s))return l;const p=r.value.clone(),_=oz(r.fieldTransforms,h,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof rc?function(r,s,l,h){if(!ux(r.precondition,s))return l;const p=oz(r.fieldTransforms,h,s),_=s.data;return _.setAll(rz(r)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(w=>w.field))}(n,e,t,i):(l=t,ux(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function o7(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=Qj(i.transform,r||null);null!=s&&(null===t&&(t=rr.empty()),t.set(i.field,s))}return t||null}function iz(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&sg(t,i,(r,s)=>function i7(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof yf&&i instanceof yf||t instanceof vf&&i instanceof vf?sg(t.elements,i.elements,Ha):t instanceof hg&&i instanceof hg?Ha(t._t,i._t):t instanceof dg&&i instanceof dg);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class fg extends dx{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rc extends dx{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rz(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function sz(n,e,t){const i=new Map;pt(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],l=s.transform,h=e.data.field(s.field);i.set(s.field,n7(l,h,t[r]))}return i}function oz(n,e,t){const i=new Map;for(const r of n){const s=r.transform,l=t.data.field(r.field);i.set(r.field,t7(s,l,e))}return i}class pg extends dx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EP extends dx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class CP{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&s7(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=_b(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=_b(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=qj();return this.mutations.forEach(r=>{const s=e.get(r.key),l=s.overlayedDocument;let h=this.applyToLocalView(l,s.mutatedFields);h=t.has(r.key)?null:h;const p=nz(l,h);null!==p&&i.set(r.key,p),l.isValidDocument()||l.convertToNoDocument(yt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&sg(this.mutations,e.mutations,(t,i)=>iz(t,i))&&sg(this.baseMutations,e.baseMutations,(t,i)=>iz(t,i))}}class IP{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){pt(e.mutations.length===i.length);let r=XZ;const s=e.mutations;for(let l=0;l<s.length;l++)r=r.insert(s[l].key,i[l].version);return new IP(e,t,i,r)}}class xP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class c7{constructor(e){this.count=e}}var ki,un;function az(n){switch(n){default:return st();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function lz(n){if(void 0===n)return Ei("GRPC error has no .code"),le.UNKNOWN;switch(n){case ki.OK:return le.OK;case ki.CANCELLED:return le.CANCELLED;case ki.UNKNOWN:return le.UNKNOWN;case ki.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case ki.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case ki.INTERNAL:return le.INTERNAL;case ki.UNAVAILABLE:return le.UNAVAILABLE;case ki.UNAUTHENTICATED:return le.UNAUTHENTICATED;case ki.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case ki.NOT_FOUND:return le.NOT_FOUND;case ki.ALREADY_EXISTS:return le.ALREADY_EXISTS;case ki.PERMISSION_DENIED:return le.PERMISSION_DENIED;case ki.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case ki.ABORTED:return le.ABORTED;case ki.OUT_OF_RANGE:return le.OUT_OF_RANGE;case ki.UNIMPLEMENTED:return le.UNIMPLEMENTED;case ki.DATA_LOSS:return le.DATA_LOSS;default:return st()}}(un=ki||(ki={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class SP{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return hx}static getOrCreateInstance(){return null===hx&&(hx=new SP),hx}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let hx=null;class yb{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,vb.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new yb(yt.min(),r,lx(),ys(),Yt())}}class vb{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new vb(i,t,Yt(),Yt(),Yt())}}class fx{constructor(e,t,i,r){this.It=e,this.removedTargetIds=t,this.key=i,this.Tt=r}}class cz{constructor(e,t){this.targetId=e,this.Et=t}}class uz{constructor(e,t,i=Wi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class dz{constructor(){this.At=0,this.Rt=fz(),this.vt=Wi.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=Yt(),t=Yt(),i=Yt();return this.Rt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:st()}}),new vb(this.vt,this.bt,e,t,i)}xt(){this.Pt=!1,this.Rt=fz()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class u7{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=ys(),this.qt=hz(),this.Ut=new In(Ht)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const i=this.jt(t);switch(e.state){case 0:this.Wt(t)&&i.Dt(e.resumeToken);break;case 1:i.$t(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.$t(),i.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(i.Mt(),i.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),i.Dt(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((i,r)=>{this.Wt(r)&&t(r)})}Jt(e){var t;const i=e.targetId,r=e.Et.count,s=this.Yt(i);if(s){const l=s.target;if(rx(l))if(0===r){const h=new $e(l.path);this.Qt(i,h,Bn.newNoDocument(h,yt.min()))}else pt(1===r);else{const h=this.Zt(i);h!==r&&(this.Ht(i),this.Ut=this.Ut.add(i),null===(t=SP.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:h,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((s,l)=>{const h=this.Yt(l);if(h){if(s.current&&rx(h.target)){const p=new $e(h.target.path);null!==this.Lt.get(p)||this.te(l,p)||this.Qt(l,p,Bn.newNoDocument(p,e))}s.St&&(t.set(l,s.Ct()),s.xt())}});let i=Yt();this.qt.forEach((s,l)=>{let h=!0;l.forEachWhile(p=>{const _=this.Yt(p);return!_||2===_.purpose||(h=!1,!1)}),h&&(i=i.add(s))}),this.Lt.forEach((s,l)=>l.setReadTime(e));const r=new yb(e,t,this.Ut,this.Lt,i);return this.Lt=ys(),this.qt=hz(),this.Ut=new In(Ht),r}Gt(e,t){if(!this.Wt(e))return;const i=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,i),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,i){if(!this.Wt(e))return;const r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),i&&(this.Lt=this.Lt.insert(t,i))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new dz,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new In(Ht),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new dz),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function hz(){return new ui($e.comparator)}function fz(){return new ui($e.comparator)}const d7={asc:"ASCENDING",desc:"DESCENDING"},h7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f7={and:"AND",or:"OR"};class p7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pz(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function m7(n,e){return mg(n,e.toTimestamp())}function Ci(n){return pt(!!n),yt.fromTimestamp(function(e){const t=Iu(e);return new Wn(t.seconds,t.nanos)}(n))}function TP(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mz(n){const e=cn.fromString(n);return pt(Iz(e)),e}function bb(n,e){return TP(n.databaseId,e.path)}function za(n,e){const t=mz(e);if(t.get(1)!==n.databaseId.projectId)throw new we(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(_z(t))}function AP(n,e){return TP(n.databaseId,e)}function gz(n){const e=mz(n);return 4===e.length?cn.emptyPath():_z(e)}function wb(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _z(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yz(n,e,t){return{name:bb(n,e),fields:t.value.mapValue.fields}}function vz(n,e,t){const i=za(n,e.name),r=Ci(e.updateTime),s=e.createTime?Ci(e.createTime):yt.min(),l=new rr({mapValue:{fields:e.fields}}),h=Bn.newFoundDocument(i,r,s,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Eb(n,e){let t;if(e instanceof fg)t={update:yz(n,e.key,e.value)};else if(e instanceof pg)t={delete:bb(n,e.key)};else if(e instanceof rc)t={update:yz(n,e.key,e.data),updateMask:C7(e.fieldMask)};else{if(!(e instanceof EP))return st();t={verify:bb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const l=s.transform;if(l instanceof dg)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yf)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hg)return{fieldPath:s.field.canonicalString(),increment:l._t};throw st()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:m7(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:st()),t;var r}function MP(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?qn.updateTime(Ci(r.updateTime)):void 0!==r.exists?qn.exists(r.exists):qn.none():qn.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,l){let h=null;"setToServerValue"in l?(pt("REQUEST_TIME"===l.setToServerValue),h=new dg):"appendMissingElements"in l?h=new yf(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new vf(l.removeAllFromArray.values||[]):"increment"in l?h=new hg(s,l.increment):st();const p=ci.fromServerFormat(l.fieldPath);return new gb(p,h)}(n,r)):[];var r;if(e.update){const r=za(n,e.update.name),s=new rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new _s((e.updateMask.fieldPaths||[]).map(_=>ci.fromServerFormat(_)));return new rc(r,s,l,t,i)}return new fg(r,s,t,i)}if(e.delete){const r=za(n,e.delete);return new pg(r,t)}if(e.verify){const r=za(n,e.verify);return new EP(r,t)}return st()}function bz(n,e){return{documents:[AP(n,e.path)]}}function RP(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=AP(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=AP(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0!==p.length)return Cz(wn.create(p,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:Mu((w=_).field),direction:b7(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(_=e.limit,n.useProto3Json||sb(_)?_:{value:_});var _,h,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function wz(n){let e=gz(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){pt(1===i);const w=t.from[0];w.allDescendants?r=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=function(w){const x=Ez(w);return x instanceof wn&&mP(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(w=>{return new lg(gg((x=w).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let h=null;t.limit&&(h=function(w){let x;return x="object"==typeof w?w.value:w,sb(x)?null:x}(t.limit));let p=null;var w;t.startAt&&(p=new Tu((w=t.startAt).values||[],!!w.before));let _=null;return t.endAt&&(_=function(w){return new Tu(w.values||[],!w.before)}(t.endAt)),Uj(e,r,l,s,h,"F",p,_)}function Ez(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=gg(e.unaryFilter.field);return sn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=gg(e.unaryFilter.field);return sn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=gg(e.unaryFilter.field);return sn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=gg(e.unaryFilter.field);return sn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?sn.create(gg((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return wn.create(e.compositeFilter.filters.map(t=>Ez(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(n):st();var e}function b7(n){return d7[n]}function w7(n){return h7[n]}function E7(n){return f7[n]}function Mu(n){return{fieldPath:n.canonicalString()}}function gg(n){return ci.fromServerFormat(n.fieldPath)}function Cz(n){return n instanceof sn?function(e){if("=="===e.op){if(Ij(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NAN"}};if(Cj(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ij(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NOT_NAN"}};if(Cj(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mu(e.field),op:w7(e.op),value:e.value}}}(n):n instanceof wn?function(e){const t=e.getFilters().map(i=>Cz(i));return 1===t.length?t[0]:{compositeFilter:{op:E7(e.op),filters:t}}}(n):st()}function C7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Iz(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ru{constructor(e,t,i,r,s=yt.min(),l=yt.min(),h=Wi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Ru(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class xz{constructor(e){this.se=e}}function Dz(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:px(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:bb(r=n.se,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:mg(r,s.version.toTimestamp()),createTime:mg(r,s.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:bf(e.version)};else{if(!e.isUnknownDocument())return st();i.unknownDocument={path:t.path.toArray(),version:bf(e.version)}}var r,s;return i}function px(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function bf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wf(n){const e=new Wn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function Ef(n,e){const t=(e.baseMutations||[]).map(s=>MP(n.se,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const i=e.mutations.map(s=>MP(n.se,s)),r=Wn.fromMillis(e.localWriteTimeMs);return new CP(e.batchId,r,t,i)}function Cb(n){const e=wf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?wf(n.lastLimboFreeSnapshotVersion):yt.min();let i;var r;return void 0!==n.query.documents?(pt(1===(r=n.query).documents.length),i=Xr(ug(gz(r.documents[0])))):i=Xr(wz(n.query)),new Ru(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Wi.fromBase64String(n.resumeToken))}function Sz(n,e){const t=bf(e.snapshotVersion),i=bf(e.lastLimboFreeSnapshotVersion);let r;r=rx(e.target)?bz(n.se,e.target):RP(n.se,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function kP(n){const e=wz({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ax(e,e.limit,"L"):e}function OP(n,e){return new xP(e.largestBatchId,MP(n.se,e.overlayMutation))}function Tz(n,e){const t=e.path.lastSegment();return[n,Qr(e.path.popLast()),t]}function Az(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:bf(i.readTime),documentKey:Qr(i.documentKey.path),largestBatchId:i.largestBatchId}}class x7{getBundleMetadata(e,t){return Mz(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:wf(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return Mz(e).put({bundleId:(i=t).id,createTime:bf(Ci(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Rz(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:kP(r.bundledQuery),readTime:wf(r.readTime)};var r})}saveNamedQuery(e,t){return Rz(e).put({name:(i=t).name,readTime:bf(Ci(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Mz(n){return ir(n,"bundles")}function Rz(n){return ir(n,"namedQueries")}class mx{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new mx(e,t.uid||"")}getOverlay(e,t){return Ib(e).get(Tz(this.userId,t)).next(i=>i?OP(this.serializer,i):null)}getOverlays(e,t){const i=ja();return se.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,l)=>{const h=new xP(t,l);r.push(this.re(e,h))}),se.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(l=>r.add(Qr(l.getCollectionPath())));const s=[];return r.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);s.push(Ib(e).J("collectionPathOverlayIndex",h))}),se.waitFor(s)}getOverlaysForCollection(e,t,i){const r=ja(),s=Qr(t),l=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ib(e).j("collectionPathOverlayIndex",l).next(h=>{for(const p of h){const _=OP(this.serializer,p);r.set(_.getKey(),_)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=ja();let l;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ib(e).Z({index:"collectionGroupOverlayIndex",range:h},(p,_,w)=>{const x=OP(this.serializer,_);s.size()<r||x.largestBatchId===l?(s.set(x.getKey(),x),l=x.largestBatchId):w.done()}).next(()=>s)}re(e,t){return Ib(e).put(function(i,r,s){const[l,h,p]=Tz(r,s.mutation.key);return{userId:r,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Eb(i.se,s.mutation)}}(this.serializer,this.userId,t))}}function Ib(n){return ir(n,"documentOverlays")}class Cf{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(di(e.integerValue));else if("doubleValue"in e){const i=di(e.doubleValue);isNaN(i)?this.ae(t,13):(this.ae(t,15),ob(i)?t.he(0):t.he(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ae(t,20),"string"==typeof i?t.le(i):(t.le(`${i.seconds||""}`),t.he(i.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(ff(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?xj(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):st()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const i=e.fields||{};this.ae(t,55);for(const r of Object.keys(i))this.fe(r,t),this.ue(i[r],t)}ge(e,t){const i=e.values||[];this.ae(t,50);for(const r of i)this.ue(r,t)}_e(e,t){this.ae(t,37),$e.fromName(e).path.forEach(i=>{this.ae(t,60),this.ye(i,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function D7(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function kz(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=D7(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Cf.pe=new Cf;class S7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Te(i.value),i=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Re(i.value),i=t.next();this.ve()}be(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{const r=t.codePointAt(0);this.Te(240|r>>>18),this.Te(128|63&r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r)}}this.Ee()}Pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{const r=t.codePointAt(0);this.Re(240|r>>>18),this.Re(128|63&r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r)}}this.ve()}Ve(e){const t=this.Se(e),i=kz(t);this.De(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ce(e){const t=this.Se(e),i=kz(t);this.De(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class T7{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class A7{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class xb{constructor(){this.Me=new S7,this.Fe=new T7(this.Me),this.Be=new A7(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class If{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new If(this.indexId,this.documentKey,this.arrayValue,i)}}function ku(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Oz(n.arrayValue,e.arrayValue),0!==t?t:(t=Oz(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function Oz(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class M7{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const i=t;i.isInequality()?this.Ge=i:this.Ke.push(i)}}Qe(e){pt(e.collectionGroup===this.collectionId);const t=oP(e);if(void 0!==t&&!this.ze(t))return!1;const i=uf(e);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ge){const l=i[r];if(!this.je(this.Ge,l)||!this.We(this.Ue[s++],l))return!1;++r}for(;r<i.length;++r)if(s>=this.Ue.length||!this.We(this.Ue[s++],i[r]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Pz(n){var e,t;if(pt(n instanceof sn||n instanceof wn),n instanceof sn){if(n instanceof Lj){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>sn.create(n.field,"==",s)))||[];return wn.create(r,"or")}return n}const i=n.filters.map(r=>Pz(r));return wn.create(i,n.op)}function R7(n){if(0===n.getFilters().length)return[];const e=FP(Pz(n));return pt(Nz(e)),PP(e)||NP(e)?[e]:e.getFilters()}function PP(n){return n instanceof sn}function NP(n){return n instanceof wn&&mP(n)}function Nz(n){return PP(n)||NP(n)||function(e){if(e instanceof wn&&pP(e)){for(const t of e.getFilters())if(!PP(t)&&!NP(t))return!1;return!0}return!1}(n)}function FP(n){if(pt(n instanceof sn||n instanceof wn),n instanceof sn)return n;if(1===n.filters.length)return FP(n.filters[0]);const e=n.filters.map(i=>FP(i));let t=wn.create(e,n.op);return t=gx(t),Nz(t)?t:(pt(t instanceof wn),pt(cg(t)),pt(t.filters.length>1),t.filters.reduce((i,r)=>LP(i,r)))}function LP(n,e){let t;return pt(n instanceof sn||n instanceof wn),pt(e instanceof sn||e instanceof wn),t=n instanceof sn?e instanceof sn?wn.create([n,e],"and"):Fz(n,e):e instanceof sn?Fz(e,n):function(i,r){if(pt(i.filters.length>0&&r.filters.length>0),cg(i)&&cg(r))return Pj(i,r.getFilters());const s=pP(i)?i:r,l=pP(i)?r:i,h=s.filters.map(p=>LP(p,l));return wn.create(h,"or")}(n,e),gx(t)}function Fz(n,e){if(cg(e))return Pj(e,n.getFilters());{const t=e.filters.map(i=>LP(n,i));return wn.create(t,"or")}}function gx(n){if(pt(n instanceof sn||n instanceof wn),n instanceof sn)return n;const e=n.getFilters();if(1===e.length)return gx(e[0]);if(kj(n))return n;const t=e.map(r=>gx(r)),i=[];return t.forEach(r=>{r instanceof sn?i.push(r):r instanceof wn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:wn.create(i,n.op)}class k7{constructor(){this.He=new VP}addToCollectionParentIndex(e,t){return this.He.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Bs.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class VP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new In(cn.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new In(cn.comparator)).toArray()}}const _x=new Uint8Array(0);class O7{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new VP,this.Ye=new Au(i=>gf(i),(i,r)=>db(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const s={collectionId:i,parent:Qr(r)};return Lz(e).put(s)}return se.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[sj(t),""],!1,!0);return Lz(e).j(r).next(s=>{for(const l of s){if(l.collectionId!==t)break;i.push(Ua(l.parent))}return i})}addFieldIndex(e,t){const i=yx(e),r={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete r.indexId;const s=i.add(r);if(t.indexState){const l=Sb(e);return s.next(h=>{l.put(Az(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=yx(e),r=Sb(e),s=Db(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Db(e);let r=!0;const s=new Map;return se.forEach(this.Ze(t),l=>this.Xe(e,l).next(h=>{r&&(r=!!h),s.set(l,h)})).next(()=>{if(r){let l=Yt();const h=[];return se.forEach(s,(p,_)=>{var w;Ae("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${gf(t)}`);const x=function(Xe,dt){const Pt=oP(dt);if(void 0===Pt)return null;for(const jt of sx(Xe,Pt.fieldPath))switch(jt.op){case"array-contains-any":return jt.value.arrayValue.values||[];case"array-contains":return[jt.value]}return null}(_,p),T=function(Xe,dt){const Pt=new Map;for(const jt of uf(dt))for(const pn of sx(Xe,jt.fieldPath))switch(pn.op){case"==":case"in":Pt.set(jt.fieldPath.canonicalString(),pn.value);break;case"not-in":case"!=":return Pt.set(jt.fieldPath.canonicalString(),pn.value),Array.from(Pt.values())}return null}(_,p),P=function(Xe,dt){const Pt=[];let jt=!0;for(const pn of uf(dt)){const lr=0===pn.kind?Vj(Xe,pn.fieldPath,Xe.startAt):Bj(Xe,pn.fieldPath,Xe.startAt);Pt.push(lr.value),jt&&(jt=lr.inclusive)}return new Tu(Pt,jt)}(_,p),V=function(Xe,dt){const Pt=[];let jt=!0;for(const pn of uf(dt)){const lr=0===pn.kind?Bj(Xe,pn.fieldPath,Xe.endAt):Vj(Xe,pn.fieldPath,Xe.endAt);Pt.push(lr.value),jt&&(jt=lr.inclusive)}return new Tu(Pt,jt)}(_,p),W=this.tn(p,_,P),re=this.tn(p,_,V),Re=this.en(p,_,T),Ge=this.nn(p.indexId,x,W,P.inclusive,re,V.inclusive,Re);return se.forEach(Ge,Xe=>i.H(Xe,t.limit).next(dt=>{dt.forEach(Pt=>{const jt=$e.fromSegments(Pt.documentKey);l.has(jt)||(l=l.add(jt),h.push(jt))})}))}).next(()=>h)}return se.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:R7(wn.create(e.filters,"and")).map(i=>_P(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,i,r,s,l,h){const p=(null!=t?t.length:1)*Math.max(i.length,s.length),_=p/(null!=t?t.length:1),w=[];for(let x=0;x<p;++x){const T=t?this.sn(t[x/_]):_x,P=this.rn(e,T,i[x%_],r),V=this.on(e,T,s[x%_],l),W=h.map(re=>this.rn(e,T,re,!0));w.push(...this.createRange(P,V,W))}return w}rn(e,t,i,r){const s=new If(e,$e.empty(),t,i);return r?s:s.qe()}on(e,t,i,r){const s=new If(e,$e.empty(),t,i);return r?s.qe():s}Xe(e,t){const i=new M7(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let l=null;for(const h of s)i.Qe(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let i=2;const r=this.Ze(t);return se.forEach(r,s=>this.Xe(e,s).next(l=>{l?0!==i&&l.fields.length<function(h){let p=new In(ci.comparator),_=!1;for(const w of h.filters)for(const x of w.getFlattenedFilters())x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?_=!0:p=p.add(x.field));for(const w of h.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(_?1:0)}(s)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}un(e,t){const i=new xb;for(const r of uf(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const l=i.Le(r.kind);Cf.pe.oe(s,l)}return i.$e()}sn(e){const t=new xb;return Cf.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const i=new xb;return Cf.pe.oe(mf(this.databaseId,t),i.Le(function(r){const s=uf(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.$e()}en(e,t,i){if(null===i)return[];let r=[];r.push(new xb);let s=0;for(const l of uf(e)){const h=i[s++];for(const p of r)if(this.an(t,l.fieldPath)&&cb(h))r=this.hn(r,l,h);else{const _=p.Le(l.kind);Cf.pe.oe(h,_)}}return this.ln(r)}tn(e,t,i){return this.en(e,t,i.position)}ln(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}hn(e,t,i){const r=[...e],s=[];for(const l of i.arrayValue.values||[])for(const h of r){const p=new xb;p.seed(h.$e()),Cf.pe.oe(l,p.Le(t.kind)),s.push(p)}return s}an(e,t){return!!e.filters.find(i=>i instanceof sn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=yx(e),r=Sb(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next(s=>{const l=[];return se.forEach(s,h=>r.get([h.indexId,this.uid]).next(p=>{l.push(function(_,w){const x=w?new ib(w.sequenceNumber,new Bs(wf(w.readTime),new $e(Ua(w.documentKey)),w.largestBatchId)):ib.empty(),T=_.fields.map(([P,V])=>new XI(ci.fromServerFormat(P),V));return new QI(_.indexId,_.collectionGroup,T,x)}(h,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Ht(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=yx(e),s=Sb(e);return this.fn(e).next(l=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>se.forEach(h,p=>s.put(Az(p.indexId,this.user,l,i)))))}updateIndexEntries(e,t){const i=new Map;return se.forEach(t,(r,s)=>{const l=i.get(r.collectionGroup);return(l?se.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),se.forEach(h,p=>this.dn(e,r,p).next(_=>{const w=this.wn(s,p);return _.isEqual(w)?se.resolve():this._n(e,s,p,_,w)}))))})}mn(e,t,i,r){return Db(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(i,t.key),documentKey:t.key.path.toArray()})}gn(e,t,i,r){return Db(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(i,t.key),t.key.path.toArray()])}dn(e,t,i){const r=Db(e);let s=new In(ku);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.cn(i,t)])},(l,h)=>{s=s.add(new If(i.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}wn(e,t){let i=new In(ku);const r=this.un(t,e);if(null==r)return i;const s=oP(t);if(null!=s){const l=e.data.field(s.fieldPath);if(cb(l))for(const h of l.arrayValue.values||[])i=i.add(new If(t.indexId,e.key,this.sn(h),r))}else i=i.add(new If(t.indexId,e.key,_x,r));return i}_n(e,t,i,r,s){Ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,p,_,w,x){const T=h.getIterator(),P=p.getIterator();let V=og(T),W=og(P);for(;V||W;){let re=!1,Re=!1;if(V&&W){const Ge=_(V,W);Ge<0?Re=!0:Ge>0&&(re=!0)}else null!=V?Re=!0:re=!0;re?(w(W),W=og(P)):Re?(x(V),V=og(T)):(V=og(T),W=og(P))}}(r,s,ku,h=>{l.push(this.mn(e,t,i,h))},h=>{l.push(this.gn(e,t,i,h))}),se.waitFor(l)}fn(e){let t=1;return Sb(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((l,h)=>ku(l,h)).filter((l,h,p)=>!h||0!==ku(l,p[h-1]));const r=[];r.push(e);for(const l of i){const h=ku(l,e),p=ku(l,t);if(0===h)r[0]=e.qe();else if(h>0&&p<0)r.push(l),r.push(l.qe());else if(p>0)break}r.push(t);const s=[];for(let l=0;l<r.length;l+=2){if(this.yn(r[l],r[l+1]))return[];s.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,_x,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,_x,[]]))}return s}yn(e,t){return ku(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Vz)}getMinOffset(e,t){return se.mapArray(this.Ze(t),i=>this.Xe(e,i).next(r=>r||st())).next(Vz)}}function Lz(n){return ir(n,"collectionParents")}function Db(n){return ir(n,"indexEntries")}function yx(n){return ir(n,"indexConfiguration")}function Sb(n){return ir(n,"indexState")}function Vz(n){pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;aP(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Bs(e.readTime,e.documentKey,t)}const Bz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vs{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new vs(e,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Uz(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let h=0;const p=i.Z({range:l},(w,x,T)=>(h++,T.delete()));s.push(p.next(()=>{pt(1===h)}));const _=[];for(const w of t.mutations){const x=pj(e,w.key.path,t.batchId);s.push(r.delete(x)),_.push(w.key)}return se.waitFor(s).next(()=>_)}function vx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}vs.DEFAULT_COLLECTION_PERCENTILE=10,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vs.DEFAULT=new vs(41943040,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vs.DISABLED=new vs(-1,0,0);class bx{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.pn={}}static ie(e,t,i,r){pt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new bx(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ou(e).Z({index:"userMutationsIndex",range:i},(r,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=_g(e),l=Ou(e);return l.add({}).next(h=>{pt("number"==typeof h);const p=new CP(h,t,i,r),_=function(T,P,V){const W=V.baseMutations.map(Re=>Eb(T.se,Re)),re=V.mutations.map(Re=>Eb(T.se,Re));return{userId:P,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:W,mutations:re}}(this.serializer,this.userId,p),w=[];let x=new In((T,P)=>Ht(T.canonicalString(),P.canonicalString()));for(const T of r){const P=pj(this.userId,T.key.path,h);x=x.add(T.key.path.popLast()),w.push(l.put(_)),w.push(s.put(P,vZ))}return x.forEach(T=>{w.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.pn[h]=p.keys()}),se.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return Ou(e).get(t).next(i=>i?(pt(i.userId===this.userId),Ef(this.serializer,i)):null)}In(e,t){return this.pn[t]?se.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.pn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Ou(e).Z({index:"userMutationsIndex",range:r},(l,h,p)=>{h.userId===this.userId&&(pt(h.batchId>=i),s=Ef(this.serializer,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Ou(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(r,s,l)=>{i=s.batchId,l.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ou(e).j("userMutationsIndex",t).next(i=>i.map(r=>Ef(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=ex(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return _g(e).Z({range:r},(l,h,p)=>{const[_,w,x]=l,T=Ua(w);if(_===this.userId&&t.path.isEqual(T))return Ou(e).get(x).next(P=>{if(!P)throw st();pt(P.userId===this.userId),s.push(Ef(this.serializer,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new In(Ht);const r=[];return t.forEach(s=>{const l=ex(this.userId,s.path),h=IDBKeyRange.lowerBound(l),p=_g(e).Z({range:h},(_,w,x)=>{const[T,P,V]=_,W=Ua(P);T===this.userId&&s.path.isEqual(W)?i=i.add(V):x.done()});r.push(p)}),se.waitFor(r).next(()=>this.Tn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=ex(this.userId,i),l=IDBKeyRange.lowerBound(s);let h=new In(Ht);return _g(e).Z({range:l},(p,_,w)=>{const[x,T,P]=p,V=Ua(T);x===this.userId&&i.isPrefixOf(V)?V.length===r&&(h=h.add(P)):w.done()}).next(()=>this.Tn(e,h))}Tn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(Ou(e).get(s).next(l=>{if(null===l)throw st();pt(l.userId===this.userId),i.push(Ef(this.serializer,l))}))}),se.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return Uz(e.at,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),se.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return _g(e).Z({range:i},(s,l,h)=>{if(s[0]===this.userId){const p=Ua(s[1]);r.push(p)}else h.done()}).next(()=>{pt(0===r.length)})})}containsKey(e,t){return Hz(e,this.userId,t)}An(e){return jz(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Hz(n,e,t){const i=ex(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let l=!1;return _g(n).Z({range:s,Y:!0},(h,p,_)=>{const[w,x,T]=h;w===e&&x===r&&(l=!0),_.done()}).next(()=>l)}function Ou(n){return ir(n,"mutations")}function _g(n){return ir(n,"documentMutations")}function jz(n){return ir(n,"mutationQueues")}class xf{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new xf(0)}static bn(){return new xf(-1)}}class P7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const i=new xf(t.highestTargetId);return t.highestTargetId=i.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>yt.fromTimestamp(new Wn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Pn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Vn(e,r)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(i=>(i.targetCount+=1,this.Dn(t,i),this.Vn(e,i))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yg(e).delete(t.targetId)).next(()=>this.Pn(e)).next(i=>(pt(i.targetCount>0),i.targetCount-=1,this.Vn(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return yg(e).Z((l,h)=>{const p=Cb(h);p.sequenceNumber<=t&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(e,p)))}).next(()=>se.waitFor(s)).next(()=>r)}forEachTarget(e,t){return yg(e).Z((i,r)=>{const s=Cb(r);t(s)})}Pn(e){return zz(e).get("targetGlobalKey").next(t=>(pt(null!==t),t))}Vn(e,t){return zz(e).put("targetGlobalKey",t)}Sn(e,t){return yg(e).put(Sz(this.serializer,t))}Dn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=gf(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return yg(e).Z({range:r,index:"queryTargetsIndex"},(l,h,p)=>{const _=Cb(h);db(t,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=Pu(e);return t.forEach(l=>{const h=Qr(l.path);r.push(s.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(e,i,l))}),se.waitFor(r)}removeMatchingKeys(e,t,i){const r=Pu(e);return se.forEach(t,s=>{const l=Qr(s.path);return se.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=Pu(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Pu(e);let s=Yt();return r.Z({range:i,Y:!0},(l,h,p)=>{const _=Ua(l[1]),w=new $e(_);s=s.add(w)}).next(()=>s)}containsKey(e,t){const i=Qr(t.path),r=IDBKeyRange.bound([i],[sj(i)],!1,!0);let s=0;return Pu(e).Z({index:"documentTargetsIndex",Y:!0,range:r},([l,h],p,_)=>{0!==l&&(s++,_.done())}).next(()=>s>0)}ne(e,t){return yg(e).get(t).next(i=>i?Cb(i):null)}}function yg(n){return ir(n,"targets")}function zz(n){return ir(n,"targetGlobal")}function Pu(n){return ir(n,"targetDocuments")}function $z([n,e],[t,i]){const r=Ht(n,t);return 0===r?Ht(e,i):r}class N7{constructor(e){this.Cn=e,this.buffer=new In($z),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();$z(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class F7{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;Ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,K.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Cu(i)?Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Eu(i)}yield t.$n(3e5)}))}}class L7{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Us.ct);const i=new N7(t);return this.Mn.forEachTarget(e,r=>i.kn(r.sequenceNumber)).next(()=>this.Mn.Bn(e,r=>i.kn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Mn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Bz)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bz):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let i,r,s,l,h,p,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),r=this.params.maximumSequenceNumbersToCollect):r=x,l=Date.now(),this.nthSequenceNumber(e,r))).next(x=>(i=x,h=Date.now(),this.removeTargets(e,i,t))).next(x=>(s=x,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(x=>(_=Date.now(),rP()<=Fs.in.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-w}ms\n\tDetermined least recently used ${r} in `+(h-l)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${x} documents in `+(_-p)+`ms\nTotal Duration: ${_-w}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:x})))}}class V7{constructor(e,t){this.db=e,this.garbageCollector=new L7(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}qn(e){let t=0;return this.Bn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(i,r)=>t(r))}addReference(e,t,i){return wx(e,i)}removeReference(e,t,i){return wx(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return wx(e,t)}Kn(e,t){return function(i,r){let s=!1;return jz(i).X(l=>Hz(i,l,r).next(h=>(h&&(s=!0),se.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Un(e,(l,h)=>{if(h<=t){const p=this.Kn(e,l).next(_=>{if(!_)return s++,i.getEntry(e,l).next(()=>(i.removeEntry(l,yt.min()),Pu(e).delete([0,Qr(l.path)])))});r.push(p)}}).next(()=>se.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return wx(e,t)}Un(e,t){const i=Pu(e);let r,s=Us.ct;return i.Z({index:"documentTargetsIndex"},([l,h],{path:p,sequenceNumber:_})=>{0===l?(s!==Us.ct&&t(new $e(Ua(r)),s),s=_,r=p):s=Us.ct}).next(()=>{s!==Us.ct&&t(new $e(Ua(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wx(n,e){return Pu(n).put((i=n.currentSequenceNumber,{targetId:0,path:Qr(e.path),sequenceNumber:i}));var i}class Gz{constructor(){this.changes=new Au(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class B7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Df(e).put(i)}removeEntry(e,t,i){return Df(e).delete(function(r,s){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],px(s),l[l.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Gn(e,i)))}getEntry(e,t){let i=Bn.newInvalidDocument(t);return Df(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Tb(t))},(r,s)=>{i=this.Qn(t,s)}).next(()=>i)}zn(e,t){let i={size:0,document:Bn.newInvalidDocument(t)};return Df(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Tb(t))},(r,s)=>{i={document:this.Qn(t,s),size:vx(s)}}).next(()=>i)}getEntries(e,t){let i=ys();return this.jn(e,t,(r,s)=>{const l=this.Qn(r,s);i=i.insert(r,l)}).next(()=>i)}Wn(e,t){let i=ys(),r=new ui($e.comparator);return this.jn(e,t,(s,l)=>{const h=this.Qn(s,l);i=i.insert(s,h),r=r.insert(s,vx(l))}).next(()=>({documents:i,Hn:r}))}jn(e,t,i){if(t.isEmpty())return se.resolve();let r=new In(Yz);t.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(Tb(r.first()),Tb(r.last())),l=r.getIterator();let h=l.getNext();return Df(e).Z({index:"documentKeyIndex",range:s},(p,_,w)=>{const x=$e.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;h&&Yz(h,x)<0;)i(h,null),h=l.getNext();h&&h.isEqual(x)&&(i(h,_),h=l.hasNext()?l.getNext():null),h?w.G(Tb(h)):w.done()}).next(()=>{for(;h;)i(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,i,r){const s=t.path,l=[s.popLast().toArray(),s.lastSegment(),px(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],h=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Df(e).j(IDBKeyRange.bound(l,h,!0)).next(p=>{let _=ys();for(const w of p){const x=this.Qn($e.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);x.isFoundDocument()&&(fb(t,x)||r.has(x.key))&&(_=_.insert(x.key,x))}return _})}getAllFromCollectionGroup(e,t,i,r){let s=ys();const l=Kz(t,i),h=Kz(t,Bs.max());return Df(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(p,_,w)=>{const x=this.Qn($e.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(x.key,x),s.size===r&&w.done()}).next(()=>s)}newChangeBuffer(e){return new U7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qz(e).get("remoteDocumentGlobalKey").next(t=>(pt(!!t),t))}Gn(e,t){return qz(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const i=function I7(n,e){let t;if(e.document)t=vz(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=$e.fromSegments(e.noDocument.path),r=wf(e.noDocument.readTime);t=Bn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const i=$e.fromSegments(e.unknownDocument.path),r=wf(e.unknownDocument.version);t=Bn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Wn(i[0],i[1]);return yt.fromTimestamp(r)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(yt.min()))return i}return Bn.newInvalidDocument(e)}}function Wz(n){return new B7(n)}class U7 extends Gz{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new Au(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new In((s,l)=>Ht(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const h=this.Yn.get(s);if(t.push(this.Jn.removeEntry(e,s,h.readTime)),l.isValidDocument()){const p=Dz(this.Jn.serializer,l);r=r.add(s.path.popLast());const _=vx(p);i+=_-h.size,t.push(this.Jn.addEntry(e,s,p))}else if(i-=h.size,this.trackRemovals){const p=Dz(this.Jn.serializer,l.convertToNoDocument(yt.min()));t.push(this.Jn.addEntry(e,s,p))}}),r.forEach(s=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Jn.updateMetadata(e,i)),se.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(i=>(this.Yn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:i,Hn:r})=>(r.forEach((s,l)=>{this.Yn.set(s,{size:l,readTime:i.get(s).readTime})}),i))}}function qz(n){return ir(n,"remoteDocumentGlobal")}function Df(n){return ir(n,"remoteDocumentsV14")}function Tb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Kz(n,e){const t=e.documentKey.path.toArray();return[n,px(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Yz(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=Ht(t[s],i[s]),r)return r;return r=Ht(t.length,i.length),r||(r=Ht(t[t.length-2],i[i.length-2]),r||Ht(t[t.length-1],i[i.length-1]))}class H7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Zz{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&_b(i.mutation,r,_s.empty(),Wn.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Yt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Yt()){const r=ja();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let l=pb();return s.forEach((h,p)=>{l=l.insert(h,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=ja();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Yt()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,i,r){let s=ys();const l=mb(),h=mb();return t.forEach((p,_)=>{const w=i.get(_.key);r.has(_.key)&&(void 0===w||w.mutation instanceof rc)?s=s.insert(_.key,_):void 0!==w?(l.set(_.key,w.mutation.getFieldMask()),_b(w.mutation,_,w.mutation.getFieldMask(),Wn.now())):l.set(_.key,_s.empty())}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((_,w)=>l.set(_,w)),t.forEach((_,w)=>{var x;return h.set(_,new H7(w,null!==(x=l.get(_))&&void 0!==x?x:null))}),h))}recalculateAndSaveOverlays(e,t){const i=mb();let r=new ui((l,h)=>l-h),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(p=>{const _=t.get(p);if(null===_)return;let w=i.get(p)||_s.empty();w=h.applyToLocalView(_,w),i.set(p,w);const x=(r.get(h.batchId)||Yt()).add(p);r=r.insert(h.batchId,x)})}).next(()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),_=p.key,w=p.value,x=qj();w.forEach(T=>{if(!s.has(T)){const P=nz(t.get(T),i.get(T));null!==P&&x.set(T,P),s=s.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,_,x))}return se.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return $e.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):vP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const l=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):se.resolve(ja());let h=-1,p=s;return l.next(_=>se.forEach(_,(w,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),s.get(w)?se.resolve():this.remoteDocumentCache.getEntry(e,w).next(T=>{p=p.insert(w,T)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,p,_,Yt())).next(w=>({batchId:h,changes:Wj(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(i=>{let r=pb();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=pb();return this.indexManager.getCollectionParents(e,r).next(l=>se.forEach(l,h=>{const p=(_=t,w=h.child(r),new ic(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,w;return this.getDocumentsMatchingCollectionQuery(e,p,i).next(_=>{_.forEach((w,x)=>{s=s.insert(w,x)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(s=>{r.forEach((h,p)=>{const _=p.getKey();null===s.get(_)&&(s=s.insert(_,Bn.newInvalidDocument(_)))});let l=pb();return s.forEach((h,p)=>{const _=r.get(h);void 0!==_&&_b(_.mutation,p,_s.empty(),Wn.now()),fb(t,p)&&(l=l.insert(h,p))}),l})}}class j7{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Ci(i.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(i=t).name,query:kP(i.bundledQuery),readTime:Ci(i.readTime)}),se.resolve();var i}}class z7{constructor(){this.overlays=new ui($e.comparator),this.ts=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ja();return se.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.re(e,t,s)}),se.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.ts.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ts.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const r=ja(),s=t.length+1,l=new $e(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const p=h.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return se.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new ui((_,w)=>_-w);const l=this.overlays.getIterator();for(;l.hasNext();){const _=l.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let w=s.get(_.largestBatchId);null===w&&(w=ja(),s=s.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const h=ja(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,w)=>h.set(_,w)),!(h.size()>=r)););return se.resolve(h)}re(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.ts.get(r.largestBatchId).delete(i.key);this.ts.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new xP(t,i));let s=this.ts.get(t);void 0===s&&(s=Yt(),this.ts.set(t,s)),this.ts.set(t,s.add(i.key))}}class BP{constructor(){this.es=new In(sr.ns),this.ss=new In(sr.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const i=new sr(e,t);this.es=this.es.add(i),this.ss=this.ss.add(i)}os(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.us(new sr(e,t))}cs(e,t){e.forEach(i=>this.removeReference(i,t))}hs(e){const t=new $e(new cn([])),i=new sr(t,e),r=new sr(t,e+1),s=[];return this.ss.forEachInRange([i,r],l=>{this.us(l),s.push(l.key)}),s}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new $e(new cn([])),i=new sr(t,e),r=new sr(t,e+1);let s=Yt();return this.ss.forEachInRange([i,r],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new sr(e,0),i=this.es.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class sr{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return $e.comparator(e.key,t.key)||Ht(e.ds,t.ds)}static rs(e,t){return Ht(e.ds,t.ds)||$e.comparator(e.key,t.key)}}class $7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new In(sr.ns)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.ws;this.ws++;const l=new CP(s,t,i,r);this.mutationQueue.push(l);for(const h of r)this._s=this._s.add(new sr(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,t){return se.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ys(t+1),s=r<0?0:r;return se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new sr(t,0),r=new sr(t,Number.POSITIVE_INFINITY),s=[];return this._s.forEachInRange([i,r],l=>{const h=this.gs(l.ds);s.push(h)}),se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new In(Ht);return t.forEach(r=>{const s=new sr(r,0),l=new sr(r,Number.POSITIVE_INFINITY);this._s.forEachInRange([s,l],h=>{i=i.add(h.ds)})}),se.resolve(this.ps(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;$e.isDocumentKey(s)||(s=s.child(""));const l=new sr(new $e(s),0);let h=new In(Ht);return this._s.forEachWhile(p=>{const _=p.key.path;return!!i.isPrefixOf(_)&&(_.length===r&&(h=h.add(p.ds)),!0)},l),se.resolve(this.ps(h))}ps(e){const t=[];return e.forEach(i=>{const r=this.gs(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){pt(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let i=this._s;return se.forEach(t.mutations,r=>{const s=new sr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this._s=i})}En(e){}containsKey(e,t){const i=new sr(t,0),r=this._s.firstAfterOrEqual(i);return se.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return se.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class G7{constructor(e){this.Ts=e,this.docs=new ui($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,l=this.Ts(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let i=ys();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Bn.newInvalidDocument(r))}),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=ys();const l=t.path,h=new $e(l.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:_,value:{document:w}}=p.getNext();if(!l.isPrefixOf(_.path))break;_.path.length>l.length+1||aP(aj(w),i)<=0||(r.has(w.key)||fb(t,w))&&(s=s.insert(w.key,w.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(e,t,i,r){st()}Es(e,t){return se.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new W7(this)}getSize(e){return se.resolve(this.size)}}class W7 extends Gz{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Jn.addEntry(e,r)):this.Jn.removeEntry(i)}),se.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class q7{constructor(e){this.persistence=e,this.As=new Au(t=>gf(t),db),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Rs=0,this.vs=new BP,this.targetCount=0,this.bs=xf.vn()}forEachTarget(e,t){return this.As.forEach((i,r)=>t(r)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Rs&&(this.Rs=t),se.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new xf(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Sn(t),se.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.As.forEach((l,h)=>{h.sequenceNumber<=t&&null===i.get(h.targetId)&&(this.As.delete(l),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),se.waitFor(s).next(()=>r)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.As.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.vs.os(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.vs.cs(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(l=>{s.push(r.markPotentiallyOrphaned(e,l))}),se.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this.vs.fs(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.vs.containsKey(t))}}class Qz{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Us(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new q7(this),this.indexManager=new k7,this.remoteDocumentCache=new G7(i=>this.referenceDelegate.Cs(i)),this.serializer=new xz(t),this.xs=new j7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new z7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Ps[e.toKey()];return i||(i=new $7(t,this.referenceDelegate),this.Ps[e.toKey()]=i),i}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,i){Ae("MemoryPersistence","Starting transaction:",e);const r=new K7(this.Vs.next());return this.referenceDelegate.Ns(),i(r).next(s=>this.referenceDelegate.ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Os(e,t){return se.or(Object.values(this.Ps).map(i=>()=>i.containsKey(e,t)))}}class K7 extends cj{constructor(e){super(),this.currentSequenceNumber=e}}class Ex{constructor(e){this.persistence=e,this.$s=new BP,this.Ms=null}static Fs(e){return new Ex(e)}get Bs(){if(this.Ms)return this.Ms;throw st()}addReference(e,t,i){return this.$s.addReference(i,t),this.Bs.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.$s.removeReference(i,t),this.Bs.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),se.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(r=>this.Bs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Bs.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Bs,i=>{const r=$e.fromPath(i);return this.Ls(e,r).next(s=>{s||t.removeEntry(r,yt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(i=>{i?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return se.or([()=>se.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Y7{constructor(e){this.serializer=e}M(e,t,i,r){const s=new JI("createOrUpgrade",t);var h;i<1&&r>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fj,{unique:!0}),h.createObjectStore("documentMutations"),Xz(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=se.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),Xz(e)),l=l.next(()=>function(h){const p=h.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(h,p){return p.store("mutations").j().next(_=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fj,{unique:!0});const w=p.store("mutations"),x=_.map(T=>w.put(T));return se.waitFor(x)})}(e,s))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(l=l.next(()=>this.qs(s))),i<6&&r>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Us(s)))),i<7&&r>=7&&(l=l.next(()=>this.Ks(s))),i<8&&r>=8&&(l=l.next(()=>this.Gs(e,s))),i<9&&r>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(l=l.next(()=>this.Qs(s))),i<11&&r>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(l=l.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:RZ});p.createIndex("collectionPathOverlayIndex",kZ,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",OZ,{unique:!1})}(e)})),i<13&&r>=13&&(l=l.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:bZ});p.createIndex("documentKeyIndex",wZ),p.createIndex("collectionGroupIndex",EZ)}(e)).next(()=>this.zs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.js(e,s))),i<15&&r>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:SZ}).createIndex("sequenceNumberIndex",TZ,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:AZ}).createIndex("documentKeyIndex",MZ,{unique:!1})}(e))),l}Us(e){let t=0;return e.store("remoteDocuments").Z((i,r)=>{t+=vx(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.j().next(r=>se.forEach(r,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",l).next(h=>se.forEach(h,p=>{pt(p.userId===s.userId);const _=Ef(this.serializer,p);return Uz(e,s.userId,_).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((l,h)=>{const p=new cn(l),_=[0,Qr(p)];s.push(t.get(_).next(w=>w?se.resolve():t.put({targetId:0,path:Qr(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>se.waitFor(s))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:DZ});const i=t.store("collectionParents"),r=new VP,s=l=>{if(r.add(l)){const h=l.lastSegment(),p=l.popLast();return i.put({collectionId:h,parent:Qr(p)})}};return t.store("remoteDocuments").Z({Y:!0},(l,h)=>{const p=new cn(l);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([l,h,p],_)=>{const w=Ua(h);return s(w.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((i,r)=>{const s=Cb(r),l=Sz(this.serializer,s);return t.put(l)})}zs(e,t){const i=t.store("remoteDocuments"),r=[];return i.Z((s,l)=>{const h=t.store("remoteDocumentsV14"),p=(_=l,_.document?new $e(cn.fromString(_.document.name).popFirst(5)):_.noDocument?$e.fromSegments(_.noDocument.path):_.unknownDocument?$e.fromSegments(_.unknownDocument.path):st()).path.toArray();var _;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(h.put(w))}).next(()=>se.waitFor(r))}js(e,t){const i=t.store("mutations"),r=Wz(this.serializer),s=new Qz(Ex.Fs,this.serializer.se);return i.j().next(l=>{const h=new Map;return l.forEach(p=>{var _;let w=null!==(_=h.get(p.userId))&&void 0!==_?_:Yt();Ef(this.serializer,p).keys().forEach(x=>w=w.add(x)),h.set(p.userId,w)}),se.forEach(h,(p,_)=>{const w=new nr(_),x=mx.ie(this.serializer,w),T=s.getIndexManager(w),P=bx.ie(w,this.serializer,T,s.referenceDelegate);return new Zz(r,P,x,T).recalculateAndSaveOverlaysForDocumentKeys(new uP(t,Us.ct),p).next()})})}}function Xz(n){n.createObjectStore("targetDocuments",{keyPath:IZ}).createIndex("documentTargetsIndex",xZ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CZ,{unique:!0}),n.createObjectStore("targetGlobal")}const UP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class HP{constructor(e,t,i,r,s,l,h,p,_,w,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ws=s,this.window=l,this.document=h,this.Hs=_,this.Js=w,this.Ys=x,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=T=>Promise.resolve(),!HP.D())throw new we(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new V7(this,r),this.si=t+"main",this.serializer=new xz(p),this.ii=new ta(this.si,this.Ys,new Y7(this.serializer)),this.Ds=new P7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wz(this.serializer),this.xs=new x7,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===w&&Ei("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new we(le.FAILED_PRECONDITION,UP);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Us(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var i=(0,K.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,K.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,K.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Cu(e))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return Ab(e).get("owner").next(t=>se.resolve(this._i(t)))}mi(e){return Cx(e).delete(this.clientId)}gi(){var e=this;return(0,K.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=ir(i,"clientMetadata");return r.j().next(s=>{const l=e.pi(s,18e5),h=s.filter(p=>-1===l.indexOf(p));return se.forEach(h,p=>r.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ri)for(const i of t)e.ri.removeItem(e.Ii(i.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?se.resolve(!0):Ab(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new we(le.FAILED_PRECONDITION,UP);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cx(e).j().next(i=>void 0===this.pi(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,K.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new uP(t,Us.ct);return e.di(i).next(()=>e.mi(i))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(i=>this.yi(i.updateTimeMs,t)&&!this.Ti(i.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Cx(e).j().next(t=>this.pi(t,18e5).map(i=>i.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return bx.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new O7(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return mx.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,i){Ae("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(l=this.Ys)?NZ:14===l?_j:13===l?gj:12===l?PZ:11===l?mj:void st();var l;let h;return this.ii.runTransaction(e,r,s,p=>(h=new uP(p,this.Vs?this.Vs.next():Us.ct),"readwrite-primary"===t?this.li(h).next(_=>!!_||this.fi(h)).next(_=>{if(!_)throw Ei(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new we(le.FAILED_PRECONDITION,lj);return i(h)}).next(_=>this.wi(h).next(()=>_)):this.Pi(h).next(()=>i(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Pi(e){return Ab(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new we(le.FAILED_PRECONDITION,UP)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ab(e).put("owner",t)}static D(){return ta.D()}di(e){const t=Ab(e);return t.get("owner").next(i=>this._i(i)?(Ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}yi(e,t){const i=Date.now();return!(e<i-t||e>i&&(Ei(`Detected an update time that is in the future: ${e} > ${i}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,G.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const i=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Ae("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ei("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){Ei("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ab(n){return ir(n,"owner")}function Cx(n){return ir(n,"clientMetadata")}function jP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class zP{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Vi=i,this.Si=r}static Di(e,t){let i=Yt(),r=Yt();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new zP(e,t.fromCache,i,r)}}class Jz{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ni(e,t).next(s=>s||this.ki(e,t,r,i)).next(s=>s||this.Oi(e,t))}Ni(e,t){if(Hj(t))return se.resolve(null);let i=Xr(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ax(t,null,"F"),i=Xr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const l=Yt(...s);return this.xi.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const _=this.$i(t,h);return this.Mi(t,_,l,p.readTime)?this.Ni(e,ax(t,null,"F")):this.Fi(e,_,t,p)}))})))}ki(e,t,i,r){return Hj(t)||r.isEqual(yt.min())?this.Oi(e,t):this.xi.getDocuments(e,i).next(s=>{const l=this.$i(t,s);return this.Mi(t,l,i,r)?this.Oi(e,t):(rP()<=Fs.in.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wP(t)),this.Fi(e,l,t,oj(r,-1)))})}$i(e,t){let i=new In($j(e));return t.forEach((r,s)=>{fb(e,s)&&(i=i.add(s))}),i}Mi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Oi(e,t){return rP()<=Fs.in.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",wP(t)),this.xi.getDocumentsMatchingQuery(e,t,Bs.min())}Fi(e,t,i,r){return this.xi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class Z7{constructor(e,t,i,r){this.persistence=e,this.Bi=t,this.serializer=r,this.Li=new ui(Ht),this.qi=new Au(s=>gf(s),db),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(i)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zz(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function e$(n,e,t,i){return new Z7(n,e,t,i)}function t$(n,e){return $P.apply(this,arguments)}function $P(){return $P=(0,K.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Gi(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const l=[],h=[];let p=Yt();for(const _ of r){l.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}for(const _ of s){h.push(_.batchId);for(const w of _.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(i,p).next(_=>({Qi:_,removedBatchIds:l,addedBatchIds:h}))})})}),$P.apply(this,arguments)}function n$(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function i$(n,e,t){let i=Yt(),r=Yt();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let l=ys();return t.forEach((h,p)=>{const _=s.get(h);p.isFoundDocument()!==_.isFoundDocument()&&(r=r.add(h)),p.isNoDocument()&&p.version.isEqual(yt.min())?(e.removeEntry(h,p.readTime),l=l.insert(h,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),l=l.insert(h,p)):Ae("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",p.version)}),{zi:l,ji:r}})}function J7(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function vg(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ds.getTargetData(i,e).next(s=>s?(r=s,se.resolve(r)):t.Ds.allocateTargetId(i).next(l=>(r=new Ru(e,l,0,i.currentSequenceNumber),t.Ds.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Li.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Li=t.Li.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function bg(n,e,t){return GP.apply(this,arguments)}function GP(){return GP=(0,K.Z)(function*(n,e,t){const i=qe(n),r=i.Li.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Cu(l))throw l;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.Li=i.Li.remove(e),i.qi.delete(r.target)}),GP.apply(this,arguments)}function Ix(n,e,t){const i=qe(n);let r=yt.min(),s=Yt();return i.persistence.runTransaction("Execute query","readonly",l=>function(h,p,_){const w=qe(h),x=w.qi.get(_);return void 0!==x?se.resolve(w.Li.get(x)):w.Ds.getTargetData(p,_)}(i,l,Xr(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Ds.getMatchingKeysForTargetId(l,h.targetId).next(p=>{s=p})}).next(()=>i.Bi.getDocumentsMatchingQuery(l,e,t?r:yt.min(),t?s:Yt())).next(h=>(o$(i,zj(e),h),{documents:h,Wi:s})))}function r$(n,e){const t=qe(n),i=qe(t.Ds),r=t.Li.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.ne(s,e).next(l=>l?l.target:null))}function s$(n,e){const t=qe(n),i=t.Ui.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Ki.getAllFromCollectionGroup(r,e,oj(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(o$(t,e,r),r))}function o$(n,e,t){let i=n.Ui.get(e)||yt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ui.set(e,i)}function WP(){return WP=(0,K.Z)(function*(n,e,t,i){const r=qe(n);let s=Yt(),l=ys();for(const _ of t){const w=e.Hi(_.metadata.name);_.document&&(s=s.add(w));const x=e.Ji(_);x.setReadTime(e.Yi(_.metadata.readTime)),l=l.insert(w,x)}const h=r.Ki.newChangeBuffer({trackRemovals:!0}),p=yield vg(r,(_=i,Xr(ug(cn.fromString(`__bundle__/docs/${_}`)))));var _;return r.persistence.runTransaction("Apply bundle documents","readwrite",_=>i$(_,h,l).next(w=>(h.apply(_),w)).next(w=>r.Ds.removeMatchingKeysForTargetId(_,p.targetId).next(()=>r.Ds.addMatchingKeys(_,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,w.zi,w.ji)).next(()=>w.zi)))}),WP.apply(this,arguments)}function t9(n,e){return qP.apply(this,arguments)}function qP(){return qP=(0,K.Z)(function*(n,e,t=Yt()){const i=yield vg(n,Xr(kP(e.bundledQuery))),r=qe(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const l=Ci(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.xs.saveNamedQuery(s,e);const h=i.withResumeToken(Wi.EMPTY_BYTE_STRING,l);return r.Li=r.Li.insert(h.targetId,h),r.Ds.updateTargetData(s,h).next(()=>r.Ds.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Ds.addMatchingKeys(s,t,i.targetId)).next(()=>r.xs.saveNamedQuery(s,e))})}),qP.apply(this,arguments)}function a$(n,e){return`firestore_clients_${n}_${e}`}function l$(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function KP(n,e){return`firestore_targets_${n}_${e}`}class xx{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Zi(e,t,i){const r=JSON.parse(i);let s,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new we(r.error.code,r.error.message))),l?new xx(e,t,r.state,s):(Ei("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mb{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new we(i.error.code,i.error.message))),s?new Mb(e,i.state,r):(Ei("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dx{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=lx();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=dj(i.activeTargetIds[l]),s=s.add(i.activeTargetIds[l]);return r?new Dx(e,s):(Ei("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class YP{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new YP(t.clientId,t.onlineState):(Ei("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ZP{constructor(){this.activeTargetIds=lx()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QP{constructor(e,t,i,r,s){this.window=e,this.Ws=t,this.persistenceKey=i,this.nr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new ui(Ht),this.started=!1,this.ur=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.cr=a$(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new ZP),this.hr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,K.Z)(function*(){const t=yield e.syncEngine.bi();for(const r of t){if(r===e.nr)continue;const s=e.getItem(a$(e.persistenceKey,r));if(s){const l=Dx.Zi(r,s);l&&(e.rr=e.rr.insert(l.clientId,l))}}e.mr();const i=e.storage.getItem(e.wr);if(i){const r=e.gr(i);r&&e.yr(r)}for(const r of e.ur)e.ir(r);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,i){this.Ir(e,t,i),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(KP(this.persistenceKey,e));if(i){const r=Mb.Zi(e,i);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(KP(this.persistenceKey,e))}updateQueryState(e,t,i){this.Ar(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Tr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae("SharedClientState","READ",e,t),t}setItem(e,t){Ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ae("SharedClientState","EVENT",i.key,i.newValue),i.key===this.cr)return void Ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,K.Z)(function*(){if(t.started){if(null!==i.key)if(t.hr.test(i.key)){if(null==i.newValue){const r=t.br(i.key);return t.Pr(r,null)}{const r=t.Vr(i.key,i.newValue);if(r)return t.Pr(r.clientId,r)}}else if(t.lr.test(i.key)){if(null!==i.newValue){const r=t.Sr(i.key,i.newValue);if(r)return t.Dr(r)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const r=t.Cr(i.key,i.newValue);if(r)return t.Nr(r)}}else if(i.key===t.wr){if(null!==i.newValue){const r=t.gr(i.newValue);if(r)return t.yr(r)}}else if(i.key===t.ar){const r=function(s){let l=Us.ct;if(null!=s)try{const h=JSON.parse(s);pt("number"==typeof h),l=h}catch(h){Ei("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(i.newValue);r!==Us.ct&&t.sequenceNumberHandler(r)}else if(i.key===t._r){const r=t.kr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Or(s)))}}else t.ur.push(i)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,i){const r=new xx(this.currentUser,e,t,i),s=l$(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Xi())}Tr(e){const t=l$(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,i){const r=KP(this.persistenceKey,e),s=new Mb(e,t,i);this.setItem(r,s.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const i=this.br(e);return Dx.Zi(i,t)}Sr(e,t){const i=this.lr.exec(e),r=Number(i[1]);return xx.Zi(new nr(void 0!==i[2]?i[2]:null),r,t)}Cr(e,t){const i=this.dr.exec(e),r=Number(i[1]);return Mb.Zi(r,t)}gr(e){return YP.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,K.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const i=t?this.rr.insert(e,t):this.rr.remove(e),r=this.pr(this.rr),s=this.pr(i),l=[],h=[];return s.forEach(p=>{r.has(p)||l.push(p)}),r.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Fr(l,h).then(()=>{this.rr=i})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=lx();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class c${constructor(){this.Br=new ZP,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,i){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new ZP,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class n9{qr(e){}shutdown(){}}class u${constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Sx=null;function XP(){return null===Sx?Sx=268435456+Math.round(2147483648*Math.random()):Sx++,"0x"+Sx.toString(16)}const i9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r9{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const Or="WebChannelConnection";class s9 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,i,r,s){const l=XP(),h=this.ao(e,t);Ae("RestConnection",`Sending RPC '${e}' ${l}:`,h,i);const p={};return this.ho(p,r,s),this.lo(e,h,p,i).then(_=>(Ae("RestConnection",`Received RPC '${e}' ${l}: `,_),_),_=>{throw Ba("RestConnection",`RPC '${e}' ${l} failed with error: `,_,"url: ",h,"request:",i),_})}fo(e,t,i,r,s,l){return this.co(e,t,i,r,s)}ho(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+rg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}ao(e,t){return`${this.ro}/v1/${t}:${i9[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,i,r){const s=XP();return new Promise((l,h)=>{const p=new tZ;p.setWithCredentials(!0),p.listenOnce(XY.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case iP.NO_ERROR:const w=p.getResponseJson();Ae(Or,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(w)),l(w);break;case iP.TIMEOUT:Ae(Or,`RPC '${e}' ${s} timed out`),h(new we(le.DEADLINE_EXCEEDED,"Request time out"));break;case iP.HTTP_ERROR:const x=p.getStatus();if(Ae(Or,`RPC '${e}' ${s} failed with status:`,x,"response text:",p.getResponseText()),x>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const P=T?.error;if(P&&P.status&&P.message){const V=function(W){const re=W.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(re)>=0?re:le.UNKNOWN}(P.status);h(new we(V,P.message))}else h(new we(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new we(le.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Ae(Or,`RPC '${e}' ${s} completed.`)}});const _=JSON.stringify(r);Ae(Or,`RPC '${e}' ${s} sending request:`,r),p.send(t,"POST",_,i,15)})}wo(e,t,i){const r=XP(),s=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ZY(),h=QY(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new eZ({})),this.ho(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=s.join("");Ae(Or,`Creating RPC '${e}' stream ${r}: ${_}`,p);const w=l.createWebChannel(_,p);let x=!1,T=!1;const P=new r9({Wr:W=>{T?Ae(Or,`Not sending because RPC '${e}' stream ${r} is closed:`,W):(x||(Ae(Or,`Opening RPC '${e}' stream ${r} transport.`),w.open(),x=!0),Ae(Or,`RPC '${e}' stream ${r} sending:`,W),w.send(W))},Hr:()=>w.close()}),V=(W,re,Re)=>{W.listen(re,Ge=>{try{Re(Ge)}catch(Xe){setTimeout(()=>{throw Xe},0)}})};return V(w,ZI.EventType.OPEN,()=>{T||Ae(Or,`RPC '${e}' stream ${r} transport opened.`)}),V(w,ZI.EventType.CLOSE,()=>{T||(T=!0,Ae(Or,`RPC '${e}' stream ${r} transport closed`),P.so())}),V(w,ZI.EventType.ERROR,W=>{T||(T=!0,Ba(Or,`RPC '${e}' stream ${r} transport errored:`,W),P.so(new we(le.UNAVAILABLE,"The operation could not be completed")))}),V(w,ZI.EventType.MESSAGE,W=>{var re;if(!T){const Re=W.data[0];pt(!!Re);const Xe=Re.error||(null===(re=Re[0])||void 0===re?void 0:re.error);if(Xe){Ae(Or,`RPC '${e}' stream ${r} received error:`,Xe);const dt=Xe.status;let Pt=function(pn){const lr=ki[pn];if(void 0!==lr)return lz(lr)}(dt),jt=Xe.message;void 0===Pt&&(Pt=le.INTERNAL,jt="Unknown error status: "+dt+" with message "+Xe.message),T=!0,P.so(new we(Pt,jt)),w.close()}else Ae(Or,`RPC '${e}' stream ${r} received:`,Re),P.io(Re)}}),V(h,JY.STAT_EVENT,W=>{W.stat===ej.PROXY?Ae(Or,`RPC '${e}' stream ${r} detected buffering proxy`):W.stat===ej.NOPROXY&&Ae(Or,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.no()},0),P}}function d$(){return typeof window<"u"?window:null}function Tx(){return typeof document<"u"?document:null}function Rb(n){return new p7(n,!0)}class JP{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Ws=e,this.timerId=t,this._o=i,this.mo=r,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),i=Math.max(0,Date.now()-this.To),r=Math.max(0,t-i);r>0&&Ae("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,r,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class h${constructor(e,t,i,r,s,l,h,p){this.Ws=e,this.bo=i,this.Po=r,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new JP(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,K.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,K.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var i=this;return(0,K.Z)(function*(){i.Bo(),i.Lo(),i.Co.cancel(),i.Vo++,4!==e?i.Co.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Ei(t.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),i.Co.Eo()):t&&t.code===le.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Vo===t&&this.Ko(i,r)},i=>{e(()=>{const r=new we(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Go(r)})})}Ko(e,t){const i=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{i(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(r=>{i(()=>this.Go(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}ko(){var e=this;this.state=5,this.Co.Ao((0,K.Z)(function*(){e.state=0,e.start()}))}Go(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o9 extends h${constructor(e,t,i,r,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=s}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function _7(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:st(),r=e.targetChange.targetIds||[],s=function(p,_){return p.useProto3Json?(pt(void 0===_||"string"==typeof _),Wi.fromBase64String(_||"")):(pt(void 0===_||_ instanceof Uint8Array),Wi.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const _=void 0===p.code?le.UNKNOWN:lz(p.code);return new we(_,p.message||"")}(l);t=new uz(i,r,s,h||null)}else if("documentChange"in e){const i=e.documentChange,r=za(n,i.document.name),s=Ci(i.document.updateTime),l=i.document.createTime?Ci(i.document.createTime):yt.min(),h=new rr({mapValue:{fields:i.document.fields}}),p=Bn.newFoundDocument(r,s,l,h);t=new fx(i.targetIds||[],i.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const i=e.documentDelete,r=za(n,i.document),s=i.readTime?Ci(i.readTime):yt.min(),l=Bn.newNoDocument(r,s);t=new fx([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const i=e.documentRemove,r=za(n,i.document);t=new fx([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return st();{const i=e.filter,s=new c7(i.count||0);t=new cz(i.targetId,s)}}var p;return t}(this.serializer,e),i=function(r){if(!("targetChange"in r))return yt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?yt.min():s.readTime?Ci(s.readTime):yt.min()}(e);return this.listener.zo(t,i)}jo(e){const t={};t.database=wb(this.serializer),t.addTarget=function(r,s){let l;const h=s.target;return l=rx(h)?{documents:bz(r,h)}:{query:RP(r,h)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=pz(r,s.resumeToken):s.snapshotVersion.compareTo(yt.min())>0&&(l.readTime=mg(r,s.snapshotVersion.toTimestamp())),l}(this.serializer,e);const i=function v7(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Fo(t)}Wo(e){const t={};t.database=wb(this.serializer),t.removeTarget=e,this.Fo(t)}}class a9 extends h${constructor(e,t,i,r,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=s,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function y7(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(i,r){let s=Ci(i.updateTime?i.updateTime:r);return s.isEqual(yt.min())&&(s=Ci(r)),new r7(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Ci(e.commitTime);return this.listener.Zo(i,t)}return pt(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=wb(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Eb(this.serializer,i))};this.Fo(t)}}class l9 extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.eu=!1}nu(){if(this.eu)throw new we(le.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.co(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new we(le.UNKNOWN,r.toString())})}fo(e,t,i,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.fo(e,t,i,s,l,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new we(le.UNKNOWN,s.toString())})}terminate(){this.eu=!0}}class u9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(Ei(t),this.ru=!1):Ae("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class d9{constructor(e,t,i,r,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=s,this._u.qr(h=>{i.enqueueAndForget((0,K.Z)(function*(){var p;sc(l)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,K.Z)(function*(_){const w=qe(_);w.du.add(4),yield wg(w),w.mu.set("Unknown"),w.du.delete(4),yield kb(w)}),function(_){return p.apply(this,arguments)})(l))}))}),this.mu=new u9(i,r)}}function kb(n){return tN.apply(this,arguments)}function tN(){return tN=(0,K.Z)(function*(n){if(sc(n))for(const e of n.wu)yield e(!0)}),tN.apply(this,arguments)}function wg(n){return nN.apply(this,arguments)}function nN(){return nN=(0,K.Z)(function*(n){for(const e of n.wu)yield e(!1)}),nN.apply(this,arguments)}function Ax(n,e){const t=qe(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),sN(t)?rN(t):Cg(t).No()&&iN(t,e))}function Ob(n,e){const t=qe(n),i=Cg(t);t.fu.delete(e),i.No()&&f$(t,e),0===t.fu.size&&(i.No()?i.$o():sc(t)&&t.mu.set("Unknown"))}function iN(n,e){n.gu.Ot(e.targetId),Cg(n).jo(e)}function f$(n,e){n.gu.Ot(e),Cg(n).Wo(e)}function rN(n){n.gu=new u7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),Cg(n).start(),n.mu.ou()}function sN(n){return sc(n)&&!Cg(n).xo()&&n.fu.size>0}function sc(n){return 0===qe(n).du.size}function p$(n){n.gu=void 0}function h9(n){return oN.apply(this,arguments)}function oN(){return oN=(0,K.Z)(function*(n){n.fu.forEach((e,t)=>{iN(n,e)})}),oN.apply(this,arguments)}function f9(n,e){return aN.apply(this,arguments)}function aN(){return aN=(0,K.Z)(function*(n,e){p$(n),sN(n)?(n.mu.au(e),rN(n)):n.mu.set("Unknown")}),aN.apply(this,arguments)}function p9(n,e,t){return lN.apply(this,arguments)}function lN(){return lN=(0,K.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof uz&&2===e.state&&e.cause)try{yield(i=(0,K.Z)(function*(r,s){const l=s.cause;for(const h of s.targetIds)r.fu.has(h)&&(yield r.remoteSyncer.rejectListen(h,l),r.fu.delete(h),r.gu.removeTarget(h))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Mx(n,i)}else if(e instanceof fx?n.gu.Kt(e):e instanceof cz?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(yt.min()))try{const i=yield n$(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const l=r.gu.Xt(s);return l.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=r.fu.get(p);_&&r.fu.set(p,_.withResumeToken(h.resumeToken,s))}}),l.targetMismatches.forEach(h=>{const p=r.fu.get(h);if(!p)return;r.fu.set(h,p.withResumeToken(Wi.EMPTY_BYTE_STRING,p.snapshotVersion)),f$(r,h);const _=new Ru(p.target,h,1,p.sequenceNumber);iN(r,_)}),r.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){Ae("RemoteStore","Failed to raise snapshot:",i),yield Mx(n,i)}var i}),lN.apply(this,arguments)}function Mx(n,e,t){return cN.apply(this,arguments)}function cN(){return cN=(0,K.Z)(function*(n,e,t){if(!Cu(e))throw e;n.du.add(1),yield wg(n),n.mu.set("Offline"),t||(t=()=>n$(n.localStore)),n.asyncQueue.enqueueRetryable((0,K.Z)(function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield kb(n)}))}),cN.apply(this,arguments)}function m$(n,e){return e().catch(t=>Mx(n,t,e))}function Eg(n){return uN.apply(this,arguments)}function uN(){return uN=(0,K.Z)(function*(n){const e=qe(n),t=Nu(e);let i=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;m9(e);)try{const r=yield J7(e.localStore,i);if(null===r){0===e.lu.length&&t.$o();break}i=r.batchId,g9(e,r)}catch(r){yield Mx(e,r)}g$(e)&&_$(e)}),uN.apply(this,arguments)}function m9(n){return sc(n)&&n.lu.length<10}function g9(n,e){n.lu.push(e);const t=Nu(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function g$(n){return sc(n)&&!Nu(n).xo()&&n.lu.length>0}function _$(n){Nu(n).start()}function _9(n){return dN.apply(this,arguments)}function dN(){return dN=(0,K.Z)(function*(n){Nu(n).tu()}),dN.apply(this,arguments)}function y9(n){return hN.apply(this,arguments)}function hN(){return hN=(0,K.Z)(function*(n){const e=Nu(n);for(const t of n.lu)e.Yo(t.mutations)}),hN.apply(this,arguments)}function v9(n,e,t){return fN.apply(this,arguments)}function fN(){return fN=(0,K.Z)(function*(n,e,t){const i=n.lu.shift(),r=IP.from(i,e,t);yield m$(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Eg(n)}),fN.apply(this,arguments)}function b9(n,e){return pN.apply(this,arguments)}function pN(){return pN=(0,K.Z)(function*(n,e){var t;e&&Nu(n).Jo&&(yield(t=(0,K.Z)(function*(i,r){if(az(s=r.code)&&s!==le.ABORTED){const l=i.lu.shift();Nu(i).Oo(),yield m$(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield Eg(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),g$(n)&&_$(n)}),pN.apply(this,arguments)}function y$(n,e){return mN.apply(this,arguments)}function mN(){return mN=(0,K.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const i=sc(t);t.du.add(3),yield wg(t),i&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield kb(t)}),mN.apply(this,arguments)}function gN(n,e){return _N.apply(this,arguments)}function _N(){return _N=(0,K.Z)(function*(n,e){const t=qe(n);e?(t.du.delete(2),yield kb(t)):e||(t.du.add(2),yield wg(t),t.mu.set("Unknown"))}),_N.apply(this,arguments)}function Cg(n){return n.yu||(n.yu=function(e,t,i){const r=qe(e);return r.nu(),new o9(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{Jr:h9.bind(null,n),Zr:f9.bind(null,n),zo:p9.bind(null,n)}),n.wu.push(function(){var e=(0,K.Z)(function*(t){t?(n.yu.Oo(),sN(n)?rN(n):n.mu.set("Unknown")):(yield n.yu.stop(),p$(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function Nu(n){return n.pu||(n.pu=function(e,t,i){const r=qe(e);return r.nu(),new a9(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{Jr:_9.bind(null,n),Zr:b9.bind(null,n),Xo:y9.bind(null,n),Zo:v9.bind(null,n)}),n.wu.push(function(){var e=(0,K.Z)(function*(t){t?(n.pu.Oo(),yield Eg(n)):(yield n.pu.stop(),n.lu.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class yN{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,i,r,s){const l=Date.now()+i,h=new yN(e,t,l,r,s);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new we(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(n,e){if(Ei("AsyncQueue",`${e}: ${n}`),Cu(n))return new we(le.UNAVAILABLE,`${e}: ${n}`);throw n}class xg{constructor(e){this.comparator=e?(t,i)=>e(t,i)||$e.comparator(t.key,i.key):(t,i)=>$e.comparator(t.key,i.key),this.keyedMap=pb(),this.sortedSet=new ui(this.comparator)}static emptySet(e){return new xg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new xg;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class v${constructor(){this.Iu=new ui($e.comparator)}track(e){const t=e.doc.key,i=this.Iu.get(t);i?0!==e.type&&3===i.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==i.type?this.Iu=this.Iu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Iu=this.Iu.remove(t):1===e.type&&2===i.type?this.Iu=this.Iu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):st():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Dg{constructor(e,t,i,r,s,l,h,p,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,r,s){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new Dg(e,t,xg.emptySet(t),l,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class w9{constructor(){this.Eu=void 0,this.listeners=[]}}class E9{constructor(){this.queries=new Au(e=>jj(e),hb),this.onlineState="Unknown",this.Au=new Set}}function vN(n,e){return bN.apply(this,arguments)}function bN(){return bN=(0,K.Z)(function*(n,e){const t=qe(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new w9),r)try{s.Eu=yield t.onListen(i)}catch(l){const h=Ig(l,`Initialization of query '${wP(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,s),s.listeners.push(e),e.Ru(t.onlineState),s.Eu&&e.vu(s.Eu)&&CN(t)}),bN.apply(this,arguments)}function wN(n,e){return EN.apply(this,arguments)}function EN(){return EN=(0,K.Z)(function*(n,e){const t=qe(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),EN.apply(this,arguments)}function C9(n,e){const t=qe(n);let i=!1;for(const r of e){const l=t.queries.get(r.query);if(l){for(const h of l.listeners)h.vu(r)&&(i=!0);l.Eu=r}}i&&CN(t)}function I9(n,e,t){const i=qe(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function CN(n){n.Au.forEach(e=>{e.next()})}class IN{constructor(e,t,i){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=i||{}}vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Dg(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=Dg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class x9{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class b${constructor(e){this.serializer=e}Hi(e){return za(this.serializer,e)}Ji(e){return e.metadata.exists?vz(this.serializer,e.document,!1):Bn.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return Ci(e)}}class D9{constructor(e,t,i){this.Ou=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=w$(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const i=cn.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,i=new b$(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.Hi(r.metadata.name);for(const l of r.metadata.queries){const h=(t.get(l)||Yt()).add(s);t.set(l,h)}}return t}complete(){var e=this;return(0,K.Z)(function*(){const t=yield function e9(n,e,t,i){return WP.apply(this,arguments)}(e.localStore,new b$(e.serializer),e.documents,e.Ou.id),i=e.Mu(e.documents);for(const r of e.queries)yield t9(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function w$(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class E${constructor(e){this.key=e}}class C${constructor(e){this.key=e}}class I${constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Yt(),this.mutatedKeys=Yt(),this.Ku=$j(e),this.Gu=new xg(this.Ku)}get Qu(){return this.Lu}zu(e,t){const i=t?t.ju:new v$,r=t?t.Gu:this.Gu;let s=t?t.mutatedKeys:this.mutatedKeys,l=r,h=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,_="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((w,x)=>{const T=r.get(w),P=fb(this.query,x)?x:null,V=!!T&&this.mutatedKeys.has(T.key),W=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let re=!1;T&&P?T.data.isEqual(P.data)?V!==W&&(i.track({type:3,doc:P}),re=!0):this.Wu(T,P)||(i.track({type:2,doc:P}),re=!0,(p&&this.Ku(P,p)>0||_&&this.Ku(P,_)<0)&&(h=!0)):!T&&P?(i.track({type:0,doc:P}),re=!0):T&&!P&&(i.track({type:1,doc:T}),re=!0,(p||_)&&(h=!0)),re&&(P?(l=l.add(P),s=W?s.add(w):s.delete(w)):(l=l.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const w="F"===this.query.limitType?l.last():l.first();l=l.delete(w.key),s=s.delete(w.key),i.track({type:1,doc:w})}return{Gu:l,ju:i,Mi:h,mutatedKeys:s}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const s=e.ju.Tu();s.sort((_,w)=>function(x,T){const P=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return P(x)-P(T)}(_.type,w.type)||this.Ku(_.doc,w.doc)),this.Hu(i);const l=t?this.Ju():[],h=0===this.Uu.size&&this.current?1:0,p=h!==this.qu;return this.qu=h,0!==s.length||p?{snapshot:new Dg(this.query,e.Gu,r,s,e.mutatedKeys,0===h,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),Yu:l}:{Yu:l}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new v$,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=Yt(),this.Gu.forEach(i=>{this.Zu(i.key)&&(this.Uu=this.Uu.add(i.key))});const t=[];return e.forEach(i=>{this.Uu.has(i)||t.push(new C$(i))}),this.Uu.forEach(i=>{e.has(i)||t.push(new E$(i))}),t}Xu(e){this.Lu=e.Wi,this.Uu=Yt();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return Dg.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class S9{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class T9{constructor(e){this.key=e,this.ec=!1}}class A9{constructor(e,t,i,r,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.nc={},this.sc=new Au(h=>jj(h),hb),this.ic=new Map,this.rc=new Set,this.oc=new ui($e.comparator),this.uc=new Map,this.cc=new BP,this.ac={},this.hc=new Map,this.lc=xf.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function M9(n,e){return xN.apply(this,arguments)}function xN(){return xN=(0,K.Z)(function*(n,e){const t=KN(n);let i,r;const s=t.sc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.tc();else{const l=yield vg(t.localStore,Xr(e));t.isPrimaryClient&&Ax(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield DN(t,e,i,"current"===h,l.resumeToken)}return r}),xN.apply(this,arguments)}function DN(n,e,t,i,r){return SN.apply(this,arguments)}function SN(){return SN=(0,K.Z)(function*(n,e,t,i,r){n.dc=(x,T,P)=>{return(V=(0,K.Z)(function*(W,re,Re,Ge){let Xe=re.view.zu(Re);Xe.Mi&&(Xe=yield Ix(W.localStore,re.query,!1).then(({documents:jt})=>re.view.zu(jt,Xe)));const dt=Ge&&Ge.targetChanges.get(re.targetId),Pt=re.view.applyChanges(Xe,W.isPrimaryClient,dt);return LN(W,re.targetId,Pt.Yu),Pt.snapshot}),function(W,re,Re,Ge){return V.apply(this,arguments)})(n,x,T,P);var V};const s=yield Ix(n.localStore,e,!0),l=new I$(e,s.Wi),h=l.zu(s.documents),p=vb.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),_=l.applyChanges(h,n.isPrimaryClient,p);LN(n,t,_.Yu);const w=new S9(e,t,l);return n.sc.set(e,w),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),_.snapshot}),SN.apply(this,arguments)}function R9(n,e){return TN.apply(this,arguments)}function TN(){return TN=(0,K.Z)(function*(n,e){const t=qe(n),i=t.sc.get(e),r=t.ic.get(i.targetId);if(r.length>1)return t.ic.set(i.targetId,r.filter(s=>!hb(s,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield bg(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Ob(t.remoteStore,i.targetId),Sg(t,i.targetId)}).catch(Eu))):(Sg(t,i.targetId),yield bg(t.localStore,i.targetId,!0))}),TN.apply(this,arguments)}function AN(){return AN=(0,K.Z)(function*(n,e,t){const i=YN(n);try{const r=yield function(s,l){const h=qe(s),p=Wn.now(),_=l.reduce((T,P)=>T.add(P.key),Yt());let w,x;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let P=ys(),V=Yt();return h.Ki.getEntries(T,_).next(W=>{P=W,P.forEach((re,Re)=>{Re.isValidDocument()||(V=V.add(re))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,P)).next(W=>{w=W;const re=[];for(const Re of l){const Ge=o7(Re,w.get(Re.key).overlayedDocument);null!=Ge&&re.push(new rc(Re.key,Ge,Tj(Ge.value.mapValue),qn.exists(!0)))}return h.mutationQueue.addMutationBatch(T,p,re,l)}).next(W=>{x=W;const re=W.applyToLocalDocumentSet(w,V);return h.documentOverlayCache.saveOverlays(T,W.batchId,re)})}).then(()=>({batchId:x.batchId,changes:Wj(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,h){let p=s.ac[s.currentUser.toKey()];p||(p=new ui(Ht)),p=p.insert(l,h),s.ac[s.currentUser.toKey()]=p}(i,r.batchId,t),yield oc(i,r.changes),yield Eg(i.remoteStore)}catch(r){const s=Ig(r,"Failed to persist write");t.reject(s)}}),AN.apply(this,arguments)}function x$(n,e){return MN.apply(this,arguments)}function MN(){return MN=(0,K.Z)(function*(n,e){const t=qe(n);try{const i=yield function X7(n,e){const t=qe(n),i=e.snapshotVersion;let r=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Ki.newChangeBuffer({trackRemovals:!0});r=t.Li;const h=[];e.targetChanges.forEach((w,x)=>{const T=r.get(x);if(!T)return;h.push(t.Ds.removeMatchingKeys(s,w.removedDocuments,x).next(()=>t.Ds.addMatchingKeys(s,w.addedDocuments,x)));let P=T.withSequenceNumber(s.currentSequenceNumber);var V,W,re;e.targetMismatches.has(x)?P=P.withResumeToken(Wi.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,i)),r=r.insert(x,P),W=P,re=w,(0===(V=T).resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0)&&h.push(t.Ds.updateTargetData(s,P))});let p=ys(),_=Yt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),h.push(i$(s,l,e.documentUpdates).next(w=>{p=w.zi,_=w.ji})),!i.isEqual(yt.min())){const w=t.Ds.getLastRemoteSnapshotVersion(s).next(x=>t.Ds.setTargetsMetadata(s,s.currentSequenceNumber,i));h.push(w)}return se.waitFor(h).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(t.Li=r,s))}(t.localStore,e);e.targetChanges.forEach((r,s)=>{const l=t.uc.get(s);l&&(pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.ec=!0:r.modifiedDocuments.size>0?pt(l.ec):r.removedDocuments.size>0&&(pt(l.ec),l.ec=!1))}),yield oc(t,i,e)}catch(i){yield Eu(i)}}),MN.apply(this,arguments)}function D$(n,e,t){const i=qe(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.sc.forEach((s,l)=>{const h=l.view.Ru(e);h.snapshot&&r.push(h.snapshot)}),function(s,l){const h=qe(s);h.onlineState=l;let p=!1;h.queries.forEach((_,w)=>{for(const x of w.listeners)x.Ru(l)&&(p=!0)}),p&&CN(h)}(i.eventManager,e),r.length&&i.nc.zo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function O9(n,e,t){return RN.apply(this,arguments)}function RN(){return RN=(0,K.Z)(function*(n,e,t){const i=qe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.uc.get(e),s=r&&r.key;if(s){let l=new ui($e.comparator);l=l.insert(s,Bn.newNoDocument(s,yt.min()));const h=Yt().add(s),p=new yb(yt.min(),new Map,new In(Ht),l,h);yield x$(i,p),i.oc=i.oc.remove(s),i.uc.delete(e),VN(i)}else yield bg(i.localStore,e,!1).then(()=>Sg(i,e,t)).catch(Eu)}),RN.apply(this,arguments)}function P9(n,e){return kN.apply(this,arguments)}function kN(){return kN=(0,K.Z)(function*(n,e){const t=qe(n),i=e.batch.batchId;try{const r=yield function Q7(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Ki.newChangeBuffer({trackRemovals:!0});return function(l,h,p,_){const w=p.batch,x=w.keys();let T=se.resolve();return x.forEach(P=>{T=T.next(()=>_.getEntry(h,P)).next(V=>{const W=p.docVersions.get(P);pt(null!==W),V.version.compareTo(W)<0&&(w.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),_.addEntry(V)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(h,w))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let h=Yt();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(h=h.add(l.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);FN(t,i,null),NN(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield oc(t,r)}catch(r){yield Eu(r)}}),kN.apply(this,arguments)}function N9(n,e,t){return ON.apply(this,arguments)}function ON(){return ON=(0,K.Z)(function*(n,e,t){const i=qe(n);try{const r=yield function(s,l){const h=qe(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return h.mutationQueue.lookupMutationBatch(p,l).next(w=>(pt(null!==w),_=w.keys(),h.mutationQueue.removeMutationBatch(p,w))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,_,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>h.localDocuments.getDocuments(p,_))})}(i.localStore,e);FN(i,e,t),NN(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield oc(i,r)}catch(r){yield Eu(r)}}),ON.apply(this,arguments)}function PN(){return PN=(0,K.Z)(function*(n,e){const t=qe(n);sc(t.remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const l=qe(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===i)return void e.resolve();const r=t.hc.get(i)||[];r.push(e),t.hc.set(i,r)}catch(i){const r=Ig(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),PN.apply(this,arguments)}function NN(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function FN(n,e,t){const i=qe(n);let r=i.ac[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.ac[i.currentUser.toKey()]=r}}function Sg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ic.get(e))n.sc.delete(i),t&&n.nc.wc(i,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(i=>{n.cc.containsKey(i)||S$(n,i)})}function S$(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(Ob(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),VN(n))}function LN(n,e,t){for(const i of t)i instanceof E$?(n.cc.addReference(i.key,e),L9(n,i)):i instanceof C$?(Ae("SyncEngine","Document no longer in limbo: "+i.key),n.cc.removeReference(i.key,e),n.cc.containsKey(i.key)||S$(n,i.key)):st()}function L9(n,e){const t=e.key,i=t.path.canonicalString();n.oc.get(t)||n.rc.has(i)||(Ae("SyncEngine","New document in limbo: "+t),n.rc.add(i),VN(n))}function VN(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new $e(cn.fromString(e)),i=n.lc.next();n.uc.set(i,new T9(t)),n.oc=n.oc.insert(t,i),Ax(n.remoteStore,new Ru(Xr(ug(t.path)),i,2,Us.ct))}}function oc(n,e,t){return BN.apply(this,arguments)}function BN(){return BN=(0,K.Z)(function*(n,e,t){const i=qe(n),r=[],s=[],l=[];var h;i.sc.isEmpty()||(i.sc.forEach((h,p)=>{l.push(i.dc(p,e,t).then(_=>{if((_||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,_?.fromCache?"not-current":"current"),_){r.push(_);const w=zP.Di(p.targetId,_);s.push(w)}}))}),yield Promise.all(l),i.nc.zo(r),yield(h=(0,K.Z)(function*(p,_){const w=qe(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>se.forEach(_,T=>se.forEach(T.Vi,P=>w.persistence.referenceDelegate.addReference(x,T.targetId,P)).next(()=>se.forEach(T.Si,P=>w.persistence.referenceDelegate.removeReference(x,T.targetId,P)))))}catch(x){if(!Cu(x))throw x;Ae("LocalStore","Failed to update sequence numbers: "+x)}for(const x of _){const T=x.targetId;if(!x.fromCache){const P=w.Li.get(T),W=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);w.Li=w.Li.insert(T,W)}}}),function(p,_){return h.apply(this,arguments)})(i.localStore,s))}),BN.apply(this,arguments)}function V9(n,e){return UN.apply(this,arguments)}function UN(){return UN=(0,K.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const i=yield t$(t.localStore,e);t.currentUser=e,(r=t).hc.forEach(l=>{l.forEach(h=>{h.reject(new we(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.hc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield oc(t,i.Qi)}var r}),UN.apply(this,arguments)}function B9(n,e){const t=qe(n),i=t.uc.get(e);if(i&&i.ec)return Yt().add(i.key);{let r=Yt();const s=t.ic.get(e);if(!s)return r;for(const l of s){const h=t.sc.get(l);r=r.unionWith(h.view.Qu)}return r}}function U9(n,e){return HN.apply(this,arguments)}function HN(){return HN=(0,K.Z)(function*(n,e){const t=qe(n),i=yield Ix(t.localStore,e.query,!0),r=e.view.Xu(i);return t.isPrimaryClient&&LN(t,e.targetId,r.Yu),r}),HN.apply(this,arguments)}function H9(n,e){return jN.apply(this,arguments)}function jN(){return jN=(0,K.Z)(function*(n,e){const t=qe(n);return s$(t.localStore,e).then(i=>oc(t,i))}),jN.apply(this,arguments)}function j9(n,e,t,i){return zN.apply(this,arguments)}function zN(){return zN=(0,K.Z)(function*(n,e,t,i){const r=qe(n),s=yield function(l,h){const p=qe(l),_=qe(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>_.In(w,h).next(x=>x?p.localDocuments.getDocuments(w,x):se.resolve(null)))}(r.localStore,e);var h;null!==s?("pending"===t?yield Eg(r.remoteStore):"acknowledged"===t||"rejected"===t?(FN(r,e,i||null),NN(r,e),h=e,qe(qe(r.localStore).mutationQueue).En(h)):st(),yield oc(r,s)):Ae("SyncEngine","Cannot apply mutation batch with id: "+e)}),zN.apply(this,arguments)}function $N(){return $N=(0,K.Z)(function*(n,e){const t=qe(n);if(KN(t),YN(t),!0===e&&!0!==t.fc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield T$(t,i.toArray());t.fc=!0,yield gN(t.remoteStore,!0);for(const s of r)Ax(t.remoteStore,s)}else if(!1===e&&!1!==t.fc){const i=[];let r=Promise.resolve();t.ic.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(Sg(t,l),bg(t.localStore,l,!0))),Ob(t.remoteStore,l)}),yield r,yield T$(t,i),function(s){const l=qe(s);l.uc.forEach((h,p)=>{Ob(l.remoteStore,p)}),l.cc.ls(),l.uc=new Map,l.oc=new ui($e.comparator)}(t),t.fc=!1,yield gN(t.remoteStore,!1)}}),$N.apply(this,arguments)}function T$(n,e,t){return GN.apply(this,arguments)}function GN(){return GN=(0,K.Z)(function*(n,e,t){const i=qe(n),r=[],s=[];for(const l of e){let h;const p=i.ic.get(l);if(p&&0!==p.length){h=yield vg(i.localStore,Xr(p[0]));for(const _ of p){const w=i.sc.get(_),x=yield U9(i,w);x.snapshot&&s.push(x.snapshot)}}else{const _=yield r$(i.localStore,l);h=yield vg(i.localStore,_),yield DN(i,A$(_),l,!1,h.resumeToken)}r.push(h)}return i.nc.zo(s),r}),GN.apply(this,arguments)}function A$(n){return Uj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $9(n){const e=qe(n);return qe(qe(e.localStore).persistence).bi()}function G9(n,e,t,i){return WN.apply(this,arguments)}function WN(){return WN=(0,K.Z)(function*(n,e,t,i){const r=qe(n);if(r.fc)return void Ae("SyncEngine","Ignoring unexpected query state notification.");const s=r.ic.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield s$(r.localStore,zj(s[0])),h=yb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Wi.EMPTY_BYTE_STRING);yield oc(r,l,h);break}case"rejected":yield bg(r.localStore,e,!0),Sg(r,e,i);break;default:st()}}),WN.apply(this,arguments)}function W9(n,e,t){return qN.apply(this,arguments)}function qN(){return qN=(0,K.Z)(function*(n,e,t){const i=KN(n);if(i.fc){for(const r of e){if(i.ic.has(r)){Ae("SyncEngine","Adding an already active target "+r);continue}const s=yield r$(i.localStore,r),l=yield vg(i.localStore,s);yield DN(i,A$(s),l.targetId,!1,l.resumeToken),Ax(i.remoteStore,l)}for(const r of t)i.ic.has(r)&&(yield bg(i.localStore,r,!1).then(()=>{Ob(i.remoteStore,r),Sg(i,r)}).catch(Eu))}}),qN.apply(this,arguments)}function KN(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=x$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O9.bind(null,e),e.nc.zo=C9.bind(null,e.eventManager),e.nc.wc=I9.bind(null,e.eventManager),e}function YN(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N9.bind(null,e),e}class Rx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,K.Z)(function*(){t.serializer=Rb(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return e$(this.persistence,new Jz,e.initialUser,this.serializer)}createPersistence(e){return new Qz(Ex.Fs,this.serializer)}createSharedClientState(e){return new c$}terminate(){var e=this;return(0,K.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ZN extends Rx{constructor(e,t,i){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,K.Z)(function*(){yield t().call(i,e),yield i.mc.initialize(i,e),yield YN(i.mc.syncEngine),yield Eg(i.mc.remoteStore),yield i.persistence.hi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return e$(this.persistence,new Jz,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new F7(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new _Z(t,this.persistence);return new gZ(e.asyncQueue,i)}createPersistence(e){const t=jP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?vs.withCacheSize(this.cacheSizeBytes):vs.DEFAULT;return new HP(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,d$(),Tx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new c$}}class M$ extends ZN{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,K.Z)(function*(){yield t().call(i,e);const r=i.mc.syncEngine;i.sharedClientState instanceof QP&&(i.sharedClientState.syncEngine={$r:j9.bind(null,r),Mr:G9.bind(null,r),Fr:W9.bind(null,r),bi:$9.bind(null,r),Or:H9.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.hi(function(){var s=(0,K.Z)(function*(l){yield function z9(n,e){return $N.apply(this,arguments)}(i.mc.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=d$();if(!QP.D(t))throw new we(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=jP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QP(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Tg{initialize(e,t){var i=this;return(0,K.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>D$(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=V9.bind(null,i.syncEngine),yield gN(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new E9}createDatastore(e){const t=Rb(e.databaseInfo.databaseId),i=new s9(e.databaseInfo);return new l9(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=h=>D$(this.syncEngine,h,0),l=u$.D()?new u$:new n9,new d9(t,i,r,s,l);var t,i,r,s,l}createSyncEngine(e,t){return function(i,r,s,l,h,p,_){const w=new A9(i,r,s,l,h,p);return _&&(w.fc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,K.Z)(function*(t){const i=qe(t);Ae("RemoteStore","RemoteStore shutting down."),i.du.add(5),yield wg(i),i._u.shutdown(),i.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function R$(n,e=10240){let t=0;return{read:()=>(0,K.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,K.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class kx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class K9{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Gi,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(i=>{i&&i.ku()?this.metadata.resolve(i.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Nu)}`))},i=>this.metadata.reject(i))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,K.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,K.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,K.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const i=e.Tc.decode(t),r=Number(i);isNaN(r)&&e.Rc(`length string (${i}) is not valid number`);const s=yield e.vc(r);return new x9(JSON.parse(s),t.length+r)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,K.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}vc(e){var t=this;return(0,K.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const i=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,K.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class Y9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,K.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new we(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,K.Z)(function*(s,l){const h=qe(s),p=wb(h.serializer)+"/documents",_={documents:l.map(P=>bb(h.serializer,P))},w=yield h.fo("BatchGetDocuments",p,_,l.length),x=new Map;w.forEach(P=>{const V=function g7(n,e){return"found"in e?function(t,i){pt(!!i.found);const r=za(t,i.found.name),s=Ci(i.found.updateTime),l=i.found.createTime?Ci(i.found.createTime):yt.min(),h=new rr({mapValue:{fields:i.found.fields}});return Bn.newFoundDocument(r,s,l,h)}(n,e):"missing"in e?function(t,i){pt(!!i.missing),pt(!!i.readTime);const r=za(t,i.missing),s=Ci(i.readTime);return Bn.newNoDocument(r,s)}(n,e):st()}(h.serializer,P);x.set(V.key.toString(),V)});const T=[];return l.forEach(P=>{const V=x.get(P.toString());pt(!!V),T.push(V)}),T}),function(s,l){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new pg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,K.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=$e.fromPath(r);e.mutations.push(new EP(s,e.precondition(s)))}),yield(i=(0,K.Z)(function*(r,s){const l=qe(r),h=wb(l.serializer)+"/documents",p={writes:s.map(_=>Eb(l.serializer,_))};yield l.co("Commit",h,p)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=yt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new we(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(yt.min())?qn.exists(!1):qn.updateTime(t):qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new we(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qn.updateTime(t)}return qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Z9{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Vc=i.maxAttempts,this.Co=new JP(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,K.Z)(function*(){const t=new Y9(e.datastore),i=e.Dc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Cc(s)}))}).catch(r=>{e.Cc(r)})}))}Dc(e){try{const t=this.updateFunction(e);return!sb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!az(t)}return!1}}class Q9{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=nr.UNAUTHENTICATED,this.clientId=rj.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,K.Z)(function*(h){Ae("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(Ae("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,K.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new we(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,K.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Ig(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function Ox(n,e){return QN.apply(this,arguments)}function QN(){return QN=(0,K.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,K.Z)(function*(s){i.isEqual(s)||(yield t$(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),QN.apply(this,arguments)}function XN(n,e){return JN.apply(this,arguments)}function JN(){return JN=(0,K.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield e1(n);Ae("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>y$(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>y$(e.remoteStore,s)),n._onlineComponents=e}),JN.apply(this,arguments)}function k$(n){return"FirebaseError"===n.name?n.code===le.FAILED_PRECONDITION||n.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function e1(n){return t1.apply(this,arguments)}function t1(){return t1=(0,K.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ox(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!k$(t))throw t;Ba("Error using user provided cache. Falling back to memory cache: "+t),yield Ox(n,new Rx)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),yield Ox(n,new Rx);return n._offlineComponents}),t1.apply(this,arguments)}function Px(n){return n1.apply(this,arguments)}function n1(){return n1=(0,K.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield XN(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield XN(n,new Tg))),n._onlineComponents}),n1.apply(this,arguments)}function O$(n){return e1(n).then(e=>e.persistence)}function Nx(n){return e1(n).then(e=>e.localStore)}function r1(n){return Px(n).then(e=>e.remoteStore)}function s1(n){return Px(n).then(e=>e.syncEngine)}function Ag(n){return o1.apply(this,arguments)}function o1(){return o1=(0,K.Z)(function*(n){const e=yield Px(n),t=e.eventManager;return t.onListen=M9.bind(null,e.syncEngine),t.onUnlisten=R9.bind(null,e.syncEngine),t}),o1.apply(this,arguments)}function N$(n,e,t={}){const i=new Gi;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function(r,s,l,h,p){const _=new kx({next:x=>{s.enqueueAndForget(()=>wN(r,w));const T=x.docs.has(l);!T&&x.fromCache?p.reject(new we(le.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&x.fromCache&&h&&"server"===h.source?p.reject(new we(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),w=new IN(ug(l.path),_,{includeMetadataChanges:!0,xu:!0});return vN(r,w)}(yield Ag(n),n.asyncQueue,e,t,i)})),i.promise}function F$(n,e,t={}){const i=new Gi;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function(r,s,l,h,p){const _=new kx({next:x=>{s.enqueueAndForget(()=>wN(r,w)),x.fromCache&&"server"===h.source?p.reject(new we(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),w=new IN(l,_,{includeMetadataChanges:!0,xu:!0});return vN(r,w)}(yield Ag(n),n.asyncQueue,e,t,i)})),i.promise}const L$=new Map;function a1(n,e,t){if(!t)throw new we(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function V$(n,e,t,i){if(!0===e&&!0===i)throw new we(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function B$(n){if(!$e.isDocumentKey(n))throw new we(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function U$(n){if($e.isDocumentKey(n))throw new we(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fx(n);throw new we(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function H$(n,e){if(e<=0)throw new we(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class j${constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new we(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new we(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,V$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pb{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j$({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new we(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new we(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j$(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new rZ;switch(t.type){case"firstParty":return new lZ(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new we(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=L$.get(e);t&&(Ae("ComponentProvider","Removing Datastore"),L$.delete(e),t.terminate())}(this),Promise.resolve()}}function z$(n,e,t,i={}){var r;const s=(n=on(n,Pb))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Ba("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let l,h;if("string"==typeof i.mockUserToken)l=i.mockUserToken,h=nr.MOCK_USER;else{l=(0,G.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new we(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new nr(p)}n._authCredentials=new sZ(new nj(l,h))}}class Un{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class yr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yr(this.firestore,e,this._query)}}class $a extends yr{constructor(e,t,i){super(e,t,ug(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new $e(e))}withConverter(e){return new $a(this.firestore,e,this._path)}}function l1(n,e,...t){if(n=(0,G.m9)(n),a1("collection","path",e),n instanceof Pb){const i=cn.fromString(e,...t);return U$(i),new $a(n,null,i)}{if(!(n instanceof Un||n instanceof $a))throw new we(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(cn.fromString(e,...t));return U$(i),new $a(n.firestore,null,i)}}function Nb(n,e,...t){if(n=(0,G.m9)(n),1===arguments.length&&(e=rj.A()),a1("doc","path",e),n instanceof Pb){const i=cn.fromString(e,...t);return B$(i),new Un(n,null,new $e(i))}{if(!(n instanceof Un||n instanceof $a))throw new we(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(cn.fromString(e,...t));return B$(i),new Un(n.firestore,n instanceof $a?n.converter:null,new $e(i))}}function $$(n,e){return n=(0,G.m9)(n),e=(0,G.m9)(e),(n instanceof Un||n instanceof $a)&&(e instanceof Un||e instanceof $a)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function c1(n,e){return n=(0,G.m9)(n),e=(0,G.m9)(e),n instanceof yr&&e instanceof yr&&n.firestore===e.firestore&&hb(n._query,e._query)&&n.converter===e.converter}class aQ{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new JP(this,"async_queue_retry"),this.qc=()=>{const t=Tx();t&&Ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=Tx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=Tx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Gi;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,K.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!Cu(t))throw t;Ae("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(i=>{throw this.Mc=i,this.Fc=!1,Ei("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(i)),i}).then(i=>(this.Fc=!1,i))));return this.Nc=t,t}enqueueAfterDelay(e,t,i){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const r=yN.createAndSchedule(this,e,t,i,s=>this.Qc(s));return this.$c.push(r),r}Uc(){this.Mc&&st()}verifyOperationInProgress(){}zc(){var e=this;return(0,K.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function u1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class lQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Hn extends Pb{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new aQ,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||G$(this),this._firestoreClient.terminate()}}function uQ(n,e){const t="object"==typeof n?n:(0,$t.getApp)(),i="string"==typeof n?n:e||"(default)",r=(0,$t._getProvider)(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=(0,G.P0)("firestore");s&&z$(r,...s)}return r}function Ii(n){return n._firestoreClient||G$(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function G$(n){var e,t,i;const r=n._freezeSettings(),s=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new BZ(n._databaseId,h,n._persistenceKey,(_=r).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var h,_;n._firestoreClient=new Q9(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=r.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function W$(n,e,t){const i=new Gi;return n.asyncQueue.enqueue((0,K.Z)(function*(){try{yield Ox(n,t),yield XN(n,e),i.resolve()}catch(r){const s=r;if(!k$(s))throw s;Ba("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function q$(n){if(n._initialized||n._terminated)throw new we(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ga(Wi.fromBase64String(e))}catch(t){throw new we(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ga(Wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ac{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new we(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sf{constructor(e){this._methodName=e}}class Lx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const bQ=/^__.*__$/;class wQ{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new rc(e,this.data,this.fieldMask,t,this.fieldTransforms):new fg(e,this.data,t,this.fieldTransforms)}}class K${constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new rc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Y$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Vx{constructor(e,t,i,r,s,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.Jc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new Vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:i,ta:!1});return r.ea(e),r}na(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:i,ta:!1});return r.Jc(),r}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return Hx(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(Y$(this.Yc)&&bQ.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class EQ{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Rb(e)}ua(e,t,i,r=!1){return new Vx({Yc:e,methodName:t,oa:i,path:ci.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tf(n){const e=n._freezeSettings(),t=Rb(n._databaseId);return new EQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Bx(n,e,t,i,r,s={}){const l=n.ua(s.merge||s.mergeFields?2:0,e,t,r);p1("Data must be an object, but it was:",l,i);const h=X$(i,l);let p,_;if(s.merge)p=new _s(l.fieldMask),_=l.fieldTransforms;else if(s.mergeFields){const w=[];for(const x of s.mergeFields){const T=Vb(e,x,t);if(!l.contains(T))throw new we(le.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);eG(w,T)||w.push(T)}p=new _s(w),_=l.fieldTransforms.filter(x=>p.covers(x.field))}else p=null,_=l.fieldTransforms;return new wQ(new rr(h),p,_)}class Lb extends Sf{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lb}}function Z$(n,e,t){return new Vx({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class d1 extends Sf{_toFieldTransform(e){return new gb(e.path,new dg)}isEqual(e){return e instanceof d1}}class CQ extends Sf{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Z$(this,e,!0),i=this.ca.map(s=>Af(s,t)),r=new yf(i);return new gb(e.path,r)}isEqual(e){return this===e}}class IQ extends Sf{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Z$(this,e,!0),i=this.ca.map(s=>Af(s,t)),r=new vf(i);return new gb(e.path,r)}isEqual(e){return this===e}}class xQ extends Sf{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new hg(e.serializer,Zj(e.serializer,this.aa));return new gb(e.path,t)}isEqual(e){return this===e}}function h1(n,e,t,i){const r=n.ua(1,e,t);p1("Data must be an object, but it was:",r,i);const s=[],l=rr.empty();hf(i,(p,_)=>{const w=Ux(e,p,t);_=(0,G.m9)(_);const x=r.na(w);if(_ instanceof Lb)s.push(w);else{const T=Af(_,x);null!=T&&(s.push(w),l.set(w,T))}});const h=new _s(s);return new K$(l,h,r.fieldTransforms)}function f1(n,e,t,i,r,s){const l=n.ua(1,e,t),h=[Vb(e,i,t)],p=[r];if(s.length%2!=0)throw new we(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)h.push(Vb(e,s[T])),p.push(s[T+1]);const _=[],w=rr.empty();for(let T=h.length-1;T>=0;--T)if(!eG(_,h[T])){const P=h[T];let V=p[T];V=(0,G.m9)(V);const W=l.na(P);if(V instanceof Lb)_.push(P);else{const re=Af(V,W);null!=re&&(_.push(P),w.set(P,re))}}const x=new _s(_);return new K$(w,x,l.fieldTransforms)}function Q$(n,e,t,i=!1){return Af(t,n.ua(i?4:3,e))}function Af(n,e){if(J$(n=(0,G.m9)(n)))return p1("Unsupported field value:",e,n),X$(n,e);if(n instanceof Sf)return function(t,i){if(!Y$(i.Yc))throw i.ia(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ia(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const l of t){let h=Af(l,i.sa(s));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,G.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zj(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Wn.fromDate(t);return{timestampValue:mg(i.serializer,r)}}if(t instanceof Wn){const r=new Wn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:mg(i.serializer,r)}}if(t instanceof Lx)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ga)return{bytesValue:pz(i.serializer,t._byteString)};if(t instanceof Un){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.ia(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:TP(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ia(`Unsupported field value: ${Fx(t)}`)}(n,e)}function X$(n,e){const t={};return vj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hf(n,(i,r)=>{const s=Af(r,e.Xc(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function J$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wn||n instanceof Lx||n instanceof Ga||n instanceof Un||n instanceof Sf)}function p1(n,e,t){if(!J$(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Fx(t);throw e.ia("an object"===i?n+" a custom object":n+" "+i)}var i}function Vb(n,e,t){if((e=(0,G.m9)(e))instanceof ac)return e._internalPath;if("string"==typeof e)return Ux(n,e);throw Hx("Field path arguments must be of type string or ",n,!1,void 0,t)}const DQ=new RegExp("[~\\*/\\[\\]]");function Ux(n,e,t){if(e.search(DQ)>=0)throw Hx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ac(...e.split("."))._internalPath}catch{throw Hx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hx(n,e,t,i,r){const s=i&&!i.isEmpty(),l=void 0!==r;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${i}`),l&&(p+=` in document ${r}`),p+=")"),new we(le.INVALID_ARGUMENT,h+n+p)}function eG(n,e){return n.some(t=>t.isEqual(e))}class Bb{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new SQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class SQ extends Bb{data(){return super.data()}}function jx(n,e){return"string"==typeof e?Ux(n,e):e instanceof ac?e._internalPath:e._delegate._internalPath}function tG(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new we(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m1{}class Ub extends m1{}function Fu(n,e,...t){let i=[];e instanceof m1&&i.push(e),i=i.concat(t),function(r){const s=r.filter(h=>h instanceof Mg).length,l=r.filter(h=>h instanceof Hb).length;if(s>1||s>0&&l>0)throw new we(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Hb extends Ub{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Hb(e,t,i)}_apply(e){const t=this._parse(e);return sG(e._query,t),new yr(e.firestore,e.converter,bP(e._query,t))}_parse(e){const t=Tf(e.firestore);return function(r,s,l,h,p,_,w){let x;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new we(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){rG(w,_);const T=[];for(const P of w)T.push(iG(h,r,P));x={arrayValue:{values:T}}}else x=iG(h,r,w)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||rG(w,_),x=Q$(l,"where",w,"in"===_||"not-in"===_);return sn.create(p,_,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Mg extends m1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mg(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let s=i;const l=r.getFlattenedFilters();for(const h of l)sG(s,h),s=bP(s,h)}(e._query,t),new yr(e.firestore,e.converter,bP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class g1 extends Ub{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new g1(e,t)}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new we(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new we(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new lg(r,s);return function(h,p){if(null===yP(h)){const _=ox(h);null!==_&&oG(0,_,p.field)}}(i,l),l}(e._query,this._field,this._direction);return new yr(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new ic(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class zx extends Ub{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new zx(e,t,i)}_apply(e){return new yr(e.firestore,e.converter,ax(e._query,this._limit,this._limitType))}}class $x extends Ub{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new $x(e,t,i)}_apply(e){const t=nG(e,this.type,this._docOrFields,this._inclusive);return new yr(e.firestore,e.converter,(r=t,new ic((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class Gx extends Ub{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Gx(e,t,i)}_apply(e){const t=nG(e,this.type,this._docOrFields,this._inclusive);return new yr(e.firestore,e.converter,(r=t,new ic((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function nG(n,e,t,i){if(t[0]=(0,G.m9)(t[0]),t[0]instanceof Bb)return function(r,s,l,h,p){if(!h)throw new we(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const _=[];for(const w of _f(r))if(w.field.isKeyField())_.push(mf(s,h.key));else{const x=h.data.field(w.field);if(dP(x))throw new we(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const T=w.field.canonicalString();throw new we(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}_.push(x)}return new Tu(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Tf(n.firestore);return function(s,l,h,p,_,w){const x=s.explicitOrderBy;if(_.length>x.length)throw new we(le.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let P=0;P<_.length;P++){const V=_[P];if(x[P].field.isKeyField()){if("string"!=typeof V)throw new we(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof V}`);if(!vP(s)&&-1!==V.indexOf("/"))throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${V}' contains a slash.`);const W=s.path.child(cn.fromString(V));if(!$e.isDocumentKey(W))throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${W}' is not because it contains an odd number of segments.`);const re=new $e(W);T.push(mf(l,re))}else{const W=Q$(h,p,V);T.push(W)}}return new Tu(T,w)}(n._query,n.firestore._databaseId,r,e,t,i)}}function iG(n,e,t){if("string"==typeof(t=(0,G.m9)(t))){if(""===t)throw new we(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vP(e)&&-1!==t.indexOf("/"))throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(cn.fromString(t));if(!$e.isDocumentKey(i))throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return mf(n,new $e(i))}if(t instanceof Un)return mf(n,t._key);throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fx(t)}.`)}function rG(n,e){if(!Array.isArray(n)||0===n.length)throw new we(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sG(n,e){if(e.isInequality()){const i=ox(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new we(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=yP(n);null!==s&&oG(0,r,s)}const t=function(i,r){for(const s of i)for(const l of s.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new we(le.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function oG(n,e,t){if(!t.isEqual(e))throw new we(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class _1{convertValue(e,t="none"){switch(pf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return di(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ff(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const i={};return hf(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new Lx(di(e.latitude),di(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=wj(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ab(e));default:return null}}convertTimestamp(e){const t=Iu(e);return new Wn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=cn.fromString(e);pt(Iz(i));const r=new xu(i.get(1),i.get(3)),s=new $e(i.popFirst(5));return r.isEqual(t)||Ei(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Wx(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class FQ extends _1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ga(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}class Mf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lc extends Bb{constructor(e,t,i,r,s,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(jx("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class jb extends lc{data(e={}){return super.data(e)}}class Lu{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Mf(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new jb(this._firestore,this._userDataWriter,i.key,i,new Mf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new jb(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Mf(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const h=new jb(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Mf(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,_=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),_=s.indexOf(l.doc.key)),{type:VQ(l.type),doc:h,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function VQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function lG(n,e){return n instanceof lc&&e instanceof lc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Lu&&e instanceof Lu&&n._firestore===e._firestore&&c1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Vu extends _1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ga(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}function cG(n,e,t){n=on(n,Un);const i=on(n.firestore,Hn),r=Wx(n.converter,e,t);return Rg(i,[Bx(Tf(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,qn.none())])}function y1(n,e,t,...i){n=on(n,Un);const r=on(n.firestore,Hn),s=Tf(r);let l;return l="string"==typeof(e=(0,G.m9)(e))||e instanceof ac?f1(s,"updateDoc",n._key,e,t,i):h1(s,"updateDoc",n._key,e),Rg(r,[l.toMutation(n._key,qn.exists(!0))])}function uG(n,e){const t=on(n.firestore,Hn),i=Nb(n),r=Wx(n.converter,e);return Rg(t,[Bx(Tf(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,qn.exists(!1))]).then(()=>i)}function v1(n,...e){var t,i,r;n=(0,G.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||u1(e[l])||(s=e[l],l++);const h={includeMetadataChanges:s.includeMetadataChanges};if(u1(e[l])){const x=e[l];e[l]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[l+1]=null===(i=x.error)||void 0===i?void 0:i.bind(x),e[l+2]=null===(r=x.complete)||void 0===r?void 0:r.bind(x)}let p,_,w;if(n instanceof Un)_=on(n.firestore,Hn),w=ug(n._key.path),p={next:x=>{e[l]&&e[l](b1(_,n,x))},error:e[l+1],complete:e[l+2]};else{const x=on(n,yr);_=on(x.firestore,Hn),w=x._query;const T=new Vu(_);p={next:P=>{e[l]&&e[l](new Lu(_,T,x,P))},error:e[l+1],complete:e[l+2]},tG(n._query)}return function(x,T,P,V){const W=new kx(V),re=new IN(T,W,P);return x.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return vN(yield Ag(x),re)})),()=>{W.yc(),x.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return wN(yield Ag(x),re)}))}}(Ii(_),w,h,p)}function Rg(n,e){return function(t,i){const r=new Gi;return t.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function k9(n,e,t){return AN.apply(this,arguments)}(yield s1(t),i,r)})),r.promise}(Ii(n),e)}function b1(n,e,t){const i=t.docs.get(e._key),r=new Vu(n);return new lc(n,r,e._key,i,new Mf(t.hasPendingWrites,t.fromCache),e.converter)}const JQ={maxAttempts:5};class dG{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tf(e)}set(e,t,i){this._verifyNotCommitted();const r=Bu(e,this._firestore),s=Wx(r.converter,t,i),l=Bx(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,qn.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Bu(e,this._firestore);let l;return l="string"==typeof(t=(0,G.m9)(t))||t instanceof ac?f1(this._dataReader,"WriteBatch.update",s._key,t,i,r):h1(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bu(e,this._firestore);return this._mutations=this._mutations.concat(new pg(t._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bu(n,e){if((n=(0,G.m9)(n)).firestore!==e)throw new we(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class eX extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tf(e)}get(e){const t=Bu(e,this._firestore),i=new FQ(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return st();const s=r[0];if(s.isFoundDocument())return new Bb(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new Bb(this._firestore,i,t._key,null,t.converter);throw st()})}set(e,t,i){const r=Bu(e,this._firestore),s=Wx(r.converter,t,i),l=Bx(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(e,t,i,...r){const s=Bu(e,this._firestore);let l;return l="string"==typeof(t=(0,G.m9)(t))||t instanceof ac?f1(this._dataReader,"Transaction.update",s._key,t,i,r):h1(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=Bu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bu(e,this._firestore),i=new Vu(this._firestore);return super.get(e).then(r=>new lc(this._firestore,i,t._key,r._document,new Mf(!1,!1),t.converter))}}!function(n,e=!0){rg=$t.SDK_VERSION,(0,$t._registerComponent)(new wo.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),l=new Hn(new oZ(t.getProvider("auth-internal")),new cZ(t.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new we(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(h.options.projectId,p)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),(0,$t.registerVersion)(tj,"3.10.0",n),(0,$t.registerVersion)(tj,"3.10.0","esm2017")}();var aX={includeMetadataChanges:!1};function w1(n,e){return void 0===e&&(e=aX),new Qn.y(function(t){return{unsubscribe:v1(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}})}function cX(n,e){return void 0===e&&(e={}),function lX(n){return w1(n,{includeMetadataChanges:!0})}(n).pipe((0,ot.U)(function(t){return fG(t,e)}))}function fG(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}function mX(n,e){return void 0===e&&(e={}),function pX(n){return w1(n,{includeMetadataChanges:!0}).pipe((0,ot.U)(function(e){return e.docs}))}(n).pipe((0,ot.U)(function(t){return t.map(function(i){return fG(i,e)})}))}class zb{constructor(e){return e}}const _G="firestore",I1=new u.OlP("angularfire2.firestore-instances");function yX(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new zb(i)}}const vX={provide:class gX{constructor(){return gI(_G)}},deps:[[new u.FiY,I1]]},bX={provide:zb,useFactory:function _X(n,e){const t=mI(_G,n,e);return t&&new zb(t)},deps:[[new u.FiY,I1],rf]};let wX=(()=>{class n{constructor(){(0,$t.registerVersion)("angularfire",Ym.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[bX,vX]}),n})();function EX(n,...e){return{ngModule:wX,providers:[{provide:I1,useFactory:yX(n),multi:!0,deps:[u.R0b,u.zs3,Qm,_I,[new u.FiY,gO],[new u.FiY,Jm],...e]}]}}const CX=La(mX,!0),IX=La(cX,!0),xX=La(uG,!0),x1=La(l1,!0),DX=La(Nb,!0),SX=La(uQ,!0),TX=La(y1,!0);var yG=B(3099);class D1{}class Uu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),l=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Uu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Uu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Uu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===s.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class AX{encodeKey(e){return bG(e)}encodeValue(e){return bG(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const RX=/%(\d[a-f0-9])/gi,kX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bG(n){return encodeURIComponent(n).replace(RX,(e,t)=>kX[t]??e)}function qx(n){return`${n}`}class Hu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new AX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function MX(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[l,h]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],p=t.get(l)||[];p.push(h),t.set(l,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(qx):[qx(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Hu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(qx(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(qx(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class OX{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function wG(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function EG(n){return typeof Blob<"u"&&n instanceof Blob}function CG(n){return typeof FormData<"u"&&n instanceof FormData}class $b{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function PX(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Uu),this.context||(this.context=new OX),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new Hu,this.urlWithParams=t}serializeBody(){return null===this.body?null:wG(this.body)||EG(this.body)||CG(this.body)||function NX(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Hu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||CG(this.body)?null:EG(this.body)?this.body.type||null:wG(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Hu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,_=e.params||this.params;const w=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((x,T)=>x.set(T,e.setHeaders[T]),p)),e.setParams&&(_=Object.keys(e.setParams).reduce((x,T)=>x.set(T,e.setParams[T]),_)),new $b(t,i,s,{params:_,headers:p,context:w,reportProgress:h,responseType:r,withCredentials:l})}}var vr=(()=>((vr=vr||{})[vr.Sent=0]="Sent",vr[vr.UploadProgress=1]="UploadProgress",vr[vr.ResponseHeader=2]="ResponseHeader",vr[vr.DownloadProgress=3]="DownloadProgress",vr[vr.Response=4]="Response",vr[vr.User=5]="User",vr))();class FX{constructor(e,t=200,i="OK"){this.headers=e.headers||new Uu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class S1 extends FX{constructor(e={}){super(e),this.type=vr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new S1({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function T1(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let A1=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof $b)s=t;else{let p,_;p=r.headers instanceof Uu?r.headers:new Uu(r.headers),r.params&&(_=r.params instanceof Hu?r.params:new Hu({fromObject:r.params})),s=new $b(t,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:_,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const l=We(s).pipe(Ho(p=>this.handler.handle(p)));if(t instanceof $b||"events"===r.observe)return l;const h=l.pipe(Xn(p=>p instanceof S1));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,ot.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Hu).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,T1(r,i))}post(t,i,r={}){return this.request("POST",t,T1(r,i))}put(t,i,r={}){return this.request("PUT",t,T1(r,i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(D1))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const YX=["*"];let Yx;function Gb(n){return function ZX(){if(void 0===Yx&&(Yx=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Yx=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Yx}()?.createHTML(n)||n}function RG(n){return Error(`Unable to find icon with the name "${n}"`)}function kG(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function OG(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Rf{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Zx=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Rf(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const l=this._sanitizer.sanitize(u.q3G.HTML,r);if(!l)throw OG(r);const h=Gb(l);return this._addSvgIconConfig(t,i,new Rf("",h,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Rf(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(u.q3G.HTML,i);if(!s)throw OG(i);const l=Gb(s);return this._addSvgIconSetConfig(t,new Rf("",l,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,t);if(!i)throw kG(t);const r=this._cachedIconsByUrl.get(i);return r?We(Qx(r)):this._loadSvgIconFromConfig(new Rf(t,null)).pipe(Jn(s=>this._cachedIconsByUrl.set(i,s)),(0,ot.U)(s=>Qx(s)))}getNamedSvgIcon(t,i=""){const r=PG(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const l=this._iconSetConfigs.get(i);return l?this._getSvgFromIconSetConfigs(t,l):Bo(RG(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?We(Qx(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ot.U)(i=>Qx(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?We(r):HC(i.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(so(h=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,l.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(_)),We(null)})))).pipe((0,ot.U)(()=>{const l=this._extractIconWithNameFromAnySet(t,i);if(!l)throw RG(t);return l}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(l,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Jn(i=>t.svgText=i),(0,ot.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?We(null):this._fetchIcon(t).pipe(Jn(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const l=s.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,r);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),r);const h=this._svgElementFromString(Gb("<svg></svg>"));return h.appendChild(l),this._setSvgAttributes(h,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Gb("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:l,value:h}=r[s];"id"!==l&&i.setAttribute(l,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function QX(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const l=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,i);if(!l)throw kG(i);const h=this._inProgressUrlFetches.get(l);if(h)return h;const p=this._httpClient.get(l,{responseType:"text",withCredentials:s}).pipe((0,ot.U)(_=>Gb(_)),Il(()=>this._inProgressUrlFetches.delete(l)),(0,yG.B)());return this._inProgressUrlFetches.set(l,p),p}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(PG(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return JX(s)?new Rf(s.url,null,s.options):new Rf(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(A1,8),u.LFG(Od),u.LFG(ne,8),u.LFG(u.qLn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qx(n){return n.cloneNode(!0)}function PG(n,e){return n+":"+e}function JX(n){return!(!n.url||!n.options)}const eJ=QA(class{constructor(n){this._elementRef=n}}),tJ=new u.OlP("MAT_ICON_DEFAULT_OPTIONS"),nJ=new u.OlP("mat-icon-location",{providedIn:"root",factory:function iJ(){const n=(0,u.f3M)(ne),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),NG=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],rJ=NG.map(n=>`[${n}]`).join(", "),sJ=/^url\(['"]?#(.*?)['"]?\)$/;let oJ=(()=>{class n extends eJ{get inline(){return this._inline}set inline(t){this._inline=fs(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,l,h){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=l,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=zr.w0.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(l=>{s.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(rJ),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)NG.forEach(l=>{const h=i[s],p=h.getAttribute(l),_=p?p.match(sJ):null;if(_){let w=r.get(h);w||(w=[],r.set(h,w)),w.push({name:l,value:_[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(dr(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(Zx),u.$8M("aria-hidden"),u.Y36(nJ),u.Y36(u.qLn),u.Y36(tJ,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,i){2&t&&(u.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),u.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:YX,decls:1,vars:0,template:function(t,i){1&t&&(u.F$t(),u.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),aJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ar,Ar]}),n})(),lJ=(()=>{class n{constructor(){this.playerActive=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-player"]],inputs:{name:"name",playerActive:"playerActive"},decls:4,vars:3,consts:[[1,"player"],["src","/assets/img/1.webp","alt",""]],template:function(t,i){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"img",1),u.TgZ(2,"span"),u._uU(3),u.qZA()()),2&t&&(u.ekj("player-active",i.playerActive),u.xp6(3),u.Oqu(i.name))},styles:[".player[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center;border-bottom-left-radius:50px;border-top-left-radius:50px;background-color:#c1bcb4}.player[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;margin-left:16px}.player[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px;object-fit:cover;border-radius:100%}.player-active[_ngcontent-%COMP%]{background-color:orange!important}"]}),n})();const cJ=["*"],pJ=new u.OlP("MAT_CARD_CONFIG");let FG=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pJ,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(t,i){2&t&&u.ekj("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:cJ,decls:1,vars:0,template:function(t,i){1&t&&(u.F$t(),u.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),n})(),LG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]}),n})(),VG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),n})(),DJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ar,yc,Ar]}),n})(),SJ=(()=>{class n{constructor(){this.cardAction=[{title:"Waterfall",description:"Everyone has to start drinking at the same time. As soon as player 1 stops drinking, player 2 may stop drinking. Player 3 may stop as soon as player 2 stops drinking, and so on."},{title:"You",description:"You decide who drinks"},{title:"Me",description:"Congrats! Drink a shot!"},{title:"Category",description:"Come up with a category (e.g. Colors). Each player must enumerate one item from the category."},{title:"Bust a jive",description:"Player 1 makes a dance move. Player 2 repeats the dance move and adds a second one. "},{title:"Chicks",description:"All girls drink."},{title:"Heaven",description:"Put your hands up! The last player drinks!"},{title:"Mate",description:"Pick a mate. Your mate must always drink when you drink and the other way around."},{title:"Thumbmaster",description:""},{title:"Men",description:"All men drink."},{title:"Quizmaster",description:""},{title:"Never have i ever...",description:"Say something you never did. Everyone who did it has to drink."},{title:"Rule",description:"Make a rule. Everyone needs to drink when he breaks the rule."}],this.title="",this.description=""}ngOnInit(){console.log("current card",this.card)}ngOnChanges(t){if(this.card){console.log("current card",this.card);let i=+this.card.split("_")[1];this.title=this.cardAction[i-1].title,this.description=this.cardAction[i-1].description}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-game-info"]],inputs:{card:"card"},features:[u.TTD],decls:5,vars:2,consts:[[2,"margin-left","16px"]],template:function(t,i){1&t&&(u.TgZ(0,"mat-card")(1,"mat-card-title",0),u._uU(2),u.qZA(),u.TgZ(3,"mat-card-content"),u._uU(4),u.qZA()()),2&t&&(u.xp6(2),u.Oqu(i.card?i.title:"Please pick a card"),u.xp6(2),u.hij(" ",i.card?i.description:"click on the card stack",""))},dependencies:[FG,VG,LG]}),n})();const TJ=function(n){return{"right.px":n}};function AJ(n,e){1&n&&u._UZ(0,"img",9),2&n&&u.Q6J("ngStyle",u.VKq(1,TJ,5*e.index))}function MJ(n,e){1&n&&u._UZ(0,"img",10),2&n&&u.MGl("src","/assets/img/",e.$implicit,".png",u.LSH)}function RJ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"img",11),u.NdJ("click",function(){u.CHM(t);const r=u.oxw();return u.KtG(r.takeCard())}),u.qZA()}if(2&n){const t=u.oxw();u.MGl("src","/assets/img/",t.game.currentCard,".png",u.LSH)}}const kJ=function(n){return{"top.px":n}};function OJ(n,e){if(1&n&&u._UZ(0,"app-player",12),2&n){const t=e.$implicit,i=e.index,r=u.oxw();u.Q6J("playerActive",i==r.game.currentPlayer)("ngStyle",u.VKq(3,kJ,100+90*i))("name",t)}}const PJ=function(){return[0,1,2,3,4]};let NJ=(()=>{class n{constructor(t,i){this.route=t,this.dialog=i,this.game=new yh,this.firestore=(0,u.f3M)(zb),this.gameId="",this.gamesCollection=x1(this.firestore,"games");const r=x1(this.firestore,"games");this.games$=CX(r)}ngOnInit(){this.newGame(),this.route.params.subscribe(t=>{console.log(t),this.getGameData(t)})}newGame(){this.game=new yh}getGameData(t){var i=this;return(0,K.Z)(function*(){i.gameId=t.id,i.docRef=DX(i.gamesCollection,i.gameId),IX(i.docRef).subscribe(s=>{console.log(s),i.game.currentPlayer=s.currentPlayer,i.game.playedCards=s.playedCards,i.game.players=s.players,i.game.stack=s.stack,i.game.pickCardAnimation=s.pickCardAnimation,i.game.currentCard=s.currentCard})})()}takeCard(){this.game.currentCard=this.game.stack.pop(),this.game.pickCardAnimation=!0,this.game.currentPlayer++,this.game.currentPlayer=this.game.currentPlayer%this.game.players.length,this.saveGame(),setTimeout(()=>{this.game.playedCards.push(this.game.currentCard),this.game.pickCardAnimation=!1,this.saveGame()},1e3)}openDialog(){this.dialog.open(a6).afterClosed().subscribe(i=>{i&&i.length>0&&(this.game.players.push(i),this.saveGame())})}saveGame(){TX(this.docRef,this.game.toJson())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Pl),u.Y36(_u))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-game"]],decls:11,vars:6,consts:[[1,"field"],[1,"card-stack"],["src","/assets/img/card_cover.png","alt","",3,"ngStyle",4,"ngFor","ngForOf"],["src","/assets/img/card_cover.png","alt","",1,"top-card",2,"right","25px",3,"click"],["class","played-card","alt","",3,"src",4,"ngFor","ngForOf"],["class","pick-card","style","right: 25px","alt","",3,"src","click",4,"ngIf"],[1,"pin-bottom",3,"card"],["mat-fab","","color","primary","aria-label","Example icon button with a delete icon",1,"btn-add",3,"click"],["class","player-position",3,"playerActive","ngStyle","name",4,"ngFor","ngForOf"],["src","/assets/img/card_cover.png","alt","",3,"ngStyle"],["alt","",1,"played-card",3,"src"],["alt","",1,"pick-card",2,"right","25px",3,"src","click"],[1,"player-position",3,"playerActive","ngStyle","name"]],template:function(t,i){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u.YNc(2,AJ,1,3,"img",2),u.TgZ(3,"img",3),u.NdJ("click",function(){return i.takeCard()}),u.qZA(),u.YNc(4,MJ,1,1,"img",4),u.YNc(5,RJ,1,1,"img",5),u.qZA()(),u._UZ(6,"app-game-info",6),u.TgZ(7,"button",7),u.NdJ("click",function(){return i.openDialog()}),u.TgZ(8,"mat-icon"),u._uU(9,"add"),u.qZA()(),u.YNc(10,OJ,1,5,"app-player",8)),2&t&&(u.xp6(2),u.Q6J("ngForOf",u.DdM(5,PJ)),u.xp6(2),u.Q6J("ngForOf",i.game.playedCards),u.xp6(1),u.Q6J("ngIf",i.game.pickCardAnimation),u.xp6(1),u.Q6J("card",i.game.currentCard),u.xp6(4),u.Q6J("ngForOf",i.game.players))},dependencies:[gi,qs,Zn,MB,oJ,lJ,SJ],styles:[".field[_ngcontent-%COMP%]{width:100vw;height:100vh;max-width:100%;background-image:url(/assets/img/board.jpg);display:flex;justify-content:center;align-items:center}.card-stack[_ngcontent-%COMP%]{position:relative}.card-stack[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:120px}.top-card[_ngcontent-%COMP%]{cursor:pointer;transition:all 125ms}.top-card[_ngcontent-%COMP%]:hover{transform:scale(1.1) translateY(-10px)}.played-card[_ngcontent-%COMP%]{right:25px;transform:scale(1.3) translate(140px) translateY(-180px) rotate(-10deg)}.pick-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pick-card-animation 1s ease-in-out;transform:scale(1.3) translate(140px) translateY(-180px) rotate(-10deg)}@keyframes _ngcontent-%COMP%_pick-card-animation{0%{transform:scale(1)}40%{transform:scale(1.7)}50%{transform:scale(1.7)}to{transform:scale(1.3) translate(140px) translateY(-180px) rotate(-10deg)}}.player-position[_ngcontent-%COMP%]{position:absolute;right:0}.btn-add[_ngcontent-%COMP%]{position:absolute;bottom:32px;right:32px}.pin-bottom[_ngcontent-%COMP%]{position:absolute;bottom:32px;left:100px;right:100px}"]}),n})();function R1(){return(0,Ln.e)((n,e)=>{let t,i=!1;n.subscribe((0,yn.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}var Wa=B(2011),FJ=(B(9568),B(3942));function k1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new we("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function BG(){if(typeof Uint8Array>"u")throw new we("unimplemented","Uint8Arrays are not available in this environment.")}function UG(){if(!function LZ(){return typeof atob<"u"}())throw new we("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Wb{constructor(e){this._delegate=e}static fromBase64String(e){return UG(),new Wb(Ga.fromBase64String(e))}static fromUint8Array(e){return BG(),new Wb(Ga.fromUint8Array(e))}toBase64(){return UG(),this._delegate.toBase64()}toUint8Array(){return BG(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function O1(n){return function BJ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class UJ{enableIndexedDbPersistence(e,t){return function dQ(n,e){q$(n=on(n,Hn));const t=Ii(n);if(t._uninitializedComponentsProvider)throw new we(le.FAILED_PRECONDITION,"SDK cache is already specified.");Ba("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Tg;return W$(t,r,new ZN(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function hQ(n){q$(n=on(n,Hn));const e=Ii(n);if(e._uninitializedComponentsProvider)throw new we(le.FAILED_PRECONDITION,"SDK cache is already specified.");Ba("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new Tg;return W$(e,i,new M$(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function fQ(n){if(n._initialized&&!n._terminated)throw new we(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,K.Z)(function*(){try{yield(t=(0,K.Z)(function*(i){if(!ta.D())return Promise.resolve();const r=i+"main";yield ta.delete(r)}),function(i){return t.apply(this,arguments)})(jP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class HG{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof xu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ba("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){z$(this._delegate,e,t,i)}enableNetwork(){return function mQ(n){return function X9(n){return n.asyncQueue.enqueue((0,K.Z)(function*(){const e=yield O$(n),t=yield r1(n);return e.setNetworkEnabled(!0),function(i){const r=qe(i);return r.du.delete(0),kb(r)}(t)}))}(Ii(n=on(n,Hn)))}(this._delegate)}disableNetwork(){return function gQ(n){return function J9(n){return n.asyncQueue.enqueue((0,K.Z)(function*(){const e=yield O$(n),t=yield r1(n);return e.setNetworkEnabled(!1),(i=(0,K.Z)(function*(r){const s=qe(r);s.du.add(0),yield wg(s),s.mu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(Ii(n=on(n,Hn)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,V$("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function pQ(n){return function(e){const t=new Gi;return e.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return function F9(n,e){return PN.apply(this,arguments)}(yield s1(e),t)})),t.promise}(Ii(n=on(n,Hn)))}(this._delegate)}onSnapshotsInSync(e){return function WQ(n,e){return function nQ(n,e){const t=new kx(e);return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return i=yield Ag(n),r=t,qe(i).Au.add(r),void r.next();var i,r})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return i=yield Ag(n),r=t,void qe(i).Au.delete(r);var i,r}))}}(Ii(n=on(n,Hn)),u1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new we("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pg(this,l1(this._delegate,e))}catch(t){throw Jr(t,"collection()","Firestore.collection()")}}doc(e){try{return new Eo(this,Nb(this._delegate,e))}catch(t){throw Jr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new es(this,function oQ(n,e){if(n=on(n,Pb),a1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new we(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yr(n,null,(t=e,new ic(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Jr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function tX(n,e,t){n=on(n,Hn);const i=Object.assign(Object.assign({},JQ),t);return function(r){if(r.maxAttempts<1)throw new we(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,l){const h=new Gi;return r.asyncQueue.enqueueAndForget((0,K.Z)(function*(){const p=yield function P$(n){return Px(n).then(e=>e.datastore)}(r);new Z9(r.asyncQueue,p,l,s,h).run()})),h.promise}(Ii(n),r=>e(new eX(n,r)),i)}(this._delegate,t=>e(new jG(this,t)))}batch(){return Ii(this._delegate),new zG(new dG(this._delegate,e=>Rg(this._delegate,e)))}loadBundle(e){return function _Q(n,e){const t=Ii(n=on(n,Hn)),i=new lQ;return function iQ(n,e,t,i){const r=function(s,l){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return R$(p,_);if(p instanceof ArrayBuffer)return R$(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new K9(p,l);var p}(t,Rb(e));n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){!function q9(n,e,t){const i=qe(n);var r;(r=(0,K.Z)(function*(s,l,h){try{const p=yield l.getMetadata();if(yield function(T,P){const V=qe(T),W=Ci(P.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",re=>V.xs.getBundleMetadata(re,P.id)).then(re=>!!re&&re.createTime.compareTo(W)>=0)}(s.localStore,p))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(T=p).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);h._updateProgress(w$(p));const _=new D9(p,s.localStore,l.serializer);let w=yield l._c();for(;w;){const T=yield _.$u(w);T&&h._updateProgress(T),w=yield l._c()}const x=yield _.complete();return yield oc(s,x.Bu,void 0),yield function(T,P){const V=qe(T);return V.persistence.runTransaction("Save bundle","readwrite",W=>V.xs.saveBundleMetadata(W,P))}(s.localStore,p),h._completeWith(x.progress),Promise.resolve(x.Fu)}catch(p){return Ba("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var T}),function(s,l,h){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield s1(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function yQ(n,e){return function rQ(n,e){return n.asyncQueue.enqueue((0,K.Z)(function*(){return function(t,i){const r=qe(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.xs.getNamedQuery(s,i))}(yield Nx(n),e)}))}(Ii(n=on(n,Hn)),e).then(t=>t?new yr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new es(this,t):null)}}class Xx extends _1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wb(new Ga(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Eo.forKey(t,this.firestore,null)}}class jG{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Xx(e)}get(e){const t=Of(e);return this._delegate.get(t).then(i=>new qb(this._firestore,new lc(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Of(e);return i?(k1("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Of(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Of(e);return this._delegate.delete(t),this}}class zG{constructor(e){this._delegate=e}set(e,t,i){const r=Of(e);return i?(k1("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Of(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Of(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class kf{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new jb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kb(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=kf.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new kf(e,new Xx(e),t),r.set(t,s)),s}}kf.INSTANCES=new WeakMap;class Eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xx(e)}static forPath(e,t,i){if(e.length%2!=0)throw new we("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Eo(t,new Un(t._delegate,i,new $e(e)))}static forKey(e,t,i){return new Eo(t,new Un(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Pg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pg(this.firestore,l1(this._delegate,e))}catch(t){throw Jr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,G.m9)(e))instanceof Un&&$$(this._delegate,e)}set(e,t){t=k1("DocumentReference.set",t);try{return t?cG(this._delegate,e,t):cG(this._delegate,e)}catch(i){throw Jr(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?y1(this._delegate,e):y1(this._delegate,e,t,...i)}catch(r){throw Jr(r,"updateDoc()","DocumentReference.update()")}}delete(){return function GQ(n){return Rg(on(n.firestore,Hn),[new pg(n._key,qn.none())])}(this._delegate)}onSnapshot(...e){const t=$G(e),i=GG(e,r=>new qb(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return v1(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function UQ(n){n=on(n,Un);const e=on(n.firestore,Hn),t=Ii(e),i=new Vu(e);return function eQ(n,e){const t=new Gi;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return(i=(0,K.Z)(function*(r,s,l){try{const h=yield function(p,_){const w=qe(p);return w.persistence.runTransaction("read document","readonly",x=>w.localDocuments.getDocument(x,_))}(r,s);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new we(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Ig(h,`Failed to get document '${s} from cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield Nx(n),e,t);var i})),t.promise}(t,n._key).then(r=>new lc(e,i,n._key,r,new Mf(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function HQ(n){n=on(n,Un);const e=on(n.firestore,Hn);return N$(Ii(e),n._key,{source:"server"}).then(t=>b1(e,n,t))}(this._delegate):function BQ(n){n=on(n,Un);const e=on(n.firestore,Hn);return N$(Ii(e),n._key).then(t=>b1(e,n,t))}(this._delegate),t.then(i=>new qb(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Eo(this.firestore,this._delegate.withConverter(e?kf.getInstance(this.firestore,e):null))}}function Jr(n,e,t){return n.message=n.message.replace(e,t),n}function $G(n){for(const e of n)if("object"==typeof e&&!O1(e))return e;return{}}function GG(n,e){var t,i;let r;return r=O1(n[0])?n[0]:O1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class qb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Eo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lG(this._delegate,e._delegate)}}class Kb extends qb{data(e){const t=this._delegate.data(e);return function iZ(n,e){n||st()}(void 0!==t),t}}class es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xx(e)}where(e,t,i){try{return new es(this.firestore,Fu(this._delegate,function TQ(n,e,t){const i=e,r=jx("where",n);return Hb._create(r,i,t)}(e,t,i)))}catch(r){throw Jr(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new es(this.firestore,Fu(this._delegate,function AQ(n,e="asc"){const t=e,i=jx("orderBy",n);return g1._create(i,t)}(e,t)))}catch(i){throw Jr(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new es(this.firestore,Fu(this._delegate,function MQ(n){return H$("limit",n),zx._create("limit",n,"F")}(e)))}catch(t){throw Jr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new es(this.firestore,Fu(this._delegate,function RQ(n){return H$("limitToLast",n),zx._create("limitToLast",n,"L")}(e)))}catch(t){throw Jr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new es(this.firestore,Fu(this._delegate,function kQ(...n){return $x._create("startAt",n,!0)}(...e)))}catch(t){throw Jr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new es(this.firestore,Fu(this._delegate,function OQ(...n){return $x._create("startAfter",n,!1)}(...e)))}catch(t){throw Jr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new es(this.firestore,Fu(this._delegate,function PQ(...n){return Gx._create("endBefore",n,!1)}(...e)))}catch(t){throw Jr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new es(this.firestore,Fu(this._delegate,function NQ(...n){return Gx._create("endAt",n,!0)}(...e)))}catch(t){throw Jr(t,"endAt()","Query.endAt()")}}isEqual(e){return c1(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function zQ(n){n=on(n,yr);const e=on(n.firestore,Hn),t=Ii(e),i=new Vu(e);return function tQ(n,e){const t=new Gi;return n.asyncQueue.enqueueAndForget((0,K.Z)(function*(){return(i=(0,K.Z)(function*(r,s,l){try{const h=yield Ix(r,s,!0),p=new I$(s,h.Wi),_=p.zu(h.documents),w=p.applyChanges(_,!1);l.resolve(w.snapshot)}catch(h){const p=Ig(h,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield Nx(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Lu(e,i,n,r))}(this._delegate):"server"===e?.source?function $Q(n){n=on(n,yr);const e=on(n.firestore,Hn),t=Ii(e),i=new Vu(e);return F$(t,n._query,{source:"server"}).then(r=>new Lu(e,i,n,r))}(this._delegate):function jQ(n){n=on(n,yr);const e=on(n.firestore,Hn),t=Ii(e),i=new Vu(e);return tG(n._query),F$(t,n._query).then(r=>new Lu(e,i,n,r))}(this._delegate),t.then(i=>new P1(this.firestore,new Lu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=$G(e),i=GG(e,r=>new P1(this.firestore,new Lu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return v1(this._delegate,t,i)}withConverter(e){return new es(this.firestore,this._delegate.withConverter(e?kf.getInstance(this.firestore,e):null))}}class jJ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Kb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class P1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new jJ(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Kb(this._firestore,i))})}isEqual(e){return lG(this._delegate,e._delegate)}}class Pg extends es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Eo(this.firestore,e):null}doc(e){try{return new Eo(this.firestore,void 0===e?Nb(this._delegate):Nb(this._delegate,e))}catch(t){throw Jr(t,"doc()","CollectionReference.doc()")}}add(e){return uG(this._delegate,e).then(t=>new Eo(this.firestore,t))}isEqual(e){return $$(this._delegate,e._delegate)}withConverter(e){return new Pg(this.firestore,this._delegate.withConverter(e?kf.getInstance(this.firestore,e):null))}}function Of(n){return on(n,Un)}class N1{constructor(...e){this._delegate=new ac(...e)}static documentId(){return new N1(ci.keyField().canonicalString())}isEqual(e){return(e=(0,G.m9)(e))instanceof ac&&this._delegate._internalPath.isEqual(e._internalPath)}}class Pf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function iX(){return new d1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Pf(e)}static delete(){const e=function nX(){return new Lb("deleteField")}();return e._methodName="FieldValue.delete",new Pf(e)}static arrayUnion(...e){const t=function rX(...n){return new CQ("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Pf(t)}static arrayRemove(...e){const t=function sX(...n){return new IQ("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Pf(t)}static increment(e){const t=function oX(n){return new xQ("increment",n)}(e);return t._methodName="FieldValue.increment",new Pf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zJ={Firestore:HG,GeoPoint:Lx,Timestamp:Wn,Blob:Wb,Transaction:jG,WriteBatch:zG,DocumentReference:Eo,DocumentSnapshot:qb,Query:es,QueryDocumentSnapshot:Kb,QuerySnapshot:P1,CollectionReference:Pg,FieldPath:N1,FieldValue:Pf,setLogLevel:function HJ(n){!function nZ(n){wu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function GJ(n){(function $J(n,e){n.INTERNAL.registerComponent(new wo.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},zJ)))})(n,(e,t)=>new HG(e,t,new UJ)),n.registerVersion("@firebase/firestore-compat","0.3.6")}(FJ.Z);class WJ extends Jt.x{constructor(e=1/0,t=1/0,i=my){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;t||(i.push(e),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!e.closed;l+=i?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const l=t.now();let h=0;for(let p=1;p<i.length&&i[p]<=l;p+=2)h=p;h&&i.splice(0,h+1)}}}function WG(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,yG.B)({connector:()=>new WJ(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function qG(n,e){return(0,xr.m)(e)?vi(()=>n,e):vi(()=>n)}var qJ=B(9260);const KG=new u.OlP("angularfire2.auth.use-emulator"),YG=new u.OlP("angularfire2.auth.settings"),ZG=new u.OlP("angularfire2.auth.tenant-id"),QG=new u.OlP("angularfire2.auth.langugage-code"),XG=new u.OlP("angularfire2.auth.use-device-language"),JG=new u.OlP("angularfire.auth.persistence"),e3=(n,e,t,i,r,s,l,h)=>(0,Wa.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),l)for(const[_,w]of Object.entries(l))p.settings[_]=w;return h&&p.setPersistence(h),p},[t,i,r,s,l,h]);let t3=(()=>{class n{constructor(t,i,r,s,l,h,p,_,w,x,T,P){const V=new Jt.x,W=We(void 0).pipe((0,Km.Q)(l.outsideAngular),vi(()=>s.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,9568)))),(0,ot.U)(()=>(0,Wa.on)(t,s,i)),(0,ot.U)(re=>e3(re,s,h,_,w,x,p,T)),WG({bufferSize:1,refCount:!1}));if(Jf(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=We(null);else{W.pipe($r()).subscribe();const Re=W.pipe(vi(dt=>dt.getRedirectResult().then(Pt=>Pt,()=>null)),Ls,WG({bufferSize:1,refCount:!1})),Ge=W.pipe(vi(dt=>new Qn.y(Pt=>({unsubscribe:s.runOutsideAngular(()=>dt.onAuthStateChanged(jt=>Pt.next(jt),jt=>Pt.error(jt),()=>Pt.complete()))})))),Xe=W.pipe(vi(dt=>new Qn.y(Pt=>({unsubscribe:s.runOutsideAngular(()=>dt.onIdTokenChanged(jt=>Pt.next(jt),jt=>Pt.error(jt),()=>Pt.complete()))}))));this.authState=Re.pipe(qG(Ge),(0,Nv.R)(l.outsideAngular),(0,Km.Q)(l.insideAngular)),this.user=Re.pipe(qG(Xe),(0,Nv.R)(l.outsideAngular),(0,Km.Q)(l.insideAngular)),this.idToken=this.user.pipe(vi(dt=>dt?(0,Wt.D)(dt.getIdToken()):We(null))),this.idTokenResult=this.user.pipe(vi(dt=>dt?(0,Wt.D)(dt.getIdTokenResult()):We(null))),this.credential=(0,Th.T)(Re,V,this.authState.pipe(Xn(dt=>!dt))).pipe((0,ot.U)(dt=>dt?.user?dt:null),(0,Nv.R)(l.outsideAngular),(0,Km.Q)(l.insideAngular))}return(0,Wa.pX)(this,W,s,{spy:{apply:(re,Re,Ge)=>{(re.startsWith("signIn")||re.startsWith("createUser"))&&Ge.then(Xe=>V.next(Xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wa.Dh),u.LFG(Wa.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Qm),u.LFG(KG,8),u.LFG(YG,8),u.LFG(ZG,8),u.LFG(QG,8),u.LFG(XG,8),u.LFG(JG,8),u.LFG(Jm,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function n3(n,e){return function YJ(n,e=Eh){return new Qn.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function F1(n,e){return n3(n,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function Jx(n,e){return F1(n,e).pipe(As(void 0),R1(),(0,ot.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,h)=>{const p=r.find(w=>w.doc.ref.isEqual(l.ref)),_=t?.payload.docs.find(w=>w.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),s}))}function r3(n,e,t){return Jx(n,t).pipe(Bc((i,r)=>function QJ(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function XJ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return L1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return L1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return L1(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Zy(),(0,ot.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function L1(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function s3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class o3{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Jx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ot.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(As(void 0),R1(),Xn(([i,r])=>r.length>0||!i),(0,ot.U)(([i,r])=>r),Ls)}auditTrail(e){return this.stateChanges(e).pipe(Bc((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=s3(e);return r3(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ls)}valueChanges(e={}){return F1(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),Ls)}get(e){return(0,Wt.D)(this.query.get(e)).pipe(Ls)}add(e){return this.ref.add(e)}doc(e){return new a3(this.ref.doc(e),this.afs)}}class a3{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=u3(i,t);return new o3(r,s,this.afs)}snapshotChanges(){return function ZJ(n,e){return n3(n,e).pipe(As(void 0),R1(),(0,ot.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ls)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Wt.D)(this.ref.get(e)).pipe(Ls)}}class JJ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Jx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Xn(t=>t.length>0),Ls):Jx(this.query,this.afs.schedulers.outsideAngular).pipe(Ls)}auditTrail(e){return this.stateChanges(e).pipe(Bc((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=s3(e);return r3(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ls)}valueChanges(e={}){return F1(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),Ls)}get(e){return(0,Wt.D)(this.query.get(e)).pipe(Ls)}}const l3=new u.OlP("angularfire2.enableFirestorePersistence"),c3=new u.OlP("angularfire2.firestore.persistenceSettings"),eee=new u.OlP("angularfire2.firestore.settings"),tee=new u.OlP("angularfire2.firestore.use-emulator");function u3(n,e=(t=>t)){return{query:e(n),ref:n}}let nee=(()=>{class n{constructor(t,i,r,s,l,h,p,_,w,x,T,P,V,W,re,Re,Ge){this.schedulers=p;const Xe=(0,Wa.on)(t,h,i),dt=w;x&&e3(Xe,h,T,V,W,re,P,Re),[this.firestore,this.persistenceEnabled$]=(0,Wa.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const Pt=h.runOutsideAngular(()=>Xe.firestore());if(s&&Pt.settings(s),dt&&Pt.useEmulator(...dt),r&&!Jf(l)){const jt=()=>{try{return(0,Wt.D)(Pt.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(pn){return typeof console<"u"&&console.warn(pn),We(!1)}};return[Pt,h.runOutsideAngular(jt)]}return[Pt,We(!1)]},[s,dt,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=u3(r,i),h=this.schedulers.ngZone.run(()=>s);return new o3(h,l,this)}collectionGroup(t,i){const r=i||(l=>l),s=this.firestore.collectionGroup(t);return new JJ(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new a3(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wa.Dh),u.LFG(Wa.xv,8),u.LFG(l3,8),u.LFG(eee,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Qm),u.LFG(c3,8),u.LFG(tee,8),u.LFG(t3,8),u.LFG(KG,8),u.LFG(YG,8),u.LFG(ZG,8),u.LFG(QG,8),u.LFG(XG,8),u.LFG(JG,8),u.LFG(Jm,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),d3=(()=>{class n{constructor(){qJ.Z.registerVersion("angularfire",Ym.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:l3,useValue:!0},{provide:c3,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[nee]}),n})();const iee=[{path:"",component:(()=>{class n{constructor(t,i){this.AngularFirestoreModule=t,this.router=i,this.game=new yh,this.firestore=(0,u.f3M)(zb)}ngOnInit(){}newGame(){const t=x1(this.firestore,"games");xX(t,this.game.toJson()).then(i=>{console.log(i.id),this.router.navigateByUrl("/game/"+i.id)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(d3),u.Y36(Tr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-start-screen"]],decls:4,vars:0,consts:[[1,"start-screen"],["src","assets/img/startbox.png","alt",""],[1,"start-label-box"],["src","assets/img/startlabel.png","alt","",3,"click"]],template:function(t,i){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"img",1),u.TgZ(2,"div",2)(3,"img",3),u.NdJ("click",function(){return i.newGame()}),u.qZA()()())},styles:[".start-screen[_ngcontent-%COMP%]{background-color:#404040;width:100vw;height:100vh;max-width:100%;display:flex;justify-content:center;align-items:center}.start-screen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100vh}.start-label-box[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:50px;display:flex;justify-content:center}.start-label-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:39vw;height:auto}.start-label-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:brightness(1.25);cursor:pointer}"]}),n})()},{path:"game/:id",component:NJ}];let ree=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[jw.forRoot(iee),jw]}),n})(),see=(()=>{class n{constructor(){this.title="ringoffire"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},dependencies:[Bp]}),n})();function h3(n){return new u.vHH(3e3,!1)}function Uee(){return typeof window<"u"&&typeof window.document<"u"}function V1(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ju(n){switch(n.length){case 0:return new pu;case 1:return n[0];default:return new lC(n)}}function f3(n,e,t,i,r=new Map,s=new Map){const l=[],h=[];let p=-1,_=null;if(i.forEach(w=>{const x=w.get("offset"),T=x==p,P=T&&_||new Map;w.forEach((V,W)=>{let re=W,Re=V;if("offset"!==W)switch(re=e.normalizePropertyName(re,l),Re){case Sm:Re=r.get(W);break;case yo:Re=s.get(W);break;default:Re=e.normalizeStyleValue(W,re,Re,l)}P.set(re,Re)}),T||h.push(P),_=P,p=x}),l.length)throw function Tee(n){return new u.vHH(3502,!1)}();return h}function B1(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&U1(t,"start",n)));break;case"done":n.onDone(()=>i(t&&U1(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&U1(t,"destroy",n)))}}function U1(n,e,t){const s=H1(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function H1(n,e,t,i,r="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!l}}function Hs(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function p3(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let j1=(n,e)=>!1,m3=(n,e,t)=>[],g3=null;function z1(n){const e=n.parentNode||n.host;return e===g3?null:e}(V1()||typeof Element<"u")&&(Uee()?(g3=(()=>document.documentElement)(),j1=(n,e)=>{for(;e;){if(e===n)return!0;e=z1(e)}return!1}):j1=(n,e)=>n.contains(e),m3=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Nf=null,_3=!1;const y3=j1,v3=m3;let b3=(()=>{class n{validateStyleProperty(t){return function jee(n){Nf||(Nf=function zee(){return typeof document<"u"?document.body:null}()||{},_3=!!Nf.style&&"WebkitAppearance"in Nf.style);let e=!0;return Nf.style&&!function Hee(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Nf.style,!e&&_3&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Nf.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return y3(t,i)}getParentElement(t){return z1(t)}query(t,i,r){return v3(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,l,h=[],p){return new pu(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),$1=(()=>{class n{}return n.NOOP=new b3,n})();const $ee=1e3,G1="ng-enter",eD="ng-leave",tD="ng-trigger",nD=".ng-trigger",E3="ng-animating",W1=".ng-animating";function cc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:q1(parseFloat(e[1]),e[2])}function q1(n,e){return"s"===e?n*$ee:n}function iD(n,e,t){return n.hasOwnProperty("duration")?n:function Wee(n,e,t){let r,s=0,l="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(h3()),{duration:0,delay:0,easing:""};r=q1(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=q1(parseFloat(p),h[4]));const _=h[5];_&&(l=_)}else r=n;if(!t){let h=!1,p=e.length;r<0&&(e.push(function oee(){return new u.vHH(3100,!1)}()),h=!0),s<0&&(e.push(function aee(){return new u.vHH(3101,!1)}()),h=!0),h&&e.splice(p,0,h3())}return{duration:r,delay:s,easing:l}}(n,e,t)}function Yb(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function C3(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function zu(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function x3(n,e,t){return t?e+":"+t+";":""}function D3(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=x3(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=x3(0,Zee(t),n.style[t]));n.setAttribute("style",e)}function qa(n,e,t){n.style&&(e.forEach((i,r)=>{const s=Y1(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),V1()&&D3(n))}function Ff(n,e){n.style&&(e.forEach((t,i)=>{const r=Y1(i);n.style[r]=""}),V1()&&D3(n))}function Zb(n){return Array.isArray(n)?1==n.length?n[0]:aC(n):n}const K1=new RegExp("{{\\s*(.+?)\\s*}}","g");function S3(n){let e=[];if("string"==typeof n){let t;for(;t=K1.exec(n);)e.push(t[1]);K1.lastIndex=0}return e}function Qb(n,e,t){const i=n.toString(),r=i.replace(K1,(s,l)=>{let h=e[l];return null==h&&(t.push(function cee(n){return new u.vHH(3003,!1)}()),h=""),h.toString()});return r==i?n:r}function rD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Yee=/-+([a-z0-9])/g;function Y1(n){return n.replace(Yee,(...e)=>e[1].toUpperCase())}function Zee(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function js(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function uee(n){return new u.vHH(3004,!1)}()}}function T3(n,e){return window.getComputedStyle(n)[e]}const aD="*";function nte(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function ite(n,e,t){if(":"==n[0]){const p=function rte(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Iee(n){return new u.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Cee(n){return new u.vHH(3015,!1)}()),e;const r=i[1],s=i[2],l=i[3];e.push(A3(r,l));"<"==s[0]&&!(r==aD&&l==aD)&&e.push(A3(l,r))}(i,t,e)):t.push(n),t}const lD=new Set(["true","1"]),cD=new Set(["false","0"]);function A3(n,e){const t=lD.has(n)||cD.has(n),i=lD.has(e)||cD.has(e);return(r,s)=>{let l=n==aD||n==r,h=e==aD||e==s;return!l&&t&&"boolean"==typeof r&&(l=r?lD.has(n):cD.has(n)),!h&&i&&"boolean"==typeof s&&(h=s?lD.has(e):cD.has(e)),l&&h}}const ste=new RegExp("s*:selfs*,?","g");function Z1(n,e,t,i){return new ote(n).build(e,t,i)}class ote{constructor(e){this._driver=e}build(e,t,i){const r=new cte(t);return this._resetContextStyleTimingState(r),js(this,Zb(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function hee(){return new u.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,_=p.name;_.toString().split(/\s*,\s*/).forEach(w=>{p.name=w,s.push(this.visitState(p,t))}),p.name=_}else if(1==h.type){const p=this.visitTransition(h,t);i+=p.queryCount,r+=p.depCount,l.push(p)}else t.errors.push(function fee(){return new u.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,l=r||{};i.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{S3(p).forEach(_=>{l.hasOwnProperty(_)||s.add(_)})})}),s.size&&(rD(s.values()),t.errors.push(function pee(n,e){return new u.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=js(this,Zb(e.animation),t);return{type:1,matchers:nte(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Lf(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>js(this,i,t)),options:Lf(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(l=>{t.currentTime=i;const h=js(this,l,t);return r=Math.max(r,t.currentTime),h});return t.currentTime=r,{type:3,steps:s,options:Lf(e.options)}}visitAnimate(e,t){const i=function dte(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Q1(iD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Q1(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=iD(t,e);return Q1(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Ra({});if(5==s.type)r=this.visitKeyframes(s,t);else{let l=e.styles,h=!1;if(!l){h=!0;const _={};i.easing&&(_.easing=i.easing),l=Ra(_)}t.currentTime+=i.duration+i.delay;const p=this.visitStyle(l,t);p.isEmptyStep=h,r=p}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of r)"string"==typeof h?h===yo?i.push(h):t.errors.push(new u.vHH(3002,!1)):i.push(C3(h));let s=!1,l=null;return i.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!s))for(let p of h.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:l,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((h,p)=>{const _=t.collectedStyles.get(t.currentQuerySelector),w=_.get(p);let x=!0;w&&(s!=r&&s>=w.startTime&&r<=w.endTime&&(t.errors.push(function gee(n,e,t,i,r){return new u.vHH(3010,!1)}()),x=!1),s=w.startTime),x&&_.set(p,{startTime:s,endTime:r}),t.options&&function Kee(n,e,t){const i=e.params||{},r=S3(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function lee(n){return new u.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function _ee(){return new u.vHH(3011,!1)}()),i;let s=0;const l=[];let h=!1,p=!1,_=0;const w=e.steps.map(Re=>{const Ge=this._makeStyleAst(Re,t);let Xe=null!=Ge.offset?Ge.offset:function ute(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ge.styles),dt=0;return null!=Xe&&(s++,dt=Ge.offset=Xe),p=p||dt<0||dt>1,h=h||dt<_,_=dt,l.push(dt),Ge});p&&t.errors.push(function yee(){return new u.vHH(3012,!1)}()),h&&t.errors.push(function vee(){return new u.vHH(3200,!1)}());const x=e.steps.length;let T=0;s>0&&s<x?t.errors.push(function bee(){return new u.vHH(3202,!1)}()):0==s&&(T=1/(x-1));const P=x-1,V=t.currentTime,W=t.currentAnimateTimings,re=W.duration;return w.forEach((Re,Ge)=>{const Xe=T>0?Ge==P?1:T*Ge:l[Ge],dt=Xe*re;t.currentTime=V+W.delay+dt,W.duration=dt,this._validateStyleAst(Re,t),Re.offset=Xe,i.styles.push(Re)}),i}visitReference(e,t){return{type:8,animation:js(this,Zb(e.animation),t),options:Lf(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Lf(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Lf(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function ate(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(ste,"")),n=n.replace(/@\*/g,nD).replace(/@\w+/g,t=>nD+"-"+t.slice(1)).replace(/:animating/g,W1),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Hs(t.collectedStyles,t.currentQuerySelector,new Map);const h=js(this,Zb(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:Lf(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function wee(){return new u.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:iD(e.timings,t.errors,!0);return{type:12,animation:js(this,Zb(e.animation),t),timings:i,options:null}}}class cte{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Lf(n){return n?(n=Yb(n)).params&&(n.params=function lte(n){return n?Yb(n):null}(n.params)):n={},n}function Q1(n,e,t){return{duration:n,delay:e,easing:t}}function X1(n,e,t,i,r,s,l=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:h}}class uD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const pte=new RegExp(":enter","g"),gte=new RegExp(":leave","g");function J1(n,e,t,i,r,s=new Map,l=new Map,h,p,_=[]){return(new _te).buildKeyframes(n,e,t,i,r,s,l,h,p,_)}class _te{buildKeyframes(e,t,i,r,s,l,h,p,_,w=[]){_=_||new uD;const x=new eF(e,t,_,r,s,w,[]);x.options=p;const T=p.delay?cc(p.delay):0;x.currentTimeline.delayNextStep(T),x.currentTimeline.setStyles([l],null,x.errors,p),js(this,i,x);const P=x.timelines.filter(V=>V.containsAnimation());if(P.length&&h.size){let V;for(let W=P.length-1;W>=0;W--){const re=P[W];if(re.element===t){V=re;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([h],null,x.errors,p)}return P.length?P.map(V=>V.buildKeyframes()):[X1(t,[],[],[],0,T,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const l="number"==typeof s?s:cc(Qb(s,r?.params??{},t.errors));i.delayNextStep(l)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const l=null!=i.duration?cc(i.duration):null,h=null!=i.delay?cc(i.delay):null;return 0!==l&&e.forEach(p=>{const _=t.appendInstructionToTimeline(p,l,h);s=Math.max(s,_.duration+_.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),js(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=dD);const l=cc(s.delay);r.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>js(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?cc(e.options.delay):0;e.steps.forEach(l=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),js(this,l,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return iD(t.params?Qb(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?cc(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=dD);let l=i;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((_,w)=>{t.currentQueryIndex=w;const x=t.createSubContext(e.options,_);s&&x.delayNextStep(s),_===t.element&&(p=x.currentTimeline),js(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),h=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=i.currentStaggerTime}const w=t.currentTimeline;p&&w.delayNextStep(p);const x=w.currentTime;js(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-x+(r.startTime-i.currentTimeline.startTime)}}const dD={};class eF{constructor(e,t,i,r,s,l,h,p){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=dD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new hD(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=cc(i.duration)),null!=i.delay&&(r.delay=cc(i.delay));const s=i.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=Qb(s[h],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new eF(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=dD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new yte(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,l){let h=[];if(r&&h.push(this.element),e.length>0){e=(e=e.replace(pte,"."+this._enterClassName)).replace(gte,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),h.push(..._)}return!s&&0==h.length&&l.push(function Eee(n){return new u.vHH(3014,!1)}()),h}}class hD{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new hD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||yo),this._currentKeyframe.set(t,yo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},l=function vte(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,yo)}else zu(r,t)}),t}(e,this._globalTimelineStyles);for(let[h,p]of l){const _=Qb(p,s,i);this._pendingStyles.set(h,_),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??yo),this._updateStyle(h,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,p)=>{const _=zu(h,new Map,this._backFill);_.forEach((w,x)=>{w===Sm?e.add(x):w===yo&&t.add(x)}),i||_.set("offset",p/this.duration),r.push(_)});const s=e.size?rD(e.values()):[],l=t.size?rD(t.values()):[];if(i){const h=r[0],p=new Map(h);h.set("offset",0),p.set("offset",1),r=[h,p]}return X1(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}}class yte extends hD{constructor(e,t,i,r,s,l,h=!1){super(e,t,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=i+t,h=t/l,p=zu(e[0]);p.set("offset",0),s.push(p);const _=zu(e[0]);_.set("offset",k3(h)),s.push(_);const w=e.length-1;for(let x=1;x<=w;x++){let T=zu(e[x]);const P=T.get("offset");T.set("offset",k3((t+P*i)/l)),s.push(T)}i=l,t=0,r="",e=s}return X1(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function k3(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class tF{}const bte=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wte extends tF{normalizePropertyName(e,t){return Y1(e)}normalizeStyleValue(e,t,i,r){let s="";const l=i.toString().trim();if(bte.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function dee(n,e){return new u.vHH(3005,!1)}())}return l+s}}function O3(n,e,t,i,r,s,l,h,p,_,w,x,T){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:l,timelines:h,queriedElements:p,preStyleProps:_,postStyleProps:w,totalTime:x,errors:T}}const nF={};class P3{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Ete(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,l,h,p,_,w){const x=[],T=this.ast.options&&this.ast.options.params||nF,V=this.buildStyles(i,h&&h.params||nF,x),W=p&&p.params||nF,re=this.buildStyles(r,W,x),Re=new Set,Ge=new Map,Xe=new Map,dt="void"===r,Pt={params:Cte(W,T),delay:this.ast.options?.delay},jt=w?[]:J1(e,t,this.ast.animation,s,l,V,re,Pt,_,x);let pn=0;if(jt.forEach(hc=>{pn=Math.max(hc.duration+hc.delay,pn)}),x.length)return O3(t,this._triggerName,i,r,dt,V,re,[],[],Ge,Xe,pn,x);jt.forEach(hc=>{const fc=hc.element,qq=Hs(Ge,fc,new Set);hc.preStyleProps.forEach(Kf=>qq.add(Kf));const D0=Hs(Xe,fc,new Set);hc.postStyleProps.forEach(Kf=>D0.add(Kf)),fc!==t&&Re.add(fc)});const lr=rD(Re.values());return O3(t,this._triggerName,i,r,dt,V,re,jt,lr,Ge,Xe,pn)}}function Cte(n,e){const t=Yb(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class Ite{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=Yb(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!==l&&(r[s]=l)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,h)=>{l&&(l=Qb(l,r,t));const p=this.normalizer.normalizePropertyName(h,t);l=this.normalizer.normalizeStyleValue(h,p,l,t),i.set(h,l)})}),i}}class Dte{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new Ite(r.style,r.options&&r.options.params||{},i))}),N3(this.states,"true","1"),N3(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new P3(e,r,this.states))}),this.fallbackTransition=function Ste(n,e,t){return new P3(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(l=>l.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function N3(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Tte=new uD;class Ate{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=[],s=Z1(this._driver,t,i,r);if(i.length)throw function Aee(n){return new u.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=f3(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let l;const h=new Map;if(s?(l=J1(this._driver,t,s,G1,eD,new Map,new Map,i,Tte,r),l.forEach(w=>{const x=Hs(h,w.element,new Map);w.postStyleProps.forEach(T=>x.set(T,null))})):(r.push(function Mee(){return new u.vHH(3300,!1)}()),l=[]),r.length)throw function Ree(n){return new u.vHH(3504,!1)}();h.forEach((w,x)=>{w.forEach((T,P)=>{w.set(P,this._driver.computeStyle(x,P,yo))})});const _=ju(l.map(w=>{const x=h.get(w.element);return this._buildPlayer(w,new Map,x)}));return this._playersById.set(e,_),_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function kee(n){return new u.vHH(3301,!1)}();return t}listen(e,t,i,r){const s=H1(t,"","","");return B1(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const F3="ng-animate-queued",iF="ng-animate-disabled",Pte=[],L3={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Nte={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Co="__ng_removed";class rF{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Bte(n){return n??null}(i?e.value:e),i){const s=Yb(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Xb="void",sF=new rF(Xb);class Fte{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Io(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function Oee(n,e){return new u.vHH(3302,!1)}();if(null==i||0==i.length)throw function Pee(n){return new u.vHH(3303,!1)}();if(!function Ute(n){return"start"==n||"done"==n}(i))throw function Nee(n,e){return new u.vHH(3400,!1)}();const s=Hs(this._elementListeners,e,[]),l={name:t,phase:i,callback:r};s.push(l);const h=Hs(this._engine.statesByElement,e,new Map);return h.has(t)||(Io(e,tD),Io(e,tD+"-"+t),h.set(t,sF)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Fee(n){return new u.vHH(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),l=new oF(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Io(e,tD),Io(e,tD+"-"+t),this._engine.statesByElement.set(e,h=new Map));let p=h.get(t);const _=new rF(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),h.set(t,_),p||(p=sF),_.value!==Xb&&p.value===_.value){if(!function zte(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,_.params)){const W=[],re=s.matchStyles(p.value,p.params,W),Re=s.matchStyles(_.value,_.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{Ff(e,re),qa(e,Re)})}return}const T=Hs(this._engine.playersByElement,e,[]);T.forEach(W=>{W.namespaceId==this.id&&W.triggerName==t&&W.queued&&W.destroy()});let P=s.matchTransition(p.value,_.value,e,_.params),V=!1;if(!P){if(!r)return;P=s.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:p,toState:_,player:l,isFallbackTransition:V}),V||(Io(e,F3),l.onStart(()=>{Ng(e,F3)})),l.onDone(()=>{let W=this.players.indexOf(l);W>=0&&this.players.splice(W,1);const re=this._engine.playersByElement.get(e);if(re){let Re=re.indexOf(l);Re>=0&&re.splice(Re,1)}}),this.players.push(l),T.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,nD,!0);i.forEach(r=>{if(r[Co])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const h=[];if(s.forEach((p,_)=>{if(l.set(_,p.value),this._triggers.has(_)){const w=this.trigger(e,_,Xb,r);w&&h.push(w)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),i&&ju(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const l=s.name;if(r.has(l))return;r.add(l);const p=this._triggers.get(l).fallbackTransition,_=i.get(l)||sF,w=new rF(Xb),x=new oF(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:_,toState:w,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let l=e;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Co];(!s||s===L3)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Io(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,l=this._elementListeners.get(s);l&&l.forEach(h=>{if(h.name==i.triggerName){const p=H1(s,i.triggerName,i.fromState.value,i.toState.value);p._data=e,B1(i.player,h.phase,p,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Lte{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Fte(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let l=!1,h=this.driver.getParentElement(t);for(;h;){const p=r.get(h);if(p){const _=i.indexOf(p);i.splice(_+1,0,e),l=!0;break}h=this.driver.getParentElement(h)}l||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(fD(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!fD(t))return;const s=t[Co];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Io(e,iF)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ng(e,iF))}removeNode(e,t,i,r){if(fD(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Co]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return fD(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,nD,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,W1,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ju(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Co];if(t&&t.setForRemoval){if(e[Co]=L3,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(iF)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Io(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?ju(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Lee(n){return new u.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new uD,r=[],s=new Map,l=[],h=new Map,p=new Map,_=new Map,w=new Set;this.disabledNodes.forEach(ht=>{w.add(ht);const Et=this.driver.query(ht,".ng-animate-queued",!0);for(let At=0;At<Et.length;At++)w.add(Et[At])});const x=this.bodyNode,T=Array.from(this.statesByElement.keys()),P=U3(T,this.collectedEnterElements),V=new Map;let W=0;P.forEach((ht,Et)=>{const At=G1+W++;V.set(Et,At),ht.forEach(dn=>Io(dn,At))});const re=[],Re=new Set,Ge=new Set;for(let ht=0;ht<this.collectedLeaveElements.length;ht++){const Et=this.collectedLeaveElements[ht],At=Et[Co];At&&At.setForRemoval&&(re.push(Et),Re.add(Et),At.hasAnimation?this.driver.query(Et,".ng-star-inserted",!0).forEach(dn=>Re.add(dn)):Ge.add(Et))}const Xe=new Map,dt=U3(T,Array.from(Re));dt.forEach((ht,Et)=>{const At=eD+W++;Xe.set(Et,At),ht.forEach(dn=>Io(dn,At))}),e.push(()=>{P.forEach((ht,Et)=>{const At=V.get(Et);ht.forEach(dn=>Ng(dn,At))}),dt.forEach((ht,Et)=>{const At=Xe.get(Et);ht.forEach(dn=>Ng(dn,At))}),re.forEach(ht=>{this.processLeaveNode(ht)})});const Pt=[],jt=[];for(let ht=this._namespaceList.length-1;ht>=0;ht--)this._namespaceList[ht].drainQueuedTransitions(t).forEach(At=>{const dn=At.player,cr=At.element;if(Pt.push(dn),this.collectedEnterElements.length){const Nr=cr[Co];if(Nr&&Nr.setForMove){if(Nr.previousTriggersValues&&Nr.previousTriggersValues.has(At.triggerName)){const Yf=Nr.previousTriggersValues.get(At.triggerName),So=this.statesByElement.get(At.element);if(So&&So.has(At.triggerName)){const ZD=So.get(At.triggerName);ZD.value=Yf,So.set(At.triggerName,ZD)}}return void dn.destroy()}}const Xa=!x||!this.driver.containsElement(x,cr),Gs=Xe.get(cr),ed=V.get(cr),ii=this._buildInstruction(At,i,ed,Gs,Xa);if(ii.errors&&ii.errors.length)return void jt.push(ii);if(Xa)return dn.onStart(()=>Ff(cr,ii.fromStyles)),dn.onDestroy(()=>qa(cr,ii.toStyles)),void r.push(dn);if(At.isFallbackTransition)return dn.onStart(()=>Ff(cr,ii.fromStyles)),dn.onDestroy(()=>qa(cr,ii.toStyles)),void r.push(dn);const Zq=[];ii.timelines.forEach(Nr=>{Nr.stretchStartingKeyframe=!0,this.disabledNodes.has(Nr.element)||Zq.push(Nr)}),ii.timelines=Zq,i.append(cr,ii.timelines),l.push({instruction:ii,player:dn,element:cr}),ii.queriedElements.forEach(Nr=>Hs(h,Nr,[]).push(dn)),ii.preStyleProps.forEach((Nr,Yf)=>{if(Nr.size){let So=p.get(Yf);So||p.set(Yf,So=new Set),Nr.forEach((ZD,vL)=>So.add(vL))}}),ii.postStyleProps.forEach((Nr,Yf)=>{let So=_.get(Yf);So||_.set(Yf,So=new Set),Nr.forEach((ZD,vL)=>So.add(vL))})});if(jt.length){const ht=[];jt.forEach(Et=>{ht.push(function Vee(n,e){return new u.vHH(3505,!1)}())}),Pt.forEach(Et=>Et.destroy()),this.reportError(ht)}const pn=new Map,lr=new Map;l.forEach(ht=>{const Et=ht.element;i.has(Et)&&(lr.set(Et,Et),this._beforeAnimationBuild(ht.player.namespaceId,ht.instruction,pn))}),r.forEach(ht=>{const Et=ht.element;this._getPreviousPlayers(Et,!1,ht.namespaceId,ht.triggerName,null).forEach(dn=>{Hs(pn,Et,[]).push(dn),dn.destroy()})});const hc=re.filter(ht=>j3(ht,p,_)),fc=new Map;B3(fc,this.driver,Ge,_,yo).forEach(ht=>{j3(ht,p,_)&&hc.push(ht)});const D0=new Map;P.forEach((ht,Et)=>{B3(D0,this.driver,new Set(ht),p,Sm)}),hc.forEach(ht=>{const Et=fc.get(ht),At=D0.get(ht);fc.set(ht,new Map([...Array.from(Et?.entries()??[]),...Array.from(At?.entries()??[])]))});const Kf=[],Kq=[],Yq={};l.forEach(ht=>{const{element:Et,player:At,instruction:dn}=ht;if(i.has(Et)){if(w.has(Et))return At.onDestroy(()=>qa(Et,dn.toStyles)),At.disabled=!0,At.overrideTotalTime(dn.totalTime),void r.push(At);let cr=Yq;if(lr.size>1){let Gs=Et;const ed=[];for(;Gs=Gs.parentNode;){const ii=lr.get(Gs);if(ii){cr=ii;break}ed.push(Gs)}ed.forEach(ii=>lr.set(ii,cr))}const Xa=this._buildAnimation(At.namespaceId,dn,pn,s,D0,fc);if(At.setRealPlayer(Xa),cr===Yq)Kf.push(At);else{const Gs=this.playersByElement.get(cr);Gs&&Gs.length&&(At.parentPlayer=ju(Gs)),r.push(At)}}else Ff(Et,dn.fromStyles),At.onDestroy(()=>qa(Et,dn.toStyles)),Kq.push(At),w.has(Et)&&r.push(At)}),Kq.forEach(ht=>{const Et=s.get(ht.element);if(Et&&Et.length){const At=ju(Et);ht.setRealPlayer(At)}}),r.forEach(ht=>{ht.parentPlayer?ht.syncPlayerEvents(ht.parentPlayer):ht.destroy()});for(let ht=0;ht<re.length;ht++){const Et=re[ht],At=Et[Co];if(Ng(Et,eD),At&&At.hasAnimation)continue;let dn=[];if(h.size){let Xa=h.get(Et);Xa&&Xa.length&&dn.push(...Xa);let Gs=this.driver.query(Et,W1,!0);for(let ed=0;ed<Gs.length;ed++){let ii=h.get(Gs[ed]);ii&&ii.length&&dn.push(...ii)}}const cr=dn.filter(Xa=>!Xa.destroyed);cr.length?Hte(this,Et,cr):this.processLeaveNode(Et)}return re.length=0,Kf.forEach(ht=>{this.players.push(ht),ht.onDone(()=>{ht.destroy();const Et=this.players.indexOf(ht);this.players.splice(Et,1)}),ht.play()}),Kf}elementContainsData(e,t){let i=!1;const r=t[Co];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let l=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(l=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==Xb;h.forEach(_=>{_.queued||!p&&_.triggerName!=r||l.push(_)})}}return(i||r)&&(l=l.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),l}_beforeAnimationBuild(e,t,i){const s=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const _=p.element,w=_!==s,x=Hs(i,_,[]);this._getPreviousPlayers(_,w,l,h,t.toState).forEach(P=>{const V=P.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),P.destroy(),x.push(P)})}Ff(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,l){const h=t.triggerName,p=t.element,_=[],w=new Set,x=new Set,T=t.timelines.map(V=>{const W=V.element;w.add(W);const re=W[Co];if(re&&re.removedBeforeQueried)return new pu(V.duration,V.delay);const Re=W!==p,Ge=function jte(n){const e=[];return H3(n,e),e}((i.get(W)||Pte).map(pn=>pn.getRealPlayer())).filter(pn=>!!pn.element&&pn.element===W),Xe=s.get(W),dt=l.get(W),Pt=f3(0,this._normalizer,0,V.keyframes,Xe,dt),jt=this._buildPlayer(V,Pt,Ge);if(V.subTimeline&&r&&x.add(W),Re){const pn=new oF(e,h,W);pn.setRealPlayer(jt),_.push(pn)}return jt});_.forEach(V=>{Hs(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>function Vte(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,V.element,V))}),w.forEach(V=>Io(V,E3));const P=ju(T);return P.onDestroy(()=>{w.forEach(V=>Ng(V,E3)),qa(p,t.toStyles)}),x.forEach(V=>{Hs(r,V,[]).push(P)}),P}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new pu(e.duration,e.delay)}}class oF{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new pu,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>B1(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Hs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function fD(n){return n&&1===n.nodeType}function V3(n,e){const t=n.style.display;return n.style.display=e??"none",t}function B3(n,e,t,i,r){const s=[];t.forEach(p=>s.push(V3(p)));const l=[];i.forEach((p,_)=>{const w=new Map;p.forEach(x=>{const T=e.computeStyle(_,x,r);w.set(x,T),(!T||0==T.length)&&(_[Co]=Nte,l.push(_))}),n.set(_,w)});let h=0;return t.forEach(p=>V3(p,s[h++])),l}function U3(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=1,r=new Set(e),s=new Map;function l(h){if(!h)return i;let p=s.get(h);if(p)return p;const _=h.parentNode;return p=t.has(_)?_:r.has(_)?i:l(_),s.set(h,p),p}return e.forEach(h=>{const p=l(h);p!==i&&t.get(p).push(h)}),t}function Io(n,e){n.classList?.add(e)}function Ng(n,e){n.classList?.remove(e)}function Hte(n,e,t){ju(t).onDone(()=>n.processLeaveNode(e))}function H3(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof lC?H3(i.players,e):e.push(i)}}function j3(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class pD{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Lte(e,t,i),this._timelineEngine=new Ate(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const l=e+"-"+r;let h=this._triggerCache[l];if(!h){const p=[],_=[],w=Z1(this._driver,s,p,_);if(p.length)throw function See(n,e){return new u.vHH(3404,!1)}();h=function xte(n,e,t){return new Dte(n,e,t)}(r,w,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,r,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,l]=p3(i);this._timelineEngine.command(s,t,l,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[l,h]=p3(i);return this._timelineEngine.listen(l,t,h,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Gte=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&qa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qa(this._element,this._initialStyles),this._endStyles&&(qa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ff(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ff(this._element,this._endStyles),this._endStyles=null),qa(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function aF(n){let e=null;return n.forEach((t,i)=>{(function Wte(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class z3{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:T3(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class qte{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return y3(e,t)}getParentElement(e){return z1(e)}query(e,t,i){return v3(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,l=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const _=new Map,w=l.filter(P=>P instanceof z3);(function Qee(n,e){return 0===n||0===e})(i,r)&&w.forEach(P=>{P.currentSnapshot.forEach((V,W)=>_.set(W,V))});let x=function qee(n){return n.length?n[0]instanceof Map?n:n.map(e=>C3(e)):[]}(t).map(P=>zu(P));x=function Xee(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,l)=>{i.has(l)||r.push(l),i.set(l,s)}),r.length)for(let s=1;s<e.length;s++){let l=e[s];r.forEach(h=>l.set(h,T3(n,h)))}}return e}(e,x,_);const T=function $te(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=aF(e[0]),e.length>1&&(i=aF(e[e.length-1]))):e instanceof Map&&(t=aF(e)),t||i?new Gte(n,t,i):null}(e,x);return new z3(e,x,p,T)}}let Kte=(()=>{class n extends xm{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?aC(t):t;return $3(this._renderer,null,i,"register",[r]),new Yte(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Yte extends cv{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Zte(this._id,e,t||{},this._renderer)}}class Zte{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return $3(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function $3(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const G3="@.disabled";let Qte=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,l)=>{const h=l?.parentNode(s);h&&l.removeChild(h,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let w=this._rendererCache.get(s);return w||(w=new W3("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,w)),w}const l=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=w=>{Array.isArray(w)?w.forEach(p):this.engine.registerTrigger(l,h,t,w.name,w)};return i.data.animation.forEach(p),new Xte(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,h]=s;l(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(pD),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class W3{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==G3?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Xte extends W3{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==G3?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function Jte(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),l="";return"@"!=s.charAt(0)&&([s,l]=function ene(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,t,i)}}let tne=(()=>{class n extends pD{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne),u.LFG($1),u.LFG(tF),u.LFG(u.z2F))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const q3=[{provide:xm,useClass:Kte},{provide:tF,useFactory:function nne(){return new wte}},{provide:pD,useClass:tne},{provide:u.FYo,useFactory:function ine(n,e,t){return new Qte(n,e,t)},deps:[kc,pD,u.R0b]}],lF=[{provide:$1,useFactory:()=>new qte},{provide:u.QbO,useValue:"BrowserAnimations"},...q3],K3=[{provide:$1,useClass:b3},{provide:u.QbO,useValue:"NoopAnimations"},...q3];let rne=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?K3:lF}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:lF,imports:[Fo]}),n})();const sne_firebase={projectId:"ringoffire-doriandellanna",appId:"1:1032682837124:web:9d577d656762c0ba301ed1",storageBucket:"ringoffire-doriandellanna.appspot.com",apiKey:"AIzaSyAbxz6ViN_lgGcMO-4qRDoF18pPYOaB0Kk",authDomain:"ringoffire-doriandellanna.firebaseapp.com",messagingSenderId:"1032682837124"},Y3="@firebase/database";let cF="";class ane{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,G.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,G.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class lne{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,G.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Q3=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ane(e)}}catch{}return new lne},Vf=Q3("localStorage"),uF=Q3("sessionStorage"),Fg=new Fs.Yd("@firebase/database"),X3=function(){let n=1;return function(){return n++}}(),J3=function(n){const e=(0,G.dS)(n),t=new G.gQ;t.update(e);const i=t.digest();return G.US.encodeByteArray(i)},Jb=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=Jb.apply(null,i):e+="object"==typeof i?(0,G.Wl)(i):i,e+=" "}return e};let Bf=null,eW=!0;const or=function(...n){if(!0===eW&&(eW=!1,null===Bf&&!0===uF.get("logging_enabled")&&function(n,e){(0,G.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Fg.logLevel=Fs.in.VERBOSE,Bf=Fg.log.bind(Fg),e&&uF.set("logging_enabled",!0)):"function"==typeof n?Bf=n:(Bf=null,uF.remove("logging_enabled"))}(!0)),Bf){const e=Jb.apply(null,n);Bf(e)}},e0=function(n){return function(...e){or(n,...e)}},dF=function(...n){const e="FIREBASE INTERNAL ERROR: "+Jb(...n);Fg.error(e)},Ka=function(...n){const e=`FIREBASE FATAL ERROR: ${Jb(...n)}`;throw Fg.error(e),new Error(e)},Pr=function(...n){const e="FIREBASE WARNING: "+Jb(...n);Fg.warn(e)},gD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},$u="[MIN_NAME]",uc="[MAX_NAME]",Uf=function(n,e){if(n===e)return 0;if(n===$u||e===uc)return-1;if(e===$u||n===uc)return 1;{const t=rW(n),i=rW(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},dne=function(n,e){return n===e?0:n<e?-1:1},t0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,G.Wl)(e))},hF=function(n){if("object"!=typeof n||null===n)return(0,G.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,G.Wl)(e[i]),t+=":",t+=hF(n[e[i]]);return t+="}",t},nW=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const iW=function(n){(0,G.hu)(!gD(n),"Invalid JSON number");const i=1023;let r,s,l,h,p;0===n?(s=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=h+i,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(r?1:0),_.reverse();const w=_.join("");let x="";for(p=0;p<64;p+=8){let T=parseInt(w.substr(p,8),2).toString(16);1===T.length&&(T="0"+T),x+=T}return x.toLowerCase()},mne=new RegExp("^-?(0*)\\d{1,10}$"),rW=function(n){if(mne.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Lg=function(n){try{n()}catch(e){setTimeout(()=>{throw Pr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},yne=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},n0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class vne{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Pr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class bne{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(or("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pr(e)}}let r0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const cW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hW="websocket",fW="long_polling";class pF{constructor(e,t,i,r,s=!1,l="",h=!1,p=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vf.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vf.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function pW(n,e,t){let i;if((0,G.hu)("string"==typeof e,"typeof type must == string"),(0,G.hu)("object"==typeof t,"typeof params must == object"),e===hW)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==fW)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function wne(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return ar(t,(s,l)=>{r.push(s+"="+l)}),i+r.join("&")}class Ene{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,G.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,G.p$)(this.counters_)}}const mF={},gF={};function _F(n){const e=n.toString();return mF[e]||(mF[e]=new Ene),mF[e]}class Ine{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Lg(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Gu{constructor(e,t,i,r,s,l,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=e0(e),this.stats_=_F(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),pW(t,fW,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ine(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,G.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yF((...s)=>{const[l,h,p,_,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&cW.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gu.forceAllow_=!0}static forceDisallow(){Gu.forceDisallow_=!0}static isAvailable(){return!((0,G.Yr)()||!Gu.forceAllow_&&(Gu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,G.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,G.h$)(t),r=nW(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,G.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,G.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class yF{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,G.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=X3(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=yF.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){or("frame writing exception"),h.stack&&or(h.stack),or(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||or("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,G.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{or("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let yD=null;typeof MozWebSocket<"u"?yD=MozWebSocket:typeof WebSocket<"u"&&(yD=WebSocket);let Vg=(()=>{class n{constructor(t,i,r,s,l,h,p){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=e0(this.connId),this.stats_=_F(i),this.connURL=n.connectionURL_(i,h,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,l){const h={v:"5"};return!(0,G.Yr)()&&typeof location<"u"&&location.hostname&&cW.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),s&&(h.ac=s),l&&(h.p=l),pW(t,hW,h)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vf.set("previous_websocket_failure",!0);try{let r;if((0,G.Yr)()){r={headers:{"User-Agent":`Firebase/5/${cF}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(r.proxy={origin:h})}this.mySock=new yD(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==yD&&!n.forceDisallow_}static previouslyFailed(){return Vf.isInMemoryStorage||!0===Vf.get("previous_websocket_failure")}markConnectionHealthy(){Vf.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,G.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,G.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,G.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=nW(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),wW=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Gu,Vg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Vg&&Vg.isAvailable();let r=i&&!Vg.previouslyFailed();if(t.webSocketOnly&&(i||Pr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Vg];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class TW{constructor(e,t,i,r,s,l,h,p,_,w){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=e0("c:"+this.id+":"),this.transportManager_=new wW(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=n0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=t0("t",e),i=t0("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=t0("t",e),i=t0("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=t0("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?dF("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dF("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Pr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),n0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):n0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class AW{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class MW{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,G.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,G.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class vD extends MW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,G.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new vD}getInitialEvent(e){return(0,G.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const RW=32,kW=768;class vn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function fn(){return new vn("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Wu(n){return n.pieces_.length-n.pieceNum_}function Sn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new vn(n.pieces_,e)}function bF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function s0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function OW(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new vn(e,0)}function Kn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof vn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new vn(t,0)}function tn(n){return n.pieceNum_>=n.pieces_.length}function ts(n,e){const t=en(n),i=en(e);if(null===t)return e;if(t===i)return ts(Sn(n),Sn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function wF(n,e){if(Wu(n)!==Wu(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function xo(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Wu(n)>Wu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class qne{constructor(e,t){this.errorPrefix_=t,this.parts_=s0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,G.ug)(this.parts_[i]);PW(this)}}function PW(n){if(n.byteLength_>kW)throw new Error(n.errorPrefix_+"has a key path longer than "+kW+" bytes ("+n.byteLength_+").");if(n.parts_.length>RW)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+RW+") or object contains a cycle "+Hf(n))}function Hf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class EF extends MW{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new EF}getInitialEvent(e){return(0,G.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const o0=1e3;let wD,jf=(()=>{class n extends AW{constructor(t,i,r,s,l,h,p,_){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=e0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=o0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,G.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");EF.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&vD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,l={r:s,a:t,b:i};this.log_((0,G.Wl)(l)),(0,G.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new G.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;"ok"===h.s?i.resolve(p):i.reject(p)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,G.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,G.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(h).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const l={p:r};t.tag&&(l.q=i._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const _=p.d,w=p.s;n.warnOnListenWarnings_(_,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(r,s),t.onComplete&&t.onComplete(w,_))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,G.r3)(t,"w")){const r=(0,G.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();Pr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,G.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,G.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const l=s.s,h=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,G.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const l={p:t};s&&(l.q=r,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const l={p:i,d:r};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,l){this.initConnection_();const h={p:i,d:r};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,G.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):dF("Unrecognized action received from server: "+(0,G.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,G.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=o0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=o0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=o0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,K.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,_=null;const w=function(){_?_.close():(p=!0,s())};t.realtime_={close:w,sendRequest:function(P){(0,G.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(P)}};const T=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,V]=yield Promise.all([t.authTokenProvider_.getToken(T),t.appCheckTokenProvider_.getToken(T)]);p?or("getToken() completed but was canceled"):(or("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=V&&V.token,_=new TW(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,W=>{Pr(W+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(P){t.log_("Failed to get token: "+P),p||(t.repoInfo_.nodeAdmin&&Pr(P),w())}}})()}interrupt(t){or("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){or("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,G.xb)(this.interruptReasons_)&&(this.reconnectDelay_=o0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(l=>hF(l)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new vn(t).toString();let s;if(this.listens.has(r)){const l=this.listens.get(r);s=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){or("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){or("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,G.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+cF.replace(/\./g,"-")]=1,(0,G.uI)()?t["framework.cordova"]=1:(0,G.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=vD.getInstance().currentlyOnline();return(0,G.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class nn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nn(e,t)}}class bD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new nn($u,e),r=new nn($u,t);return 0!==this.compare(i,r)}minPost(){return nn.MIN}}class LW extends bD{static get __EMPTY_NODE(){return wD}static set __EMPTY_NODE(e){wD=e}compare(e,t){return Uf(e.name,t.name)}isDefinedOn(e){throw(0,G.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nn.MIN}maxPost(){return new nn(uc,wD)}makePost(e,t){return(0,G.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new nn(e,wD)}toString(){return".key"}}const Ya=new LW;class ED{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,r&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let IF,na=(()=>{class n{constructor(t,i,r,s,l){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??bs.EMPTY_NODE,this.right=l??bs.EMPTY_NODE}copy(t,i,r,s,l){return new n(t??this.key,i??this.value,r??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const l=r(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===l?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return bs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return bs.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class bs{constructor(e,t=bs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new bs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,na.BLACK,null,null))}remove(e){return new bs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,na.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ED(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ED(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ED(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ED(this.root_,null,this.comparator_,!0,e)}}function tie(n,e){return Uf(n.name,e.name)}function CF(n,e){return Uf(n,e)}bs.EMPTY_NODE=new class eie{copy(e,t,i,r,s){return this}insert(e,t,i){return new na(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const VW=function(n){return"number"==typeof n?"number:"+iW(n):"string:"+n},BW=function(n){if(n.isLeafNode()){const e=n.val();(0,G.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,G.r3)(e,".sv"),"Priority must be a string or number.")}else(0,G.hu)(n===IF||n.isEmpty(),"priority of unexpected type.");(0,G.hu)(n===IF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let UW,HW,jW,Bg=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,G.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),BW(this.priorityNode_)}static set __childrenNodeConstructor(t){UW=t}static get __childrenNodeConstructor(){return UW}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return tn(t)?this:".priority"===en(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=en(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,G.hu)(".priority"!==r||1===Wu(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Sn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+VW(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?iW(this.value_):this.value_,this.lazyHash_=J3(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,G.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,G.hu)(s>=0,"Unknown leaf type: "+i),(0,G.hu)(l>=0,"Unknown leaf type: "+r),s===l?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Mn=new class sie extends bD{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?Uf(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(uc,new Bg("[PRIORITY-POST]",jW))}makePost(e,t){const i=HW(e);return new nn(t,new Bg("[PRIORITY-POST]",i))}toString(){return".priority"}},oie=Math.log(2);class aie{constructor(e){this.count=parseInt(Math.log(e+1)/oie,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const CD=function(n,e,t,i){n.sort(e);const r=function(p,_){const w=_-p;let x,T;if(0===w)return null;if(1===w)return x=n[p],T=t?t(x):x,new na(T,x.node,na.BLACK,null,null);{const P=parseInt(w/2,10)+p,V=r(p,P),W=r(P+1,_);return x=n[P],T=t?t(x):x,new na(T,x.node,na.BLACK,V,W)}},h=function(p){let _=null,w=null,x=n.length;const T=function(V,W){const re=x-V,Re=x;x-=V;const Ge=r(re+1,Re),Xe=n[re],dt=t?t(Xe):Xe;P(new na(dt,Xe.node,W,null,Ge))},P=function(V){_?(_.left=V,_=V):(w=V,_=V)};for(let V=0;V<p.count;++V){const W=p.nextBitIsOne(),re=Math.pow(2,p.count-(V+1));W?T(re,na.BLACK):(T(re,na.BLACK),T(re,na.RED))}return w}(new aie(n.length));return new bs(i||e,h)};let xF;const Ug={};class dc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,G.hu)(Ug&&Mn,"ChildrenNode.ts has not been loaded"),xF=xF||new dc({".priority":Ug},{".priority":Mn}),xF}get(e){const t=(0,G.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bs?t:null}hasIndex(e){return(0,G.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,G.hu)(e!==Ya,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(nn.Wrap);let h,l=s.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=s.getNext();h=r?CD(i,e.getCompare()):Ug;const p=e.toString(),_=Object.assign({},this.indexSet_);_[p]=e;const w=Object.assign({},this.indexes_);return w[p]=h,new dc(w,_)}addToIndexes(e,t){const i=(0,G.UI)(this.indexes_,(r,s)=>{const l=(0,G.DV)(this.indexSet_,s);if((0,G.hu)(l,"Missing index implementation for "+s),r===Ug){if(l.isDefinedOn(e.node)){const h=[],p=t.getIterator(nn.Wrap);let _=p.getNext();for(;_;)_.name!==e.name&&h.push(_),_=p.getNext();return h.push(e),CD(h,l.getCompare())}return Ug}{const h=t.get(e.name);let p=r;return h&&(p=p.remove(new nn(e.name,h))),p.insert(e,e.node)}});return new dc(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,G.UI)(this.indexes_,r=>{if(r===Ug)return r;{const s=t.get(e.name);return s?r.remove(new nn(e.name,s)):r}});return new dc(i,this.indexSet_)}}let a0,Kt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&BW(this.priorityNode_),this.children_.isEmpty()&&(0,G.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return a0||(a0=new n(new bs(CF),null,dc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||a0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?a0:i}}getChild(t){const i=en(t);return null===i?this:this.getImmediateChild(i).getChild(Sn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,G.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new nn(t,i);let s,l;i.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),l=this.indexMap_.addToIndexes(r,this.children_));const h=s.isEmpty()?a0:this.priorityNode_;return new n(s,h,l)}}updateChild(t,i){const r=en(t);if(null===r)return i;{(0,G.hu)(".priority"!==en(t)||1===Wu(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Sn(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,l=!0;if(this.forEachChild(Mn,(h,p)=>{i[h]=p.val(t),r++,l&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):l=!1}),!t&&l&&s<2*r){const h=[];for(const p in i)h[p]=i[p];return h}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+VW(this.getPriority().val())+":"),this.forEachChild(Mn,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":J3(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const l=s.getPredecessorKey(new nn(t,i));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new nn(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new nn(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,nn.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,nn.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===l0?-1:0}withIndex(t){if(t===Ya||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ya||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Mn),s=i.getIterator(Mn);let l=r.getNext(),h=s.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=r.getNext(),h=s.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Ya?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const l0=new class lie extends Kt{constructor(){super(new bs(CF),Kt.EMPTY_NODE,dc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Kt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(nn,{MIN:{value:new nn($u,Kt.EMPTY_NODE)},MAX:{value:new nn(uc,l0)}}),LW.__EMPTY_NODE=Kt.EMPTY_NODE,Bg.__childrenNodeConstructor=Kt,function nie(n){IF=n}(l0),function rie(n){jW=n}(l0);const cie=!0;function ni(n,e=null){if(null===n)return Kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,G.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Bg(n,ni(e));if(n instanceof Array||!cie){let t=Kt.EMPTY_NODE;return ar(n,(i,r)=>{if((0,G.r3)(n,i)&&"."!==i.substring(0,1)){const s=ni(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(ni(e))}{const t=[];let i=!1;if(ar(n,(l,h)=>{if("."!==l.substring(0,1)){const p=ni(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new nn(l,p)))}}),0===t.length)return Kt.EMPTY_NODE;const s=CD(t,tie,l=>l.name,CF);if(i){const l=CD(t,Mn.getCompare());return new Kt(s,ni(e),new dc({".priority":l},{".priority":Mn}))}return new Kt(s,ni(e),dc.Default)}}!function iie(n){HW=n}(ni);class DF extends bD{constructor(e){super(),this.indexPath_=e,(0,G.hu)(!tn(e)&&".priority"!==en(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?Uf(e.name,t.name):s}makePost(e,t){const i=ni(e),r=Kt.EMPTY_NODE.updateChild(this.indexPath_,i);return new nn(t,r)}maxPost(){const e=Kt.EMPTY_NODE.updateChild(this.indexPath_,l0);return new nn(uc,e)}toString(){return s0(this.indexPath_,0).join("/")}}const SF=new class uie extends bD{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Uf(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(e,t){const i=ni(e);return new nn(t,i)}toString(){return".value"}};function u0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class AF{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,G.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,G.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$u}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,G.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,G.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,G.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mn}copy(){const e=new AF;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $W(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Mn?t="$priority":n.index_===SF?t="$value":n.index_===Ya?t="$key":((0,G.hu)(n.index_ instanceof DF,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,G.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,G.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,G.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,G.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,G.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function GW(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Mn&&(e.i=n.index_.toString()),e}class xD extends AW{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=e0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,G.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=xD.getListenId_(e,i),h={};this.listens_[l]=h;const p=$W(e._queryParams);this.restRequest_(s+".json",p,(_,w)=>{let x=w;if(404===_&&(x=null,_=null),null===_&&this.onDataUpdate_(s,x,!1,i),(0,G.DV)(this.listens_,l)===h){let T;T=_?401===_?"permission_denied":"rest_error:"+_:"ok",r(T,null)}})}unlisten(e,t){const i=xD.getListenId_(e,t);delete this.listens_[i]}get(e){const t=$W(e._queryParams),i=e._path.toString(),r=new G.BH;return this.restRequest_(i+".json",t,(s,l)=>{let h=l;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,G.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,G.cI)(h.responseText)}catch{Pr("Failed to parse JSON response for "+l+": "+h.responseText)}i(null,p)}else 401!==h.status&&404!==h.status&&Pr("Got unsuccessful REST response for "+l+" Status: "+h.status),i(h.status);i=null}},h.open("GET",l,!0),h.send()})}}class yie{constructor(){this.rootNode_=Kt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function DD(){return{value:null,children:new Map}}function jg(n,e,t){if(tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=en(e);n.children.has(i)||n.children.set(i,DD()),jg(n.children.get(i),e=Sn(e),t)}}function OF(n,e,t){null!==n.value?t(e,n.value):function vie(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{OF(r,new vn(e.toString()+"/"+i),t)})}class bie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ar(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class Cie{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new bie(e);const i=1e4+2e4*Math.random();n0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;ar(e,(r,s)=>{s>0&&(0,G.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),n0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Do=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Do||(Do={})),Do))();function FF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class SD{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Do.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(tn(this.path)){if(null!=this.affectedTree.value)return(0,G.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new vn(e));return new SD(fn(),t,this.revert)}}return(0,G.hu)(en(this.path)===e,"operationForChild called for unrelated child."),new SD(Sn(this.path),this.affectedTree,this.revert)}}class zf{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Do.OVERWRITE}operationForChild(e){return tn(this.path)?new zf(this.source,fn(),this.snap.getImmediateChild(e)):new zf(this.source,Sn(this.path),this.snap)}}class zg{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Do.MERGE}operationForChild(e){if(tn(this.path)){const t=this.children.subtree(new vn(e));return t.isEmpty()?null:t.value?new zf(this.source,fn(),t.value):new zg(this.source,fn(),t)}return(0,G.hu)(en(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zg(this.source,Sn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class qu{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=en(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function f0(n,e,t,i,r,s){const l=i.filter(h=>h.type===t);l.sort((h,p)=>function Sie(n,e,t){if(null==e.childName||null==t.childName)throw(0,G.g5)("Should only compare child_ events.");const i=new nn(e.childName,e.snapshotNode),r=new nn(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,h,p)),l.forEach(h=>{const p=function Die(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);r.forEach(_=>{_.respondsTo(h.type)&&e.push(_.createEvent(p,n.query_))})})}function TD(n,e){return{eventCache:n,serverCache:e}}function p0(n,e,t,i){return TD(new qu(e,t,i),n.serverCache)}function qW(n,e,t,i){return TD(n.eventCache,new qu(e,t,i))}function AD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function $f(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let LF;class Rn{constructor(e,t=(()=>(LF||(LF=new bs(dne)),LF))()){this.value=e,this.children=t}static fromObject(e){let t=new Rn(null);return ar(e,(i,r)=>{t=t.set(new vn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:fn(),value:this.value};if(tn(e))return null;{const i=en(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Sn(e),t);return null!=s?{path:Kn(new vn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tn(e))return this;{const t=en(e),i=this.children.get(t);return null!==i?i.subtree(Sn(e)):new Rn(null)}}set(e,t){if(tn(e))return new Rn(t,this.children);{const i=en(e),s=(this.children.get(i)||new Rn(null)).set(Sn(e),t),l=this.children.insert(i,s);return new Rn(this.value,l)}}remove(e){if(tn(e))return this.children.isEmpty()?new Rn(null):new Rn(null,this.children);{const t=en(e),i=this.children.get(t);if(i){const r=i.remove(Sn(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new Rn(null):new Rn(this.value,s)}return this}}get(e){if(tn(e))return this.value;{const t=en(e),i=this.children.get(t);return i?i.get(Sn(e)):null}}setTree(e,t){if(tn(e))return t;{const i=en(e),s=(this.children.get(i)||new Rn(null)).setTree(Sn(e),t);let l;return l=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Rn(this.value,l)}}fold(e){return this.fold_(fn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Kn(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,fn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(tn(e))return null;{const s=en(e),l=this.children.get(s);return l?l.findOnPath_(Sn(e),Kn(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,fn(),t)}foreachOnPath_(e,t,i){if(tn(e))return this;{this.value&&i(t,this.value);const r=en(e),s=this.children.get(r);return s?s.foreachOnPath_(Sn(e),Kn(t,r),i):new Rn(null)}}foreach(e){this.foreach_(fn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Kn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class ia{constructor(e){this.writeTree_=e}static empty(){return new ia(new Rn(null))}}function m0(n,e,t){if(tn(e))return new ia(new Rn(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const l=ts(r,e);return s=s.updateChild(l,t),new ia(n.writeTree_.set(r,s))}{const r=new Rn(t),s=n.writeTree_.setTree(e,r);return new ia(s)}}}function VF(n,e,t){let i=n;return ar(t,(r,s)=>{i=m0(i,Kn(e,r),s)}),i}function KW(n,e){if(tn(e))return ia.empty();{const t=n.writeTree_.setTree(e,new Rn(null));return new ia(t)}}function BF(n,e){return null!=Gf(n,e)}function Gf(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ts(t.path,e)):null}function YW(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Mn,(i,r)=>{e.push(new nn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new nn(i,r.value))}),e}function Ku(n,e){if(tn(e))return n;{const t=Gf(n,e);return new ia(null!=t?new Rn(t):n.writeTree_.subtree(e))}}function UF(n){return n.writeTree_.isEmpty()}function $g(n,e){return ZW(fn(),n.writeTree_,e)}function ZW(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,G.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=ZW(Kn(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(Kn(n,".priority"),i)),t}}function MD(n,e){return tq(e,n)}function Oie(n,e){if(n.snap)return xo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&xo(Kn(n.path,t),e))return!0;return!1}function Nie(n){return n.visible}function QW(n,e,t){let i=ia.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const l=s.path;let h;if(s.snap)xo(t,l)?(h=ts(t,l),i=m0(i,h,s.snap)):xo(l,t)&&(h=ts(l,t),i=m0(i,fn(),s.snap.getChild(h)));else{if(!s.children)throw(0,G.g5)("WriteRecord should have .snap or .children");if(xo(t,l))h=ts(t,l),i=VF(i,h,s.children);else if(xo(l,t))if(h=ts(l,t),tn(h))i=VF(i,fn(),s.children);else{const p=(0,G.DV)(s.children,en(h));if(p){const _=p.getChild(Sn(h));i=m0(i,fn(),_)}}}}}return i}function XW(n,e,t,i,r){if(i||r){const s=Ku(n.visibleWrites,e);return!r&&UF(s)?t:r||null!=t||BF(s,fn())?$g(QW(n.allWrites,function(_){return(_.visible||r)&&(!i||!~i.indexOf(_.writeId))&&(xo(_.path,e)||xo(e,_.path))},e),t||Kt.EMPTY_NODE):null}{const s=Gf(n.visibleWrites,e);if(null!=s)return s;{const l=Ku(n.visibleWrites,e);return UF(l)?t:null!=t||BF(l,fn())?$g(l,t||Kt.EMPTY_NODE):null}}}function RD(n,e,t,i){return XW(n.writeTree,n.treePath,e,t,i)}function HF(n,e){return function Fie(n,e,t){let i=Kt.EMPTY_NODE;const r=Gf(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Mn,(s,l)=>{i=i.updateImmediateChild(s,l)}),i;if(t){const s=Ku(n.visibleWrites,e);return t.forEachChild(Mn,(l,h)=>{const p=$g(Ku(s,new vn(l)),h);i=i.updateImmediateChild(l,p)}),YW(s).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return YW(Ku(n.visibleWrites,e)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,e)}function JW(n,e,t,i){return function Lie(n,e,t,i,r){(0,G.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Kn(e,t);if(BF(n.visibleWrites,s))return null;{const l=Ku(n.visibleWrites,s);return UF(l)?r.getChild(t):$g(l,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function kD(n,e){return function Bie(n,e){return Gf(n.visibleWrites,e)}(n.writeTree,Kn(n.treePath,e))}function jF(n,e,t){return function Vie(n,e,t,i){const r=Kn(e,t),s=Gf(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?$g(Ku(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function eq(n,e){return tq(Kn(n.treePath,e),n.writeTree)}function tq(n,e){return{treePath:n,writeTree:e}}class zie{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,G.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,G.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,u0(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,function c0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,function Hg(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,G.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,u0(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const nq=new class $ie{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class zF{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new qu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jF(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$f(this.viewCache_),s=function jie(n,e,t,i,r,s){return function Uie(n,e,t,i,r,s,l){let h;const p=Ku(n.visibleWrites,e),_=Gf(p,fn());if(null!=_)h=_;else{if(null==t)return[];h=$g(p,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const w=[],x=l.getCompare(),T=s?h.getReverseIteratorFrom(i,l):h.getIteratorFrom(i,l);let P=T.getNext();for(;P&&w.length<r;)0!==x(P,i)&&w.push(P),P=T.getNext();return w}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function iq(n,e,t,i,r,s){const l=e.eventCache;if(null!=kD(i,t))return e;{let h,p;if(tn(t))if((0,G.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=$f(e),x=HF(i,_ instanceof Kt?_:Kt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),x,s)}else{const _=RD(i,$f(e));h=n.filter.updateFullNode(e.eventCache.getNode(),_,s)}else{const _=en(t);if(".priority"===_){(0,G.hu)(1===Wu(t),"Can't have a priority with additional path components");const w=l.getNode();p=e.serverCache.getNode();const x=JW(i,t,w,p);h=null!=x?n.filter.updatePriority(w,x):l.getNode()}else{const w=Sn(t);let x;if(l.isCompleteForChild(_)){p=e.serverCache.getNode();const T=JW(i,t,l.getNode(),p);x=null!=T?l.getNode().getImmediateChild(_).updateChild(w,T):l.getNode().getImmediateChild(_)}else x=jF(i,_,e.serverCache);h=null!=x?n.filter.updateChild(l.getNode(),_,x,w,r,s):l.getNode()}}return p0(e,h,l.isFullyInitialized()||tn(t),n.filter.filtersNodes())}}function OD(n,e,t,i,r,s,l,h){const p=e.serverCache;let _;const w=l?n.filter:n.filter.getIndexedFilter();if(tn(t))_=w.updateFullNode(p.getNode(),i,null);else if(w.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(t,i);_=w.updateFullNode(p.getNode(),P,null)}else{const P=en(t);if(!p.isCompleteForPath(t)&&Wu(t)>1)return e;const V=Sn(t),re=p.getNode().getImmediateChild(P).updateChild(V,i);_=".priority"===P?w.updatePriority(p.getNode(),re):w.updateChild(p.getNode(),P,re,V,nq,null)}const x=qW(e,_,p.isFullyInitialized()||tn(t),w.filtersNodes());return iq(n,x,t,r,new zF(r,x,s),h)}function $F(n,e,t,i,r,s,l){const h=e.eventCache;let p,_;const w=new zF(r,e,s);if(tn(t))_=n.filter.updateFullNode(e.eventCache.getNode(),i,l),p=p0(e,_,!0,n.filter.filtersNodes());else{const x=en(t);if(".priority"===x)_=n.filter.updatePriority(e.eventCache.getNode(),i),p=p0(e,_,h.isFullyInitialized(),h.isFiltered());else{const T=Sn(t),P=h.getNode().getImmediateChild(x);let V;if(tn(T))V=i;else{const W=w.getCompleteChild(x);V=null!=W?".priority"===bF(T)&&W.getChild(OW(T)).isEmpty()?W:W.updateChild(T,i):Kt.EMPTY_NODE}p=P.equals(V)?e:p0(e,n.filter.updateChild(h.getNode(),x,V,T,w,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function rq(n,e){return n.eventCache.isCompleteForChild(e)}function sq(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function GF(n,e,t,i,r,s,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,p=e;_=tn(t)?i:new Rn(null).setTree(t,i);const w=e.serverCache.getNode();return _.children.inorderTraversal((x,T)=>{if(w.hasChild(x)){const V=sq(0,e.serverCache.getNode().getImmediateChild(x),T);p=OD(n,p,new vn(x),V,r,s,l,h)}}),_.children.inorderTraversal((x,T)=>{const P=!e.serverCache.isCompleteForChild(x)&&null===T.value;if(!w.hasChild(x)&&!P){const W=sq(0,e.serverCache.getNode().getImmediateChild(x),T);p=OD(n,p,new vn(x),W,r,s,l,h)}}),p}function nre(n,e){const t=$f(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tn(e)&&!t.getImmediateChild(en(e)).isEmpty())?t.getChild(e):null}function lq(n,e,t,i){e.type===Do.MERGE&&null!==e.source.queryId&&((0,G.hu)($f(n.viewCache_),"We should always have a full cache before handling merges"),(0,G.hu)(AD(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function qie(n,e,t,i,r){const s=new zie;let l,h;if(t.type===Do.OVERWRITE){const _=t;_.source.fromUser?l=$F(n,e,_.path,_.snap,i,r,s):((0,G.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered()&&!tn(_.path),l=OD(n,e,_.path,_.snap,i,r,h,s))}else if(t.type===Do.MERGE){const _=t;_.source.fromUser?l=function Yie(n,e,t,i,r,s,l){let h=e;return i.foreach((p,_)=>{const w=Kn(t,p);rq(e,en(w))&&(h=$F(n,h,w,_,r,s,l))}),i.foreach((p,_)=>{const w=Kn(t,p);rq(e,en(w))||(h=$F(n,h,w,_,r,s,l))}),h}(n,e,_.path,_.children,i,r,s):((0,G.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered(),l=GF(n,e,_.path,_.children,i,r,h,s))}else if(t.type===Do.ACK_USER_WRITE){const _=t;l=_.revert?function Xie(n,e,t,i,r,s){let l;if(null!=kD(i,t))return e;{const h=new zF(i,e,r),p=e.eventCache.getNode();let _;if(tn(t)||".priority"===en(t)){let w;if(e.serverCache.isFullyInitialized())w=RD(i,$f(e));else{const x=e.serverCache.getNode();(0,G.hu)(x instanceof Kt,"serverChildren would be complete if leaf node"),w=HF(i,x)}_=n.filter.updateFullNode(p,w,s)}else{const w=en(t);let x=jF(i,w,e.serverCache);null==x&&e.serverCache.isCompleteForChild(w)&&(x=p.getImmediateChild(w)),_=null!=x?n.filter.updateChild(p,w,x,Sn(t),h,s):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,Kt.EMPTY_NODE,Sn(t),h,s):p,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=RD(i,$f(e)),l.isLeafNode()&&(_=n.filter.updateFullNode(_,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=kD(i,fn()),p0(e,_,l,n.filter.filtersNodes())}}(n,e,_.path,i,r,s):function Zie(n,e,t,i,r,s,l){if(null!=kD(r,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=i.value){if(tn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return OD(n,e,t,p.getNode().getChild(t),r,s,h,l);if(tn(t)){let _=new Rn(null);return p.getNode().forEachChild(Ya,(w,x)=>{_=_.set(new vn(w),x)}),GF(n,e,t,_,r,s,h,l)}return e}{let _=new Rn(null);return i.foreach((w,x)=>{const T=Kn(t,w);p.isCompleteForPath(T)&&(_=_.set(w,p.getNode().getChild(T)))}),GF(n,e,t,_,r,s,h,l)}}(n,e,_.path,_.affectedTree,i,r,s)}else{if(t.type!==Do.LISTEN_COMPLETE)throw(0,G.g5)("Unknown operation type: "+t.type);l=function Qie(n,e,t,i,r){const s=e.serverCache;return iq(n,qW(e,s.getNode(),s.isFullyInitialized()||tn(t),s.isFiltered()),t,i,nq,r)}(n,e,t.path,i,s)}const p=s.getChanges();return function Kie(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=AD(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(function zW(n){return{type:"value",snapshotNode:n}}(AD(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,r,e,t,i);return function Wie(n,e){(0,G.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,G.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,G.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function cq(n,e,t,i){return function xie(n,e,t,i){const r=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function die(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),f0(n,r,"child_removed",e,i,t),f0(n,r,"child_added",e,i,t),f0(n,r,"child_moved",s,i,t),f0(n,r,"child_changed",e,i,t),f0(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let PD,FD;function WF(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,G.hu)(null!=s,"SyncTree gave us an op for an invalid query."),lq(s,e,t,i)}{let s=[];for(const l of n.views.values())s=s.concat(lq(l,e,t,i));return s}}function Yu(n,e){let t=null;for(const i of n.views.values())t=t||nre(i,e);return t}class mq{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Rn(null),this.pendingWriteTree_=function Hie(){return{visibleWrites:ia.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qF(n,e,t,i,r){return function Aie(n,e,t,i,r){(0,G.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=m0(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Gg(n,new zf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Qu(n,e,t=!1){const i=function Rie(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function kie(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,G.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&Oie(h,i.path)?r=!1:xo(i.path,h.path)&&(s=!0)),l--}return!!r&&(s?(function Pie(n){n.visibleWrites=QW(n.allWrites,Nie,fn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=KW(n.visibleWrites,i.path):ar(i.children,p=>{n.visibleWrites=KW(n.visibleWrites,Kn(i.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new Rn(null);return null!=i.snap?s=s.set(fn(),!0):ar(i.children,l=>{s=s.set(new vn(l),!0)}),Gg(n,new SD(i.path,s,t))}return[]}function g0(n,e,t){return Gg(n,new zf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function VD(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,h)=>{const _=Yu(h,ts(l,e));if(_)return _});return XW(r,e,s,t,!0)}function Gg(n,e){return _q(e,n.syncPointTree_,null,MD(n.pendingWriteTree_,fn()))}function _q(n,e,t,i){if(tn(n.path))return yq(n,e,t,i);{const r=e.get(fn());null==t&&null!=r&&(t=Yu(r,fn()));let s=[];const l=en(n.path),h=n.operationForChild(l),p=e.children.get(l);if(p&&h){const _=t?t.getImmediateChild(l):null,w=eq(i,l);s=s.concat(_q(h,p,_,w))}return r&&(s=s.concat(WF(r,n,i,t))),s}}function yq(n,e,t,i){const r=e.get(fn());null==t&&null!=r&&(t=Yu(r,fn()));let s=[];return e.children.inorderTraversal((l,h)=>{const p=t?t.getImmediateChild(l):null,_=eq(i,l),w=n.operationForChild(l);w&&(s=s.concat(yq(w,h,p,_)))}),r&&(s=s.concat(WF(r,n,i,t))),s}function YF(n,e){return n.tagToQueryMap.get(e)}function ZF(n){const e=n.indexOf("$");return(0,G.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new vn(n.substr(0,e))}}function QF(n,e,t){const i=n.syncPointTree_.get(e);return(0,G.hu)(i,"Missing sync point for query tag that we're tracking"),WF(i,t,MD(n.pendingWriteTree_,e),null)}class XF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new XF(t)}node(){return this.node_}}class JF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Kn(this.path_,e);return new JF(this.syncTree_,t)}node(){return VD(this.syncTree_,this.path_)}}const Cre=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},bq=function(n,e,t){return n&&"object"==typeof n?((0,G.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ire(n[".sv"],e,t):"object"==typeof n[".sv"]?xre(n[".sv"],e):void(0,G.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ire=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,G.hu)(!1,"Unexpected server value: "+n)},xre=function(n,e,t){n.hasOwnProperty("increment")||(0,G.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,G.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,G.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},wq=function(n,e,t,i){return tL(e,new JF(t,n),i)},eL=function(n,e,t){return tL(n,new XF(e),t)};function tL(n,e,t){const i=n.getPriority().val(),r=bq(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,h=bq(l.getValue(),e,t);return h!==l.getValue()||r!==l.getPriority().val()?new Bg(h,ni(r)):n}{const l=n;return s=l,r!==l.getPriority().val()&&(s=s.updatePriority(new Bg(r))),l.forEachChild(Mn,(h,p)=>{const _=tL(p,e.getImmediateChild(h),t);_!==p&&(s=s.updateImmediateChild(h,_))}),s}}class nL{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function UD(n,e){let t=e instanceof vn?e:new vn(e),i=n,r=en(t);for(;null!==r;){const s=(0,G.DV)(i.node.children,r)||{children:{},childCount:0};i=new nL(r,i,s),t=Sn(t),r=en(t)}return i}function Wf(n){return n.node.value}function iL(n,e){n.node.value=e,rL(n)}function Eq(n){return n.node.childCount>0}function HD(n,e){ar(n.node.children,(t,i)=>{e(new nL(t,n,i))})}function Cq(n,e,t,i){t&&!i&&e(n),HD(n,r=>{Cq(r,e,!0,i)}),t&&i&&e(n)}function v0(n){return new vn(null===n.parent?n.name:v0(n.parent)+"/"+n.name)}function rL(n){null!==n.parent&&function Tre(n,e,t){const i=function Dre(n){return void 0===Wf(n)&&!Eq(n)}(t),r=(0,G.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,rL(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,rL(n))}(n.parent,n.name,n)}const Are=/[\[\].#$\/\u0000-\u001F\u007F]/,Mre=/[\[\].#$\u0000-\u001F\u007F]/,sL=10485760,jD=function(n){return"string"==typeof n&&0!==n.length&&!Are.test(n)},w0=function(n,e,t){const i=t instanceof vn?new qne(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Hf(i));if("function"==typeof e)throw new Error(n+"contains a function "+Hf(i)+" with contents = "+e.toString());if(gD(e))throw new Error(n+"contains "+e.toString()+" "+Hf(i));if("string"==typeof e&&e.length>sL/3&&(0,G.ug)(e)>sL)throw new Error(n+"contains a string greater than "+sL+" utf8 bytes "+Hf(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(ar(e,(l,h)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!jD(l)))throw new Error(n+" contains an invalid key ("+l+") "+Hf(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Kne(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,G.ug)(e),PW(n)})(i,l),w0(n,h,i),function Yne(n){const e=n.parts_.pop();n.byteLength_-=(0,G.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Hf(i)+" in addition to actual children.")}},Dq=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!jD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Mre.test(n)}(n)}(t))throw new Error((0,G.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Pre{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function zs(n,e,t){(function zD(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!wF(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)})(n,t),function Tq(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(Nre(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,i=>xo(i,e)||xo(e,i))}function Nre(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Bf&&or("event: "+t.toString()),Lg(i)}}}const Aq="repo_interrupt",Fre=25;class Lre{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pre,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=DD(),this.transactionQueueTree_=new nL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Mq(n){const t=n.infoData_.getNode(new vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function C0(n){return Cre({timestamp:Mq(n)})}function Rq(n,e,t,i,r){n.dataUpdateCount++;const s=new vn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const p=(0,G.UI)(t,_=>ni(_));l=function _re(n,e,t,i){const r=YF(n,i);if(r){const s=ZF(r),l=s.path,h=s.queryId,p=ts(l,e),_=Rn.fromObject(t);return QF(n,l,new zg(FF(h),p,_))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=ni(t);l=function gq(n,e,t,i){const r=YF(n,i);if(null!=r){const s=ZF(r),l=s.path,h=s.queryId,p=ts(l,e);return QF(n,l,new zf(FF(h),p,t))}return[]}(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,G.UI)(t,_=>ni(_));l=function pre(n,e,t){const i=Rn.fromObject(t);return Gg(n,new zg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,p)}else{const p=ni(t);l=g0(n.serverSyncTree_,s,p)}let h=s;l.length>0&&(h=qg(n,s)),zs(n.eventQueue_,h,l)}function kq(n,e){lL(n,"connected",e),!1===e&&function jre(n){Wg(n,"onDisconnectEvents");const e=C0(n),t=DD();OF(n.onDisconnect_,fn(),(r,s)=>{const l=wq(r,s,n.serverSyncTree_,e);jg(t,r,l)});let i=[];OF(t,fn(),(r,s)=>{i=i.concat(g0(n.serverSyncTree_,r,s));const l=function hL(n,e){const t=v0(Nq(n,e)),i=UD(n.transactionQueueTree_,e);return function Sre(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{fL(n,r)}),fL(n,i),Cq(i,r=>{fL(n,r)}),t}(n,r);qg(n,l)}),n.onDisconnect_=DD(),zs(n.eventQueue_,fn(),i)}(n)}function lL(n,e,t){const i=new vn("/.info/"+e),r=ni(t);n.infoData_.updateSnapshot(i,r);const s=g0(n.infoSyncTree_,i,r);zs(n.eventQueue_,i,s)}function $D(n){return n.nextWriteId_++}function Wg(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),or(t,...e)}function dL(n,e,t){return VD(n.serverSyncTree_,e,t)||Kt.EMPTY_NODE}function GD(n,e=n.transactionQueueTree_){if(e||WD(n,e),Wf(e)){const t=Fq(n,e);(0,G.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function Yre(n,e,t){const i=t.map(_=>_.currentWriteId),r=dL(n,e,i);let s=r;const l=r.hash();for(let _=0;_<t.length;_++){const w=t[_];(0,G.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const x=ts(e,w.path);s=s.updateChild(x,w.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,_=>{Wg(n,"transaction put response",{path:p.toString(),status:_});let w=[];if("ok"===_){const x=[];for(let T=0;T<t.length;T++)t[T].status=2,w=w.concat(Qu(n.serverSyncTree_,t[T].currentWriteId)),t[T].onComplete&&x.push(()=>t[T].onComplete(null,!0,t[T].currentOutputSnapshotResolved)),t[T].unwatcher();WD(n,UD(n.transactionQueueTree_,e)),GD(n,n.transactionQueueTree_),zs(n.eventQueue_,e,w);for(let T=0;T<x.length;T++)Lg(x[T])}else{if("datastale"===_)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{Pr("transaction at "+p.toString()+" failed: "+_);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=_}qg(n,e)}},l)}(n,v0(e),t)}else Eq(e)&&HD(e,t=>{GD(n,t)})}function qg(n,e){const t=Nq(n,e),i=v0(t);return function Zre(n,e,t){if(0===e.length)return;const i=[];let r=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],_=ts(t,p.path);let x,w=!1;if((0,G.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,x=p.abortReason,r=r.concat(Qu(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=Fre)w=!0,x="maxretry",r=r.concat(Qu(n.serverSyncTree_,p.currentWriteId,!0));else{const T=dL(n,p.path,l);p.currentInputSnapshot=T;const P=e[h].update(T.val());if(void 0!==P){w0("transaction failed: Data returned ",P,p.path);let V=ni(P);"object"==typeof P&&null!=P&&(0,G.r3)(P,".priority")||(V=V.updatePriority(T.getPriority()));const re=p.currentWriteId,Re=C0(n),Ge=eL(V,T,Re);p.currentOutputSnapshotRaw=V,p.currentOutputSnapshotResolved=Ge,p.currentWriteId=$D(n),l.splice(l.indexOf(re),1),r=r.concat(qF(n.serverSyncTree_,p.path,Ge,p.currentWriteId,p.applyLocally)),r=r.concat(Qu(n.serverSyncTree_,re,!0))}else w=!0,x="nodata",r=r.concat(Qu(n.serverSyncTree_,p.currentWriteId,!0))}zs(n.eventQueue_,t,r),r=[],w&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&i.push("nodata"===x?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(x),!1,null)))}WD(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)Lg(i[h]);GD(n,n.transactionQueueTree_)}(n,Fq(n,t),i),i}function Nq(n,e){let t,i=n.transactionQueueTree_;for(t=en(e);null!==t&&void 0===Wf(i);)i=UD(i,t),t=en(e=Sn(e));return i}function Fq(n,e){const t=[];return Lq(n,e,t),t.sort((i,r)=>i.order-r.order),t}function Lq(n,e,t){const i=Wf(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);HD(e,r=>{Lq(n,r,t)})}function WD(n,e){const t=Wf(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,iL(e,t.length>0?t:void 0)}HD(e,i=>{WD(n,i)})}function fL(n,e){const t=Wf(e);if(t){const i=[];let r=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,G.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,G.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(Qu(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?iL(e,void 0):t.length=s+1,zs(n.eventQueue_,v0(e),r);for(let l=0;l<i.length;l++)Lg(i[l])}}const pL=function(n,e){const t=Jre(n),i=t.namespace;return"firebase.com"===t.domain&&Ka(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Ka("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Pr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new pF(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new vn(t.pathString)}},Jre=function(n){let e="",t="",i="",r="",s="",l=!0,h="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(h=n.substring(0,_-1),n=n.substring(_+2));let w=n.indexOf("/");-1===w&&(w=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(w,x)),w<x&&(r=function Qre(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(w,x)));const T=function Xre(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Pr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));_=e.indexOf(":"),_>=0?(l="https"===h||"wss"===h,p=parseInt(e.substring(_+1),10)):_=e.length;const P=e.slice(0,_);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const V=e.indexOf(".");i=e.substring(0,V).toLowerCase(),t=e.substring(V+1),s=i}"ns"in T&&(s=T.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:l,scheme:h,pathString:r,namespace:s}};class $s{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return tn(this._path)?null:bF(this._path)}get ref(){return new ra(this._repo,this._path)}get _queryIdentifier(){const e=GW(this._queryParams),t=hF(e);return"{}"===t?"default":t}get _queryObject(){return GW(this._queryParams)}isEqual(e){if(!((e=(0,G.m9)(e))instanceof $s))return!1;const t=this._repo===e._repo,i=wF(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Gne(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ra extends $s{constructor(e,t){super(e,t,new AF,!1)}get parent(){const e=OW(this._path);return null===e?null:new ra(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function sre(n){(0,G.hu)(!PD,"__referenceConstructor has already been defined"),PD=n})(ra),function ure(n){(0,G.hu)(!FD,"__referenceConstructor has already been defined"),FD=n}(ra);const fse="FIREBASE_DATABASE_EMULATOR_HOST",gL={};let $q=!1;class vse{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Vre(n,e,t){if(n.stats_=_F(n.repoInfo_),n.forceRestClient_||yne())n.server_=new xD(n.repoInfo_,(i,r,s,l)=>{Rq(n,i,r,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>kq(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,G.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new jf(n.repoInfo_,e,(i,r,s,l)=>{Rq(n,i,r,s,l)},i=>{kq(n,i)},i=>{!function Bre(n,e){ar(e,(t,i)=>{lL(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Cne(n,e){const t=n.toString();return gF[t]||(gF[t]=e()),gF[t]}(n.repoInfo_,()=>new Cie(n.stats_,n.server_)),n.infoData_=new yie,n.infoSyncTree_=new mq({startListening:(i,r,s,l)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=g0(n.infoSyncTree_,i._path,p),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),lL(n,"connected",!1),n.serverSyncTree_=new mq({startListening:(i,r,s,l)=>(n.server_.listen(i,s,r,(h,p)=>{const _=l(h,p);zs(n.eventQueue_,i._path,_)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ra(this._repo,fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function gse(n,e){const t=gL[e];(!t||t[n.key]!==n)&&Ka(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Pq(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Aq)}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ka("Cannot call "+e+" on a deleted database.")}}function bse(n=(0,$t.getApp)(),e){const t=(0,$t._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=(0,G.P0)("database");i&&function wse(n,e,t,i={}){(n=(0,G.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ka("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Ka('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new r0(r0.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,G.Sg)(i.mockUserToken,n.app.options.projectId);s=new r0(l)}!function pse(n,e,t,i){n.repoInfo_=new pF(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(t,...i)}return t}jf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},jf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Ese(n){(function one(n){cF=n})($t.SDK_VERSION),(0,$t._registerComponent)(new wo.wA("database",(e,{instanceIdentifier:t})=>function mse(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Ka("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),or("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,l=pL(s,r),h=l.repoInfo;typeof process<"u"&&process.env&&(_=process.env[fse]),_?(p=!0,s=`http://${_}?ns=${h.namespace}`,l=pL(s,r),h=l.repoInfo):p=!l.repoInfo.secure;const w=r&&p?new r0(r0.OWNER):new bne(n.name,n.options,e);Dq("Invalid Firebase Database URL",l),tn(l.path)||Ka("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function _se(n,e,t,i){let r=gL[e.name];r||(r={},gL[e.name]=r);let s=r[n.toURLString()];return s&&Ka("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Lre(n,$q,t,i),r[n.toURLString()]=s,s}(h,n,w,new vne(n.name,t));return new vse(x,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,$t.registerVersion)(Y3,"0.14.4",n),(0,$t.registerVersion)(Y3,"0.14.4","esm2017")}();class _L{constructor(e){return e}}const Wq="database",yL=new u.OlP("angularfire2.database-instances");function Sse(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new _L(i)}}const Tse={provide:class xse{constructor(){return gI(Wq)}},deps:[[new u.FiY,yL]]},Ase={provide:_L,useFactory:function Dse(n,e){const t=mI(Wq,n,e);return t&&new _L(t)},deps:[[new u.FiY,yL],rf]};let Mse=(()=>{class n{constructor(){(0,$t.registerVersion)("angularfire",Ym.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Ase,Tse]}),n})();function Rse(n,...e){return{ngModule:Mse,providers:[{provide:yL,useFactory:Sse(n),multi:!0,deps:[u.R0b,u.zs3,Qm,_I,[new u.FiY,gO],[new u.FiY,Jm],...e]}]}}const kse=La(bse,!0);let Ose=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[see]}),n.\u0275inj=u.cJS({imports:[Fo,ree,rne,RB,aJ,bC,Cv,X4,DJ,o6,d3,tK(()=>nK(sne_firebase)),XK(()=>JK()),Rse(()=>kse()),EX(()=>SX())]}),n})();Ad().bootstrapModule(Ose).catch(n=>console.error(n))},9751:(mt,xe,B)=>{B.d(xe,{y:()=>_e});var u=B(930),H=B(727),L=B(8822),ce=B(9635),ve=B(2416),ne=B(576),Ve=B(2806);let _e=(()=>{class Y{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const et=new Y;return et.source=this,et.operator=Me,et}subscribe(Me,et,tt){const oe=function $(Y){return Y&&Y instanceof u.Lv||function z(Y){return Y&&(0,ne.m)(Y.next)&&(0,ne.m)(Y.error)&&(0,ne.m)(Y.complete)}(Y)&&(0,H.Nn)(Y)}(Me)?Me:new u.Hp(Me,et,tt);return(0,Ve.x)(()=>{const{operator:De,source:ge}=this;oe.add(De?De.call(oe,ge):ge?this._subscribe(oe):this._trySubscribe(oe))}),oe}_trySubscribe(Me){try{return this._subscribe(Me)}catch(et){Me.error(et)}}forEach(Me,et){return new(et=ke(et))((tt,oe)=>{const De=new u.Hp({next:ge=>{try{Me(ge)}catch(Se){oe(Se),De.unsubscribe()}},error:oe,complete:tt});this.subscribe(De)})}_subscribe(Me){var et;return null===(et=this.source)||void 0===et?void 0:et.subscribe(Me)}[L.L](){return this}pipe(...Me){return(0,ce.U)(Me)(this)}toPromise(Me){return new(Me=ke(Me))((et,tt)=>{let oe;this.subscribe(De=>oe=De,De=>tt(De),()=>et(oe))})}}return Y.create=Ue=>new Y(Ue),Y})();function ke(Y){var Ue;return null!==(Ue=Y??ve.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(mt,xe,B)=>{B.d(xe,{x:()=>Ve});var u=B(9751),H=B(727);const ce=(0,B(3888).d)(ke=>function(){ke(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ve=B(8737),ne=B(2806);let Ve=(()=>{class ke extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Y=new _e(this,this);return Y.operator=$,Y}_throwIfClosed(){if(this.closed)throw new ce}next($){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next($)}})}error($){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Y}=this;for(;Y.length;)Y.shift().error($)}})}complete(){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Y,isStopped:Ue,observers:Me}=this;return Y||Ue?H.Lc:(this.currentObservers=null,Me.push($),new H.w0(()=>{this.currentObservers=null,(0,ve.P)(Me,$)}))}_checkFinalizedStatuses($){const{hasError:Y,thrownError:Ue,isStopped:Me}=this;Y?$.error(Ue):Me&&$.complete()}asObservable(){const $=new u.y;return $.source=this,$}}return ke.create=(z,$)=>new _e(z,$),ke})();class _e extends Ve{constructor(z,$){super(),this.destination=z,this.source=$}next(z){var $,Y;null===(Y=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Y||Y.call($,z)}error(z){var $,Y;null===(Y=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Y||Y.call($,z)}complete(){var z,$;null===($=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===$||$.call(z)}_subscribe(z){var $,Y;return null!==(Y=null===($=this.source)||void 0===$?void 0:$.subscribe(z))&&void 0!==Y?Y:H.Lc}}},930:(mt,xe,B)=>{B.d(xe,{Hp:()=>tt,Lv:()=>Y});var u=B(576),H=B(727),L=B(2416),ce=B(7849),ve=B(5032);const ne=ke("C",void 0,void 0);function ke(Te,Ee,ye){return{kind:Te,value:Ee,error:ye}}var z=B(3410),$=B(2806);class Y extends H.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,H.Nn)(Ee)&&Ee.add(this)):this.destination=Se}static create(Ee,ye,Be){return new tt(Ee,ye,Be)}next(Ee){this.isStopped?ge(function _e(Te){return ke("N",Te,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?ge(function Ve(Te){return ke("E",void 0,Te)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?ge(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Me(Te,Ee){return Ue.call(Te,Ee)}class et{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:ye}=this;if(ye.next)try{ye.next(Ee)}catch(Be){oe(Be)}}error(Ee){const{partialObserver:ye}=this;if(ye.error)try{ye.error(Ee)}catch(Be){oe(Be)}else oe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(ye){oe(ye)}}}class tt extends Y{constructor(Ee,ye,Be){let X;if(super(),(0,u.m)(Ee)||!Ee)X={next:Ee??void 0,error:ye??void 0,complete:Be??void 0};else{let te;this&&L.v.useDeprecatedNextContext?(te=Object.create(Ee),te.unsubscribe=()=>this.unsubscribe(),X={next:Ee.next&&Me(Ee.next,te),error:Ee.error&&Me(Ee.error,te),complete:Ee.complete&&Me(Ee.complete,te)}):X=Ee}this.destination=new et(X)}}function oe(Te){L.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Te):(0,ce.h)(Te)}function ge(Te,Ee){const{onStoppedNotification:ye}=L.v;ye&&z.z.setTimeout(()=>ye(Te,Ee))}const Se={closed:!0,next:ve.Z,error:function De(Te){throw Te},complete:ve.Z}},727:(mt,xe,B)=>{B.d(xe,{Lc:()=>ne,w0:()=>ve,Nn:()=>Ve});var u=B(576);const L=(0,B(3888).d)(ke=>function($){ke(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Y,Ue)=>`${Ue+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ce=B(8737);class ve{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Me of $)Me.remove(this);else $.remove(this);const{initialTeardown:Y}=this;if((0,u.m)(Y))try{Y()}catch(Me){z=Me instanceof L?Me.errors:[Me]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Me of Ue)try{_e(Me)}catch(et){z=z??[],et instanceof L?z=[...z,...et.errors]:z.push(et)}}if(z)throw new L(z)}}add(z){var $;if(z&&z!==this)if(this.closed)_e(z);else{if(z instanceof ve){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(z)}}_hasParent(z){const{_parentage:$}=this;return $===z||Array.isArray($)&&$.includes(z)}_addParent(z){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(z),$):$?[$,z]:z}_removeParent(z){const{_parentage:$}=this;$===z?this._parentage=null:Array.isArray($)&&(0,ce.P)($,z)}remove(z){const{_finalizers:$}=this;$&&(0,ce.P)($,z),z instanceof ve&&z._removeParent(this)}}ve.EMPTY=(()=>{const ke=new ve;return ke.closed=!0,ke})();const ne=ve.EMPTY;function Ve(ke){return ke instanceof ve||ke&&"closed"in ke&&(0,u.m)(ke.remove)&&(0,u.m)(ke.add)&&(0,u.m)(ke.unsubscribe)}function _e(ke){(0,u.m)(ke)?ke():ke.unsubscribe()}},2416:(mt,xe,B)=>{B.d(xe,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,xe,B)=>{B.d(xe,{E:()=>H});const H=new(B(9751).y)(ve=>ve.complete())},8996:(mt,xe,B)=>{B.d(xe,{D:()=>Ee});var u=B(8421),H=B(5363),L=B(9468),ne=B(9751),_e=B(2202),ke=B(576),z=B(9672);function Y(ye,Be){if(!ye)throw new Error("Iterable cannot be null");return new ne.y(X=>{(0,z.f)(X,Be,()=>{const te=ye[Symbol.asyncIterator]();(0,z.f)(X,Be,()=>{te.next().then(fe=>{fe.done?X.complete():X.next(fe.value)})},0,!0)})})}var Ue=B(3670),Me=B(8239),et=B(1144),tt=B(6495),oe=B(2206),De=B(4532),ge=B(3260);function Ee(ye,Be){return Be?function Te(ye,Be){if(null!=ye){if((0,Ue.c)(ye))return function ce(ye,Be){return(0,u.Xf)(ye).pipe((0,L.R)(Be),(0,H.Q)(Be))}(ye,Be);if((0,et.z)(ye))return function Ve(ye,Be){return new ne.y(X=>{let te=0;return Be.schedule(function(){te===ye.length?X.complete():(X.next(ye[te++]),X.closed||this.schedule())})})}(ye,Be);if((0,Me.t)(ye))return function ve(ye,Be){return(0,u.Xf)(ye).pipe((0,L.R)(Be),(0,H.Q)(Be))}(ye,Be);if((0,oe.D)(ye))return Y(ye,Be);if((0,tt.T)(ye))return function $(ye,Be){return new ne.y(X=>{let te;return(0,z.f)(X,Be,()=>{te=ye[_e.h](),(0,z.f)(X,Be,()=>{let fe,ze;try{({value:fe,done:ze}=te.next())}catch(Le){return void X.error(Le)}ze?X.complete():X.next(fe)},0,!0)}),()=>(0,ke.m)(te?.return)&&te.return()})}(ye,Be);if((0,ge.L)(ye))return function Se(ye,Be){return Y((0,ge.Q)(ye),Be)}(ye,Be)}throw(0,De.z)(ye)}(ye,Be):(0,u.Xf)(ye)}},8421:(mt,xe,B)=>{B.d(xe,{Xf:()=>Ue});var u=B(655),H=B(1144),L=B(8239),ce=B(9751),ve=B(3670),ne=B(2206),Ve=B(4532),_e=B(6495),ke=B(3260),z=B(576),$=B(7849),Y=B(8822);function Ue(Te){if(Te instanceof ce.y)return Te;if(null!=Te){if((0,ve.c)(Te))return function Me(Te){return new ce.y(Ee=>{const ye=Te[Y.L]();if((0,z.m)(ye.subscribe))return ye.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,H.z)(Te))return function et(Te){return new ce.y(Ee=>{for(let ye=0;ye<Te.length&&!Ee.closed;ye++)Ee.next(Te[ye]);Ee.complete()})}(Te);if((0,L.t)(Te))return function tt(Te){return new ce.y(Ee=>{Te.then(ye=>{Ee.closed||(Ee.next(ye),Ee.complete())},ye=>Ee.error(ye)).then(null,$.h)})}(Te);if((0,ne.D)(Te))return De(Te);if((0,_e.T)(Te))return function oe(Te){return new ce.y(Ee=>{for(const ye of Te)if(Ee.next(ye),Ee.closed)return;Ee.complete()})}(Te);if((0,ke.L)(Te))return function ge(Te){return De((0,ke.Q)(Te))}(Te)}throw(0,Ve.z)(Te)}function De(Te){return new ce.y(Ee=>{(function Se(Te,Ee){var ye,Be,X,te;return(0,u.mG)(this,void 0,void 0,function*(){try{for(ye=(0,u.KL)(Te);!(Be=yield ye.next()).done;)if(Ee.next(Be.value),Ee.closed)return}catch(fe){X={error:fe}}finally{try{Be&&!Be.done&&(te=ye.return)&&(yield te.call(ye))}finally{if(X)throw X.error}}Ee.complete()})})(Te,Ee).catch(ye=>Ee.error(ye))})}},6451:(mt,xe,B)=>{B.d(xe,{T:()=>ne});var u=B(8189),H=B(8421),L=B(515),ce=B(3269),ve=B(8996);function ne(...Ve){const _e=(0,ce.yG)(Ve),ke=(0,ce._6)(Ve,1/0),z=Ve;return z.length?1===z.length?(0,H.Xf)(z[0]):(0,u.J)(ke)((0,ve.D)(z,_e)):L.E}},5403:(mt,xe,B)=>{B.d(xe,{x:()=>H});var u=B(930);function H(ce,ve,ne,Ve,_e){return new L(ce,ve,ne,Ve,_e)}class L extends u.Lv{constructor(ve,ne,Ve,_e,ke,z){super(ve),this.onFinalize=ke,this.shouldUnsubscribe=z,this._next=ne?function($){try{ne($)}catch(Y){ve.error(Y)}}:super._next,this._error=_e?function($){try{_e($)}catch(Y){ve.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=Ve?function(){try{Ve()}catch($){ve.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ve;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(ve=this.onFinalize)||void 0===ve||ve.call(this))}}}},4004:(mt,xe,B)=>{B.d(xe,{U:()=>L});var u=B(4482),H=B(5403);function L(ce,ve){return(0,u.e)((ne,Ve)=>{let _e=0;ne.subscribe((0,H.x)(Ve,ke=>{Ve.next(ce.call(ve,ke,_e++))}))})}},8189:(mt,xe,B)=>{B.d(xe,{J:()=>L});var u=B(5577),H=B(4671);function L(ce=1/0){return(0,u.z)(H.y,ce)}},5577:(mt,xe,B)=>{B.d(xe,{z:()=>_e});var u=B(4004),H=B(8421),L=B(4482),ce=B(9672),ve=B(5403),Ve=B(576);function _e(ke,z,$=1/0){return(0,Ve.m)(z)?_e((Y,Ue)=>(0,u.U)((Me,et)=>z(Y,Me,Ue,et))((0,H.Xf)(ke(Y,Ue))),$):("number"==typeof z&&($=z),(0,L.e)((Y,Ue)=>function ne(ke,z,$,Y,Ue,Me,et,tt){const oe=[];let De=0,ge=0,Se=!1;const Te=()=>{Se&&!oe.length&&!De&&z.complete()},Ee=Be=>De<Y?ye(Be):oe.push(Be),ye=Be=>{Me&&z.next(Be),De++;let X=!1;(0,H.Xf)($(Be,ge++)).subscribe((0,ve.x)(z,te=>{Ue?.(te),Me?Ee(te):z.next(te)},()=>{X=!0},void 0,()=>{if(X)try{for(De--;oe.length&&De<Y;){const te=oe.shift();et?(0,ce.f)(z,et,()=>ye(te)):ye(te)}Te()}catch(te){z.error(te)}}))};return ke.subscribe((0,ve.x)(z,Ee,()=>{Se=!0,Te()})),()=>{tt?.()}}(Y,Ue,ke,$)))}},5363:(mt,xe,B)=>{B.d(xe,{Q:()=>ce});var u=B(9672),H=B(4482),L=B(5403);function ce(ve,ne=0){return(0,H.e)((Ve,_e)=>{Ve.subscribe((0,L.x)(_e,ke=>(0,u.f)(_e,ve,()=>_e.next(ke),ne),()=>(0,u.f)(_e,ve,()=>_e.complete(),ne),ke=>(0,u.f)(_e,ve,()=>_e.error(ke),ne)))})}},3099:(mt,xe,B)=>{B.d(xe,{B:()=>ve});var u=B(8421),H=B(7579),L=B(930),ce=B(4482);function ve(Ve={}){const{connector:_e=(()=>new H.x),resetOnError:ke=!0,resetOnComplete:z=!0,resetOnRefCountZero:$=!0}=Ve;return Y=>{let Ue,Me,et,tt=0,oe=!1,De=!1;const ge=()=>{Me?.unsubscribe(),Me=void 0},Se=()=>{ge(),Ue=et=void 0,oe=De=!1},Te=()=>{const Ee=Ue;Se(),Ee?.unsubscribe()};return(0,ce.e)((Ee,ye)=>{tt++,!De&&!oe&&ge();const Be=et=et??_e();ye.add(()=>{tt--,0===tt&&!De&&!oe&&(Me=ne(Te,$))}),Be.subscribe(ye),!Ue&&tt>0&&(Ue=new L.Hp({next:X=>Be.next(X),error:X=>{De=!0,ge(),Me=ne(Se,ke,X),Be.error(X)},complete:()=>{oe=!0,ge(),Me=ne(Se,z),Be.complete()}}),(0,u.Xf)(Ee).subscribe(Ue))})(Y)}}function ne(Ve,_e,...ke){if(!0===_e)return void Ve();if(!1===_e)return;const z=new L.Hp({next:()=>{z.unsubscribe(),Ve()}});return(0,u.Xf)(_e(...ke)).subscribe(z)}},9468:(mt,xe,B)=>{B.d(xe,{R:()=>H});var u=B(4482);function H(L,ce=0){return(0,u.e)((ve,ne)=>{ne.add(L.schedule(()=>ve.subscribe(ne),ce))})}},3410:(mt,xe,B)=>{B.d(xe,{z:()=>u});const u={setTimeout(H,L,...ce){const{delegate:ve}=u;return ve?.setTimeout?ve.setTimeout(H,L,...ce):setTimeout(H,L,...ce)},clearTimeout(H){const{delegate:L}=u;return(L?.clearTimeout||clearTimeout)(H)},delegate:void 0}},2202:(mt,xe,B)=>{B.d(xe,{h:()=>H});const H=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,xe,B)=>{B.d(xe,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(mt,xe,B)=>{B.d(xe,{_6:()=>ne,jO:()=>ce,yG:()=>ve});var u=B(576),H=B(3532);function L(Ve){return Ve[Ve.length-1]}function ce(Ve){return(0,u.m)(L(Ve))?Ve.pop():void 0}function ve(Ve){return(0,H.K)(L(Ve))?Ve.pop():void 0}function ne(Ve,_e){return"number"==typeof L(Ve)?Ve.pop():_e}},8737:(mt,xe,B)=>{function u(H,L){if(H){const ce=H.indexOf(L);0<=ce&&H.splice(ce,1)}}B.d(xe,{P:()=>u})},3888:(mt,xe,B)=>{function u(H){const ce=H(ve=>{Error.call(ve),ve.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}B.d(xe,{d:()=>u})},2806:(mt,xe,B)=>{B.d(xe,{O:()=>ce,x:()=>L});var u=B(2416);let H=null;function L(ve){if(u.v.useDeprecatedSynchronousErrorHandling){const ne=!H;if(ne&&(H={errorThrown:!1,error:null}),ve(),ne){const{errorThrown:Ve,error:_e}=H;if(H=null,Ve)throw _e}}else ve()}function ce(ve){u.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=ve)}},9672:(mt,xe,B)=>{function u(H,L,ce,ve=0,ne=!1){const Ve=L.schedule(function(){ce(),ne?H.add(this.schedule(null,ve)):this.unsubscribe()},ve);if(H.add(Ve),!ne)return Ve}B.d(xe,{f:()=>u})},4671:(mt,xe,B)=>{function u(H){return H}B.d(xe,{y:()=>u})},1144:(mt,xe,B)=>{B.d(xe,{z:()=>u});const u=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(mt,xe,B)=>{B.d(xe,{D:()=>H});var u=B(576);function H(L){return Symbol.asyncIterator&&(0,u.m)(L?.[Symbol.asyncIterator])}},576:(mt,xe,B)=>{function u(H){return"function"==typeof H}B.d(xe,{m:()=>u})},3670:(mt,xe,B)=>{B.d(xe,{c:()=>L});var u=B(8822),H=B(576);function L(ce){return(0,H.m)(ce[u.L])}},6495:(mt,xe,B)=>{B.d(xe,{T:()=>L});var u=B(2202),H=B(576);function L(ce){return(0,H.m)(ce?.[u.h])}},8239:(mt,xe,B)=>{B.d(xe,{t:()=>H});var u=B(576);function H(L){return(0,u.m)(L?.then)}},3260:(mt,xe,B)=>{B.d(xe,{L:()=>ce,Q:()=>L});var u=B(655),H=B(576);function L(ve){return(0,u.FC)(this,arguments,function*(){const Ve=ve.getReader();try{for(;;){const{value:_e,done:ke}=yield(0,u.qq)(Ve.read());if(ke)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(_e)}}finally{Ve.releaseLock()}})}function ce(ve){return(0,H.m)(ve?.getReader)}},3532:(mt,xe,B)=>{B.d(xe,{K:()=>H});var u=B(576);function H(L){return L&&(0,u.m)(L.schedule)}},4482:(mt,xe,B)=>{B.d(xe,{A:()=>H,e:()=>L});var u=B(576);function H(ce){return(0,u.m)(ce?.lift)}function L(ce){return ve=>{if(H(ve))return ve.lift(function(ne){try{return ce(ne,this)}catch(Ve){this.error(Ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(mt,xe,B)=>{function u(){}B.d(xe,{Z:()=>u})},9635:(mt,xe,B)=>{B.d(xe,{U:()=>L,z:()=>H});var u=B(4671);function H(...ce){return L(ce)}function L(ce){return 0===ce.length?u.y:1===ce.length?ce[0]:function(ne){return ce.reduce((Ve,_e)=>_e(Ve),ne)}}},7849:(mt,xe,B)=>{B.d(xe,{h:()=>L});var u=B(2416),H=B(3410);function L(ce){H.z.setTimeout(()=>{const{onUnhandledError:ve}=u.v;if(!ve)throw ce;ve(ce)})}},4532:(mt,xe,B)=>{function u(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(xe,{z:()=>u})},655:(mt,xe,B)=>{function ce(ie,ue){var he={};for(var Ce in ie)Object.prototype.hasOwnProperty.call(ie,Ce)&&ue.indexOf(Ce)<0&&(he[Ce]=ie[Ce]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(Ce=Object.getOwnPropertySymbols(ie);Pe<Ce.length;Pe++)ue.indexOf(Ce[Pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,Ce[Pe])&&(he[Ce[Pe]]=ie[Ce[Pe]])}return he}function Y(ie,ue,he,Ce){return new(he||(he=Promise))(function(Oe,Ke){function Je(lt){try{_t(Ce.next(lt))}catch(Ye){Ke(Ye)}}function mn(lt){try{_t(Ce.throw(lt))}catch(Ye){Ke(Ye)}}function _t(lt){lt.done?Oe(lt.value):function Pe(Oe){return Oe instanceof he?Oe:new he(function(Ke){Ke(Oe)})}(lt.value).then(Je,mn)}_t((Ce=Ce.apply(ie,ue||[])).next())})}function Te(ie){return this instanceof Te?(this.v=ie,this):new Te(ie)}function Ee(ie,ue,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,Ce=he.apply(ie,ue||[]),Oe=[];return Pe={},Ke("next"),Ke("throw"),Ke("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function Ke(rn){Ce[rn]&&(Pe[rn]=function(kn){return new Promise(function(xn,an){Oe.push([rn,kn,xn,an])>1||Je(rn,kn)})})}function Je(rn,kn){try{!function mn(rn){rn.value instanceof Te?Promise.resolve(rn.value.v).then(_t,lt):Ye(Oe[0][2],rn)}(Ce[rn](kn))}catch(xn){Ye(Oe[0][3],xn)}}function _t(rn){Je("next",rn)}function lt(rn){Je("throw",rn)}function Ye(rn,kn){rn(kn),Oe.shift(),Oe.length&&Je(Oe[0][0],Oe[0][1])}}function Be(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,ue=ie[Symbol.asyncIterator];return ue?ue.call(ie):(ie=function tt(ie){var ue="function"==typeof Symbol&&Symbol.iterator,he=ue&&ie[ue],Ce=0;if(he)return he.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&Ce>=ie.length&&(ie=void 0),{value:ie&&ie[Ce++],done:!ie}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),he={},Ce("next"),Ce("throw"),Ce("return"),he[Symbol.asyncIterator]=function(){return this},he);function Ce(Oe){he[Oe]=ie[Oe]&&function(Ke){return new Promise(function(Je,mn){!function Pe(Oe,Ke,Je,mn){Promise.resolve(mn).then(function(_t){Oe({value:_t,done:Je})},Ke)}(Je,mn,(Ke=ie[Oe](Ke)).done,Ke.value)})}}}B.d(xe,{FC:()=>Ee,KL:()=>Be,_T:()=>ce,mG:()=>Y,qq:()=>Te})},4650:(mt,xe,B)=>{B.d(xe,{$8M:()=>fa,$WT:()=>Cr,$Z:()=>zw,AFp:()=>SC,AaK:()=>_e,CHM:()=>r_,CRH:()=>hv,CZH:()=>Rm,CqO:()=>dE,D6c:()=>Kh,DdM:()=>eM,EJc:()=>OM,EiD:()=>bS,EpF:()=>Ah,F$t:()=>fE,F4k:()=>Ny,FYo:()=>Iw,FiY:()=>Hr,Gf:()=>dv,GfV:()=>xw,Gpc:()=>$,Hsn:()=>pE,Ikx:()=>IE,JOm:()=>Ji,JVY:()=>nw,JZr:()=>tt,KtG:()=>s_,L6k:()=>hS,LAX:()=>iw,LFG:()=>Fe,LSH:()=>ah,Lbi:()=>AM,Lck:()=>XV,MAs:()=>lE,MGl:()=>By,MMx:()=>KE,NdJ:()=>Fy,OlP:()=>_n,Oqu:()=>EE,P3R:()=>G_,PXZ:()=>Cv,Q6J:()=>ky,QGY:()=>Gl,QbO:()=>MM,Qsj:()=>RS,R0b:()=>ps,RDi:()=>cS,Rgc:()=>Im,SBq:()=>Ko,Sil:()=>NM,Suo:()=>hM,TTD:()=>ol,TgZ:()=>Oy,Udp:()=>vE,VKq:()=>tM,W1O:()=>cC,X6Q:()=>YC,XFs:()=>rt,Xpm:()=>Ni,Xts:()=>Ea,Y36:()=>eu,YKP:()=>iv,YNc:()=>cm,Yjl:()=>id,Yz7:()=>Ye,Z0I:()=>an,ZZ4:()=>iI,_Bn:()=>wm,_UZ:()=>cE,_Vd:()=>Ia,_c5:()=>nR,_uU:()=>XT,aQg:()=>rI,c2e:()=>RM,cJS:()=>kn,cg1:()=>xE,dDg:()=>LC,dqk:()=>St,eBb:()=>Pl,eFA:()=>zC,eJc:()=>Tm,ekj:()=>bE,eoX:()=>HM,f3M:()=>Ze,g9A:()=>AC,h0i:()=>hu,hGG:()=>Mv,hij:()=>Gy,iGM:()=>dM,ifc:()=>R,ip1:()=>DC,jDz:()=>KA,kL8:()=>gA,lG2:()=>nd,lqb:()=>Nl,lri:()=>wv,mCW:()=>Yc,n5z:()=>ha,oAB:()=>td,oxw:()=>Vy,pB0:()=>fS,q3G:()=>ei,q4F:()=>ey,qLn:()=>hh,qOj:()=>Dy,qZA:()=>dm,qzn:()=>Rs,rWj:()=>FC,sBO:()=>ZC,s_b:()=>lv,soG:()=>km,tBr:()=>vl,tb:()=>BC,tp0:()=>bl,uIk:()=>rE,vHH:()=>oe,vpe:()=>Xo,wAp:()=>wt,xp6:()=>Pw,z2F:()=>Ns,z3N:()=>zi,zSh:()=>Y_,zs3:()=>Xc});var u=B(7579),H=B(727),L=B(9751),ce=B(6451),ve=B(3099);function ne(o){for(let a in o)if(o[a]===ne)return a;throw Error("Could not find renamed property on target object.")}function Ve(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function _e(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(_e).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function ke(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const z=ne({__forward_ref__:ne});function $(o){return o.__forward_ref__=$,o.toString=function(){return _e(this())},o}function Y(o){return Ue(o)?o():o}function Ue(o){return"function"==typeof o&&o.hasOwnProperty(z)&&o.__forward_ref__===$}function Me(o){return o&&!!o.\u0275providers}const tt="https://g.co/ng/security#xss";class oe extends Error{constructor(a,c){super(De(a,c)),this.code=a}}function De(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}function ge(o){return"string"==typeof o?o:null==o?"":String(o)}function Be(o,a){throw new oe(-201,!1)}function Ke(o,a){null==o&&function Je(o,a,c,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function Ye(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function kn(o){return{providers:o.providers||[],imports:o.imports||[]}}function xn(o){return hi(o,Lr)||hi(o,Dn)}function an(o){return null!==xn(o)}function hi(o,a){return o.hasOwnProperty(a)?o[a]:null}function qi(o){return o&&(o.hasOwnProperty(ns)||o.hasOwnProperty(Pi))?o[ns]:null}const Lr=ne({\u0275prov:ne}),ns=ne({\u0275inj:ne}),Dn=ne({ngInjectableDef:ne}),Pi=ne({ngInjectorDef:ne});var rt=(()=>((rt=rt||{})[rt.Default=0]="Default",rt[rt.Host=1]="Host",rt[rt.Self=2]="Self",rt[rt.SkipSelf=4]="SkipSelf",rt[rt.Optional=8]="Optional",rt))();let Ki;function fi(o){const a=Ki;return Ki=o,a}function ri(o,a,c){const d=xn(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&rt.Optional?null:void 0!==a?a:void Be(_e(o))}const St=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),On={},pi="__NG_DI_FLAG__",xi="ngTempTokenPath",mi="ngTokenPath",Vr=/\n/gm,Vt="\u0275",is="__source";let zt;function Er(o){const a=zt;return zt=o,a}function si(o,a=rt.Default){if(void 0===zt)throw new oe(-203,!1);return null===zt?ri(o,void 0,a):zt.get(o,a&rt.Optional?null:void 0,a)}function Fe(o,a=rt.Default){return(function br(){return Ki}()||si)(Y(o),a)}function Ze(o,a=rt.Default){return Fe(o,gt(a))}function gt(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function Tt(o){const a=[];for(let c=0;c<o.length;c++){const d=Y(o[c]);if(Array.isArray(d)){if(0===d.length)throw new oe(900,!1);let f,m=rt.Default;for(let v=0;v<d.length;v++){const C=d[v],I=jn(C);"number"==typeof I?-1===I?f=C.token:m|=I:f=C}a.push(Fe(f,m))}else a.push(Fe(d))}return a}function Qt(o,a){return o[pi]=a,o.prototype[pi]=a,o}function jn(o){return o[pi]}function k(o){return{toString:o}.toString()}var N=(()=>((N=N||{})[N.OnPush=0]="OnPush",N[N.Default=1]="Default",N))(),R=(()=>{return(o=R||(R={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",R;var o})();const Q={},ae=[],it=ne({\u0275cmp:ne}),It=ne({\u0275dir:ne}),xt=ne({\u0275pipe:ne}),Zt=ne({\u0275mod:ne}),vt=ne({\u0275fac:ne}),gn=ne({__NG_ELEMENT_ID__:ne});let Gt=0;function Ni(o){return k(()=>{const a=rd(o),c={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,data:o.data||{},encapsulation:o.encapsulation||R.Emulated,id:"c"+Gt++,styles:o.styles||ae,_:null,schemas:o.schemas||null,tView:null};sd(c);const d=o.dependencies;return c.directiveDefs=Ws(d,!1),c.pipeDefs=Ws(d,!0),c})}function mc(o){return ln(o)||Yn(o)}function Yg(o){return null!==o}function td(o){return k(()=>({type:o.type,bootstrap:o.bootstrap||ae,declarations:o.declarations||ae,imports:o.imports||ae,exports:o.exports||ae,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Ja(o,a){if(null==o)return Q;const c={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=d,a&&(a[f]=m)}return c}function nd(o){return k(()=>{const a=rd(o);return sd(a),a})}function id(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function ln(o){return o[it]||null}function Yn(o){return o[It]||null}function Si(o){return o[xt]||null}function Cr(o){const a=ln(o)||Yn(o)||Si(o);return null!==a&&a.standalone}function Yi(o,a){const c=o[Zt]||null;if(!c&&!0===a)throw new Error(`Type ${_e(o)} does not have '\u0275mod' property.`);return c}function rd(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,exportAs:o.exportAs||null,standalone:!0===o.standalone,selectors:o.selectors||ae,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ja(o.inputs,a),outputs:Ja(o.outputs)}}function sd(o){o.features?.forEach(a=>a(o))}function Ws(o,a){if(!o)return null;const c=a?Si:mc;return()=>("function"==typeof o?o():o).map(d=>c(d)).filter(Yg)}const rs=0,Qe=1,Bt=2,bn=3,Fi=4,ws=5,gi=6,Es=7,Pn=8,qs=9,gc=10,Ot=11,el=12,ss=13,od=14,Ks=15,Li=16,Ys=17,os=18,Zn=19,Zs=20,Zg=21,Mt=22,tl=1,Zf=2,sa=7,_c=8,Qs=9,Vi=10;function Bi(o){return Array.isArray(o)&&"object"==typeof o[tl]}function _i(o){return Array.isArray(o)&&!0===o[tl]}function ad(o){return 0!=(4&o.flags)}function nl(o){return o.componentOffset>-1}function Xs(o){return 1==(1&o.flags)}function as(o){return!!o.template}function ld(o){return 0!=(256&o[Bt])}function aa(o,a){return o.hasOwnProperty(vt)?o[vt]:null}class ep{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function ol(){return bc}function bc(o){return o.type.prototype.ngOnChanges&&(o.setInput=ud),al}function al(){const o=wc(this),a=o?.current;if(a){const c=o.previous;if(c===Q)o.previous=a;else for(let d in a)c[d]=a[d];o.current=null,this.ngOnChanges(a)}}function ud(o,a,c,d){const f=this.declaredInputs[c],m=wc(o)||function Jg(o,a){return o[tp]=a}(o,{previous:Q,current:null}),v=m.current||(m.current={}),C=m.previous,I=C[f];v[f]=new ep(I&&I.currentValue,a,C===Q),o[d]=a}ol.ngInherit=!0;const tp="__ngSimpleChanges__";function wc(o){return o[tp]||null}const Zi=function(o,a,c){};function Nn(o){for(;Array.isArray(o);)o=o[rs];return o}function Ao(o,a){return Nn(a[o])}function Ui(o,a){return Nn(a[o.index])}function pd(o,a){return o.data[a]}function Hi(o,a){const c=a[o];return Bi(c)?c:c[rs]}function Mo(o){return 64==(64&o[Bt])}function cs(o,a){return null==a?null:o[a]}function np(o){o[os]=0}function ll(o,a){o[ws]+=a;let c=o,d=o[bn];for(;null!==d&&(1===a&&1===c[ws]||-1===a&&0===c[ws]);)d[ws]+=a,c=d,d=d[bn]}const Rt={lFrame:d_(null),bindingsEnabled:!0};function i_(){return Rt.bindingsEnabled}function be(){return Rt.lFrame.lView}function Xt(){return Rt.lFrame.tView}function r_(o){return Rt.lFrame.contextLView=o,o[Pn]}function s_(o){return Rt.lFrame.contextLView=null,o}function oi(){let o=o_();for(;null!==o&&64===o.type;)o=o.parent;return o}function o_(){return Rt.lFrame.currentTNode}function Cs(o,a){const c=Rt.lFrame;c.currentTNode=o,c.isParent=a}function Cc(){return Rt.lFrame.isParent}function ip(){Rt.lFrame.isParent=!1}function yi(){const o=Rt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function ko(){return Rt.lFrame.bindingIndex++}function op(o,a){const c=Rt.lFrame;c.bindingIndex=c.bindingRootIndex=o,Is(a)}function Is(o){Rt.lFrame.currentDirectiveIndex=o}function c_(){return Rt.lFrame.currentQueryIndex}function ap(o){Rt.lFrame.currentQueryIndex=o}function F0(o){const a=o[Qe];return 2===a.type?a.declTNode:1===a.type?o[gi]:null}function u_(o,a,c){if(c&rt.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||c&rt.Host||(f=F0(m),null===f||(m=m[Ks],10&f.type))););if(null===f)return!1;a=f,o=m}const d=Rt.lFrame=L0();return d.currentTNode=a,d.lView=o,!0}function lp(o){const a=L0(),c=o[Qe];Rt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function L0(){const o=Rt.lFrame,a=null===o?null:o.child;return null===a?d_(o):a}function d_(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function h_(){const o=Rt.lFrame;return Rt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const V0=h_;function cp(){const o=h_();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Qi(){return Rt.lFrame.selectedIndex}function eo(o){Rt.lFrame.selectedIndex=o}function hn(){const o=Rt.lFrame;return pd(o.tView,o.selectedIndex)}function wd(o,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const m=o.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:D,ngOnDestroy:M}=m;v&&(o.contentHooks||(o.contentHooks=[])).push(-c,v),C&&((o.contentHooks||(o.contentHooks=[])).push(c,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,C)),I&&(o.viewHooks||(o.viewHooks=[])).push(-c,I),D&&((o.viewHooks||(o.viewHooks=[])).push(c,D),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,D)),null!=M&&(o.destroyHooks||(o.destroyHooks=[])).push(c,M)}}function cl(o,a,c){xs(o,a,3,c)}function la(o,a,c,d){(3&o[Bt])===c&&xs(o,a,c,d)}function ul(o,a){let c=o[Bt];(3&c)===a&&(c&=2047,c+=1,o[Bt]=c)}function xs(o,a,c,d){const m=d??-1,v=a.length-1;let C=0;for(let I=void 0!==d?65535&o[os]:0;I<v;I++)if("number"==typeof a[I+1]){if(C=a[I],null!=d&&C>=d)break}else a[I]<0&&(o[os]+=65536),(C<m||-1==m)&&(dp(o,c,a,I),o[os]=(4294901760&o[os])+I+2),I++}function dp(o,a,c,d){const f=c[d]<0,m=c[d+1],C=o[f?-c[d]:c[d]];if(f){if(o[Bt]>>11<o[os]>>16&&(3&o[Bt])===a){o[Bt]+=2048,Zi(4,C,m);try{m.call(C)}finally{Zi(5,C,m)}}}else{Zi(4,C,m);try{m.call(C)}finally{Zi(5,C,m)}}}const Ds=-1;class dl{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Tc(o,a,c){let d=0;for(;d<c.length;){const f=c[d];if("number"==typeof f){if(0!==f)break;d++;const m=c[d++],v=c[d++],C=c[d++];o.setAttribute(a,v,C,m)}else{const m=f,v=c[++d];Ac(m)?o.setProperty(a,m,v):o.setAttribute(a,m,v),d++}}return d}function En(o){return 3===o||4===o||6===o}function Ac(o){return 64===o.charCodeAt(0)}function Ss(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?c=f:0===c||Id(o,c,f,null,-1===c||2===c?a[++d]:null)}}return o}function Id(o,a,c,d,f){let m=0,v=o.length;if(-1===a)v=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==f&&(o[m+1]=f));if(d===o[m+1])return void(o[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==v&&(o.splice(v,0,a),m=v+1),o.splice(m++,0,c),null!==d&&o.splice(m++,0,d),null!==f&&o.splice(m++,0,f)}function fl(o){return o!==Ds}function Mc(o){return 32767&o}function pl(o,a){let c=function f_(o){return o>>16}(o),d=a;for(;c>0;)d=d[Ks],c--;return d}let Rc=!0;function Oo(o){const a=Rc;return Rc=o,a}const Po=255,ca=5;let kc=0;const Xi={};function No(o,a){const c=Pc(o,a);if(-1!==c)return c;const d=a[Qe];d.firstCreatePass&&(o.injectorIndex=a.length,Oc(d.data,o),Oc(a,null),Oc(d.blueprint,null));const f=ua(o,a),m=o.injectorIndex;if(fl(f)){const v=Mc(f),C=pl(f,a),I=C[Qe].data;for(let D=0;D<8;D++)a[m+D]=C[v+D]|I[v+D]}return a[m+8]=f,m}function Oc(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Pc(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ua(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,d=null,f=a;for(;null!==f;){if(d=Md(f),null===d)return Ds;if(c++,f=f[Ks],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return Ds}function Nc(o,a,c){!function fp(o,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(gn)&&(d=c[gn]),null==d&&(d=c[gn]=kc++);const f=d&Po;a.data[o+(f>>ca)]|=1<<f}(o,a,c)}function pp(o,a,c){if(c&rt.Optional||void 0!==o)return o;Be()}function xd(o,a,c,d){if(c&rt.Optional&&void 0===d&&(d=null),!(c&(rt.Self|rt.Host))){const f=o[qs],m=fi(void 0);try{return f?f.get(a,d,c&rt.Optional):ri(a,d,c&rt.Optional)}finally{fi(m)}}return pp(d,0,c)}function mp(o,a,c,d=rt.Default,f){if(null!==o){if(1024&a[Bt]){const v=function vp(o,a,c,d,f){let m=o,v=a;for(;null!==m&&null!==v&&1024&v[Bt]&&!(256&v[Bt]);){const C=gp(m,v,c,d|rt.Self,Xi);if(C!==Xi)return C;let I=m.parent;if(!I){const D=v[Zg];if(D){const M=D.get(c,Xi,d);if(M!==Xi)return M}I=Md(v),v=v[Ks]}m=I}return f}(o,a,c,d,Xi);if(v!==Xi)return v}const m=gp(o,a,c,d,Xi);if(m!==Xi)return m}return xd(a,c,d,f)}function gp(o,a,c,d,f){const m=function _p(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(gn)?o[gn]:void 0;return"number"==typeof a?a>=0?a&Po:g_:a}(c);if("function"==typeof m){if(!u_(a,o,d))return d&rt.Host?pp(f,0,d):xd(a,c,d,f);try{const v=m(d);if(null!=v||d&rt.Optional)return v;Be()}finally{V0()}}else if("number"==typeof m){let v=null,C=Pc(o,a),I=Ds,D=d&rt.Host?a[Li][gi]:null;for((-1===C||d&rt.SkipSelf)&&(I=-1===C?ua(o,a):a[C+8],I!==Ds&&Td(d,!1)?(v=a[Qe],C=Mc(I),a=pl(I,a)):C=-1);-1!==C;){const M=a[Qe];if(yp(m,C,M.data)){const F=Dd(C,a,c,v,d,D);if(F!==Xi)return F}I=a[C+8],I!==Ds&&Td(d,a[Qe].data[C+8]===D)&&yp(m,C,a)?(v=M,C=Mc(I),a=pl(I,a)):C=-1}}return f}function Dd(o,a,c,d,f,m){const v=a[Qe],C=v.data[o+8],M=Sd(C,v,c,null==d?nl(C)&&Rc:d!=v&&0!=(3&C.type),f&rt.Host&&m===C);return null!==M?to(a,v,M,C):Xi}function Sd(o,a,c,d,f){const m=o.providerIndexes,v=a.data,C=1048575&m,I=o.directiveStart,M=m>>20,q=f?C+M:o.directiveEnd;for(let ee=d?C:C+M;ee<q;ee++){const de=v[ee];if(ee<I&&c===de||ee>=I&&de.type===c)return ee}if(f){const ee=v[I];if(ee&&as(ee)&&ee.type===c)return I}return null}function to(o,a,c,d){let f=o[c];const m=a.data;if(function hp(o){return o instanceof dl}(f)){const v=f;v.resolving&&function Te(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new oe(-200,`Circular dependency in DI detected for ${o}${c}`)}(function Se(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ge(o)}(m[c]));const C=Oo(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?fi(v.injectImpl):null;u_(o,d,rt.Default);try{f=o[c]=v.factory(void 0,m,o,d),a.firstCreatePass&&c>=d.directiveStart&&function z0(o,a,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(d){const v=bc(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,v),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,v)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,m))}(c,m[c],a)}finally{null!==I&&fi(I),Oo(C),v.resolving=!1,V0()}}return f}function yp(o,a,c){return!!(c[a+(o>>ca)]&1<<o)}function Td(o,a){return!(o&rt.Self||o&rt.Host&&a)}class da{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return mp(this._tNode,this._lView,a,gt(d),c)}}function g_(){return new da(oi(),be())}function ha(o){return k(()=>{const a=o.prototype.constructor,c=a[vt]||Ad(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const m=f[vt]||Ad(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Ad(o){return Ue(o)?()=>{const a=Ad(Y(o));return a&&a()}:aa(o)}function Md(o){const a=o[Qe],c=a.type;return 2===c?a.declTNode:1===c?o[gi]:null}function fa(o){return function m_(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const m=c[f];if(En(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(m===a)return c[f+1];f+=2}}}return null}(oi(),o)}const ml="__parameters__";function no(o,a,c){return k(()=>{const d=function Rd(o){return function(...c){if(o){const d=o(...c);for(const f in d)this[f]=d[f]}}}(a);function f(...m){if(this instanceof f)return d.apply(this,m),this;const v=new f(...m);return C.annotation=v,C;function C(I,D,M){const F=I.hasOwnProperty(ml)?I[ml]:Object.defineProperty(I,ml,{value:[]})[ml];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(v),I}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class _n{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Ye({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ma(o,a){o.forEach(c=>Array.isArray(c)?ma(c,a):a(c))}function w_(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function gl(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function _l(o,a){const c=[];for(let d=0;d<o;d++)c.push(a);return c}function Wt(o,a,c){let d=We(o,a);return d>=0?o[1|d]=c:(d=~d,function Fc(o,a,c,d){let f=o.length;if(f==a)o.push(c,d);else if(1===f)o.push(d,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=d}}(o,d,a,c)),d}function ro(o,a){const c=We(o,a);if(c>=0)return o[1|c]}function We(o,a){return function ur(o,a,c){let d=0,f=o.length>>c;for(;f!==d;){const m=d+(f-d>>1),v=o[m<<c];if(a===v)return m<<c;v>a?f=m:d=m+1}return~(f<<c)}(o,a,1)}const vl=Qt(no("Inject",o=>({token:o})),-1),Hr=Qt(no("Optional"),8),bl=Qt(no("SkipSelf"),4);var Ji=(()=>((Ji=Ji||{})[Ji.Important=1]="Important",Ji[Ji.DashCase=2]="DashCase",Ji))();const Dr=new Map;let Tp=0;const Kd="__ngContext__";function ai(o,a){Bi(a)?(o[Kd]=a[Zs],function Ap(o){Dr.set(o[Zs],o)}(a)):o[Kd]=a}let $o;function b(o,a){return $o(o,a)}function y(o){const a=o[bn];return _i(a)?a[bn]:a}function O(o){return me(o[ss])}function J(o){return me(o[Fi])}function me(o){for(;null!==o&&!_i(o);)o=o[Fi];return o}function He(o,a,c,d,f){if(null!=d){let m,v=!1;_i(d)?m=d:Bi(d)&&(v=!0,d=d[rs]);const C=Nn(d);0===o&&null!==c?null==f?q0(a,c,C):wa(a,c,C,f||null,!0):1===o&&null!==c?wa(a,c,C,f||null,!0):2===o?function ih(o,a,c){const d=nh(o,a);d&&function eh(o,a,c,d){o.removeChild(a,c,d)}(o,d,a,c)}(a,C,v):3===o&&a.destroyNode(C),null!=m&&function uo(o,a,c,d,f){const m=c[sa];m!==Nn(c)&&He(a,o,d,m,f);for(let C=Vi;C<c.length;C++){const I=c[C];Gc(I[Qe],I,o,a,d,m)}}(a,o,m,c,f)}}function Sr(o,a,c){return o.createElement(a,c)}function jc(o,a){const c=o[Qs],d=c.indexOf(a),f=a[bn];512&a[Bt]&&(a[Bt]&=-513,ll(f,-1)),c.splice(d,1)}function va(o,a){if(o.length<=Vi)return;const c=Vi+a,d=o[c];if(d){const f=d[Ys];null!==f&&f!==o&&jc(f,d),a>0&&(o[c-1][Fi]=d[Fi]);const m=gl(o,Vi+a);!function lo(o,a){Gc(o,a,a[Ot],2,null,null),a[rs]=null,a[gi]=null}(d[Qe],d);const v=m[Zn];null!==v&&v.detachView(m[Qe]),d[bn]=null,d[Fi]=null,d[Bt]&=-65}return d}function ba(o,a){if(!(128&a[Bt])){const c=a[Ot];c.destroyNode&&Gc(o,a,c,3,null,null),function Zd(o){let a=o[ss];if(!a)return Al(o[Qe],o);for(;a;){let c=null;if(Bi(a))c=a[ss];else{const d=a[Vi];d&&(c=d)}if(!c){for(;a&&!a[Fi]&&a!==o;)Bi(a)&&Al(a[Qe],a),a=a[bn];null===a&&(a=o),Bi(a)&&Al(a[Qe],a),c=a&&a[Fi]}a=c}}(a)}}function Al(o,a){if(!(128&a[Bt])){a[Bt]&=-65,a[Bt]|=128,function Qd(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let d=0;d<c.length;d+=2){const f=a[c[d]];if(!(f instanceof dl)){const m=c[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const C=f[m[v]],I=m[v+1];Zi(4,C,I);try{I.call(C)}finally{Zi(5,C,I)}}else{Zi(4,f,m);try{m.call(f)}finally{Zi(5,f,m)}}}}}(o,a),function co(o,a){const c=o.cleanup,d=a[Es];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const v=c[m+3];v>=0?d[f=v]():d[f=-v].unsubscribe(),m+=2}else{const v=d[f=c[m+1]];c[m].call(v)}if(null!==d){for(let m=f+1;m<d.length;m++)(0,d[m])();a[Es]=null}}(o,a),1===a[Qe].type&&a[Ot].destroy();const c=a[Ys];if(null!==c&&_i(a[bn])){c!==a[bn]&&jc(c,a);const d=a[Zn];null!==d&&d.detachView(o)}!function bi(o){Dr.delete(o[Zs])}(a)}}function Xd(o,a,c){return function Jd(o,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[rs];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:m}=o.data[d.directiveStart+f];if(m===R.None||m===R.Emulated)return null}return Ui(d,c)}}(o,a.parent,c)}function wa(o,a,c,d,f){o.insertBefore(a,c,d,f)}function q0(o,a,c){o.appendChild(a,c)}function zc(o,a,c,d,f){null!==d?wa(o,a,c,d,f):q0(o,a,c)}function nh(o,a){return o.parentNode(a)}function D_(o,a,c){return Y0(o,a,c)}let S_,qc,O_,Np,Y0=function Ml(o,a,c){return 40&o.type?Ui(o,c):null};function Pp(o,a,c,d){const f=Xd(o,d,a),m=a[Ot],C=D_(d.parent||a[gi],d,a);if(null!=f)if(Array.isArray(c))for(let I=0;I<c.length;I++)zc(m,f,c[I],C,!1);else zc(m,f,c,C,!1);void 0!==S_&&S_(m,d,a,c,f)}function $c(o,a){if(null!==a){const c=a.type;if(3&c)return Ui(a,o);if(4&c)return A_(-1,o[a.index]);if(8&c){const d=a.child;if(null!==d)return $c(o,d);{const f=o[a.index];return _i(f)?A_(-1,f):Nn(f)}}if(32&c)return b(a,o)()||Nn(o[a.index]);{const d=Rl(o,a);return null!==d?Array.isArray(d)?d[0]:$c(y(o[Li]),d):$c(o,a.next)}}return null}function Rl(o,a){return null!==a?o[Li][gi].projection[a.projection]:null}function A_(o,a){const c=Vi+o+1;if(c<a.length){const d=a[c],f=d[Qe].firstChild;if(null!==f)return $c(d,f)}return a[sa]}function M_(o,a,c,d,f,m,v){for(;null!=c;){const C=d[c.index],I=c.type;if(v&&0===a&&(C&&ai(Nn(C),d),c.flags|=2),32!=(32&c.flags))if(8&I)M_(o,a,c.child,d,f,m,!1),He(a,o,f,C,m);else if(32&I){const D=b(c,d);let M;for(;M=D();)He(a,o,f,M,m);He(a,o,f,C,m)}else 16&I?Wc(o,a,d,c,f,m):He(a,o,f,C,m);c=v?c.projectionNext:c.next}}function Gc(o,a,c,d,f,m){M_(c,d,o.firstChild,a,f,m,!1)}function Wc(o,a,c,d,f,m){const v=c[Li],I=v[gi].projection[d.projection];if(Array.isArray(I))for(let D=0;D<I.length;D++)He(a,o,f,I[D],m);else M_(o,a,I,v[bn],f,m,!0)}function rh(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function sh(o,a,c){const{mergedAttrs:d,classes:f,styles:m}=c;null!==d&&Tc(o,a,d),null!==f&&rh(o,a,f),null!==m&&function kl(o,a,c){o.setAttribute(a,"style",c)}(o,a,m)}function Kc(o){return function k_(){if(void 0===qc&&(qc=null,St.trustedTypes))try{qc=St.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return qc}()?.createHTML(o)||o}function cS(o){O_=o}function J0(o){return function P_(){if(void 0===Np&&(Np=null,St.trustedTypes))try{Np=St.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Np}()?.createScriptURL(o)||o}class Ol{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tt})`}}class uS extends Ol{getTypeName(){return"HTML"}}class dS extends Ol{getTypeName(){return"Style"}}class ew extends Ol{getTypeName(){return"Script"}}class F_ extends Ol{getTypeName(){return"URL"}}class L_ extends Ol{getTypeName(){return"ResourceURL"}}function zi(o){return o instanceof Ol?o.changingThisBreaksApplicationSecurity:o}function Rs(o,a){const c=function tw(o){return o instanceof Ol&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${tt})`)}return c===a}function nw(o){return new uS(o)}function hS(o){return new dS(o)}function Pl(o){return new ew(o)}function iw(o){return new F_(o)}function fS(o){return new L_(o)}class rw{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(Kc(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class V_{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const c=this.inertDocument.createElement("template");return c.innerHTML=Kc(a),c}}const B_=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Yc(o){return(o=String(o)).match(B_)?o:"unsafe:"+o}function Wo(o){const a={};for(const c of o.split(","))a[c]=!0;return a}function qo(...o){const a={};for(const c of o)for(const d in c)c.hasOwnProperty(d)&&(a[d]=!0);return a}const ow=Wo("area,br,col,hr,img,wbr"),aw=Wo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Fp=Wo("rp,rt"),Lp=qo(ow,qo(aw,Wo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qo(Fp,Wo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qo(Fp,aw)),U_=Wo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Bp=qo(U_,Wo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_S=Wo("script,style,template");class yS{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!Lp.hasOwnProperty(c))return this.sanitizedSomething=!0,!_S.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=a.attributes;for(let f=0;f<d.length;f++){const m=d.item(f),v=m.name,C=v.toLowerCase();if(!Bp.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let I=m.value;U_[C]&&(I=Yc(I)),this.buf.push(" ",v,'="',vS(I),'"')}return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();Lp.hasOwnProperty(c)&&!ow.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(vS(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const j_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lw=/([^\#-~ |!])/g;function vS(o){return o.replace(/&/g,"&amp;").replace(j_,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(lw,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let z_;function bS(o,a){let c=null;try{z_=z_||function oh(o){const a=new V_(o);return function sw(){try{return!!(new window.DOMParser).parseFromString(Kc(""),"text/html")}catch{return!1}}()?new rw(a):a}(o);let d=a?String(a):"";c=z_.getInertBodyElement(d);let f=5,m=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=m,m=c.innerHTML,c=z_.getInertBodyElement(d)}while(d!==m);return Kc((new yS).sanitizeChildren(cw(c)||c))}finally{if(c){const d=cw(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function cw(o){return"content"in o&&function $_(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var ei=(()=>((ei=ei||{})[ei.NONE=0]="NONE",ei[ei.HTML=1]="HTML",ei[ei.STYLE=2]="STYLE",ei[ei.SCRIPT=3]="SCRIPT",ei[ei.URL=4]="URL",ei[ei.RESOURCE_URL=5]="RESOURCE_URL",ei))();function ah(o){const a=ch();return a?a.sanitize(ei.URL,o)||"":Rs(o,"URL")?zi(o):Yc(ge(o))}function Gr(o){const a=ch();if(a)return J0(a.sanitize(ei.RESOURCE_URL,o)||"");if(Rs(o,"ResourceURL"))return J0(zi(o));throw new oe(904,!1)}function G_(o,a,c){return function IS(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?Gr:ah}(a,c)(o)}function ch(){const o=be();return o&&o[el]}const Ea=new _n("ENVIRONMENT_INITIALIZER"),Zc=new _n("INJECTOR",-1),dw=new _n("INJECTOR_DEF_TYPES");class hw{get(a,c=On){if(c===On){const d=new Error(`NullInjectorError: No provider for ${_e(a)}!`);throw d.name="NullInjectorError",d}return c}}function uh(...o){return{\u0275providers:fw(0,o),\u0275fromNgModule:!0}}function fw(o,...a){const c=[],d=new Set;let f;return ma(a,m=>{const v=m;q_(v,c,[],d)&&(f||(f=[]),f.push(v))}),void 0!==f&&pw(f,c),c}function pw(o,a){for(let c=0;c<o.length;c++){const{providers:f}=o[c];K_(f,m=>{a.push(m)})}}function q_(o,a,c,d){if(!(o=Y(o)))return!1;let f=null,m=qi(o);const v=!m&&ln(o);if(m||v){if(v&&!v.standalone)return!1;f=o}else{const I=o.ngModule;if(m=qi(I),!m)return!1;f=I}const C=d.has(f);if(v){if(C)return!1;if(d.add(f),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const D of I)q_(D,a,c,d)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let D;d.add(f);try{ma(m.imports,M=>{q_(M,a,c,d)&&(D||(D=[]),D.push(M))})}finally{}void 0!==D&&pw(D,a)}if(!C){const D=aa(f)||(()=>new f);a.push({provide:f,useFactory:D,deps:ae},{provide:dw,useValue:f,multi:!0},{provide:Ea,useValue:()=>Fe(f),multi:!0})}const I=m.providers;null==I||C||K_(I,M=>{a.push(M)})}}return f!==o&&void 0!==o.providers}function K_(o,a){for(let c of o)Me(c)&&(c=c.\u0275providers),Array.isArray(c)?K_(c,a):a(c)}const xS=ne({provide:String,useValue:ne});function mw(o){return null!==o&&"object"==typeof o&&xS in o}function ho(o){return"function"==typeof o}const Y_=new _n("Set Injector scope."),jp={},DS={};let Z_;function zp(){return void 0===Z_&&(Z_=new hw),Z_}class Nl{}class _w extends Nl{get destroyed(){return this._destroyed}constructor(a,c,d,f){super(),this.parent=c,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,J_(a,v=>this.processProvider(v)),this.records.set(Zc,Ca(void 0,this)),f.has("environment")&&this.records.set(Nl,Ca(void 0,this));const m=this.records.get(Y_);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(dw.multi,ae,rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=Er(this),d=fi(void 0);try{return a()}finally{Er(c),fi(d)}}get(a,c=On,d=rt.Default){this.assertNotDestroyed(),d=gt(d);const f=Er(this),m=fi(void 0);try{if(!(d&rt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const I=function $p(o){return"function"==typeof o||"object"==typeof o&&o instanceof _n}(a)&&xn(a);C=I&&this.injectableDefInScope(I)?Ca(Q_(a),jp):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(d&rt.Self?zp():this.parent).get(a,c=d&rt.Optional&&c===On?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[xi]=v[xi]||[]).unshift(_e(a)),f)throw v;return function j(o,a,c,d){const f=o[xi];throw a[is]&&f.unshift(a[is]),o.message=function U(o,a,c,d=null){o=o&&"\n"===o.charAt(0)&&o.charAt(1)==Vt?o.slice(2):o;let f=_e(a);if(Array.isArray(a))f=a.map(_e).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];m.push(v+":"+("string"==typeof C?JSON.stringify(C):_e(C)))}f=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${o.replace(Vr,"\n  ")}`}("\n"+o.message,f,c,d),o[mi]=f,o[xi]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{fi(m),Er(f)}}resolveInjectorInitializers(){const a=Er(this),c=fi(void 0);try{const d=this.get(Ea.multi,ae,rt.Self);for(const f of d)f()}finally{Er(a),fi(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(_e(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(a){let c=ho(a=Y(a))?a:Y(a&&a.provide);const d=function yw(o){return mw(o)?Ca(void 0,o.useValue):Ca(vw(o),jp)}(a);if(ho(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=Ca(void 0,jp,!0),f.factory=()=>Tt(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===jp&&(c.value=DS,c.value=c.factory()),"object"==typeof c.value&&c.value&&function X_(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Y(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Q_(o){const a=xn(o),c=null!==a?a.factory:aa(o);if(null!==c)return c;if(o instanceof _n)throw new oe(204,!1);if(o instanceof Function)return function SS(o){const a=o.length;if(a>0)throw _l(a,"?"),new oe(204,!1);const c=function Oi(o){const a=o&&(o[Lr]||o[Dn]);return a?(function Fr(o){if(o.hasOwnProperty("name"))return o.name;(""+o).match(/^function\s*([^\s(]+)/)}(o),a):null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new oe(204,!1)}function vw(o,a,c){let d;if(ho(o)){const f=Y(o);return aa(f)||Q_(f)}if(mw(o))d=()=>Y(o.useValue);else if(function Hp(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...Tt(o.deps||[]));else if(function gw(o){return!(!o||!o.useExisting)}(o))d=()=>Fe(Y(o.useExisting));else{const f=Y(o&&(o.useClass||o.provide));if(!function bw(o){return!!o.deps}(o))return aa(f)||Q_(f);d=()=>new f(...Tt(o.deps))}return d}function Ca(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function J_(o,a){for(const c of o)Array.isArray(c)?J_(c,a):c&&Me(c)?J_(c.\u0275providers,a):a(c)}class TS{}class ww{}class Ew{resolveComponentFactory(a){throw function AS(o){const a=Error(`No component factory found for ${_e(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Ia=(()=>{class o{}return o.NULL=new Ew,o})();function Gp(){return Fl(oi(),be())}function Fl(o,a){return new Ko(Ui(o,a))}let Ko=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=Gp,o})();function Cw(o){return o instanceof Ko?o.nativeElement:o}class Iw{}let RS=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function kS(){const o=be(),c=Hi(oi().index,o);return(Bi(c)?c:o)[Ot]}(),o})(),OS=(()=>{class o{}return o.\u0275prov=Ye({token:o,providedIn:"root",factory:()=>null}),o})();class xw{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const ey=new xw("15.2.5"),ty={},ny="ngOriginalError";function iy(o){return o[ny]}class hh{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&iy(a);for(;c&&iy(c);)c=iy(c);return c||null}}function fo(o){return o instanceof Function?o():o}function ry(o,a,c){let d=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===d||o.charCodeAt(f+m)<=32)return f}c=f+1}}const Wp="ng-template";function Mw(o,a,c){let d=0,f=!0;for(;d<o.length;){let m=o[d++];if("string"==typeof m&&f){const v=o[d++];if(c&&"class"===m&&-1!==ry(v.toLowerCase(),a,0))return!0}else{if(1===m){for(;d<o.length&&"string"==typeof(m=o[d++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(f=!1)}}return!1}function Vl(o){return 4===o.type&&o.value!==Wp}function sy(o,a,c){return a===(4!==o.type||c?o.value:Wp)}function US(o,a,c){let d=4;const f=o.attrs||[],m=function kw(o){for(let a=0;a<o.length;a++)if(En(o[a]))return a;return o.length}(f);let v=!1;for(let C=0;C<a.length;C++){const I=a[C];if("number"!=typeof I){if(!v)if(4&d){if(d=2|1&d,""!==I&&!sy(o,I,c)||""===I&&1===a.length){if(hs(d))return!1;v=!0}}else{const D=8&d?I:a[++C];if(8&d&&null!==o.attrs){if(!Mw(o.attrs,D,c)){if(hs(d))return!1;v=!0}continue}const F=qp(8&d?"class":I,f,Vl(o),c);if(-1===F){if(hs(d))return!1;v=!0;continue}if(""!==D){let q;q=F>m?"":f[F+1].toLowerCase();const ee=8&d?q:null;if(ee&&-1!==ry(ee,D,0)||2&d&&D!==q){if(hs(d))return!1;v=!0}}}}else{if(!v&&!hs(d)&&!hs(I))return!1;if(v&&hs(I))continue;v=!1,d=I|1&d}}return hs(d)||v}function hs(o){return 0==(1&o)}function qp(o,a,c,d){if(null===a)return-1;let f=0;if(d||!c){let m=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function HS(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const d=o[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,o)}function fh(o,a,c=!1){for(let d=0;d<a.length;d++)if(US(o,a[d],c))return!0;return!1}function jS(o,a){e:for(let c=0;c<a.length;c++){const d=a[c];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function Ow(o,a){return o?":not("+a.trim()+")":a}function zS(o){let a=o[0],c=1,d=2,f="",m=!1;for(;c<o.length;){let v=o[c];if("string"==typeof v)if(2&d){const C=o[++c];f+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!hs(v)&&(a+=Ow(m,f),f=""),d=v,m=m||!hs(d);c++}return""!==f&&(a+=Ow(m,f)),a}const Ft={};function Pw(o){Yp(Xt(),be(),Qi()+o,!1)}function Yp(o,a,c,d){if(!d)if(3==(3&a[Bt])){const m=o.preOrderCheckHooks;null!==m&&cl(a,m,c)}else{const m=o.preOrderHooks;null!==m&&la(a,m,0,c)}eo(c)}function ay(o,a=null,c=null,d){const f=KS(o,a,c,d);return f.resolveInjectorInitializers(),f}function KS(o,a=null,c=null,d,f=new Set){const m=[c||ae,uh(o)];return d=d||("object"==typeof o?void 0:_e(o)),new _w(m,a||zp(),d||null,f)}let Xc=(()=>{class o{static create(c,d){if(Array.isArray(c))return ay({name:""},d,c,"");{const f=c.name??"";return ay({name:f},c.parent,c.providers,f)}}}return o.THROW_IF_NOT_FOUND=On,o.NULL=new hw,o.\u0275prov=Ye({token:o,providedIn:"any",factory:()=>Fe(Zc)}),o.__NG_ELEMENT_ID__=-1,o})();function eu(o,a=rt.Default){const c=be();return null===c?Fe(o,a):mp(oi(),c,Y(o),a)}function zw(){throw new Error("invalid")}function $w(o,a){const c=o.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const m=c[d+1];if(-1!==m){const v=o.data[m];ap(c[d]),v.contentQueries(2,a[m],m)}}}function dy(o,a,c,d,f,m,v,C,I,D,M){const F=a.blueprint.slice();return F[rs]=f,F[Bt]=76|d,(null!==M||o&&1024&o[Bt])&&(F[Bt]|=1024),np(F),F[bn]=F[Ks]=o,F[Pn]=c,F[gc]=v||o&&o[gc],F[Ot]=C||o&&o[Ot],F[el]=I||o&&o[el]||null,F[qs]=D||o&&o[qs]||null,F[gi]=m,F[Zs]=function Uc(){return Tp++}(),F[Zg]=M,F[Li]=2==a.type?o[Li]:F,F}function K(o,a,c,d,f){let m=o.data[a];if(null===m)m=function yh(o,a,c,d,f){const m=o_(),v=Cc(),I=o.data[a]=function Xp(o,a,c,d,f,m){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,c,a,d,f);return null===o.firstChild&&(o.firstChild=I),null!==m&&(v?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I,I.prev=m)),I}(o,a,c,d,f),function rp(){return Rt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=c,m.value=d,m.attrs=f;const v=function Ro(){const o=Rt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Cs(m,!0),m}function vh(o,a,c,d){if(0===c)return-1;const f=a.length;for(let m=0;m<c;m++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function fs(o,a,c){lp(a);try{const d=o.viewQuery;null!==d&&mo(1,d,c);const f=o.template;null!==f&&Ww(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&$w(o,a),o.staticViewQueries&&mo(2,o.viewQuery,c);const m=o.components;null!==m&&function iT(o,a){for(let c=0;c<a.length;c++)pT(o,a[c])}(a,m)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[Bt]&=-5,cp()}}function tu(o,a,c,d){const f=a[Bt];if(128!=(128&f)){lp(a);try{np(a),function a_(o){return Rt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&Ww(o,a,c,2,d);const v=3==(3&f);if(v){const D=o.preOrderCheckHooks;null!==D&&cl(a,D,null)}else{const D=o.preOrderHooks;null!==D&&la(a,D,0,null),ul(a,0)}if(function FL(o){for(let a=O(o);null!==a;a=J(a)){if(!a[Zf])continue;const c=a[Qs];for(let d=0;d<c.length;d++){const f=c[d];512&f[Bt]||ll(f[bn],1),f[Bt]|=512}}}(a),function fT(o){for(let a=O(o);null!==a;a=J(a))for(let c=Vi;c<a.length;c++){const d=a[c],f=d[Qe];Mo(d)&&tu(f,d,f.template,d[Pn])}}(a),null!==o.contentQueries&&$w(o,a),v){const D=o.contentCheckHooks;null!==D&&cl(a,D)}else{const D=o.contentHooks;null!==D&&la(a,D,1),ul(a,1)}!function nT(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)eo(~f);else{const m=f,v=c[++d],C=c[++d];op(v,m),C(2,a[m])}}}finally{eo(-1)}}(o,a);const C=o.components;null!==C&&function Gw(o,a){for(let c=0;c<a.length;c++)Eh(o,a[c])}(a,C);const I=o.viewQuery;if(null!==I&&mo(2,I,d),v){const D=o.viewCheckHooks;null!==D&&cl(a,D)}else{const D=o.viewHooks;null!==D&&la(a,D,2),ul(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[Bt]&=-41,512&a[Bt]&&(a[Bt]&=-513,ll(a[bn],-1))}finally{cp()}}}function Ww(o,a,c,d,f){const m=Qi(),v=2&d;try{eo(-1),v&&a.length>Mt&&Yp(o,a,Mt,!1),Zi(v?2:0,f),c(d,f)}finally{eo(m),Zi(v?3:1,f)}}function nu(o,a,c){if(ad(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const v=o.data[m];v.contentQueries&&v.contentQueries(1,c[m],m)}}}function $n(o,a,c){i_()&&(function Jp(o,a,c,d){const f=c.directiveStart,m=c.directiveEnd;nl(c)&&function NL(o,a,c){const d=Ui(a,o),f=rT(c),m=o[gc],v=nm(o,dy(o,f,null,c.onPush?32:16,d,a,m,m.createRenderer(d,c),null,null,null));o[a.index]=v}(a,c,o.data[f+c.componentOffset]),o.firstCreatePass||No(c,a),ai(d,a);const v=c.initialInputs;for(let C=f;C<m;C++){const I=o.data[C],D=to(a,o,C,c);ai(D,a),null!==v&&tm(0,C-f,D,I,0,v),as(I)&&(Hi(c.index,a)[Pn]=to(a,o,C,c))}}(o,a,c,Ui(c,a)),64==(64&c.flags)&&Zw(o,a,c))}function ks(o,a,c=Ui){const d=a.localNames;if(null!==d){let f=a.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],C=-1===v?c(a,o):o[v];o[f++]=C}}}function rT(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=hy(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function hy(o,a,c,d,f,m,v,C,I,D){const M=Mt+d,F=M+f,q=function sT(o,a){const c=[];for(let d=0;d<a;d++)c.push(d<o?null:Ft);return c}(M,F),ee="function"==typeof D?D():D;return q[Qe]={type:o,blueprint:q,template:c,queries:null,viewQuery:C,declTNode:a,data:q.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:ee,incompleteFirstPass:!1}}function qw(o,a,c,d){const f=Ai(a);null===c?f.push(d):(f.push(c),o.firstCreatePass&&gT(o).push(d,f.length-1))}function fy(o,a,c,d){for(let f in o)if(o.hasOwnProperty(f)){c=null===c?{}:c;const m=o[f];null===d?Kw(c,a,f,m):d.hasOwnProperty(f)&&Kw(c,a,d[f],m)}return c}function Kw(o,a,c,d){o.hasOwnProperty(c)?o[c].push(a,d):o[c]=[a,d]}function qr(o,a,c,d,f,m,v,C){const I=Ui(a,c);let M,D=a.inputs;!C&&null!=D&&(M=D[d])?(im(o,c,M,d,f),nl(a)&&bh(c,a.index)):3&a.type&&(d=function lT(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,m.setProperty(I,d,f))}function bh(o,a){const c=Hi(a,o);16&c[Bt]||(c[Bt]|=32)}function Bl(o,a,c,d){if(i_()){const f=null===d?null:{"":-1},m=function PL(o,a){const c=o.directiveRegistry;let d=null,f=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];if(fh(a,v.selectors,!1))if(d||(d=[]),as(v))if(null!==v.findHostDirectiveDefs){const C=[];f=f||new Map,v.findHostDirectiveDefs(v,C,f),d.unshift(...C,v),gy(o,a,C.length)}else d.unshift(v),gy(o,a,0);else f=f||new Map,v.findHostDirectiveDefs?.(v,d,f),d.push(v)}return null===d?null:[d,f]}(o,c);let v,C;null===m?v=C=null:[v,C]=m,null!==v&&Yw(o,a,c,v,f,C),f&&function _y(o,a,c){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=c[a[f+1]];if(null==m)throw new oe(-301,!1);d.push(a[f],m)}}}(c,d,f)}c.mergedAttrs=Ss(c.mergedAttrs,c.attrs)}function Yw(o,a,c,d,f,m){for(let D=0;D<d.length;D++)Nc(No(c,a),o,d[D].type);!function Qw(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}(c,o.data.length,d.length);for(let D=0;D<d.length;D++){const M=d[D];M.providersResolver&&M.providersResolver(M)}let v=!1,C=!1,I=vh(o,a,d.length,null);for(let D=0;D<d.length;D++){const M=d[D];c.mergedAttrs=Ss(c.mergedAttrs,M.hostAttrs),dT(o,c,a,I,M),em(I,M,f),null!==M.contentQueries&&(c.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(c.flags|=64);const F=M.type.prototype;!v&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),v=!0),!C&&(F.ngOnChanges||F.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),C=!0),I++}!function aT(o,a,c){const f=a.directiveEnd,m=o.data,v=a.attrs,C=[];let I=null,D=null;for(let M=a.directiveStart;M<f;M++){const F=m[M],q=c?c.get(F):null,de=q?q.outputs:null;I=fy(F.inputs,M,I,q?q.inputs:null),D=fy(F.outputs,M,D,de);const Ne=null===I||null===v||Vl(a)?null:hT(I,M,v);C.push(Ne)}null!==I&&(I.hasOwnProperty("class")&&(a.flags|=8),I.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=I,a.outputs=D}(o,c,m)}function Zw(o,a,c){const d=c.directiveStart,f=c.directiveEnd,m=c.index,v=function l_(){return Rt.lFrame.currentDirectiveIndex}();try{eo(m);for(let C=d;C<f;C++){const I=o.data[C],D=a[C];Is(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&uT(I,D)}}finally{eo(-1),Is(v)}}function uT(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function gy(o,a,c){a.componentOffset=c,(o.components||(o.components=[])).push(a.index)}function em(o,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=o;as(a)&&(c[""]=o)}}function dT(o,a,c,d,f){o.data[d]=f;const m=f.factory||(f.factory=aa(f.type)),v=new dl(m,as(f),eu);o.blueprint[d]=v,c[d]=v,function my(o,a,c,d,f){const m=f.hostBindings;if(m){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const C=~a.index;(function wh(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(v)!=C&&v.push(C),v.push(c,d,m)}}(o,a,d,vh(o,c,f.hostVars,Ft),f)}function po(o,a,c,d,f,m){const v=Ui(o,a);!function yy(o,a,c,d,f,m,v){if(null==m)o.removeAttribute(a,f,c);else{const C=null==v?ge(m):v(m,d||"",f);o.setAttribute(a,f,C,c)}}(a[Ot],v,m,o.value,c,d,f)}function tm(o,a,c,d,f,m){const v=m[a];if(null!==v){const C=d.setInput;for(let I=0;I<v.length;){const D=v[I++],M=v[I++],F=v[I++];null!==C?d.setInput(c,F,D,M):c[M]=F}}}function hT(o,a,c){let d=null,f=0;for(;f<c.length;){const m=c[f];if(0!==m)if(5!==m){if("number"==typeof m)break;if(o.hasOwnProperty(m)){null===d&&(d=[]);const v=o[m];for(let C=0;C<v.length;C+=2)if(v[C]===a){d.push(m,v[C+1],c[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function Xw(o,a,c,d){return[o,!0,!1,a,null,0,d,c,null,null]}function Eh(o,a){const c=Hi(a,o);if(Mo(c)){const d=c[Qe];48&c[Bt]?tu(d,c,d.template,c[Pn]):c[ws]>0&&vy(c)}}function vy(o){for(let d=O(o);null!==d;d=J(d))for(let f=Vi;f<d.length;f++){const m=d[f];if(Mo(m))if(512&m[Bt]){const v=m[Qe];tu(v,m,v.template,m[Pn])}else m[ws]>0&&vy(m)}const c=o[Qe].components;if(null!==c)for(let d=0;d<c.length;d++){const f=Hi(c[d],o);Mo(f)&&f[ws]>0&&vy(f)}}function pT(o,a){const c=Hi(a,o),d=c[Qe];(function mT(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(d,c),fs(d,c,c[Pn])}function nm(o,a){return o[ss]?o[od][Fi]=a:o[ss]=a,o[od]=a,a}function by(o){for(;o;){o[Bt]|=32;const a=y(o);if(ld(o)&&!a)return o;o=a}return null}function iu(o,a,c,d=!0){const f=a[gc];f.begin&&f.begin();try{tu(o,a,o.template,c)}catch(v){throw d&&wy(a,v),v}finally{f.end&&f.end()}}function mo(o,a,c){ap(0),a(o,c)}function Ai(o){return o[Es]||(o[Es]=[])}function gT(o){return o.cleanup||(o.cleanup=[])}function wy(o,a){const c=o[qs],d=c?c.get(hh,null):null;d&&d.handleError(a)}function im(o,a,c,d,f){for(let m=0;m<c.length;){const v=c[m++],C=c[m++],I=a[v],D=o.data[v];null!==D.setInput?D.setInput(I,f,d,C):I[C]=f}}function rm(o,a,c){let d=c?o.styles:null,f=c?o.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?m=C:1==m?f=ke(f,C):2==m&&(d=ke(d,C+": "+a[++v]+";"))}c?o.styles=d:o.stylesWithoutHost=d,c?o.classes=f:o.classesWithoutHost=f}function xa(o,a,c,d,f=!1){for(;null!==c;){const m=a[c.index];if(null!==m&&d.push(Nn(m)),_i(m))for(let C=Vi;C<m.length;C++){const I=m[C],D=I[Qe].firstChild;null!==D&&xa(I[Qe],I,D,d)}const v=c.type;if(8&v)xa(o,a,c.child,d);else if(32&v){const C=b(c,a);let I;for(;I=C();)d.push(I)}else if(16&v){const C=Rl(a,c);if(Array.isArray(C))d.push(...C);else{const I=y(a[Li]);xa(I[Qe],I,C,d,!0)}}c=f?c.projectionNext:c.next}return d}class Da{get rootNodes(){const a=this._lView,c=a[Qe];return xa(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pn]}set context(a){this._lView[Pn]=a}get destroyed(){return 128==(128&this._lView[Bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[bn];if(_i(a)){const c=a[_c],d=c?c.indexOf(this):-1;d>-1&&(va(a,d),gl(c,d))}this._attachedToViewContainer=!1}ba(this._lView[Qe],this._lView)}onDestroy(a){qw(this._lView[Qe],this._lView,null,a)}markForCheck(){by(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bt]&=-65}reattach(){this._lView[Bt]|=64}detectChanges(){iu(this._lView[Qe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rp(o,a){Gc(o,a,a[Ot],2,null,null)}(this._lView[Qe],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=a}}class Hl extends Da{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;iu(a[Qe],a,a[Pn],!1)}checkNoChanges(){}get context(){return null}}class Ey extends Ia{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=ln(a);return new Ch(c,this.ngModule)}}function ru(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class _T{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){d=gt(d);const f=this.injector.get(a,ty,d);return f!==ty||c===ty?f:this.parentInjector.get(a,c,d)}}class Ch extends ww{get inputs(){return ru(this.componentDef.inputs)}get outputs(){return ru(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function $S(o){return o.map(zS).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,d,f){let m=(f=f||this.ngModule)instanceof Nl?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new _T(a,m):a,C=v.get(Iw,null);if(null===C)throw new oe(407,!1);const I=v.get(OS,null),D=C.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",F=d?function oT(o,a,c){return o.selectRootElement(a,c===R.ShadowDom)}(D,d,this.componentDef.encapsulation):Sr(D,M,function Cy(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(M)),q=this.componentDef.onPush?288:272,ee=hy(0,null,null,1,0,null,null,null,null,null),de=dy(null,ee,null,q,null,null,C,D,I,v,null);let Ne,je;lp(de);try{const at=this.componentDef;let bt,Ie=null;at.findHostDirectiveDefs?(bt=[],Ie=new Map,at.findHostDirectiveDefs(at,bt,Ie),bt.push(at)):bt=[at];const Lt=function xy(o,a){const c=o[Qe],d=Mt;return o[d]=a,K(c,d,2,"#host",null)}(de,F),An=function yT(o,a,c,d,f,m,v,C){const I=f[Qe];!function vT(o,a,c,d){for(const f of o)a.mergedAttrs=Ss(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(rm(a,a.mergedAttrs,!0),null!==c&&sh(d,c,a))}(d,o,a,v);const D=m.createRenderer(a,c),M=dy(f,rT(c),null,c.onPush?32:16,f[o.index],o,m,D,C||null,null,null);return I.firstCreatePass&&gy(I,o,d.length-1),nm(f,M),f[o.index]=M}(Lt,F,at,bt,de,C,D);je=pd(ee,Mt),F&&function wT(o,a,c,d){if(d)Tc(o,c,["ng-version",ey.full]);else{const{attrs:f,classes:m}=function Kp(o){const a=[],c=[];let d=1,f=2;for(;d<o.length;){let m=o[d];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++d]):8===f&&c.push(m);else{if(!hs(f))break;f=m}d++}return{attrs:a,classes:c}}(a.selectors[0]);f&&Tc(o,c,f),m&&m.length>0&&rh(o,c,m.join(" "))}}(D,at,F,d),void 0!==c&&function zl(o,a,c){const d=o.projection=[];for(let f=0;f<a.length;f++){const m=c[f];d.push(null!=m?Array.from(m):null)}}(je,this.ngContentSelectors,c),Ne=function bT(o,a,c,d,f,m){const v=oi(),C=f[Qe],I=Ui(v,f);Yw(C,f,v,c,null,d);for(let M=0;M<c.length;M++)ai(to(f,C,v.directiveStart+M,v),f);Zw(C,f,v),I&&ai(I,f);const D=to(f,C,v.directiveStart+v.componentOffset,v);if(o[Pn]=f[Pn]=D,null!==m)for(const M of m)M(D,a);return nu(C,v,o),D}(An,at,bt,Ie,de,[VL]),fs(ee,de,null)}finally{cp()}return new Iy(this.componentType,Ne,Fl(je,de),de,je)}}class Iy extends TS{constructor(a,c,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new Hl(f),this.componentType=a}setInput(a,c){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const m=this._rootLView;im(m[Qe],m,f,a,c),bh(m,this._tNode.index)}}get injector(){return new da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function VL(){const o=oi();wd(be()[Qe],o)}function Dy(o){let a=function su(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const d=[o];for(;a;){let f;if(as(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new oe(903,!1);f=a.\u0275dir}if(f){if(c){d.push(f);const v=o;v.inputs=Sy(o.inputs),v.declaredInputs=Sy(o.declaredInputs),v.outputs=Sy(o.outputs);const C=f.hostBindings;C&&HL(o,C);const I=f.viewQuery,D=f.contentQueries;if(I&&BL(o,I),D&&UL(o,D),Ve(o.inputs,f.inputs),Ve(o.declaredInputs,f.declaredInputs),Ve(o.outputs,f.outputs),as(f)&&f.data.animation){const M=o.data;M.animation=(M.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const C=m[v];C&&C.ngInherit&&C(o),C===Dy&&(c=!1)}}a=Object.getPrototypeOf(a)}!function ET(o){let a=0,c=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Ss(f.hostAttrs,c=Ss(c,f.hostAttrs))}}(d)}function Sy(o){return o===Q?{}:o===ae?[]:o}function BL(o,a){const c=o.viewQuery;o.viewQuery=c?(d,f)=>{a(d,f),c(d,f)}:a}function UL(o,a){const c=o.contentQueries;o.contentQueries=c?(d,f,m)=>{a(d,f,m),c(d,f,m)}:a}function HL(o,a){const c=o.hostBindings;o.hostBindings=c?(d,f)=>{a(d,f),c(d,f)}:a}function Ay(o){return!!nE(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function nE(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Os(o,a,c){return o[a]=c}function hr(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function rE(o,a,c,d){const f=be();return hr(f,ko(),a)&&(Xt(),po(hn(),f,o,a,c,d)),rE}function Ta(o,a,c,d){return hr(o,ko(),c)?a+ge(c)+d:Ft}function cm(o,a,c,d,f,m,v,C){const I=be(),D=Xt(),M=o+Mt,F=D.firstCreatePass?function oE(o,a,c,d,f,m,v,C,I){const D=a.consts,M=K(a,o,4,v||null,cs(D,C));Bl(a,c,M,cs(D,I)),wd(a,M);const F=M.tView=hy(2,M,d,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,D);return null!==a.queries&&(a.queries.template(a,M),F.queries=a.queries.embeddedTView(M)),M}(M,D,I,a,c,d,f,m,v):D.data[M];Cs(F,!1);const q=I[Ot].createComment("");Pp(D,I,q,F),ai(q,I),nm(I,I[M]=Xw(q,I,q,F)),Xs(F)&&$n(D,I,F),null!=v&&ks(I,F,C)}function lE(o){return function ls(o,a){return o[a]}(function Ic(){return Rt.lFrame.contextLView}(),Mt+o)}function ky(o,a,c){const d=be();return hr(d,ko(),a)&&qr(Xt(),hn(),d,o,a,d[Ot],c,!1),ky}function um(o,a,c,d,f){const v=f?"class":"style";im(o,c,a.inputs[v],v,d)}function Oy(o,a,c,d){const f=be(),m=Xt(),v=Mt+o,C=f[Ot],I=m.firstCreatePass?function WL(o,a,c,d,f,m){const v=a.consts,I=K(a,o,2,d,cs(v,f));return Bl(a,c,I,cs(v,m)),null!==I.attrs&&rm(I,I.attrs,!1),null!==I.mergedAttrs&&rm(I,I.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,I),I}(v,m,f,a,c,d):m.data[v],D=f[v]=Sr(C,a,function JD(){return Rt.lFrame.currentNamespace}()),M=Xs(I);return Cs(I,!0),sh(C,D,I),32!=(32&I.flags)&&Pp(m,f,D,I),0===function _d(){return Rt.lFrame.elementDepthCount}()&&ai(D,f),function n_(){Rt.lFrame.elementDepthCount++}(),M&&($n(m,f,I),nu(m,I,f)),null!==d&&ks(f,I),Oy}function dm(){let o=oi();Cc()?ip():(o=o.parent,Cs(o,!1));const a=o;!function yd(){Rt.lFrame.elementDepthCount--}();const c=Xt();return c.firstCreatePass&&(wd(c,o),ad(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Ed(o){return 0!=(8&o.flags)}(a)&&um(c,a,be(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Sc(o){return 0!=(16&o.flags)}(a)&&um(c,a,be(),a.stylesWithoutHost,!1),dm}function cE(o,a,c,d){return Oy(o,a,c,d),dm(),cE}function Ah(){return be()}function Gl(o){return!!o&&"function"==typeof o.then}function Ny(o){return!!o&&"function"==typeof o.subscribe}const dE=Ny;function Fy(o,a,c,d){const f=be(),m=Xt(),v=oi();return function Ly(o,a,c,d,f,m,v){const C=Xs(d),D=o.firstCreatePass&&gT(o),M=a[Pn],F=Ai(a);let q=!0;if(3&d.type||v){const Ne=Ui(d,a),je=v?v(Ne):Ne,at=F.length,bt=v?Lt=>v(Nn(Lt[d.index])):d.index;let Ie=null;if(!v&&C&&(Ie=function hE(o,a,c,d){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===c&&f[m+1]===d){const C=a[Es],I=f[m+2];return C.length>I?C[I]:null}"string"==typeof v&&(m+=2)}return null}(o,a,f,d.index)),null!==Ie)(Ie.__ngLastListenerFn__||Ie).__ngNextListenerFn__=m,Ie.__ngLastListenerFn__=m,q=!1;else{m=kT(d,a,M,m,!1);const Lt=c.listen(je,f,m);F.push(m,Lt),D&&D.push(f,bt,at,at+1)}}else m=kT(d,a,M,m,!1);const ee=d.outputs;let de;if(q&&null!==ee&&(de=ee[f])){const Ne=de.length;if(Ne)for(let je=0;je<Ne;je+=2){const An=a[de[je]][de[je+1]].subscribe(m),Vn=F.length;F.push(m,An),D&&D.push(f,d.index,Vn,-(Vn+1))}}}(m,f,f[Ot],v,o,a,d),Fy}function RT(o,a,c,d){try{return Zi(6,a,c),!1!==c(d)}catch(f){return wy(o,f),!1}finally{Zi(7,a,c)}}function kT(o,a,c,d,f){return function m(v){if(v===Function)return d;by(o.componentOffset>-1?Hi(o.index,a):a);let I=RT(a,c,d,v),D=m.__ngNextListenerFn__;for(;D;)I=RT(a,c,D,v)&&I,D=D.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Vy(o=1){return function XD(o){return(Rt.lFrame.contextLView=function B0(o,a){for(;o>0;)a=a[Ks],o--;return a}(o,Rt.lFrame.contextLView))[Pn]}(o)}function OT(o,a){let c=null;const d=function Rw(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(!(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===d?fh(o,m,!0):jS(d,m))return f}else c=f}return c}function fE(o){const a=be()[Li][gi];if(!a.projection){const d=a.projection=_l(o?o.length:1,null),f=d.slice();let m=a.child;for(;null!==m;){const v=o?OT(m,o):0;null!==v&&(f[v]?f[v].projectionNext=m:d[v]=m,f[v]=m),m=m.next}}}function pE(o,a=0,c){const d=be(),f=Xt(),m=K(f,Mt+o,16,null,c||null);null===m.projection&&(m.projection=a),ip(),32!=(32&m.flags)&&function Z0(o,a,c){Wc(a[Ot],0,a,c,Xd(o,c,a),D_(c.parent||a[gi],c,a))}(f,d,m)}function By(o,a,c,d,f){const m=be(),v=Ta(m,a,c,d);return v!==Ft&&qr(Xt(),hn(),m,o,v,m[Ot],f,!1),By}function Hy(o,a){return o<<17|a<<2}function ql(o){return o>>17&32767}function jy(o){return 2|o}function Kl(o){return(131068&o)>>2}function zy(o,a){return-131069&o|a<<2}function yE(o){return 1|o}function BT(o,a,c,d,f){const m=o[c+1],v=null===a;let C=d?ql(m):Kl(m),I=!1;for(;0!==C&&(!1===I||v);){const M=o[C+1];JL(o[C],a)&&(I=!0,o[C+1]=d?yE(M):jy(M)),C=d?ql(M):Kl(M)}I&&(o[c+1]=d?jy(m):yE(m))}function JL(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&We(o,a)>=0}function vE(o,a,c){return go(o,a,c,!1),vE}function bE(o,a){return go(o,a,null,!0),bE}function go(o,a,c,d){const f=be(),m=Xt(),v=function us(o){const a=Rt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}(2);m.firstUpdatePass&&function qT(o,a,c,d){const f=o.data;if(null===f[c+1]){const m=f[Qi()],v=function WT(o,a){return a>=o.expandoStartIndex}(o,c);(function QT(o,a){return 0!=(o.flags&(a?8:16))})(m,d)&&null===a&&!v&&(a=!1),a=function lV(o,a,c,d){const f=function bd(o){const a=Rt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(c=fm(c=wE(null,o,a,c,d),a.attrs,d),m=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(c=wE(f,o,a,c,d),null===m){let I=function cV(o,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==Kl(d))return o[ql(d)]}(o,a,d);void 0!==I&&Array.isArray(I)&&(I=wE(null,o,a,I[1],d),I=fm(I,a.attrs,d),function uV(o,a,c,d){o[ql(c?a.classBindings:a.styleBindings)]=d}(o,a,d,I))}else m=function dV(o,a,c){let d;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)d=fm(d,o[m].hostAttrs,c);return fm(d,a.attrs,c)}(o,a,d)}return void 0!==m&&(d?a.residualClasses=m:a.residualStyles=m),c}(f,m,a,d),function QL(o,a,c,d,f,m){let v=m?a.classBindings:a.styleBindings,C=ql(v),I=Kl(v);o[d]=c;let M,D=!1;if(Array.isArray(c)?(M=c[1],(null===M||We(c,M)>0)&&(D=!0)):M=c,f)if(0!==I){const q=ql(o[C+1]);o[d+1]=Hy(q,C),0!==q&&(o[q+1]=zy(o[q+1],d)),o[C+1]=function YL(o,a){return 131071&o|a<<17}(o[C+1],d)}else o[d+1]=Hy(C,0),0!==C&&(o[C+1]=zy(o[C+1],d)),C=d;else o[d+1]=Hy(I,0),0===C?C=d:o[I+1]=zy(o[I+1],d),I=d;D&&(o[d+1]=jy(o[d+1])),BT(o,M,d,!0),BT(o,M,d,!1),function XL(o,a,c,d,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&We(m,a)>=0&&(c[d+1]=yE(c[d+1]))}(a,M,o,d,m),v=Hy(C,I),m?a.classBindings=v:a.styleBindings=v}(f,m,a,c,v,d)}}(m,o,v,d),a!==Ft&&hr(f,v,a)&&function YT(o,a,c,d,f,m,v,C){if(!(3&a.type))return;const I=o.data,D=I[C+1],M=function ZL(o){return 1==(1&o)}(D)?ZT(I,a,c,f,Kl(D),v):void 0;$y(M)||($y(m)||function KL(o){return 2==(2&o)}(D)&&(m=ZT(I,null,c,f,C,v)),function R_(o,a,c,d,f){if(a)f?o.addClass(c,d):o.removeClass(c,d);else{let m=-1===d.indexOf("-")?void 0:Ji.DashCase;null==f?o.removeStyle(c,d,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Ji.Important),o.setStyle(c,d,f,m))}}(d,v,Ao(Qi(),c),f,m))}(m,m.data[Qi()],f,f[Ot],o,f[v+1]=function pV(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=_e(zi(o)))),o}(a,c),d,v)}function wE(o,a,c,d,f){let m=null;const v=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<v&&(m=a[C],d=fm(d,m.hostAttrs,f),m!==o);)C++;return null!==o&&(c.directiveStylingLast=C),d}function fm(o,a,c){const d=c?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Wt(o,v,!!c||a[++m]))}return void 0===o?null:o}function ZT(o,a,c,d,f,m){const v=null===a;let C;for(;f>0;){const I=o[f],D=Array.isArray(I),M=D?I[1]:I,F=null===M;let q=c[f+1];q===Ft&&(q=F?ae:void 0);let ee=F?ro(q,d):M===d?q:void 0;if(D&&!$y(ee)&&(ee=ro(I,d)),$y(ee)&&(C=ee,v))return C;const de=o[f+1];f=v?ql(de):Kl(de)}if(null!==a){let I=m?a.residualClasses:a.residualStyles;null!=I&&(C=ro(I,d))}return C}function $y(o){return void 0!==o}function XT(o,a=""){const c=be(),d=Xt(),f=o+Mt,m=d.firstCreatePass?K(d,f,1,a,null):d.data[f],v=c[f]=function ct(o,a){return o.createText(a)}(c[Ot],a);Pp(d,c,v,m),Cs(m,!1)}function EE(o){return Gy("",o,""),EE}function Gy(o,a,c){const d=be(),f=Ta(d,o,a,c);return f!==Ft&&function Kr(o,a,c){const d=Ao(a,o);!function Nt(o,a,c){o.setValue(a,c)}(o[Ot],d,c)}(d,Qi(),f),Gy}function IE(o,a,c){const d=be();return hr(d,ko(),a)&&qr(Xt(),hn(),d,o,a,d[Ot],c,!0),IE}const cu=void 0;var PV=["en",[["a","p"],["AM","PM"],cu],[["AM","PM"],cu,cu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cu,"{1} 'at' {0}",cu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function OV(o){const c=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Rh={};function xE(o){const a=function NV(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=_A(a);if(c)return c;const d=a.split("-")[0];if(c=_A(d),c)return c;if("en"===d)return PV;throw new oe(701,!1)}function gA(o){return xE(o)[wt.PluralCase]}function _A(o){return o in Rh||(Rh[o]=St.ng&&St.ng.common&&St.ng.common.locales&&St.ng.common.locales[o]),Rh[o]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const kh="en-US";let yA=kh;function Vh(o,a,c,d,f){if(o=Y(o),Array.isArray(o))for(let m=0;m<o.length;m++)Vh(o[m],a,c,d,f);else{const m=Xt(),v=be();let C=ho(o)?o:Y(o.provide),I=vw(o);const D=oi(),M=1048575&D.providerIndexes,F=D.directiveStart,q=D.providerIndexes>>20;if(ho(o)||!o.multi){const ee=new dl(I,f,eu),de=tv(C,a,f?M:M+q,F);-1===de?(Nc(No(D,v),m,C),bm(m,o,a.length),a.push(C),D.directiveStart++,D.directiveEnd++,f&&(D.providerIndexes+=1048576),c.push(ee),v.push(ee)):(c[de]=ee,v[de]=ee)}else{const ee=tv(C,a,M+q,F),de=tv(C,a,M,M+q),je=de>=0&&c[de];if(f&&!je||!f&&!(ee>=0&&c[ee])){Nc(No(D,v),m,C);const at=function WE(o,a,c,d,f){const m=new dl(o,c,eu);return m.multi=[],m.index=a,m.componentProviders=0,GE(m,f,d&&!c),m}(f?WA:GA,c.length,f,d,I);!f&&je&&(c[de].providerFactory=at),bm(m,o,a.length,0),a.push(C),D.directiveStart++,D.directiveEnd++,f&&(D.providerIndexes+=1048576),c.push(at),v.push(at)}else bm(m,o,ee>-1?ee:de,GE(c[f?de:ee],I,!f&&d));!f&&d&&je&&c[de].componentProviders++}}}function bm(o,a,c,d){const f=ho(a),m=function Qc(o){return!!o.useClass}(a);if(f||m){const I=(m?Y(a.useClass):a).prototype.ngOnDestroy;if(I){const D=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const M=D.indexOf(c);-1===M?D.push(c,[d,I]):D[M+1].push(d,I)}else D.push(c,I)}}}function GE(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function tv(o,a,c,d){for(let f=c;f<d;f++)if(a[f]===o)return f;return-1}function GA(o,a,c,d){return nv(this.multi,[])}function WA(o,a,c,d){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=to(c,c[Qe],this.providerFactory.index,d);m=C.slice(0,v),nv(f,m);for(let I=v;I<C.length;I++)m.push(C[I])}else m=[],nv(f,m);return m}function nv(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function wm(o,a=[]){return c=>{c.providersResolver=(d,f)=>function $E(o,a,c){const d=Xt();if(d.firstCreatePass){const f=as(o);Vh(c,d.data,d.blueprint,f,!0),Vh(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class hu{}class iv{}function XV(o,a){return new qA(o,a??null)}class qA extends hu{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ey(this);const d=Yi(a);this._bootstrapComponents=fo(d.bootstrap),this._r3Injector=KS(a,c,[{provide:hu,useValue:this},{provide:Ia,useValue:this.componentFactoryResolver}],_e(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class qE extends iv{constructor(a){super(),this.moduleType=a}create(a){return new qA(this.moduleType,a)}}class JV extends hu{constructor(a,c,d){super(),this.componentFactoryResolver=new Ey(this),this.instance=null;const f=new _w([...a,{provide:hu,useValue:this},{provide:Ia,useValue:this.componentFactoryResolver}],c||zp(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function KE(o,a,c=null){return new JV(o,a,c).injector}let eB=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const d=fw(0,c.type),f=d.length>0?KE([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,f)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=Ye({token:o,providedIn:"environment",factory:()=>new o(Fe(Nl))}),o})();function KA(o){o.getStandaloneInjector=a=>a.get(eB).getOrCreateStandaloneInjector(o)}function eM(o,a,c){const d=yi()+o,f=be();return f[d]===Ft?Os(f,d,c?a.call(c):a()):function am(o,a){return o[a]}(f,d)}function tM(o,a,c,d){return function iM(o,a,c,d,f,m){const v=a+c;return hr(o,v,f)?Os(o,v+1,m?d.call(m,f):d(f)):function Cm(o,a){const c=o[a];return c===Ft?void 0:c}(o,v+1)}(be(),yi(),o,a,c,d)}function ov(o){return a=>{setTimeout(o,void 0,a)}}const Xo=class sv extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let f=a,m=c||(()=>null),v=d;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),m=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(m=ov(m),f&&(f=ov(f)),v&&(v=ov(v)));const C=super.subscribe({next:f,error:m,complete:v});return a instanceof H.w0&&a.add(C),C}};function pB(){return this._results[Symbol.iterator]()}class rC{get changes(){return this._changes||(this._changes=new Xo)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=rC.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=pB)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const f=function Ur(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Ip(o,a,c){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],m=a[d];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Im=(()=>{class o{}return o.__NG_ELEMENT_ID__=_B,o})();const mB=Im,gB=class extends mB{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(a,c){const d=this._declarationTContainer.tView,f=dy(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,c||null);f[Ys]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Zn];return null!==v&&(f[Zn]=v.createEmbeddedView(d)),fs(d,f,a),new Da(f)}};function _B(){return av(oi(),be())}function av(o,a){return 4&o.type?new gB(a,o,Fl(o,a)):null}let lv=(()=>{class o{}return o.__NG_ELEMENT_ID__=yB,o})();function yB(){return cM(oi(),be())}const vB=lv,aM=class extends vB{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return Fl(this._hostTNode,this._hostLView)}get injector(){return new da(this._hostTNode,this._hostLView)}get parentInjector(){const a=ua(this._hostTNode,this._hostLView);if(fl(a)){const c=pl(a,this._hostLView),d=Mc(a);return new da(c[Qe].data[d+8],c)}return new da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=lM(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-Vi}createEmbeddedView(a,c,d){let f,m;"number"==typeof d?f=d:null!=d&&(f=d.index,m=d.injector);const v=a.createEmbeddedView(c||{},m);return this.insert(v,f),v}createComponent(a,c,d,f,m){const v=a&&!function Br(o){return"function"==typeof o}(a);let C;if(v)C=c;else{const F=c||{};C=F.index,d=F.injector,f=F.projectableNodes,m=F.environmentInjector||F.ngModuleRef}const I=v?a:new Ch(ln(a)),D=d||this.parentInjector;if(!m&&null==I.ngModule){const q=(v?D:this.parentInjector).get(Nl,null);q&&(m=q)}const M=I.create(D,f,void 0,m);return this.insert(M.hostView,C),M}insert(a,c){const d=a._lView,f=d[Qe];if(function P0(o){return _i(o[bn])}(d)){const M=this.indexOf(a);if(-1!==M)this.detach(M);else{const F=d[bn],q=new aM(F,F[gi],F[bn]);q.detach(q.indexOf(a))}}const m=this._adjustIndex(c),v=this._lContainer;!function kp(o,a,c,d){const f=Vi+d,m=c.length;d>0&&(c[f-1][Fi]=a),d<m-Vi?(a[Fi]=c[f],w_(c,Vi+d,a)):(c.push(a),a[Fi]=null),a[bn]=c;const v=a[Ys];null!==v&&c!==v&&function Op(o,a){const c=o[Qs];a[Li]!==a[bn][bn][Li]&&(o[Zf]=!0),null===c?o[Qs]=[a]:c.push(a)}(v,a);const C=a[Zn];null!==C&&C.insertView(o),a[Bt]|=64}(f,d,v,m);const C=A_(m,v),I=d[Ot],D=nh(I,v[sa]);return null!==D&&function Go(o,a,c,d,f,m){d[rs]=f,d[gi]=a,Gc(o,d,c,1,f,m)}(f,v[gi],I,d,D,C),a.attachToViewContainerRef(),w_(sC(v),m,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=lM(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=va(this._lContainer,c);d&&(gl(sC(this._lContainer),c),ba(d[Qe],d))}detach(a){const c=this._adjustIndex(a,-1),d=va(this._lContainer,c);return d&&null!=gl(sC(this._lContainer),c)?new Da(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function lM(o){return o[_c]}function sC(o){return o[_c]||(o[_c]=[])}function cM(o,a){let c;const d=a[o.index];if(_i(d))c=d;else{let f;if(8&o.type)f=Nn(d);else{const m=a[Ot];f=m.createComment("");const v=Ui(o,a);wa(m,nh(m,v),f,function K0(o,a){return o.nextSibling(a)}(m,v),!1)}a[o.index]=c=Xw(d,a,f,o),nm(a,c)}return new aM(c,o,a)}class xm{constructor(a){this.queryList=a,this.matches=null}clone(){return new xm(this.queryList)}setDirty(){this.queryList.setDirty()}}class cv{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let m=0;m<d;m++){const v=c.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new cv(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==Sm(a,c).matches&&this.queries[c].setDirty()}}class yo{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class Dm{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(a,f);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new Dm(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Hh{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new Hh(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(a,c,oC(c,m)),this.matchTNodeWithReadOption(a,c,Sd(c,a,m,!1,!1))}else d===Im?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Sd(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Ko||f===lv||f===Im&&4&c.type)this.addMatch(c.index,-2);else{const m=Sd(c,a,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function oC(o,a){const c=o.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function Ra(o,a,c,d){return-1===c?function aC(o,a){return 11&o.type?Fl(o,a):4&o.type?av(o,a):null}(a,o):-2===c?function uv(o,a,c){return c===Ko?Fl(a,o):c===Im?av(a,o):c===lv?cM(a,o):void 0}(o,a,d):to(o,o[Qe],c,a)}function uM(o,a,c,d){const f=a[Zn].queries[d];if(null===f.matches){const m=o.data,v=c.matches,C=[];for(let I=0;I<v.length;I+=2){const D=v[I];C.push(D<0?null:Ra(a,m[D],v[I+1],c.metadata.read))}f.matches=C}return f.matches}function jh(o,a,c,d){const f=o.queries.getByIndex(c),m=f.matches;if(null!==m){const v=uM(o,a,f,c);for(let C=0;C<m.length;C+=2){const I=m[C];if(I>0)d.push(v[C/2]);else{const D=m[C+1],M=a[-I];for(let F=Vi;F<M.length;F++){const q=M[F];q[Ys]===q[bn]&&jh(q[Qe],q,D,d)}if(null!==M[Qs]){const F=M[Qs];for(let q=0;q<F.length;q++){const ee=F[q];jh(ee[Qe],ee,D,d)}}}}}return d}function dM(o){const a=be(),c=Xt(),d=c_();ap(d+1);const f=Sm(c,d);if(o.dirty&&function md(o){return 4==(4&o[Bt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?jh(c,a,d,[]):uM(c,a,f,d);o.reset(m,Cw),o.notifyOnChanges()}return!0}return!1}function dv(o,a,c){const d=Xt();d.firstCreatePass&&(pu(d,new yo(o,a,c),-1),2==(2&a)&&(d.staticViewQueries=!0)),fv(d,be(),a)}function hM(o,a,c,d){const f=Xt();if(f.firstCreatePass){const m=oi();pu(f,new yo(a,c,d),m.index),function lC(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}fv(f,be(),c)}function hv(){return function bB(o,a){return o[Zn].queries[a].queryList}(be(),c_())}function fv(o,a,c){const d=new rC(4==(4&c));qw(o,a,d,d.destroy),null===a[Zn]&&(a[Zn]=new cv),a[Zn].queries.push(new xm(d))}function pu(o,a,c){null===o.queries&&(o.queries=new Dm),o.queries.track(new Hh(a,c))}function Sm(o,a){return o.queries.getByIndex(a)}function cC(o,a){return av(o,a)}function Tm(o){return!!Yi(o)}function gv(...o){}const DC=new _n("Application Initializer");let Rm=(()=>{class o{constructor(c){this.appInits=c,this.resolve=gv,this.reject=gv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Gl(m))c.push(m);else if(dE(m)){const v=new Promise((C,I)=>{m.subscribe({complete:C,error:I})});c.push(v)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(Fe(DC,8))},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const SC=new _n("AppId",{providedIn:"root",factory:function TC(){return`${_v()}${_v()}${_v()}`}});function _v(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const AC=new _n("Platform Initializer"),AM=new _n("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),MM=new _n("AnimationModuleType");let RM=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const km=new _n("LocaleId",{providedIn:"root",factory:()=>Ze(km,rt.Optional|rt.SkipSelf)||function kM(){return typeof $localize<"u"&&$localize.locale||kh}()}),OM=new _n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class PM{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let NM=(()=>{class o{compileModuleSync(c){return new qE(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=fo(Yi(c).declarations).reduce((v,C)=>{const I=ln(C);return I&&v.push(new Ch(I)),v},[]);return new PM(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const VM=(()=>Promise.resolve(0))();function OC(o){typeof Zone>"u"?VM.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class ps{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xo(!1),this.onMicrotaskEmpty=new Xo(!1),this.onStable=new Xo(!1),this.onError=new Xo(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function BM(){let o=St.requestAnimationFrame,a=St.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function PC(o){const a=()=>{!function BB(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(St,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,vv(o),o.isCheckStableRunning=!0,yv(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),vv(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,m,v,C)=>{try{return bv(o),c.invokeTask(f,m,v,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),zh(o)}},onInvoke:(c,d,f,m,v,C,I)=>{try{return bv(o),c.invoke(f,m,v,C,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),zh(o)}},onHasTask:(c,d,f,m)=>{c.hasTask(f,m),d===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,vv(o),yv(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,f,m)=>(c.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ps.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(ps.isInAngularZone())throw new oe(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,a,VB,gv,gv);try{return m.runTask(v,c,d)}finally{m.cancelTask(v)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const VB={};function yv(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function vv(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function bv(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function zh(o){o._nesting--,yv(o)}class NC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xo,this.onMicrotaskEmpty=new Xo,this.onStable=new Xo,this.onError=new Xo}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,f){return a.apply(c,d)}}const wv=new _n(""),FC=new _n("");let VC,LC=(()=>{class o{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,VC||(function UB(o){VC=o}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ps.assertNotInAngularZone(),OC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())OC(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(Fe(ps),Fe(HM),Fe(FC))},o.\u0275prov=Ye({token:o,factory:o.\u0275fac}),o})(),HM=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return VC?.findTestabilityInTree(this,c,d)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const bo=!1;let Oa=null;const Ev=new _n("AllowMultipleToken"),Om=new _n("PlatformDestroyListeners"),BC=new _n("appBootstrapListener");class Cv{constructor(a,c){this.name=a,this.token=c}}function zC(o,a,c=[]){const d=`Platform: ${a}`,f=new _n(d);return(m=[])=>{let v=Iv();if(!v||v.injector.get(Ev,!1)){const C=[...c,...m,{provide:f,useValue:!0}];o?o(C):function HC(o){if(Oa&&!Oa.get(Ev,!1))throw new oe(400,!1);Oa=o;const a=o.get($h);(function Pa(o){const a=o.get(AC,null);a&&a.forEach(c=>c())})(o)}(function GC(o=[],a){return Xc.create({name:a,providers:[{provide:Y_,useValue:"platform"},{provide:Om,useValue:new Set([()=>Oa=null])},...o]})}(C,d))}return function $C(o){const a=Iv();if(!a)throw new oe(401,!1);return a}()}}function Iv(){return Oa?.get($h)??null}let $h=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function ea(o,a){let c;return c="noop"===o?new NC:("zone.js"===o?void 0:o)||new ps(a),c}(d?.ngZone,function WC(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),m=[{provide:ps,useValue:f}];return f.run(()=>{const v=Xc.create({providers:m,parent:this.injector,name:c.moduleType.name}),C=c.create(v),I=C.injector.get(hh,null);if(!I)throw new oe(402,!1);return f.runOutsideAngular(()=>{const D=f.onError.subscribe({next:M=>{I.handleError(M)}});C.onDestroy(()=>{Pm(this._modules,C),D.unsubscribe()})}),function xv(o,a,c){try{const d=c();return Gl(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(I,f,()=>{const D=C.injector.get(Rm);return D.runInitializers(),D.donePromise.then(()=>(function vA(o){Ke(o,"Expected localeId to be defined"),"string"==typeof o&&(yA=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(km,kh)||kh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(c,d=[]){const f=$i({},d);return function UC(o,a,c){const d=new qE(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(Ns);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new oe(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Om,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(Fe(Xc))},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function $i(o,a){return Array.isArray(a)?a.reduce($i,o):{...o,...a}}let Ns=(()=>{class o{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,d,f){this._zone=c,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new L.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new L.y(C=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{ps.assertNotInAngularZone(),OC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const D=this._zone.onUnstable.subscribe(()=>{ps.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{I.unsubscribe(),D.unsubscribe()}});this.isStable=(0,ce.T)(m,v.pipe((0,ve.B)()))}bootstrap(c,d){const f=c instanceof ww;if(!this._injector.get(Rm).done){!f&&Cr(c);throw new oe(405,bo)}let v;v=f?c:this._injector.get(Ia).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const C=function jM(o){return o.isBoundToModule}(v)?void 0:this._injector.get(hu),D=v.create(Xc.NULL,[],d||v.selector,C),M=D.location.nativeElement,F=D.injector.get(wv,null);return F?.registerApplication(M),D.onDestroy(()=>{this.detachView(D.hostView),Pm(this.components,D),F?.unregisterApplication(M)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;Pm(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(BC,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Pm(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new oe(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)(Fe(ps),Fe(Nl),Fe(hh))},o.\u0275prov=Ye({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Pm(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}function YC(){return!1}let ZC=(()=>{class o{}return o.__NG_ELEMENT_ID__=QC,o})();function QC(o){return function Nm(o,a,c){if(nl(o)&&!c){const d=Hi(o.index,a);return new Da(d,d)}return 47&o.type?new Da(a[Li],a):null}(oi(),be(),16==(16&o))}class QM{constructor(){}supports(a){return Ay(a)}create(a){return new XM(a)}}const eI=(o,a)=>a;class XM{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||eI}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,f=0,m=null;for(;c||d;){const v=!d||c&&c.currentIndex<jm(d,f,m)?c:d,C=jm(v,f,m),I=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(c=c._next,null==v.previousIndex)f++;else{m||(m=[]);const D=C-f,M=I-f;if(D!=M){for(let q=0;q<D;q++){const ee=q<m.length?m[q]:m[q]=0,de=ee+q;M<=de&&de<D&&(m[q]=ee+1)}m[v.previousIndex]=M-D}}C!==I&&a(v,C,I)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Ay(a))throw new oe(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,v,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],v=this._trackByFn(C,m),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,m,v,C)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,v,C),d=!0),c=c._next}else f=0,function GL(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Symbol.iterator]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,C=>{v=this._trackByFn(f,C),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,C,v,f)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,v,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,f)):a=this._addAfter(new Av(c,d),m,f),a}_verifyReinsertion(a,c,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new tI),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tI),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Av{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Hm{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class tI{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new Hm,this.map.set(c,d)),d.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jm(o,a,c){const d=o.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+a+f}class nI{constructor(){}supports(a){return a instanceof Map||nE(a)}create(){return new $B}}class $B{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||nE(a)))throw new oe(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const d=new GB(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class GB{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function JM(){return new iI([new QM])}let iI=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||JM()),deps:[[o,new bl,new Hr]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new oe(901,!1)}}return o.\u0275prov=Ye({token:o,providedIn:"root",factory:JM}),o})();function eR(){return new rI([new nI])}let rI=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||eR()),deps:[[o,new bl,new Hr]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new oe(901,!1)}}return o.\u0275prov=Ye({token:o,providedIn:"root",factory:eR}),o})();const nR=zC(null,"core",[]);let Mv=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(Fe(Ns))},o.\u0275mod=td({type:o}),o.\u0275inj=kn({}),o})();function Kh(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(mt,xe,B)=>{B.d(xe,{Z:()=>et});var u=B(2090),H=B(4859),L=B(9681),ce=B(1877);class ve{constructor(oe,De){this._delegate=oe,this.firebase=De,(0,L._addComponent)(oe,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(oe){this._delegate.automaticDataCollectionEnabled=oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(oe=>{this._delegate.checkDestroyed(),oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(oe,De=L._DEFAULT_ENTRY_NAME){var ge;this._delegate.checkDestroyed();const Se=this._delegate.container.getProvider(oe);return!Se.isInitialized()&&"EXPLICIT"===(null===(ge=Se.getComponent())||void 0===ge?void 0:ge.instantiationMode)&&Se.initialize(),Se.getImmediate({identifier:De})}_removeServiceInstance(oe,De=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(oe).clearInstance(De)}_addComponent(oe){(0,L._addComponent)(this._delegate,oe)}_addOrOverwriteComponent(oe){(0,L._addOrOverwriteComponent)(this._delegate,oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ve=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ke(){const tt=function _e(tt){const oe={},De={__esModule:!0,initializeApp:function Te(X,te={}){const fe=L.initializeApp(X,te);if((0,u.r3)(oe,fe.name))return oe[fe.name];const ze=new tt(fe,De);return oe[fe.name]=ze,ze},app:Se,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function ye(X){const te=X.name,fe=te.replace("-compat","");if(L._registerComponent(X)&&"PUBLIC"===X.type){const ze=(Le=Se())=>{if("function"!=typeof Le[fe])throw Ve.create("invalid-app-argument",{appName:te});return Le[fe]()};void 0!==X.serviceProps&&(0,u.ZB)(ze,X.serviceProps),De[fe]=ze,tt.prototype[fe]=function(...Le){return this._getService.bind(this,te).apply(this,X.multipleInstances?Le:[])}}return"PUBLIC"===X.type?De[fe]:null},removeApp:function ge(X){delete oe[X]},useAsService:function Be(X,te){return"serverAuth"===te?null:te},modularAPIs:L}};function Se(X){if(!(0,u.r3)(oe,X=X||L._DEFAULT_ENTRY_NAME))throw Ve.create("no-app",{appName:X});return oe[X]}return De.default=De,Object.defineProperty(De,"apps",{get:function Ee(){return Object.keys(oe).map(X=>oe[X])}}),Se.App=tt,De}(ve);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:ke,extendNamespace:function oe(De){(0,u.ZB)(tt,De)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),tt}(),$=new ce.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const et=z;!function Me(tt){(0,L.registerVersion)("@firebase/app-compat","0.2.7",tt)}()},9681:(mt,xe,B)=>{B.r(xe),B.d(xe,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Oi,_DEFAULT_ENTRY_NAME:()=>Pe,_addComponent:()=>mn,_addOrOverwriteComponent:()=>_t,_apps:()=>Ke,_clearComponents:()=>kn,_components:()=>Je,_getProvider:()=>Ye,_registerComponent:()=>lt,_removeServiceInstance:()=>rn,deleteApp:()=>ns,getApp:()=>qi,getApps:()=>Lr,initializeApp:()=>Fr,onLog:()=>rt,registerVersion:()=>Pi,setLogLevel:()=>Ki});var u=B(5861),H=B(4859),L=B(1877),ce=B(2090),ve=B(8766);class ne{constructor(pe){this.container=pe}getPlatformInfoString(){return this.container.getProviders().map(Ze=>{if(function Ve(Fe){return"VERSION"===Fe.getComponent()?.type}(Ze)){const gt=Ze.getImmediate();return`${gt.library}/${gt.version}`}return null}).filter(Ze=>Ze).join(" ")}}const _e="@firebase/app",z=new L.Yd("@firebase/app"),Pe="[DEFAULT]",Oe={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ke=new Map,Je=new Map;function mn(Fe,pe){try{Fe.container.addComponent(pe)}catch(Ze){z.debug(`Component ${pe.name} failed to register with FirebaseApp ${Fe.name}`,Ze)}}function _t(Fe,pe){Fe.container.addOrOverwriteComponent(pe)}function lt(Fe){const pe=Fe.name;if(Je.has(pe))return z.debug(`There were multiple attempts to register component ${pe}.`),!1;Je.set(pe,Fe);for(const Ze of Ke.values())mn(Ze,Fe);return!0}function Ye(Fe,pe){const Ze=Fe.container.getProvider("heartbeat").getImmediate({optional:!0});return Ze&&Ze.triggerHeartbeat(),Fe.container.getProvider(pe)}function rn(Fe,pe,Ze=Pe){Ye(Fe,pe).clearInstance(Ze)}function kn(){Je.clear()}const an=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hi{constructor(pe,Ze,gt){this._isDeleted=!1,this._options=Object.assign({},pe),this._config=Object.assign({},Ze),this._name=Ze.name,this._automaticDataCollectionEnabled=Ze.automaticDataCollectionEnabled,this._container=gt,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this.checkDestroyed(),this._automaticDataCollectionEnabled=pe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(pe){this._isDeleted=pe}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}const Oi="9.19.1";function Fr(Fe,pe={}){let Ze=Fe;"object"!=typeof pe&&(pe={name:pe});const gt=Object.assign({name:Pe,automaticDataCollectionEnabled:!1},pe),Tt=gt.name;if("string"!=typeof Tt||!Tt)throw an.create("bad-app-name",{appName:String(Tt)});if(Ze||(Ze=(0,ce.aH)()),!Ze)throw an.create("no-options");const Qt=Ke.get(Tt);if(Qt){if((0,ce.vZ)(Ze,Qt.options)&&(0,ce.vZ)(gt,Qt.config))return Qt;throw an.create("duplicate-app",{appName:Tt})}const jn=new H.H0(Tt);for(const U of Je.values())jn.addComponent(U);const j=new hi(Ze,gt,jn);return Ke.set(Tt,j),j}function qi(Fe=Pe){const pe=Ke.get(Fe);if(!pe&&Fe===Pe)return Fr();if(!pe)throw an.create("no-app",{appName:Fe});return pe}function Lr(){return Array.from(Ke.values())}function ns(Fe){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,u.Z)(function*(Fe){const pe=Fe.name;Ke.has(pe)&&(Ke.delete(pe),yield Promise.all(Fe.container.getProviders().map(Ze=>Ze.delete())),Fe.isDeleted=!0)})).apply(this,arguments)}function Pi(Fe,pe,Ze){var gt;let Tt=null!==(gt=Oe[Fe])&&void 0!==gt?gt:Fe;Ze&&(Tt+=`-${Ze}`);const Qt=Tt.match(/\s|\//),jn=pe.match(/\s|\//);if(Qt||jn){const j=[`Unable to register library "${Tt}" with version "${pe}":`];return Qt&&j.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),Qt&&jn&&j.push("and"),jn&&j.push(`version name "${pe}" contains illegal characters (whitespace or "/")`),void z.warn(j.join(" "))}lt(new H.wA(`${Tt}-version`,()=>({library:Tt,version:pe}),"VERSION"))}function rt(Fe,pe){if(null!==Fe&&"function"!=typeof Fe)throw an.create("invalid-log-argument");(0,L.Am)(Fe,pe)}function Ki(Fe){(0,L.Ub)(Fe)}const br="firebase-heartbeat-database",fi=1,ri="firebase-heartbeat-store";let wr=null;function St(){return wr||(wr=(0,ve.X3)(br,fi,{upgrade:(Fe,pe)=>{0===pe&&Fe.createObjectStore(ri)}}).catch(Fe=>{throw an.create("idb-open",{originalErrorMessage:Fe.message})})),wr}function Dt(){return(Dt=(0,u.Z)(function*(Fe){try{return(yield St()).transaction(ri).objectStore(ri).get(pi(Fe))}catch(pe){if(pe instanceof ce.ZR)z.warn(pe.message);else{const Ze=an.create("idb-get",{originalErrorMessage:pe?.message});z.warn(Ze.message)}}})).apply(this,arguments)}function Tn(Fe,pe){return On.apply(this,arguments)}function On(){return(On=(0,u.Z)(function*(Fe,pe){try{const gt=(yield St()).transaction(ri,"readwrite");return yield gt.objectStore(ri).put(pe,pi(Fe)),gt.done}catch(Ze){if(Ze instanceof ce.ZR)z.warn(Ze.message);else{const gt=an.create("idb-set",{originalErrorMessage:Ze?.message});z.warn(gt.message)}}})).apply(this,arguments)}function pi(Fe){return`${Fe.name}!${Fe.options.appId}`}class Vr{constructor(pe){this.container=pe,this._heartbeatsCache=null;const Ze=this.container.getProvider("app").getImmediate();this._storage=new zt(Ze),this._heartbeatsCachePromise=this._storage.read().then(gt=>(this._heartbeatsCache=gt,gt))}triggerHeartbeat(){var pe=this;return(0,u.Z)(function*(){const gt=pe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Vt();if(null===pe._heartbeatsCache&&(pe._heartbeatsCache=yield pe._heartbeatsCachePromise),pe._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!pe._heartbeatsCache.heartbeats.some(Qt=>Qt.date===Tt))return pe._heartbeatsCache.heartbeats.push({date:Tt,agent:gt}),pe._heartbeatsCache.heartbeats=pe._heartbeatsCache.heartbeats.filter(Qt=>{const jn=new Date(Qt.date).valueOf();return Date.now()-jn<=2592e6}),pe._storage.overwrite(pe._heartbeatsCache)})()}getHeartbeatsHeader(){var pe=this;return(0,u.Z)(function*(){if(null===pe._heartbeatsCache&&(yield pe._heartbeatsCachePromise),null===pe._heartbeatsCache||0===pe._heartbeatsCache.heartbeats.length)return"";const Ze=Vt(),{heartbeatsToSend:gt,unsentEntries:Tt}=function is(Fe,pe=1024){const Ze=[];let gt=Fe.slice();for(const Tt of Fe){const Qt=Ze.find(jn=>jn.agent===Tt.agent);if(Qt){if(Qt.dates.push(Tt.date),Er(Ze)>pe){Qt.dates.pop();break}}else if(Ze.push({agent:Tt.agent,dates:[Tt.date]}),Er(Ze)>pe){Ze.pop();break}gt=gt.slice(1)}return{heartbeatsToSend:Ze,unsentEntries:gt}}(pe._heartbeatsCache.heartbeats),Qt=(0,ce.L)(JSON.stringify({version:2,heartbeats:gt}));return pe._heartbeatsCache.lastSentHeartbeatDate=Ze,Tt.length>0?(pe._heartbeatsCache.heartbeats=Tt,yield pe._storage.overwrite(pe._heartbeatsCache)):(pe._heartbeatsCache.heartbeats=[],pe._storage.overwrite(pe._heartbeatsCache)),Qt})()}}function Vt(){return(new Date).toISOString().substring(0,10)}class zt{constructor(pe){this.app=pe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var pe=this;return(0,u.Z)(function*(){return(yield pe._canUseIndexedDBPromise)&&(yield function ut(Fe){return Dt.apply(this,arguments)}(pe.app))||{heartbeats:[]}})()}overwrite(pe){var Ze=this;return(0,u.Z)(function*(){var gt;if(yield Ze._canUseIndexedDBPromise){const Qt=yield Ze.read();return Tn(Ze.app,{lastSentHeartbeatDate:null!==(gt=pe.lastSentHeartbeatDate)&&void 0!==gt?gt:Qt.lastSentHeartbeatDate,heartbeats:pe.heartbeats})}})()}add(pe){var Ze=this;return(0,u.Z)(function*(){var gt;if(yield Ze._canUseIndexedDBPromise){const Qt=yield Ze.read();return Tn(Ze.app,{lastSentHeartbeatDate:null!==(gt=pe.lastSentHeartbeatDate)&&void 0!==gt?gt:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...pe.heartbeats]})}})()}}function Er(Fe){return(0,ce.L)(JSON.stringify({version:2,heartbeats:Fe})).length}!function si(Fe){lt(new H.wA("platform-logger",pe=>new ne(pe),"PRIVATE")),lt(new H.wA("heartbeat",pe=>new Vr(pe),"PRIVATE")),Pi(_e,"0.9.7",Fe),Pi(_e,"0.9.7","esm2017"),Pi("fire-js","")}("")},4859:(mt,xe,B)=>{B.d(xe,{H0:()=>_e,wA:()=>L});var u=B(5861),H=B(2090);class L{constructor(z,$,Y){this.name=z,this.instanceFactory=$,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ce="[DEFAULT]";class ve{constructor(z,$){this.name=z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const $=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has($)){const Y=new H.BH;if(this.instancesDeferred.set($,Y),this.isInitialized($)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:$});Ue&&Y.resolve(Ue)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(z){var $;const Y=this.normalizeInstanceIdentifier(z?.identifier),Ue=null!==($=z?.optional)&&void 0!==$&&$;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Me){if(Ue)return null;throw Me}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function Ve(ke){return"EAGER"===ke.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[$,Y]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier($);try{const Me=this.getOrInitializeService({instanceIdentifier:Ue});Y.resolve(Me)}catch{}}}}clearInstance(z=ce){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,u.Z)(function*(){const $=Array.from(z.instances.values());yield Promise.all([...$.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...$.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ce){return this.instances.has(z)}getOptions(z=ce){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:$={}}=z,Y=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:Y,options:$});for(const[Me,et]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Me)&&et.resolve(Ue);return Ue}onInit(z,$){var Y;const Ue=this.normalizeInstanceIdentifier($),Me=null!==(Y=this.onInitCallbacks.get(Ue))&&void 0!==Y?Y:new Set;Me.add(z),this.onInitCallbacks.set(Ue,Me);const et=this.instances.get(Ue);return et&&z(et,Ue),()=>{Me.delete(z)}}invokeOnInitCallbacks(z,$){const Y=this.onInitCallbacks.get($);if(Y)for(const Ue of Y)try{Ue(z,$)}catch{}}getOrInitializeService({instanceIdentifier:z,options:$={}}){let Y=this.instances.get(z);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ke=z,ke===ce?void 0:ke),options:$}),this.instances.set(z,Y),this.instancesOptions.set(z,$),this.invokeOnInitCallbacks(Y,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Y)}catch{}var ke;return Y||null}normalizeInstanceIdentifier(z=ce){return this.component?this.component.multipleInstances?z:ce:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const $=this.getProvider(z.name);if($.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);$.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const $=new ve(z,this);return this.providers.set(z,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,xe,B)=>{B.d(xe,{Am:()=>ke,Ub:()=>_e,Yd:()=>Ve,in:()=>H});const u=[];var H=(()=>{return(z=H||(H={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",H;var z})();const L={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},ce=H.INFO,ve={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},ne=(z,$,...Y)=>{if($<z.logLevel)return;const Ue=(new Date).toISOString(),Me=ve[$];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Me](`[${Ue}]  ${z.name}:`,...Y)};class Ve{constructor($){this.name=$,this._logLevel=ce,this._logHandler=ne,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in H))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?L[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...$),this._logHandler(this,H.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...$),this._logHandler(this,H.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,H.INFO,...$),this._logHandler(this,H.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,H.WARN,...$),this._logHandler(this,H.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...$),this._logHandler(this,H.ERROR,...$)}}function _e(z){u.forEach($=>{$.setLogLevel(z)})}function ke(z,$){for(const Y of u){let Ue=null;$&&$.level&&(Ue=L[$.level]),Y.userLogHandler=null===z?null:(Me,et,...tt)=>{const oe=tt.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");et>=(Ue??Me.logLevel)&&z({level:H[et].toLowerCase(),message:oe,args:tt,type:Me.name})}}}},9260:(mt,xe,B)=>{B.d(xe,{Z:()=>u.Z});var u=B(3942);u.Z.registerVersion("firebase","9.19.1","app-compat")},9568:(mt,xe,B)=>{B.r(xe);var u=B(5861),H=B(3942),L=B(3432),ce=B(2090),Ve=(B(9681),B(1877),B(4859));function _e(){return window}const ke=2e3;function $(){return $=(0,u.Z)(function*(k,N,R){var Q;const{BuildInfo:ae}=_e();(0,L.ar)(N.sessionId,"AuthEvent did not contain a session ID");const it=yield function De(k){return ge.apply(this,arguments)}(N.sessionId),It={};return(0,L.as)()?It.ibi=ae.packageName:(0,L.at)()?It.apn=ae.packageName:(0,L.au)(k,"operation-not-supported-in-this-environment"),ae.displayName&&(It.appDisplayName=ae.displayName),It.sessionId=it,(0,L.av)(k,R,N.type,void 0,null!==(Q=N.eventId)&&void 0!==Q?Q:void 0,It)}),$.apply(this,arguments)}function Ue(){return(Ue=(0,u.Z)(function*(k){const{BuildInfo:N}=_e(),R={};(0,L.as)()?R.iosBundleId=N.packageName:(0,L.at)()?R.androidPackageName=N.packageName:(0,L.au)(k,"operation-not-supported-in-this-environment"),yield(0,L.aw)(k,R)})).apply(this,arguments)}function tt(){return(tt=(0,u.Z)(function*(k,N,R){const{cordova:Q}=_e();let ae=()=>{};try{yield new Promise((it,It)=>{let xt=null;function Zt(){var Gt;it();const Ni=null===(Gt=Q.plugins.browsertab)||void 0===Gt?void 0:Gt.close;"function"==typeof Ni&&Ni(),"function"==typeof R?.close&&R.close()}function vt(){xt||(xt=window.setTimeout(()=>{It((0,L.ay)(k,"redirect-cancelled-by-user"))},ke))}function gn(){"visible"===document?.visibilityState&&vt()}N.addPassiveListener(Zt),document.addEventListener("resume",vt,!1),(0,L.at)()&&document.addEventListener("visibilitychange",gn,!1),ae=()=>{N.removePassiveListener(Zt),document.removeEventListener("resume",vt,!1),document.removeEventListener("visibilitychange",gn,!1),xt&&window.clearTimeout(xt)}})}finally{ae()}})).apply(this,arguments)}function ge(){return(ge=(0,u.Z)(function*(k){const N=function Se(k){if((0,L.ar)(/[0-9a-zA-Z]+/.test(k),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(k);const N=new ArrayBuffer(k.length),R=new Uint8Array(N);for(let Q=0;Q<k.length;Q++)R[Q]=k.charCodeAt(Q);return R}(k),R=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(R)).map(ae=>ae.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Te=20;class Ee extends L.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(R=>R(N)),super.onEvent(N)}initialized(){var N=this;return(0,u.Z)(function*(){yield N.initPromise})()}}function X(k){return te.apply(this,arguments)}function te(){return(te=(0,u.Z)(function*(k){const N=yield Le()._get(Ct(k));return N&&(yield Le()._remove(Ct(k))),N})).apply(this,arguments)}function ze(){const k=[],N="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<Te;R++){const Q=Math.floor(Math.random()*N.length);k.push(N.charAt(Q))}return k.join("")}function Le(){return(0,L.aB)(L.b)}function Ct(k){return(0,L.aC)("authEvent",k.config.apiKey,k.name)}function ue(k){if(!k?.includes("?"))return{};const[N,...R]=k.split("?");return(0,ce.zd)(R.join("?"))}const Pe=class Ce{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aD,this._overrideRedirectResult=L.aE}_initialize(N){var R=this;return(0,u.Z)(function*(){const Q=N._key();let ae=R.eventManagers.get(Q);return ae||(ae=new Ee(N),R.eventManagers.set(Q,ae),R.attachCallbackListeners(N,ae)),ae})()}_openPopup(N){(0,L.au)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,R,Q,ae){var it=this;return(0,u.Z)(function*(){!function oe(k){var N,R,Q,ae,it,It,xt,Zt,vt,gn;const Gt=_e();(0,L.az)("function"==typeof(null===(N=Gt?.universalLinks)||void 0===N?void 0:N.subscribe),k,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.az)(typeof(null===(R=Gt?.BuildInfo)||void 0===R?void 0:R.packageName)<"u",k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.az)("function"==typeof(null===(it=null===(ae=null===(Q=Gt?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===it?void 0:it.openUrl),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.az)("function"==typeof(null===(Zt=null===(xt=null===(It=Gt?.cordova)||void 0===It?void 0:It.plugins)||void 0===xt?void 0:xt.browsertab)||void 0===Zt?void 0:Zt.isAvailable),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.az)("function"==typeof(null===(gn=null===(vt=Gt?.cordova)||void 0===vt?void 0:vt.InAppBrowser)||void 0===gn?void 0:gn.open),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const It=yield it._initialize(N);yield It.initialized(),It.resetRedirect(),(0,L.aF)(),yield it._originValidation(N);const xt=function ye(k,N,R=null){return{type:N,eventId:R,urlResponse:null,sessionId:ze(),postBody:null,tenantId:k.tenantId,error:(0,L.ay)(k,"no-auth-event")}}(N,Q,ae);yield function Be(k,N){return Le()._set(Ct(k),N)}(N,xt);const Zt=yield function z(k,N,R){return $.apply(this,arguments)}(N,xt,R),vt=yield function Me(k){const{cordova:N}=_e();return new Promise(R=>{N.plugins.browsertab.isAvailable(Q=>{let ae=null;Q?N.plugins.browsertab.openUrl(k):ae=N.InAppBrowser.open(k,(0,L.ax)()?"_blank":"_system","location=yes"),R(ae)})})}(Zt);return function et(k,N,R){return tt.apply(this,arguments)}(N,It,vt)})()}_isIframeWebStorageSupported(N,R){throw new Error("Method not implemented.")}_originValidation(N){const R=N._key();return this.originValidationPromises[R]||(this.originValidationPromises[R]=function Y(k){return Ue.apply(this,arguments)}(N)),this.originValidationPromises[R]}attachCallbackListeners(N,R){const{universalLinks:Q,handleOpenURL:ae,BuildInfo:it}=_e(),It=setTimeout((0,u.Z)(function*(){yield X(N),R.onEvent(Oe())}),500),xt=function(){var gn=(0,u.Z)(function*(Gt){clearTimeout(It);const Ni=yield X(N);let pc=null;Ni&&Gt?.url&&(pc=function fe(k,N){var R,Q;const ae=function ie(k){const N=ue(k),R=N.link?decodeURIComponent(N.link):void 0,Q=ue(R).link,ae=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return ue(ae).link||ae||Q||R||k}(N);if(ae.includes("/__/auth/callback")){const it=ue(ae),It=it.firebaseError?function nt(k){try{return JSON.parse(k)}catch{return null}}(decodeURIComponent(it.firebaseError)):null,xt=null===(Q=null===(R=It?.code)||void 0===R?void 0:R.split("auth/"))||void 0===Q?void 0:Q[1],Zt=xt?(0,L.ay)(xt):null;return Zt?{type:k.type,eventId:k.eventId,tenantId:k.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:k.type,eventId:k.eventId,tenantId:k.tenantId,sessionId:k.sessionId,urlResponse:ae,postBody:null}}return null}(Ni,Gt.url)),R.onEvent(pc||Oe())});return function(Ni){return gn.apply(this,arguments)}}();typeof Q<"u"&&"function"==typeof Q.subscribe&&Q.subscribe(null,xt);const Zt=ae,vt=`${it.packageName.toLowerCase()}://`;_e().handleOpenURL=function(){var gn=(0,u.Z)(function*(Gt){if(Gt.toLowerCase().startsWith(vt)&&xt({url:Gt}),"function"==typeof Zt)try{Zt(Gt)}catch(Ni){console.error(Ni)}});return function(Gt){return gn.apply(this,arguments)}}()}};function Oe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.ay)("no-auth-event")}}const _t=1e3;function lt(){var k;return(null===(k=self?.location)||void 0===k?void 0:k.protocol)||null}function rn(k=(0,ce.z$)()){return!("file:"!==lt()&&"ionic:"!==lt()&&"capacitor:"!==lt()||!k.toLowerCase().match(/iphone|ipad|ipod|android/))}function Oi(){try{const k=self.localStorage,N=L.aK();if(k)return k.setItem(N,"1"),k.removeItem(N),!function hi(k=(0,ce.z$)()){return function xn(){return(0,ce.w1)()&&11===document?.documentMode}()||function an(k=(0,ce.z$)()){return/Edge\/\d+/.test(k)}(k)}()||(0,ce.hl)()}catch{return Fr()&&(0,ce.hl)()}return!1}function Fr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qi(){return(function Ye(){return"http:"===lt()||"https:"===lt()}()||(0,ce.ru)()||rn())&&!function kn(){return(0,ce.b$)()||(0,ce.UG)()}()&&Oi()&&!Fr()}function Lr(){return rn()&&typeof document<"u"}function Dn(){return(Dn=(0,u.Z)(function*(){return!!Lr()&&new Promise(k=>{const N=setTimeout(()=>{k(!1)},_t);document.addEventListener("deviceready",()=>{clearTimeout(N),k(!0)})})})).apply(this,arguments)}const rt={LOCAL:"local",NONE:"none",SESSION:"session"},Ki=L.az,br="persistence";function ri(k){return wr.apply(this,arguments)}function wr(){return(wr=(0,u.Z)(function*(k){yield k._initializationPromise;const N=ut(),R=L.aC(br,k.config.apiKey,k.name);N&&N.setItem(R,k._getPersistence())})).apply(this,arguments)}function ut(){var k;try{return(null===(k=function Pi(){return typeof window<"u"?window:null}())||void 0===k?void 0:k.sessionStorage)||null}catch{return null}}const Dt=L.az;class Tn{constructor(){this.browserResolver=L.aB(L.k),this.cordovaResolver=L.aB(Pe),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aD,this._overrideRedirectResult=L.aE}_initialize(N){var R=this;return(0,u.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,R,Q,ae){var it=this;return(0,u.Z)(function*(){return yield it.selectUnderlyingResolver(),it.assertedUnderlyingResolver._openPopup(N,R,Q,ae)})()}_openRedirect(N,R,Q,ae){var it=this;return(0,u.Z)(function*(){return yield it.selectUnderlyingResolver(),it.assertedUnderlyingResolver._openRedirect(N,R,Q,ae)})()}_isIframeWebStorageSupported(N,R){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,R)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return Lr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,u.Z)(function*(){if(N.underlyingResolver)return;const R=yield function ns(){return Dn.apply(this,arguments)}();N.underlyingResolver=R?N.cordovaResolver:N.browserResolver})()}}function On(k){return k.unwrap()}function xi(k){return Vr(k)}function Vr(k){const{_tokenResponse:N}=k instanceof ce.ZR?k.customData:k;if(!N)return null;if(!(k instanceof ce.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return L.P.credentialFromResult(k);const R=N.providerId;if(!R||R===L.p.PASSWORD)return null;let Q;switch(R){case L.p.GOOGLE:Q=L.U;break;case L.p.FACEBOOK:Q=L.Q;break;case L.p.GITHUB:Q=L.V;break;case L.p.TWITTER:Q=L.Y;break;default:const{oauthIdToken:ae,oauthAccessToken:it,oauthTokenSecret:It,pendingToken:xt,nonce:Zt}=N;return it||It||ae||xt?xt?R.startsWith("saml.")?L.aN._create(R,xt):L.K._fromParams({providerId:R,signInMethod:R,pendingToken:xt,idToken:ae,accessToken:it}):new L.W(R).credential({idToken:ae,accessToken:it,rawNonce:Zt}):null}return k instanceof ce.ZR?Q.credentialFromError(k):Q.credentialFromResult(k)}function Vt(k,N){return N.catch(R=>{throw R instanceof ce.ZR&&function mi(k,N){var R;const Q=null===(R=N.customData)||void 0===R?void 0:R._tokenResponse;if("auth/multi-factor-auth-required"===N?.code)N.resolver=new Er(k,L.ap(k,N));else if(Q){const ae=Vr(N),it=N;ae&&(it.credential=ae,it.tenantId=Q.tenantId||void 0,it.email=Q.email||void 0,it.phoneNumber=Q.phoneNumber||void 0)}}(k,R),R}).then(R=>{const ae=R.user;return{operationType:R.operationType,credential:xi(R),additionalUserInfo:L.an(R),user:si.getOrCreate(ae)}})}function is(k,N){return zt.apply(this,arguments)}function zt(){return(zt=(0,u.Z)(function*(k,N){const R=yield N;return{verificationId:R.verificationId,confirm:Q=>Vt(k,R.confirm(Q))}})).apply(this,arguments)}class Er{constructor(N,R){this.resolver=R,this.auth=function pi(k){return k.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return Vt(On(this.auth),this.resolver.resolveSignIn(N))}}class si{constructor(N){this._delegate=N,this.multiFactor=L.aq(N)}static getOrCreate(N){return si.USER_MAP.has(N)||si.USER_MAP.set(N,new si(N)),si.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var R=this;return(0,u.Z)(function*(){return Vt(R.auth,L.$(R._delegate,N))})()}linkWithPhoneNumber(N,R){var Q=this;return(0,u.Z)(function*(){return is(Q.auth,L.l(Q._delegate,N,R))})()}linkWithPopup(N){var R=this;return(0,u.Z)(function*(){return Vt(R.auth,L.d(R._delegate,N,Tn))})()}linkWithRedirect(N){var R=this;return(0,u.Z)(function*(){return yield ri(L.aG(R.auth)),L.g(R._delegate,N,Tn)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var R=this;return(0,u.Z)(function*(){return Vt(R.auth,L.a0(R._delegate,N))})()}reauthenticateWithPhoneNumber(N,R){return is(this.auth,L.r(this._delegate,N,R))}reauthenticateWithPopup(N){return Vt(this.auth,L.e(this._delegate,N,Tn))}reauthenticateWithRedirect(N){var R=this;return(0,u.Z)(function*(){return yield ri(L.aG(R.auth)),L.h(R._delegate,N,Tn)})()}sendEmailVerification(N){return L.ad(this._delegate,N)}unlink(N){var R=this;return(0,u.Z)(function*(){return yield L.am(R._delegate,N),R})()}updateEmail(N){return L.ai(this._delegate,N)}updatePassword(N){return L.aj(this._delegate,N)}updatePhoneNumber(N){return L.u(this._delegate,N)}updateProfile(N){return L.ah(this._delegate,N)}verifyBeforeUpdateEmail(N,R){return L.ae(this._delegate,N,R)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}si.USER_MAP=new WeakMap;const Fe=L.az;let pe=(()=>{class k{constructor(R,Q){if(this.app=R,Q.isInitialized())return this._delegate=Q.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ae}=R.options;Fe(ae,"invalid-api-key",{appName:R.name}),Fe(ae,"invalid-api-key",{appName:R.name});const it=typeof window<"u"?Tn:void 0;this._delegate=Q.initialize({options:{persistence:gt(ae,R.name),popupRedirectResolver:it}}),this._delegate._updateErrorMap(L.C),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?si.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(R){this._delegate.languageCode=R}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(R){this._delegate.tenantId=R}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(R,Q){L.H(this._delegate,R,Q)}applyActionCode(R){return L.a4(this._delegate,R)}checkActionCode(R){return L.a5(this._delegate,R)}confirmPasswordReset(R,Q){return L.a3(this._delegate,R,Q)}createUserWithEmailAndPassword(R,Q){var ae=this;return(0,u.Z)(function*(){return Vt(ae._delegate,L.a7(ae._delegate,R,Q))})()}fetchProvidersForEmail(R){return this.fetchSignInMethodsForEmail(R)}fetchSignInMethodsForEmail(R){return L.ac(this._delegate,R)}isSignInWithEmailLink(R){return L.aa(this._delegate,R)}getRedirectResult(){var R=this;return(0,u.Z)(function*(){Fe(qi(),R._delegate,"operation-not-supported-in-this-environment");const Q=yield L.j(R._delegate,Tn);return Q?Vt(R._delegate,Promise.resolve(Q)):{credential:null,user:null}})()}addFrameworkForLogging(R){!function Ke(k,N){(0,L.aG)(k)._logFramework(N)}(this._delegate,R)}onAuthStateChanged(R,Q,ae){const{next:it,error:It,complete:xt}=Ze(R,Q,ae);return this._delegate.onAuthStateChanged(it,It,xt)}onIdTokenChanged(R,Q,ae){const{next:it,error:It,complete:xt}=Ze(R,Q,ae);return this._delegate.onIdTokenChanged(it,It,xt)}sendSignInLinkToEmail(R,Q){return L.a9(this._delegate,R,Q)}sendPasswordResetEmail(R,Q){return L.a2(this._delegate,R,Q||void 0)}setPersistence(R){var Q=this;return(0,u.Z)(function*(){let ae;switch(function fi(k,N){Ki(Object.values(rt).includes(N),k,"invalid-persistence-type"),(0,ce.b$)()?Ki(N!==rt.SESSION,k,"unsupported-persistence-type"):(0,ce.UG)()?Ki(N===rt.NONE,k,"unsupported-persistence-type"):Fr()?Ki(N===rt.NONE||N===rt.LOCAL&&(0,ce.hl)(),k,"unsupported-persistence-type"):Ki(N===rt.NONE||Oi(),k,"unsupported-persistence-type")}(Q._delegate,R),R){case rt.SESSION:ae=L.a;break;case rt.LOCAL:ae=(yield L.aB(L.i)._isAvailable())?L.i:L.b;break;case rt.NONE:ae=L.M;break;default:return L.au("argument-error",{appName:Q._delegate.name})}return Q._delegate.setPersistence(ae)})()}signInAndRetrieveDataWithCredential(R){return this.signInWithCredential(R)}signInAnonymously(){return Vt(this._delegate,L.Z(this._delegate))}signInWithCredential(R){return Vt(this._delegate,L._(this._delegate,R))}signInWithCustomToken(R){return Vt(this._delegate,L.a1(this._delegate,R))}signInWithEmailAndPassword(R,Q){return Vt(this._delegate,L.a8(this._delegate,R,Q))}signInWithEmailLink(R,Q){return Vt(this._delegate,L.ab(this._delegate,R,Q))}signInWithPhoneNumber(R,Q){return is(this._delegate,L.s(this._delegate,R,Q))}signInWithPopup(R){var Q=this;return(0,u.Z)(function*(){return Fe(qi(),Q._delegate,"operation-not-supported-in-this-environment"),Vt(Q._delegate,L.c(Q._delegate,R,Tn))})()}signInWithRedirect(R){var Q=this;return(0,u.Z)(function*(){return Fe(qi(),Q._delegate,"operation-not-supported-in-this-environment"),yield ri(Q._delegate),L.f(Q._delegate,R,Tn)})()}updateCurrentUser(R){return this._delegate.updateCurrentUser(R)}verifyPasswordResetCode(R){return L.a6(this._delegate,R)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return k.Persistence=rt,k})();function Ze(k,N,R){let Q=k;"function"!=typeof k&&({next:Q,error:N,complete:R}=k);const ae=Q;return{next:It=>ae(It&&si.getOrCreate(It)),error:N,complete:R}}function gt(k,N){const R=function St(k,N){const R=ut();if(!R)return[];const Q=L.aC(br,k,N);switch(R.getItem(Q)){case rt.NONE:return[L.M];case rt.LOCAL:return[L.i,L.a];case rt.SESSION:return[L.a];default:return[]}}(k,N);if(typeof self<"u"&&!R.includes(L.i)&&R.push(L.i),typeof window<"u")for(const Q of[L.b,L.a])R.includes(Q)||R.push(Q);return R.includes(L.M)||R.push(L.M),R}class Tt{constructor(){this.providerId="phone",this._delegate=new L.P(On(H.Z.auth()))}static credential(N,R){return L.P.credential(N,R)}verifyPhoneNumber(N,R){return this._delegate.verifyPhoneNumber(N,R)}unwrap(){return this._delegate}}Tt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,Tt.PROVIDER_ID=L.P.PROVIDER_ID;const Qt=L.az;class jn{constructor(N,R,Q=H.Z.app()){var ae;Qt(null===(ae=Q.options)||void 0===ae?void 0:ae.apiKey,"invalid-api-key",{appName:Q.name}),this._delegate=new L.R(N,R,Q.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function U(k){k.INTERNAL.registerComponent(new Ve.wA("auth-compat",N=>{const R=N.getProvider("app-compat").getImmediate(),Q=N.getProvider("auth");return new pe(R,Q)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.N,FacebookAuthProvider:L.Q,GithubAuthProvider:L.V,GoogleAuthProvider:L.U,OAuthProvider:L.W,SAMLAuthProvider:L.X,PhoneAuthProvider:Tt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:jn,TwitterAuthProvider:L.Y,Auth:pe,AuthCredential:L.I,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),k.registerVersion("@firebase/auth-compat","0.3.7")}(H.Z)},8766:(mt,xe,B)=>{B.d(xe,{Lj:()=>Te,X3:()=>Se});var u=B(5861);const H=(te,fe)=>fe.some(ze=>te instanceof ze);let L,ce;const Ve=new WeakMap,_e=new WeakMap,ke=new WeakMap,z=new WeakMap,$=new WeakMap;let Me={get(te,fe,ze){if(te instanceof IDBTransaction){if("done"===fe)return _e.get(te);if("objectStoreNames"===fe)return te.objectStoreNames||ke.get(te);if("store"===fe)return ze.objectStoreNames[1]?void 0:ze.objectStore(ze.objectStoreNames[0])}return De(te[fe])},set:(te,fe,ze)=>(te[fe]=ze,!0),has:(te,fe)=>te instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in te};function oe(te){return"function"==typeof te?function tt(te){return te!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(te)?function(...fe){return te.apply(ge(this),fe),De(Ve.get(this))}:function(...fe){return De(te.apply(ge(this),fe))}:function(fe,...ze){const Le=te.call(ge(this),fe,...ze);return ke.set(Le,fe.sort?fe.sort():[fe]),De(Le)}}(te):(te instanceof IDBTransaction&&function Ue(te){if(_e.has(te))return;const fe=new Promise((ze,Le)=>{const Ct=()=>{te.removeEventListener("complete",nt),te.removeEventListener("error",ie),te.removeEventListener("abort",ie)},nt=()=>{ze(),Ct()},ie=()=>{Le(te.error||new DOMException("AbortError","AbortError")),Ct()};te.addEventListener("complete",nt),te.addEventListener("error",ie),te.addEventListener("abort",ie)});_e.set(te,fe)}(te),H(te,function ve(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(te,Me):te)}function De(te){if(te instanceof IDBRequest)return function Y(te){const fe=new Promise((ze,Le)=>{const Ct=()=>{te.removeEventListener("success",nt),te.removeEventListener("error",ie)},nt=()=>{ze(De(te.result)),Ct()},ie=()=>{Le(te.error),Ct()};te.addEventListener("success",nt),te.addEventListener("error",ie)});return fe.then(ze=>{ze instanceof IDBCursor&&Ve.set(ze,te)}).catch(()=>{}),$.set(fe,te),fe}(te);if(z.has(te))return z.get(te);const fe=oe(te);return fe!==te&&(z.set(te,fe),$.set(fe,te)),fe}const ge=te=>$.get(te);function Se(te,fe,{blocked:ze,upgrade:Le,blocking:Ct,terminated:nt}={}){const ie=indexedDB.open(te,fe),ue=De(ie);return Le&&ie.addEventListener("upgradeneeded",he=>{Le(De(ie.result),he.oldVersion,he.newVersion,De(ie.transaction))}),ze&&ie.addEventListener("blocked",()=>ze()),ue.then(he=>{nt&&he.addEventListener("close",()=>nt()),Ct&&he.addEventListener("versionchange",()=>Ct())}).catch(()=>{}),ue}function Te(te,{blocked:fe}={}){const ze=indexedDB.deleteDatabase(te);return fe&&ze.addEventListener("blocked",()=>fe()),De(ze).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],ye=["put","add","delete","clear"],Be=new Map;function X(te,fe){if(!(te instanceof IDBDatabase)||fe in te||"string"!=typeof fe)return;if(Be.get(fe))return Be.get(fe);const ze=fe.replace(/FromIndex$/,""),Le=fe!==ze,Ct=ye.includes(ze);if(!(ze in(Le?IDBIndex:IDBObjectStore).prototype)||!Ct&&!Ee.includes(ze))return;const nt=function(){var ie=(0,u.Z)(function*(ue,...he){const Ce=this.transaction(ue,Ct?"readwrite":"readonly");let Pe=Ce.store;return Le&&(Pe=Pe.index(he.shift())),(yield Promise.all([Pe[ze](...he),Ct&&Ce.done]))[0]});return function(he){return ie.apply(this,arguments)}}();return Be.set(fe,nt),nt}!function et(te){Me=te(Me)}(te=>({...te,get:(fe,ze,Le)=>X(fe,ze)||te.get(fe,ze,Le),has:(fe,ze)=>!!X(fe,ze)||te.has(fe,ze)}))},5861:(mt,xe,B)=>{function u(L,ce,ve,ne,Ve,_e,ke){try{var z=L[_e](ke),$=z.value}catch(Y){return void ve(Y)}z.done?ce($):Promise.resolve($).then(ne,Ve)}function H(L){return function(){var ce=this,ve=arguments;return new Promise(function(ne,Ve){var _e=L.apply(ce,ve);function ke($){u(_e,ne,Ve,ke,z,"next",$)}function z($){u(_e,ne,Ve,ke,z,"throw",$)}ke(void 0)})}}B.d(xe,{Z:()=>H})}},mt=>{mt(mt.s=9739)}]);